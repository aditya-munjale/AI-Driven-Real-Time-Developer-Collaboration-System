var Q6=Object.create;var{getPrototypeOf:_6,defineProperty:x9,getOwnPropertyNames:WZ,getOwnPropertyDescriptor:z6}=Object,MZ=Object.prototype.hasOwnProperty;var Q5=($,Z,G)=>{G=$!=null?Q6(_6($)):{};let X=Z||!$||!$.__esModule?x9(G,"default",{value:$,enumerable:!0}):G;for(let J of WZ($))if(!MZ.call(X,J))x9(X,J,{get:()=>$[J],enumerable:!0});return X},OZ=new WeakMap,j6=($)=>{var Z=OZ.get($),G;if(Z)return Z;if(Z=x9({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")WZ($).map((X)=>!MZ.call(Z,X)&&x9(Z,X,{get:()=>$[X],enumerable:!(G=z6($,X))||G.enumerable}));return OZ.set($,Z),Z};var vZ=($,Z)=>{for(var G in Z)x9($,G,{get:Z[G],enumerable:!0,configurable:!0,set:(X)=>Z[G]=()=>X})};var U5={};vZ(U5,{slugify:()=>f1,sanitizer:()=>H9,parser:()=>L$,compiler:()=>V5,astToHTML:()=>M1,RuleType:()=>F});module.exports=j6(U5);var k=32,t=9,v0=13,o=10,N1=96,_9=126,n1=91,I9=94,K1=62,f9=35,z5=37,b1=45,X9=61,G9=92,g9=42,z9=95,O1=60,C9=64,A9=93,B9=33,h1=38,k9=58,AZ=70,c1=102,Y9=104,a1=119,Z$=116,E$=112,BZ=115,wZ=160,NZ=12;var m9=46,j9=47;var D9=34,bZ=43,yZ=124,RZ=123;var LZ=40,TZ=41,P$=120,x$=88,r1=48,s1=57,y1=65,P1=90,R1=97,x1=122,I1=128,J$=32;var D6={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},F=D6;var K$={};vZ(K$,{startsWith:()=>U0,slugify:()=>f1,skipWhitespace:()=>n0,shouldFilterTag:()=>u9,sanitizer:()=>H9,parseFrontmatterBounds:()=>g$,normalizeInput:()=>t1,normalizeCRLF:()=>N6,isVoidElement:()=>O9,isUnicodeWhitespace:()=>W9,isUnicodePunctuation:()=>V$,isAlnumCode:()=>G$,isASCIIWhitespace:()=>p9,isASCIIPunctuation:()=>A6,inlineCharTypeTable:()=>h9,includes:()=>O6,htmlAttrsToJSXProps:()=>F6,hasKeys:()=>U$,getTag:()=>e1,getOverrideProps:()=>$9,get:()=>m$,findLineEnd:()=>C,extractPlainText:()=>xZ,endsWith:()=>Y$,decodeEntityReferences:()=>V9,charClassTable:()=>N9,applyTagFilterToText:()=>l9,VOID_ELEMENTS:()=>f$,SHOULD_RENDER_AS_BLOCK_R:()=>H6,SANITIZE_R:()=>w9,NAMED_CODES_TO_UNICODE:()=>q6,HTML_TO_JSX_MAP:()=>PZ,HTML_CHAR_CODE_R:()=>EZ,ATTRIBUTES_TO_SANITIZE:()=>C$});var X$=require("#entities");function g$($){if(!U0($,"---"))return null;let Z=3;while(Z<$.length&&($[Z]===" "||$[Z]==="\t"))Z++;if(Z<$.length&&$[Z]==="\r")Z++;if(Z>=$.length||$[Z]!==`
`)return null;Z++;let G=!1;while(Z<$.length){let X=Z;while(Z<$.length&&$[Z]!==`
`&&$[Z]!=="\r")Z++;if(Z>=$.length)break;let J=Z;if($[Z]==="\r")Z++;if(Z<$.length&&$[Z]===`
`)Z++;if(U0($,"---",X))return{endPos:Z,hasValidYaml:G};let Y=$.indexOf(":",X);if(Y!==-1&&Y<J)G=!0}return null}var q6=X$.NAMED_CODES_TO_UNICODE,EZ=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,PZ={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"};function F6($){var Z={};for(var G in $){var X=G.toLowerCase(),J=PZ[X];Z[J||G]=$[G]}return Z}var H6=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/;function V9($){if($.indexOf("&")===-1)return $;return $.replace(EZ,(Z,G)=>{var X=X$.decodeEntity(G);if(X)return X;if(G[0]==="#"){var J=G[1]==="x"||G[1]==="X"?parseInt(G.slice(2),16):parseInt(G.slice(1),10);if(J===0||J>=55296&&J<=57343||J>1114111)return"�";return J<=65535?String.fromCharCode(J):String.fromCharCode(55296+(J-65536>>10),56320+(J-65536&1023))}return Z})}var w9=/(javascript|vbscript|data(?!:image)):/i;function H9($){if(w9.test($))return null;if($.indexOf("%")===-1)return $;try{let Z=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(w9.test(Z))return null}catch(Z){return null}return $}var Q1={},W1,r0;W1=[192,193,194,195,196,197,224,225,226,227,228,229,230,198];for(r0=0;r0<W1.length;r0++)Q1[W1[r0]]="a";Q1[231]=Q1[199]="c";Q1[240]=Q1[208]="d";W1=[200,201,202,203,233,232,234,235];for(r0=0;r0<W1.length;r0++)Q1[W1[r0]]="e";W1=[207,239,206,238,205,237,204,236];for(r0=0;r0<W1.length;r0++)Q1[W1[r0]]="i";Q1[209]=Q1[241]="n";W1=[248,216,339,338,213,245,212,244,211,243,210,242];for(r0=0;r0<W1.length;r0++)Q1[W1[r0]]="o";W1=[220,252,219,251,218,250,217,249];for(r0=0;r0<W1.length;r0++)Q1[W1[r0]]="u";Q1[376]=Q1[255]=Q1[221]=Q1[253]="y";function G$($){return $>=r1&&$<=s1||$>=y1&&$<=P1||$>=R1&&$<=x1}function f1($){var Z=[];for(var G=0;G<$.length;G++){var X=$.charCodeAt(G);if(G$(X))if(X>=y1&&X<=P1)Z.push(String.fromCharCode(X+J$));else Z.push($[G]);else if(X===k||X===b1)Z.push("-");else{var J=Q1[X];if(J)Z.push(J)}}return Z.join("")}function O6($,Z){return $.indexOf(Z)!==-1}function U0($,Z,G){return $.startsWith(Z,G)}function Y$($,Z,G){return $.startsWith(Z,(G===void 0?$.length:G)-Z.length)}var f$=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","animateTransform","set"]);function O9($){let Z=$.toLowerCase();if(f$.has(Z))return!0;let G=Z.indexOf(":");if(G!==-1)return Z=Z.slice(G+1),f$.has(Z);return!1}var C$=["src","href","data","formAction","srcDoc","action"],k$=1,F9=2,SZ=1,W6=2,M6=3,v6=4,N9=function(){let $=new Uint8Array(128),Z;$[t]=$[o]=$[NZ]=$[v0]=$[k]=k$;for(Z=B9;Z<=j9;Z++)$[Z]=F9;for(Z=k9;Z<=C9;Z++)$[Z]=F9;for(Z=n1;Z<=N1;Z++)$[Z]=F9;for(Z=RZ;Z<=_9;Z++)$[Z]=F9;return $}(),h9=function(){let $=new Uint8Array(128);return $[G9]=W6,$[n1]=v6,$[g9]=$[z9]=$[_9]=$[X9]=M6,$[N1]=$[O1]=$[C9]=$[A9]=$[o]=$[k]=$[B9]=SZ,$[c1]=$[Y9]=$[a1]=SZ,$}();function A6($){return $<I1&&(N9[$]&F9)!==0}function p9($){return $<I1&&(N9[$]&k$)!==0}var B6=/[\p{P}\p{S}]/u,w6=/\p{Zs}/u;function W9($){if(!$)return!0;let Z=$.charCodeAt(0);return Z<I1?(N9[Z]&k$)!==0:w6.test($)}function V$($){if(typeof $==="number")return $<I1&&(N9[$]&F9)!==0;if(!$)return!1;let Z=$.charCodeAt(0);return Z<I1?(N9[Z]&F9)!==0:B6.test($)}function C($,Z){let G=$.indexOf(`
`,Z);if(G===-1)return $.length;if(G>0&&$.charCodeAt(G-1)===v0)return G-1;return G}var q9=[];function t1($){var Z=$.indexOf("\r"),G=$.indexOf("\x00");if(Z===-1&&G===-1)return $;var X=$.length;q9.length=0;var J=0,Y=0;if(Z===-1)Y=G;else if(G===-1)Y=Z;else Y=Z<G?Z:G;for(;Y<X;Y++){var V=$.charCodeAt(Y);if(V===v0){if(J<Y)q9.push($.slice(J,Y));if(Y+1<X&&$.charCodeAt(Y+1)===o)Y++;q9.push(`
`),J=Y+1}else if(V===0){if(J<Y)q9.push($.slice(J,Y));q9.push("�"),J=Y+1}}if(J<X)q9.push($.slice(J));return q9.join("")}function N6($){return t1($)}function n0($,Z,G){let X=G??$.length;while(Z<X&&($[Z]===" "||$[Z]==="\t"))Z++;return Z}function U$($){if(!$)return!1;for(var Z in $)return!0;return!1}function m$($,Z,G){var X=$,J=Z.split("."),Y=0;while(Y<J.length){if(X=X?.[J[Y]],X===void 0)break;Y++}return X||G}function e1($,Z){if(!Z)return $;let G=m$(Z,$,void 0);if(typeof G==="string")return G;if(typeof G==="object"&&G.component)return G.component;return $}function $9($,Z){if(!Z)return{};let G=m$(Z,$,void 0);return typeof G==="object"&&G.props?G.props:{}}function xZ($,Z){var G="";for(var X=0,J=$.length;X<J;X++){var Y=$[X],V=Y.type;if(V===Z.text||V===Z.codeInline){var K=Y.text;if(K)G+=K}else if(V===Z.textFormatted||V===Z.link){if(Y.children)G+=xZ(Y.children,Z)}else if(V===Z.image){if(Y.alt)G+=Y.alt}}return G}function u9($){var Z=$.toLowerCase();return Z==="title"||Z==="textarea"||Z==="style"||Z==="xmp"||Z==="iframe"||Z==="noembed"||Z==="noframes"||Z==="script"||Z==="plaintext"}function l9($){return $.replace(/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi,function(Z,G,X,J){return"&lt;"+G+X+J})}function b6($){console.warn($)}function y9($,Z,G,X){var J=y(G),Y=$.length,V=X??Y-Z,K=0;while(K<V&&Z+K<Y&&y($,Z+K)===J)K++;return K}function IZ($,Z,G,X,J){if(J===0?G>=X:Z<=X)return!1;let Y=J===0?$[G]:$[Z-1],V=J===0?Z>0?$[Z-1]:null:G<$.length?$[G]:null;var K=y(Y);if(K<I1?p9(K):W9(Y))return!1;var U=V?y(V):null,Q=V===null||V===`
`||V==="\r"||(U!==null?U<I1?p9(U):W9(V):!0),H=M$(K,Y);if(!H)return!0;if(Q)return!0;return V?M$(y(V),V):!1}function H$($){var Z="",G=0;while(G<$.length)if($[G]==="\\"&&G+1<$.length){var X=$[G+1];Z+=V$(y(X))?X:"\\"+X,G+=2}else Z+=$[G++];return V9(Z)}function p($,Z){if(Z>=$.length)return Z;if($.charCodeAt(Z)===v0&&Z+1<$.length&&$.charCodeAt(Z+1)===o)return Z+2;if($.charCodeAt(Z)===o)return Z+1;return Z+1}function y6($,Z){if($>=I1)return 0;var G=h9[$];if(Z&&G===1&&($===c1||$===Y9||$===a1))return 0;return G}function R6($,Z,G,X,J,Y){if(!G.length||G[G.length-1].type!==F.blockQuote)return null;let V=n0(X,0,X.length);if(V>=X.length||X[V]!==">")return null;let K=nZ($,Z,J,Y);if(!K)return null;let U=G[G.length-1],Q=K;if(Q.children)U.children.push(...Q.children);return Q.endPos}function O$($,Z,G,X){return{type:F.heading,level:$,children:Z,id:X(G)}}var a$=/\\(.)/g,L6=/\s+#+\s*$/,XZ=/^(?:(\d{1,9})([.)])\s+(.*)$|(\d{1,9})([.)])\s*$|([-*+])\s+(.*)$|([-*+])\s*$)/,r$=/^(\d{1,9})([.)])(\s+|$)/,s$=/^([*+\-])(\s+|$)/,w$=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/i,q5=/^<([a-z][^ >/]*) ?(?:[^>/]+[^/]|)>/i,y=function($,Z=0){return $.charCodeAt(Z)},W$=function($){return G$(y($))},o$=function($){return p9(y($))},g1=function($){return $===" "||$==="\t"},d9=function($){return $===" "||$==="\t"||$===`
`||$==="\r"},M$=function($,Z){return V$($<I1?$:Z)},T6=function($){var Z=y($);return W$($)||Z===b1||Z===z9||Z===k9||Z===m9};function n$($,Z){var G=$.length;if(Z>=G)return null;var X=y($[Z]);if(!M9(X))return null;var J=Z,Y=Z;while(Y<G){var V=y($[Y]);if(V>=R1&&V<=x1||V>=y1&&V<=P1||V>=r1&&V<=s1||V===b1)Y++;else{var K=y($[Y]);if(K===k||K===t||K===o||K===v0||K===K1||K===j9)break;else return null}}if(Y===J)return null;var U=$.slice(J,Y);for(var Q=0;Q<U.length;Q++){var V=y(U[Q]);if(!(V>=R1&&V<=x1||V>=y1&&V<=P1||V>=r1&&V<=s1||V===b1))return null}return{tagName:U,tagLower:U.toLowerCase(),nextPos:Y}}function R9($,Z){var G=F$($,Z);if(!G||G.kind!=="tag")return null;return{tagName:G.tagName||"",tagLower:G.tagNameLower||"",attrs:G.attrs||"",endPos:G.endPos,isClosing:G.isClosing||!1,isSelfClosing:G.isSelfClosing||!1,hasNewline:G.hasNewline,hasSpaceBeforeSlash:!1,whitespaceBeforeAttrs:G.whitespaceBeforeAttrs||""}}function S6($,Z,G){var X=1,J=Z;while(X>0&&J<$.length){var Y=$.indexOf("<",J);if(Y===-1)return null;var V=R9($,Y);if(!V){J=Y+1;continue}if(V.isClosing&&V.tagLower===G&&--X===0)return[Y,V.endPos];if(!V.isClosing&&!V.isSelfClosing&&V.tagLower===G)X++;J=V.endPos}return null}var E6=/^\{.*\}$/,N$=/\n\n/,b$=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m,P6=/<\/?(?:pre|script|style|textarea)\b/i,F5=/^<[A-Z]/,x6=/\n$/,I6=new Set(["#",">","-","*","+","`","|","0","1","2","3","4","5","6","7","8","9"]);function f6($,Z,G,X){let J=Z;while(J<G){if($[J]==="\\"&&J+1<G){J+=2;continue}if($[J]===X)return J;J++}return-1}function fZ($,Z){var G=Z.indexOf(":");if(G>0){var X=Z.slice(G+1).trim(),J=X.length;if(J>=2){var Y=X[0];if((Y==='"'||Y==="'")&&X[J-1]===Y)X=X.slice(1,-1)}$.push([Z.slice(0,G).trim(),X])}}function g6($){var Z=[];if(!$)return Z;var G="",X=0,J="";for(var Y=0;Y<$.length;Y++){var V=$[Y];if(V==='"'||V==="'"){if(!J)J=V,X++;else if(V===J)J="",X--}else if(V==="("&&Y$(G,"url"))X++;else if(V===")"&&X>0)X--;else if(V===";"&&X===0){fZ(Z,G),G="";continue}G+=V}return fZ(Z,G),Z}function C6(tag,key,value,sanitizeUrlFn,options){if(key==="style")return g6(value).reduce(function($,[Z,G]){let X=sanitizeUrlFn(G,tag,Z);if(X!=null)$[Z.replace(/(-[a-z])/g,(J)=>J[1].toUpperCase())]=X;return $},{});if(value.match(E6)){if(value=value.slice(1,value.length-1),value=value?value.replace(a$,"$1"):value,value.length>0){let $=value[0];if($==="["||$==="{")try{return JSON.parse(value)}catch(Z){return value}}if(value==="true")return!0;if(value==="false")return!1;if(options.evalUnserializableExpressions)try{return eval(`(${value})`)}catch($){return value}return value}if(C$.indexOf(key)!==-1)return sanitizeUrlFn(value?value.replace(a$,"$1"):value,tag,key);return value==="true"?!0:value==="false"?!1:value}function Z9($,Z,G,X){let J={};if(!$||!$.trim())return J;let Y=[],V=0,K=$.length;while(V<K){while(V<K&&d9($[V]))V++;if(V>=K)break;let H=V;while(V<K&&T6($[V]))V++;if(V===H){V++;continue}let v=$.slice(H,V);while(V<K&&d9($[V]))V++;if(V>=K||$[V]!=="="){Y.push(v);continue}V++;while(V<K&&d9($[V]))V++;if(V>=K){Y.push(v+"=");break}let _=V,j=$[V];if(j==='"'||j==="'"){V++;while(V<K){if($[V]===j){if(V+1>=K){V++;break}let O=$[V+1];if(d9(O)||O==="/"){V++;break}}V++}}else if(j==="{"){let O=1;V++;while(V<K&&O>0){if($[V]==="{")O++;else if($[V]==="}"){if(O--,O===0){V++;break}}V++}}else while(V<K&&!d9($[V]))V++;Y.push(v+"="+$.slice(_,V))}if(!Y?.length)return J;let U=Z.toLowerCase();for(let H=0;H<Y.length;H++){let v=Y[H],_=v.indexOf("=");if(_!==-1){let j=v.slice(0,_).trim(),O=j.toLowerCase();if(O==="ref")continue;let z=v.slice(_+1).trim(),q=((D)=>{let M=D[0];if((M==='"'||M==="'")&&D.length>=2&&D[D.length-1]===M)return D.slice(1,-1);return D})(z);if(O==="href"&&U==="a"||O==="src"&&U==="img"){let D=X.sanitizer(q,U,O);if(D==null){b6(`Stripped unsafe ${O} on <${G}>`);continue}J[j]=D}else{let D=C6(U,O,q,X.sanitizer,X);J[j]=D}}else if(v!=="style")J[v]=!0}if($.indexOf("%")!==-1)try{if(w9.test(decodeURIComponent($)))for(var Q in J)delete J[Q]}catch(H){}else if(w9.test($))for(var Q in J)delete J[Q];return J}var r9=function($){return I6.has($)};function k6($,Z,G){let X=Z+1;while(X<$.length&&$[X]!=="]"){if($[X]==="\\"&&X+1<$.length){X+=2;continue}X++}if(X>=$.length)return{shouldSkip:!1,newPos:0};let J=Z+1,Y=X,V=J<Y&&($[J]===`
`||$[J]==="\r"),K=Y>J&&($[Y-1]===`
`||$[Y-1]==="\r"),U=X+1;if(U=n0($,U),U>=$.length||$[U]!==":")return{shouldSkip:!1,newPos:0};if((V||K)&&G){let Q=U+1;if(Q=n0($,Q),Q<$.length&&$[Q]===`
`)Q=n0($,Q+1);while(Q<$.length&&$[Q]!==`
`)Q++;if(Q<$.length)Q++;return{shouldSkip:!0,newPos:Q}}return m6($,U)}function m6($,Z){let G=Z+1;if(G=n0($,G),G<$.length&&$[G]===`
`)G=n0($,G+1);while(G<$.length&&$[G]!==`
`)G++;if(G>=$.length)return{shouldSkip:!1,newPos:0};G++;let X=n0($,G);if(X>=$.length||$[X]!=='"'&&$[X]!=="'")return{shouldSkip:!1,newPos:0};let J=$[X],Y=X+1;while(Y<$.length&&$[Y]!==J&&$[Y]!==`
`){if($[Y]==="\\"&&Y+1<$.length){Y+=2;continue}Y++}if(Y>=$.length||$[Y]!==J)return{shouldSkip:!1,newPos:0};let V=n0($,Y+1);if(V<$.length&&$[V]!==`
`&&$[V]!=="\r")return{shouldSkip:!0,newPos:G};return{shouldSkip:!1,newPos:0}}function aZ($){for(var Z=0;Z<$.length;Z++){var G=$[Z];if(G.type===F.link)return!0;if(G.type===F.textFormatted){var X=G;if(X.children&&aZ(X.children))return!0}}return!1}function t$($){var Z="";for(var G=0,X=$.length;G<X;G++){var J=$[G],Y=J.type;if(Y===F.text)Z+=J.text;else if(Y===F.image){var V=J;if(V.alt)Z+=V.alt}else if(Y===F.textFormatted){var K=J;if(K.children)Z+=t$(K.children)}else if(Y===F.link){var U=J;if(U.children)Z+=t$(U.children)}}return Z}var h6=new Set([" ","\t","\r",`
`,"\f","\v"]);function J9($,Z,G,X,J){var Y=[],V=[],K=[],U=Z,Q=Z,H=J.disableAutoLink||X.inAnchor,v=!1,_=!!X.inAnchor,j=!!J.disableParsingRawHTML,O=J.optimizeForStreaming,z=-1,q=-1,D=[],M=function(o0,E1){if(O&&X.inHTML)return!1;if(!_&&(!E1||!J.disableAutoLink)){var h0=p$($,U,X,J,"<");if(h0)return W(U),Y.push(h0),U=h0.endPos,Q=U,!0}if(j)return!1;var Q9=R$($,U,X,J);if(Q9){W(U);var e9=Y.length;if(Y.push(Q9),D)D.push(e9);return U=Q9.endPos,Q=U,!0}if(O&&q===-1){if(U+1<G){var z0=y($,U+1);if(z0>=y1&&z0<=P1||z0>=R1&&z0<=x1||z0===j9||z0===B9)q=U}}if(!o0)return!1;var j0=R9($,U);if(!j0)return!1;var i1=U+(j0.isClosing?2:1);if(i1>=$.length||g1($[i1]))return!1;var k1=$.indexOf(">",U+1);if(k1!==-1){var B1=U+1,T9=k1-B1;if(T9>=7){var Q0=U0($,"http://",B1);if(Q0||U0($,"https://",B1)){for(var c0=B1;c0<k1;c0++)if(g1($[c0]))return!1}}}var p0=y($,i1);if(M9(p0)&&i1+1<$.length&&$[i1+1]===":")return!1;if(j0.isClosing&&j0.attrs.trim().length)return!1;if(j0.attrs.length){var B0=!1,n="";for(var y0=0;y0<j0.attrs.length;y0++){var H1=j0.attrs[y0];if(B0&&H1===n)B0=!1;else if(!B0&&(H1==='"'||H1==="'"))B0=!0,n=H1;else if(H1==="*"||H1==="#"||H1==="!"){var a0=y0+1;while(a0<j0.attrs.length&&j0.attrs[a0]!=="="&&j0.attrs[a0]!==" "&&j0.attrs[a0]!=="\t")a0++;if(a0<j0.attrs.length&&j0.attrs[a0]==="=")return!1}}}var F0=$.slice(U,j0.endPos),m1=j0.tagName.toLowerCase(),u=F0,e0=u.indexOf(">");if(e0!==-1){u=u.slice(e0+1);var u0="</"+m1+">",E0=u.indexOf(u0);if(E0!==-1)u=u.slice(0,E0)}var f0=[];if(u.trim()&&J){var V1={...X,inline:!1,inHTML:!0},l0=u.trim();if(N$.test(l0)||b$.test(l0)||w$.test(l0))f0=n9(l0,V1,J);else if(l0)V1.inline=!0,f0=J9(l0,0,l0.length,V1,J)}var U1=j0.whitespaceBeforeAttrs+j0.attrs,R0=Z9(U1,m1,j0.tagName,J),w1={type:F.htmlBlock,tag:j0.tagName,attrs:R0,children:f0,rawText:F0,text:u,verbatim:!0,endPos:j0.endPos};return W(U),Y.push(w1),U=w1.endPos,Q=U,!0},W=function(o0){if(o0>Q){var E1=$.slice(Q,o0);Y.push({type:F.text,text:v?V9(E1):E1}),Q=o0,v=!1}};while(U<G){var A=y($,U),P=y6(A,H);if(P===0){if(A===h1)v=!0;U++;while(U<G){if(A=y($,U),A>=I1)break;if(A===h1)v=!0;var w=h9[A];if(w!==0){if(H&&w===1&&(A===c1||A===Y9||A===a1)){U++;continue}break}U++}continue}if(A===N1){var x=U,S=0;while(U+S<G){if(y($,U+S)!==N1)break;S++}if(S>0){var b=U+S,R=-1,N=b;while(N<G){while(N<G&&y($,N)!==N1)N++;if(N>=G)break;var T=0;while(N+T<G&&y($,N+T)===N1)T++;if(T>S)T=S;var f=N+T;if(T===S&&(N<=b||y($,N-1)!==N1)&&(f>=G||y($,f)!==N1)){R=N,N=f;break}N++}if(R!==-1){var E=$.slice(b,R),I=!1;for(var g=0;g<E.length;g++){var c=y(E,g);if(c===o||c===v0){I=!0;break}}var L=E;if(I)L=E.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ");if(L.length>0){var Z0=y(L,0),B=y(L,L.length-1);if(Z0===k&&B===k){for(var d=1;d<L.length-1;d++)if(y(L,d)!==k){L=L.slice(1,L.length-1);break}}}W(x),Y.push({type:F.codeInline,text:L}),U=N,Q=U;continue}if(O&&z===-1){z=x,W(x),G=x;break}U=b;continue}}if(!_&&!H&&(A===c1||A===Y9||A===a1)){var m=null,s=U+1<G?y($,U+1):0,G0=U+2<G?y($,U+2):0,l=U+3<G?y($,U+3):0,v1=U+4<G?y($,U+4):0,K0=U+5<G?y($,U+5):0;if(A===Y9&&s===Z$&&G0===Z$&&l===E$)m="h";else if(A===a1&&s===a1&&G0===a1&&l===m9)m="w";else if(A===c1&&s===Z$&&G0===E$&&l===k9&&v1===j9&&K0===j9)m="f";if(m){var w0=p$($,U,X,J,m);if(w0){W(U),Y.push(w0),U=w0.endPos,Q=U;continue}}}if(!_&&!H&&A===C9){var b0=p$($,U,X,J,"@");if(b0&&"emailStart"in b0){var{emailStart:Y0,endPos:g0}=b0,H0=[];for(var f=V.length-1;f>=0;f--){var C0=V[f];if(C0.sourcePos>=Y0&&C0.sourcePos<g0){if(C0.nodeIndex>=0&&C0.nodeIndex<Y.length)Y.splice(C0.nodeIndex,1),H0.push(C0.nodeIndex);V.splice(f,1)}}if(Y0<Q){for(var N=Y.length-1;N>=0;N--)if(Y[N].type===F.text){Y.splice(N,1),H0.push(N);break}Q=Y0}if(H0.length){H0.sort(function(o0,E1){return o0-E1});var L1=0;for(var J0=0;J0<V.length;J0++){var C0=V[J0];while(L1<H0.length&&H0[L1]<C0.nodeIndex)L1++;C0.nodeIndex-=L1}}W(Y0),Y.push(b0),U=g0,Q=U;continue}}if(A===O1){if(M(!0,!1))continue}if(A===G9){if(U+1<G&&y($,U+1)===o){var q0=U+2;while(q0<G&&y($,q0)===k)q0++;if(q0>=G){U++;continue}W(U),Y.push({type:F.breakLine}),U+=2;while(U<G&&y($,U)===k)U++;Q=U;continue}var M0=U+1<G?$[U+1]:"";if(M0&&"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~".indexOf(M0)!==-1){W(U),Y.push({type:F.text,text:M0==="&"?"&​":M0}),U+=2,Q=U;continue}}if(A===n1){if(!_){if(U+1<G&&$[U+1]==="^"){var x0=U+2;while(x0<G&&$[x0]!=="]")x0++;if(x0<G){var i=$.slice(U+2,x0);W(U),Y.push({type:F.footnoteReference,target:`#${J.slugify(i)}`,text:i}),U=x0+1,Q=U;continue}}if(X.inList&&U+2<G&&y($,U+2)===A9){var O0=y($,U+1);if(O0===k||O0===P$||O0===x$){W(U),Y.push({type:F.gfmTask,completed:O0===P$||O0===x$}),U+=3,Q=U;continue}}}var a=!1;if(U>Z&&$[U-1]==="!"){var L0=0;for(var V0=U-2;V0>=Z&&$[V0]==="\\";V0--)L0++;if((L0&1)===0){if(a=!0,Q<U-1)W(U-1);if(Y.length>0&&Y[Y.length-1].type===F.text){var X0=Y[Y.length-1];if(X0.text.endsWith("!")){if(X0.text=X0.text.slice(0,-1),!X0.text)Y.pop()}}}}if(!a)W(U);if(Q=U+1,!_||a)K.push({type:a?"image":"link",pos:a?U-1:U,resultIdx:Y.length,inAnchor:_});U++;continue}if(A===A9&&K.length>0){var e=K[K.length-1],k0=e.pos+(e.type==="image"?2:1),d0=U;W(U);var _1=U+1,z1=GZ(Y,e),j1=e.type==="link"&&aZ(z1),D1=!1;if(!j1&&_1<G&&$[_1]==="("){var D0=d6($,_1+1,!0);if(D0){gZ(Y,V,K,e,k0,d0,J.sanitizer(H$(D0.target),"a","href"),D0.title?H$(D0.title):void 0),U=D0.endPos,Q=U;continue}}var t0=X.refs||{};U$(t0);var W0=null,Y1=U;if(_1<G&&$[_1]==="["){var I0=_1+1,N=I0;while(N<G&&$[N]!=="]")N++;if(N<G)W0=$.slice(I0,N),Y1=N,D1=!0}if(!D1||W0==="")W0=$.slice(k0,d0);var T0=sZ(W0);if(!j1&&t0&&t0[T0]){var s0=t0[T0];gZ(Y,V,K,e,k0,d0,s0.target,s0.title),U=Y1+1,Q=U;continue}var T1=e.resultIdx;if(K.pop(),Y.length=T1,O){if(Y.push(...z1),_1<G&&$[_1]==="(")return Y}else{if(e.type==="image")Y.push({type:F.text,text:"!"});Y.push({type:F.text,text:"["},...z1,{type:F.text,text:"]"})}for(var g=0;g<V.length;g++)if(V[g].nodeIndex>=T1)V[g].nodeIndex++;U++,Q=U;continue}if(A===g9||A===z9||A===_9||A===X9){var A1=$[U],$0=U,$1=y9($,U,A1);if((A1==="~"||A1==="=")&&$1!==2){U++;continue}var q1=$0+$1,i0=IZ($,$0,q1,G,0),C1=IZ($,$0,q1,Z,1),F1=i0,S1=C1;if(A1==="_"&&i0&&C1){if($0>0){var l1=$[$0-1],h=y(l1);F1=M$(h,l1)}if(q1<G){var A0=$[q1],r=y(A0);S1=M$(r,A0)}}W($0),V.push({nodeIndex:Y.length,type:A1,length:$1,canOpen:F1,canClose:S1,active:!0,sourcePos:$0,inAnchor:_}),Y.push({type:F.text,text:$.slice($0,$0+$1)}),U=$0+$1,Q=U;continue}if(A===o){var V0=U-1,N0=0;while(V0>=Q&&y($,V0)===k)N0++,V0--;if(N0>=2){var q0=U+1;while(q0<G&&y($,q0)===k)q0++;if(q0>=G){W(V0+1),U=G,Q=G;continue}W(V0+1),Y.push({type:F.breakLine}),U++;while(U<G&&y($,U)===k)U++;Q=U;continue}var Z1=U>Q?y($,U-1):0,O0=U+1<G?y($,U+1):0,J1=U>Q&&Z1===k&&O0===k?U-1:U;if(W(J1),Y.push({type:F.text,text:`
`}),Q=U+1,U>Z&&Z1===k&&Q<G&&y($,Q)===k)Q++;U=Q;continue}if(A===h1)v=!0;U++;while(U<G){var A=y($,U);if(A>=I1)break;if(A===h1)v=!0;var w=h9[A];if(w===0){U++;continue}if(w===1&&(A===c1||A===Y9||A===a1)&&H){U++;continue}break}}if(W(U),V.length)X6(Y,V,null);if(O){var S0=Y.length;for(var m0=D.length-1;m0>=0;m0--){var X1=D[m0];if(X1<Y.length&&Y[X1].type===F.htmlBlock){var d1=Y[X1];if(!O9(d1.tag)&&(!d1.children||d1.children.length===0)){if(Y.splice(X1,1),X1<S0)S0--;for(var g=0;g<V.length;g++)if(V[g].nodeIndex>X1)V[g].nodeIndex--;for(var g=m0+1;g<D.length;g++)if(D[g]>X1)D[g]--}}}if(z!==-1&&z<S0){for(var G1=Y.length-1;G1>=0;G1--)if(Y[G1].type===F.text){S0=G1;break}}if(q!==-1&&q<S0){for(var G1=Y.length-1;G1>=0;G1--)if(Y[G1].type===F.text){S0=G1;break}}for(var N=V.length-1;N>=0;N--)if(V[N].active&&V[N].nodeIndex<S0){if(Y.splice(V[N].nodeIndex,1),V[N].nodeIndex<S0)S0--;for(var f=0;f<N;f++)if(V[f].nodeIndex>V[N].nodeIndex)V[f].nodeIndex--}if(S0<Y.length)Y.length=S0;return Y}if(K.length){K.sort(function(o0,E1){return o0.resultIdx-E1.resultIdx});for(var N=0;N<K.length;N++)Y.splice(K[N].resultIdx+N,0,{type:F.text,text:K[N].type==="image"?"![":"["})}return Y}function p6($,Z,G,X,J){var Y=!1;for(var V=0;V<Z.length;V++)if(Z[V].sourcePos>=X&&Z[V].sourcePos<J){Y=!0;break}if(!Y)return;var K=GZ($,G),U=[];for(var V=0;V<Z.length;V++){var Q=Z[V];if(Q.sourcePos>=X&&Q.sourcePos<J)U.push({nodeIndex:Q.nodeIndex-G.resultIdx,type:Q.type,length:Q.length,canOpen:Q.canOpen,canClose:Q.canClose,active:Q.active,sourcePos:Q.sourcePos,inAnchor:Q.inAnchor})}X6(K,U,null),$.length=G.resultIdx;for(var H=0;H<K.length;H++)$.push(K[H]);var v=[];for(var V=0;V<Z.length;V++)if(Z[V].sourcePos<X||Z[V].sourcePos>=J)v.push(Z[V]);Z.length=0;for(var H=0;H<v.length;H++)Z.push(v[H])}function u6($,Z,G,X){if($.type==="link")return{type:F.link,target:G,title:X,children:Z};return{type:F.image,target:G||"",alt:t$(Z),title:X}}function GZ($,Z){return $.slice(Z.resultIdx)}function gZ($,Z,G,X,J,Y,V,K){p6($,Z,X,J,Y);var U=GZ($,X);G.pop(),$.length=X.resultIdx,$.push(u6(X,U,V,K))}function l6($,Z,G){let X=n0($,Z),J=X<$.length&&$[X]==="<";if(J)X++;let Y=X;if(J&&X<$.length&&$[X]===">")return{target:"",endPos:X+1,hadSpace:!1};let V,K;var U=!1;if(J){K=X;while(K<$.length&&$[K]!==">"){let v=$[K];if(v===`
`||v==="\r"||v==="<")return null;if(v==="\\"){K+=2;continue}K++}if(K>=$.length||$[K]!==">")return null;K++;let Q=Y;while(Q<K-1&&g1($[Q]))Q++;let H=K-1;while(H>Q&&g1($[H-1]))H--;V=$.slice(Q,H),X=K}else{let Q=0;K=X;while(K<$.length){let H=$[K];if(H===" "||H==="\t"||H===`
`){U=!0;break}if(!G&&H===")")break;if(G&&H==="("){if(K>0&&$[K-1]==="\\"){K++;continue}Q++,K++;continue}if(G&&H===")"){if(K>0&&$[K-1]==="\\"){K++;continue}if(Q===0)break;Q--,K++;continue}K++}V=$.slice(Y,K),X=K}return{target:V,endPos:X,hadSpace:U}}function CZ($,Z,G,X){let J=Z,Y=0;while(J<$.length){let K=$[J];if(g1(K))J++;else if(K===`
`){if(Y>=1)break;Y++,J++}else if(W9(K))break;else break}if(G&&!X){if(J>=$.length||$[J]!=='"'&&$[J]!=="'"&&$[J]!=="(")return{title:void 0,endPos:J}}let V=void 0;if(J<$.length){let K=$[J];if(K==='"'||K==="'"){J++;let U=J;while(J<$.length&&$[J]!==K){if($[J]==="\\")J++;J++}if(J<$.length)V=$.slice(U,J),J++}else if(K==="("){J++;let U=J,Q=1;while(J<$.length&&Q>0){if($[J]==="\\"&&J+1<$.length)J++;else if($[J]==="(")Q++;else if($[J]===")")Q--;J++}if(Q===0)V=$.slice(U,J-1)}}return J=n0($,J),{title:V,endPos:J}}function d6($,Z,G){let X=l6($,Z,G);if(!X)return null;let J=Z;J=n0($,J);let Y=J<$.length&&$[J]==="<";if(Y&&X.target===""&&X.endPos===J+2){let K=CZ($,X.endPos,!1,Y);if(K.endPos>=$.length||$[K.endPos]!==")")return null;return{target:"",title:K.title,endPos:K.endPos+1}}let V=CZ($,X.endPos,X.hadSpace,Y);if(V.endPos>=$.length||$[V.endPos]!==")")return null;return{target:X.target,title:V.title,endPos:V.endPos+1}}var i6;((X)=>{X[X.URI=0]="URI";X[X.EMAIL=1]="EMAIL";X[X.ANGLE=2]="ANGLE"})(i6||={});function M9($){return $>=y1&&$<=P1||$>=R1&&$<=x1}function rZ($){let Z=$.indexOf(":");if(Z<2||Z>32)return!1;let G=y($);if(!M9(G))return!1;for(let X=1;X<Z;X++){let J=$[X],Y=y(J);if(!W$(J)&&J!=="+"&&J!=="."&&J!=="-")return!1}return!0}function kZ($,Z,G){if(Z===0)return!0;return(G?` 	
\r*_~(`:` 	
*_~(`).indexOf($[Z-1])!==-1}function Q$($,Z,G,X,J){let Y=X($,"a","href");if(!Y)return null;return{type:F.link,target:Y,children:[{type:F.text,text:Z}],endPos:G,...J!==void 0?{emailStart:J}:{}}}function h$($,Z,G,X,J){if(G.inAnchor||J!==2&&X.disableAutoLink)return null;if(J===2){if($[Z]!=="<")return null;let z=Z+1;while(z<$.length&&$[z]!==">"){let S=y($,z);if(S===k||S===t||S===o||S===v0||S<k)return null;z++}if(z>=$.length||$[z]!==">")return null;let q=$.slice(Z+1,z);if(!q.length)return null;let D=q.indexOf("\\")!==-1,M=rZ(q),W=U0(q,"http://")||U0(q,"https://"),A=!1;if(!M&&!W&&q.length>=7){let S=q[0];if(S==="m"||S==="M"){let b=q.toLowerCase();if(U0(b,"mailto:")){A=!0;let R=b.indexOf(":"),N=q.slice(R+1);return Q$("mailto:"+N,q,z+1,X.sanitizer)}}}let P=!D&&q.indexOf("@")!==-1&&q.indexOf("//")===-1&&!M;if(!W&&!A&&!P&&!M)return null;let w=q,x=q;if(!A&&!M&&!W&&P)w="mailto:"+q;return Q$(w,x,z+1,X.sanitizer)}if(J===1){let z=Z;while(z>0&&(W$($[z-1])||".+-_".indexOf($[z-1])!==-1))z--;if(z>=Z||!kZ($,z,!0))return null;let q=Z+1,D=!1;while(q<$.length){let A=$[q];if(A===".")D=!0,q++;else if(W$(A)||A==="-"||A==="_")q++;else break}if(!D||q<=Z+1)return null;while(q>Z+1&&$[q-1]===".")q--;if(q>Z+1&&($[q-1]==="-"||$[q-1]==="_"))return null;if(q-(Z+1)<1e4){if($.indexOf(".",Z+1)>=q||$.indexOf(".",Z+1)===-1)return null}else if($.slice(Z+1,q).indexOf(".")===-1)return null;let W=$.slice(z,q);return Q$("mailto:"+W,W,q,X.sanitizer,z)}let Y=U0($,"http://",Z)||U0($,"https://",Z),V=!Y&&U0($,"ftp://",Z),K=!Y&&!V&&U0($,"www.",Z);if(!(Y||V||K)||!kZ($,Z,!1))return null;var U=Z+(Y?y($,Z+4)===BZ?8:7:V?6:4),Q=U;while(U<$.length){let z=y($,U);if(z===k||z===t||z===o||z===O1||z===K1)break;U++}if(U<=Q)return null;let H=U;while(H>Q){let z=$[H-1];if(H>Q+1&&$[H-2]==="\\")break;if(z==="?"||z==="!"||z==="."||z===","||z===":"||z==="*"||z==="_"||z==="~")H--;else if(z===";"){let q=H-2;while(q>=Q&&$[q]!=="&"&&$[q]!==" ")q--;if(q>=Q&&$[q]==="&"){let D=$.slice(q+1,H-1);if(D.length>=2&&D.length<=10&&/^[a-zA-Z0-9]+$/.test(D)&&(D==="lt"||D==="gt"||D.length>=3&&(U0(D,"amp")||U0(D,"apos")||U0(D,"quot")||U0(D,"nbsp")||/^[a-z]{3,10}$/.test(D))))break;H=q;break}H--}else if(z===")"){let q=0,D=0;for(let M=Q;M<H;M++){if($[M]==="(")q++;if($[M]===")")D++}if(D>q)H--;else break}else break}if(U=H,U<=Q)return null;var v=Q,_=-1,j=-1;while(v<U){let z=y($,v);if(z>=y1&&z<=P1||z>=R1&&z<=x1||z>=r1&&z<=s1||z===b1||z===z9||z===m9){if(z===m9)j=_,_=v;v++;continue}break}if(v===Q||_===-1)return null;if(j===-1)j=Q-1;for(let z=j+1;z<_;z++)if($[z]==="_")return null;for(let z=_+1;z<v;z++)if($[z]==="_")return null;let O=$.slice(Z,U);return Q$(K?"http://"+O:O,O,U,X.sanitizer)}function p$($,Z,G,X,J){if(J==="<")return h$($,Z,G,X,2);if(J==="h"||J==="f"||J==="w")return h$($,Z,G,X,0);if(J==="@")return h$($,Z,G,X,1);return null}function sZ($){var Z=$.trim(),G=Z.replace(/[\s\t\n\r]+/g," ");if(G.indexOf("ẞ")!==-1)return G.replace(/\u1E9E/g,"ss").toLowerCase();return G.toLowerCase()}function c6($,Z,G){if(Z+3>=$.length||$[Z]!=="[")return null;let X=$[Z+1];if(X!==" "&&X!=="x"&&X!=="X")return null;if($[Z+2]!=="]")return null;return{type:F.gfmTask,completed:X.toLowerCase()==="x",endPos:Z+3}}function YZ($,Z,G,X){let{inline:J,inList:Y,inBlockQuote:V}=Z;if(X.inline!==void 0)Z.inline=X.inline;if(X.list!==void 0)Z.inList=X.list;if(X.inBlockQuote!==void 0)Z.inBlockQuote=X.inBlockQuote;let K=n9($,Z,G);return Z.inline=J,Z.inList=Y,Z.inBlockQuote=V,K}function s9($,Z,G,X,J){return y$(X,!0,()=>J9($,Z,G,X,J))}function o9($,Z,G,X){var J=$[Z];if(J===void 0)return null;var Y=Z,V=null,K=J,U=null,Q=y(J),H=Q===k||Q===t;if(H){if(U=C($,Z),V=_0($,Z,U),Y=Z+V.charCount,Y>=$.length)return j$($,Z,G);K=$[Y]}var v=V?V.spaceEquivalent:0;if(v>=4){if(H)return j$($,Z,G);return null}var _=y(K);if(_===K1){var j=nZ($,Z,G,X);if(j)return j}else if(_===z9)return v$($,Z,G,X);else if(_===b1||_===g9||_===bZ){var O=v$($,Z,G,X);if(O)return O;var z=JZ($,Z,G,X);if(z)return z}else if(_>=r1&&_<=s1){var z=JZ($,Z,G,X);if(z)return z}else if(_===f9)return a6($,Y,G,X);else if(_===n1)return L9($,Y,G,X,Y+1<$.length&&y($,Y+1)===I9);else if(_===O1&&!X.disableParsingRawHTML)return R$($,Y,G,X);else if(_===N1||_===_9){if(!U)U=C($,Z);if(!V)V=_0($,Z,U);if(V.spaceEquivalent<=3)return VZ($,Y,G,X)}else if(_===yZ)return J6($,Z,G,X);if(H)return j$($,Z,G);return null}function n9($,Z,G){let X=[],J=0;while(J<$.length){while(J<$.length&&$[J]===`
`)J++;if(J>=$.length)break;var Y=$[J];if(Z.inList&&X.length>0){var V=X[X.length-1];if(V?.type===F.paragraph){var K=V,U=y(Y);if(U===b1||U===X9||U===k||U===t){var Q=C($,J),H=$.slice(J,Q),v=_0($,J,Q);if(v.spaceEquivalent<4){var _=H.slice(v.charCount).trim();if(Z6(X,_,G)){J=Q+(Q<$.length&&$[Q]===`
`?1:0);continue}}}}}var j=o9($,J,Z,G);if(j){X.push(j),J=j.endPos;continue}var O=oZ($,J,Z,G);if(O){X.push(O),J=O.endPos;continue}var z=$.slice(J).trim();if(z){if(Z.inBlockQuote&&X.length>0){let W=function(A){if(A.type===F.blockQuote){var P=A;if(P.children&&P.children.length>0){var w=P.children[P.children.length-1];if(w.type===F.paragraph)return w}}else if(A.type===F.orderedList||A.type===F.unorderedList){var x=A;if(x.items&&x.items.length>0){var S=x.items[x.items.length-1];if(S&&S.length>0){var b=S[S.length-1],R=W(b);if(R)return R}}}return null};for(var q=X.length-1;q>=0;q--){var K=W(X[q]);if(K){var M=e$($,J,Z,G);if(M){var D=M;if(K.children&&D.children)K.children.push({type:F.text,text:`
`},...D.children);J=M.endPos;continue}}}}var M=e$($,J,Z,G);if(M){X.push(M),J=M.endPos;continue}}J++}return X}function a6($,Z,G,X){if(G.inline)return null;let J=C($,Z),Y=_0($,Z,J,3);if(Y.spaceEquivalent>3&&!G.inList)return null;var V=Z+Y.charCount;if(V>=$.length||$[V]!=="#")return null;let K=y9($,V,"#",6);if(V+=K,V>=$.length)return null;let U=$[V];if(U===`
`||U==="\r"){let j=C($,V);return{...O$(K,[],"",X.slugify),endPos:j+(j<$.length?1:0)}}if(U!==" "&&U!=="\t")return null;let Q=V,H=C($,Q);var v=$.slice(Q,H).replace(L6,"").trim();let _=s9(v,0,v.length,G,X);return{...O$(K,_,v,X.slugify),endPos:H+(H<$.length?1:0)}}function oZ($,Z,G,X){if(G.inline||G.inBlockQuote||G.inList)return null;let J=C($,Z);if(J>=$.length)return null;let Y=p($,J),V=-1,K=null;for(var U=0;Y<$.length&&U<10;U++){let R=C($,Y);if(R>=$.length)break;var Q=Y;while(Q<R&&(y($,Q)===k||y($,Q)===t||y($,Q)===v0))Q++;if(Q>=R)break;var H=0,v=Y;while(v<R&&H<3&&y($,v)===k)H++,v++;if(v<R){let N=y($,v);if(N===X9||N===b1){let T=$[v];var _=0,j=!1,O=v;while(O<R){let f=y($,O);if(f===N){if(j){_=0;break}_++}else if(f===k||f===t)j=!0;else{_=0;break}O++}if(_>=1){V=R,K=T;break}}}Y=p($,R)}if(!K)return null;let z=y($,Z);if(z===f9||z===K1||$[Z]==="|")return null;let q=Z;var D=Z,M=!1;while(D<Y){let R=C($,D);if(R>=Y)break;var W=D;while(W<R&&(y($,W)===k||y($,W)===t||y($,W)===v0))W++;if(W<R)M=!0,q=R;D=p($,R)}if(!M)return null;let A=$.slice(Z,q);var P=0,w=A.length;while(P<w&&(A.charCodeAt(P)===k||A.charCodeAt(P)===t||A.charCodeAt(P)===v0||A.charCodeAt(P)===o))P++;while(w>P&&(A.charCodeAt(w-1)===k||A.charCodeAt(w-1)===t||A.charCodeAt(w-1)===v0||A.charCodeAt(w-1)===o))w--;let x=A.slice(P,w);if(!x)return null;let S=K==="="?1:2,b=s9(x,0,x.length,G,X);return{...O$(S,b,x,X.slugify),endPos:V+(V<$.length?1:0)}}function e$($,Z,G,X){if(G.inline)return null;if(X.optimizeForStreaming&&$[Z]==="|"){var J=Math.min(500,$.length-Z),Y=$.substr(Z,J),V=0,K=!1;for(var U=0;U<Y.length;U++){if(Y[U]==="|")V++;if(Y[U]==="-"||Y[U]===":")K=!0}if(V>=3&&K){var Q=C($,Z);while(Q<$.length){var H=p($,Q);if(H>=$.length)break;var v=C($,H),_=$.slice(H,v);if(_.indexOf("|")===-1&&_.indexOf("-")===-1)break;if(Q=v,v>=$.length)break}return{type:F.paragraph,children:[],endPos:p($,Q)}}}let j=Z,O=$.length;while(j<O){let J0=C($,j),q0=!0;for(let X0=j;X0<J0;X0++){let e=y($,X0);if(e!==k&&e!==t&&e!==v0){q0=!1;break}}if(q0){j=J0;break}if(J0>=O){j=O;break}let M0=p($,J0);if(M0>=O){j=O;break}let x0=C($,M0),i=!0,O0="";for(let X0=M0;X0<x0;X0++){let e=y($,X0);if(e!==k&&e!==t&&e!==v0){if(i=!1,O0==="")O0=$[X0];break}}if(i){j=J0;break}let a=!1,L0=_0($,M0,x0),V0=L0.spaceEquivalent===4&&L0.charCount===4;if(O0==="<"&&!V0&&!X.disableParsingRawHTML){let e=M0,k0=0;while(e<x0&&k0<3){let d0=y($,e);if(d0===k||d0===t)k0++,e++;else break}if(e<x0&&$[e]==="<"){var z=R$($,e,{...G,inline:!1},X);if(z)a=!("canInterruptParagraph"in z)||z.canInterruptParagraph}}if(V0)a=!1;else if(!a&&O0&&r9(O0))if(O0==="["){let X0=M0;if(X0+1>=O||$[X0+1]!=="^")a=!1;else a=!0}else if(O0==="*"||O0==="+")if(v$($,M0,G,X))a=!0;else{let e=M0+1<O?$[M0+1]:"";if(e&&g1(e))a=!0;else a=!1}else{let X0=o9($,M0,G,X);if(X0)if(X0.type===F.codeBlock)if(_0($,M0,x0).spaceEquivalent>=4)a=!1;else a=!0;else if(X0.type===F.unorderedList||X0.type===F.orderedList)if(X0.type===F.orderedList)a=X0.start===1;else a=!0;else if(O0==="-")if(j>Z)a=!0;else a=!0;else if(X0.type===F.ref)a=!1;else a=!0}if(a){j=J0;break}j=p($,J0)}if(j<=Z)return null;var q=Z,D=j;while(q<D){let J0=y($,q);if(J0===k||J0===t)q++;else break}let M=C($,q);var W=D>M,A;if(!W)A=$.slice(q,D);else{var P=[],w=q,x=0;while(w<D){var S=C($,w);if(S>D)S=D;if(x===0)P.push($.slice(w,S));else{var b=0;while(b<4&&w+b<S)if(y($,w+b)===k)b++;else break;var R=b===4?w+4:w;P.push($.slice(R,S))}if(S<D){let J0=y($,S);if(J0===v0||J0===o)P.push(`
`),w=p($,S);else w=D}else w=D;x++}A=P.join("")}var N=A.length;while(N>0){var T=A.charCodeAt(N-1);if(T===k||T===t)N--;else break}if(N<A.length)A=A.slice(0,N);let f=!1;for(let J0=0;J0<A.length;J0++){let q0=A.charCodeAt(J0);if(q0!==k&&q0!==t&&q0!==o&&q0!==v0){f=!0;break}}if(!f)return null;var E=A,I=j,g=-1,c=j-1;while(c>=q){if(y($,c)===o){g=c;break}c--}if(g>=0){var L=!1;for(var Z0=q;Z0<g;Z0++){let J0=y($,Z0);if(J0!==k&&J0!==t&&J0!==o&&J0!==v0){L=!0;break}}if(!L){var B=g+1;while(B<$.length){let J0=y($,B);if(J0===k||J0===t)B++;else break}var d=B-(g+1);if(d<4&&B<$.length&&$[B]==="["){var m={...G,inline:!1},s=L9($,B,m,X,!1);if(s){var G0=0,c=q;while(c<=g){let q0=$.indexOf(`
`,c);if(q0===-1||q0>g)break;G0++,c=q0+1}var l=0,v1=0;c=0;while(c<A.length){let q0=A.indexOf(`
`,c);if(q0===-1)break;if(v1++,v1===G0){l=q0+1;break}c=q0+1}if(l>0)E=A.slice(0,l-1);I=s.endPos,G.refs=m.refs}}}}let K0=s9(E,0,E.length,G,X);var w0={type:F.paragraph,children:K0,endPos:I};if(K0.length>0){var b0=[];for(var Y0=K0.length-1;Y0>=0;Y0--){var g0=K0[Y0];if(g0.type===F.htmlSelfClosing&&g0.isClosingTag===!0)b0.push(Y0);else if(g0.type===F.text){var H0=g0;if(H0.text&&H0.text.trim().length>0)break}else break}if(b0.length>=3){var C0=b0[b0.length-1],L1=K0.slice(C0+1);K0.splice(C0+1),w0.removedClosingTags=L1}}return w0}function r6($,Z){if(Z!==0)return null;let G=g$($);if(!G?.hasValidYaml)return null;let X=G.endPos-1;if(X>0&&$[X-1]==="\r")X--;let J=t1($.slice(0,X));return{type:F.frontmatter,text:J,endPos:G.endPos}}function v$($,Z,G,X){let J=C($,Z),Y=_0($,Z,J,3);if(Y.spaceEquivalent>3)return null;var V=Z+Y.charCount;if(V>=J)return null;let K=$[V];if(K!=="-"&&K!=="*"&&K!=="_")return null;var U=0,Q=V;while(Q<J){var H=$[Q];if(H===K)U++;else if(H!==" "&&H!=="\t")return null;Q++}if(U<3)return null;return{type:F.breakThematic,endPos:p($,J)}}function _0($,Z,G,X){let J=0,Y=0,V=Z;while(V<G){var K=y($,V);if(K!==k&&K!==t)break;if(X!==void 0&&J>=X)break;if(K===t)J+=4-J%4;else J+=1;Y++,V++}return{spaceEquivalent:J,charCount:Y}}function mZ($,Z,G,X){let J=0,Y=0,V=X;for(let v=Z;v<G&&Y<4;v++){var K=y($,v);if(K===t){let _=4-V%4;if(Y+=_,J++,V+=_,Y>=4)break}else if(K===k){if(Y++,J++,V++,Y>=4)break}else break}let U=$.slice(Z+J,G);var Q=0;for(var H=Z;H<G;H++){if($[H]==="\t")Q++;if(Q>=2)break}if(Q>=2&&U0(U,"\t")&&X>0)U="  "+U.slice(1);return U}function j$($,Z,G){let X=C($,Z),J=_0($,Z,X);if(J.spaceEquivalent<4)return null;let Y=J.spaceEquivalent,V=C($,Z+J.charCount),K=Z,U=0;var Q=K-1;while(Q>=0&&$[Q]!==`
`&&$[Q]!=="\r")Q--;Q++;while(Q<K){if($[Q]==="\t")U=U+4-U%4;else U++;Q++}let H=mZ($,K,V,U),v=p($,V);if(v>=$.length){if(!H.trim())return null;return{type:F.codeBlock,text:H,endPos:v}}var _=[];_.push(H);let j=v;while(j<$.length){let z=C($,j);if(p1($,j,z)){let q=z+1;if(q<$.length){let D=C($,q),M=_0($,q,D),W=$[q+M.charCount];if(W&&W!==`
`&&(M.spaceEquivalent<4||W===">"&&M.spaceEquivalent<Y))break}_.push(`
`)}else{if(_0($,j,z).spaceEquivalent<4)break;let D=mZ($,j,z,0);_.push(`
`),_.push(D)}j=p($,z)}let O=_.join("");if(O=O.replace(x6,""),!O.trim())return null;return{type:F.codeBlock,text:O,endPos:j}}function VZ($,Z,G,X){let J=$[Z];if(J!=="`"&&J!=="~")return null;let Y=y9($,Z,J);if(Y<3)return null;let V=Z;while(V>0&&y($,V-1)!==o)V--;let K=_0($,V,Z),U=K.spaceEquivalent,Q=U;if(U===4&&K.charCount===4)U=0,Q=4;if(U>=4)return null;let H=n0($,Z+Y),v=C($,H),_=$.slice(H,v).trim();if(J==="`"&&_.indexOf("`")!==-1)return null;_=_.replace(a$,"$1");let j=_.indexOf(" "),O=j>0?_.slice(0,j):_,z=j>0?_.slice(j+1).trim():"",q=z&&/=\s*["']/.test(z)?Z9(z,"code","code",X):void 0,D=p($,v),M=D,W=!1;while(M<$.length){let x=C($,M),S=M,b=0;while(S<x){let R=y($,S);if(R===k){if(b++,S++,b>=4)break}else if(R===t){if(b+=4-b%4,S++,b>=4)break}else break}if(b<4){let R=y9($,S,J,x-S);if(R>=Y){let N=S+R;while(N<x){let T=y($,N);if(T===k||T===t)N++;else break}if(N===x){W=!0;break}if(R>=3&&N<x){let T=S+R;if(!(T<x&&(y($,T)===k||y($,T)===t))){let E=!0;if(J==="`"){if($.slice(T,x).indexOf("`")!==-1)E=!1}if(E)break}}}}else if(Q===4&&U===0&&b===4){let R=y9($,S,J,x-S);if(R>=Y&&p1($,S+R,x)){W=!0;break}}M=p($,x)}let A=M>D&&$[M-1]===`
`?M-1:M;if(A>D&&$[A-1]==="\r")A--;let P=t1($.slice(D,A));if(Q)P=$Z(P,Q);let w=W&&M<$.length?p($,C($,M)):M;return{type:F.codeBlock,text:P,lang:O,attrs:q,endPos:w}}function s6($,Z,G){for(var X=0;X<$.length;X++)if(!o$($[X])){let Y=YZ($,Z,G,{inline:!1,inBlockQuote:!0});for(var J=0;J<Y.length;J++){let V=Y[J];if("endPos"in V)delete V.endPos}return Y}return[]}function nZ($,Z,G,X){if(G.inline)return null;let J=Z;while(J<$.length&&($[J]===" "||$[J]==="\t"))J++;if(J>=$.length||$[J]!==">")return null;let Y=Z;var V=[],K=void 0,U=!1,Q=-1,H=!1,v=null,_=null,j=0,O=!1;while(Y<$.length){let w=C($,Y),x=Y;while(x<w&&($[x]===" "||$[x]==="\t"))x++;if(x<w&&$[x]===">"){let S=x+1;if(S<w&&$[S]===" ")S++;let R=_0($,S,w).spaceEquivalent>=4,N=!1,T=null,f=0;if(S<w){let I=$[S];if(I==="`"||I==="~"){let g=0,c=S;while(c<w&&$[c]===I&&g<20)g++,c++;if(g>=3)N=!0,T=I,f=g}}if(H&&v==="fenced"&&T===_&&f>=j)H=!1,v=null,_=null,j=0;else if(R||N)H=!0,v=R?"indented":"fenced",_=T,j=f;var z=!R&&!N;if(z){for(var q=S;q<w;q++)if(!o$($[q])){z=!1;break}}if(O=z,Q===-1&&!z)Q=V.length;if(!z)U=!0;let E=x+1;if(E<w&&$[E]==="\t"){V.push("  ");let I=4;for(let g=E+1;g<w;g++){let c=$[g];var D=y(c);if(D===t){let L=4-I%4;if(L===1)V.push(" ");else if(L===2)V.push("  ");else if(L===3)V.push("   ");else V.push(" ".repeat(L));I+=L}else V.push(c),I++}if(w<$.length)V.push(`
`)}else{let I=E;if(I<w&&$[I]===" ")I++;if(V.push($.slice(I,w)),w<$.length)V.push(`
`)}}else{var M=!0;for(var q=Y;q<w;q++)if(!o$($[q])){M=!1;break}if(M||H)break;if(_0($,Y,w).spaceEquivalent===0){let b=o9($,Y,G,X);if(b&&b.type!==F.ref&&b.type!==F.codeBlock)break;if(O)break}if(V.push($.slice(Y,w)),w<$.length)V.push(`
`)}Y=p($,w)}if(Y===Z)return null;if(V.length>0&&V[V.length-1]===`
`)V.pop();let W=V.join("");if(W.length>=4&&W.charCodeAt(0)===n1&&W.charCodeAt(1)===B9){let w=W.indexOf(`]
`,2);if(w>2)K=W.slice(2,w),W=W.slice(w+2)}let A=s6(W,G,X),P={type:F.blockQuote,children:A,endPos:Y};if(K)P.alert=K;return P}function $Z($,Z){return $.split(`
`).map(function(G){if(G.length===0)return G;let X=Z,J=0,Y=0,V=0;while(Y<G.length&&J<X)if(G[Y]===" ")J++,V++,Y++;else if(G[Y]==="\t"){let K=4-V%4;if(J+K<=X)J+=K,V+=K,Y++;else{let U=X-J,Q=Math.max(0,K-U);return" ".repeat(Q)+G.slice(Y+1)}}else break;return G.slice(Y)}).join(`
`)}function D$($,Z,G,X,J=!0){let Y=(J?`
`:"")+$,V=s9(Y,0,Y.length,G,X);if(Z.length>0&&Z[Z.length-1].type===F.paragraph)Z[Z.length-1].children.push(...V);else Z.push(...V)}function i9($){return $.some(function(Z){return Z.type===F.codeBlock||Z.type===F.paragraph||Z.type===F.blockQuote||Z.type===F.orderedList||Z.type===F.unorderedList||Z.type===F.heading})}function u$($){return!!$.match(XZ)}function tZ($){if($.length===0)return $;var Z=$[$.length-1];if((Z.type===F.orderedList||Z.type===F.unorderedList)&&Z.items?.length>0)return tZ(Z.items.slice(-1)[0]);return $}function ZZ($,Z,G,X,J,Y,V){if(!U0(J,"["))return null;var K={inline:!1,list:!1,refs:Y.refs||{}},U=L9($,Z+X.charCount,K,V,!1);return U?U.endPos:null}function hZ($,Z,G,X){if($.length!==1||!G)return!1;if($[0].length!==0)return!1;if(Z)return!0;if(!Z&&X.trim()==="")return!0;return!1}function pZ($,Z){var G=$.index||0;return Z?G+$[1].length+$[2].length+1:G+$[1].length+1}function A$($,Z,G,X,J){var Y=0,V=X+J,K=Z;while(K<G&&Y<4){var U=y($,K);if(U===k)Y++,V++;else if(U===t){var Q=4-V%4;if(Y+Q>4)break;Y+=Q,V+=Q}else break;K++}return{contentStartColumn:V,contentStartPos:K}}function l$($){var Z=$.match(XZ);if(!Z)return null;if(Z[1])return{match:[$,Z[1],Z[2],Z[3]],ordered:!0,listItemRegex:r$};if(Z[4])return{match:[$,Z[4],Z[5],""],ordered:!0,listItemRegex:r$};if(Z[6])return{match:[$,Z[6],Z[7]],ordered:!1,listItemRegex:s$};if(Z[8])return{match:[$,Z[8],""],ordered:!1,listItemRegex:s$};return null}function U9($,Z,G,X,J,Y,V){if(Z.spaceEquivalent!==Y)return!1;var K=$.match(V);if(K)return G?K[2]===J:K[1]===X;var U=$.match(XZ);if(!U)return!1;if(G)return U[4]&&U[5]===J;else return U[8]===X}function eZ($,Z,G,X){var J=Z,Y=G,V=Z[0];while(Y<$.length){var K=C($,Y),U=$.slice(Y,K),Q=U0(U," ".repeat(X))?U.slice(X):U;if(U0(Q.trim(),V)&&y9(Q.trim(),0,V)>=3)return{content:J,endPos:p($,K)};J+=`
`+Q,Y=p($,K)}return{content:J,endPos:Y}}function _$($,Z,G,X,J,Y,V,K,U,Q,H,v,_){var j=Q?void 0:U[1],O=Q?U[2]:void 0,z=Q?r$:s$,q=H;if(!H){var D=p($,Y),M=D;while(M<$.length){var W=C($,M),A=$.slice(M,W),P=_0($,M,W),w=P.spaceEquivalent;if(p1($,M,W)){var x=p($,W);if(x<$.length){var S=C($,x),b=_0($,x,S),R=b.spaceEquivalent,f=pZ(U,Q),E=J+K+f,I=A$($,E,Y,V,f),g=I.contentStartColumn;if(R+1>g){q=!0;break}}break}else if(w<=V){var N=A.slice(P.charCount),T=N.match(z);if(T&&(Q?T[2]===O:T[1]===j))break}M=p($,W)}}var f=pZ(U,Q),E=J+K+f,I=A$($,E,Y,V,f),g=I.contentStartColumn,c=X,L=p($,Y);if(U0(X,"```")||U0(X,"~~~")){var Z0=Q?U[1].length+U[2].length+1:U[1].length+1,B=eZ($,X,L,Z0);c=B.content,L=B.endPos}return Z.push($6(c,q,v,_)),G.push(g),{newCurrentPos:L,itemHasBlankLine:q}}function uZ($,Z,G,X,J,Y){if(J>X||Y.disableParsingRawHTML)return!1;let V=Z+G;if(V>=$.length||$[V]!=="<")return!1;return o6($,V)}function o6($,Z){if(Z>=$.length||$[Z]!=="<")return!1;let G=$.length,X=Z+1;if(X<G&&$[X]==="/")X++;if(X>=G)return!1;let J=y($,X);if(!M9(J))return!1;X++;while(X<G){let V=$[X],K=y($,X);if(V===">"||V===" "||V==="\t"||V===`
`||V==="\r"||V==="/")break;if(V==="-"||V==="_"||M9(K)||K>=48&&K<=57)X++;else return!1}let Y=0;while(X<G){let V=$[X],K=y($,X);if(Y===1){if(V==='"')Y=0;X++}else if(Y===2){if(V==="'")Y=0;X++}else if(V==='"')Y=1,X++;else if(V==="'")Y=2,X++;else if(V===">")return!0;else if(V==="/"&&X+1<G&&$[X+1]===">")return!0;else if(K===10||K===13)return!1;else X++}return!1}function lZ($,Z,G,X,J,Y,V,K,U,Q,H,v){let _=X,j=!1;while(_<$.length){let O=C($,_),z=_0($,_,O),q=z.spaceEquivalent;if(p1($,_,O)){j=!0,_=p($,O);continue}let D=$.slice(_+z.charCount,O);if(q<=J&&U9(D,z,Y,V,K,J,U))break;if(q>=G){if(v&&j){let W=ZZ($,_,O,z,D,Q,H);if(W){_=W,j=!1;continue}}let M=q$($,_,O,z,G-1,G,Z,j,Q,H,void 0,J);if(M.processed){_=M.newPos,j=M.wasBlank;continue}}else break}return _}function dZ($,Z,G,X){let J=YZ($,G,X,{inline:!1,list:!0});if(J.length>0)return!Z&&J.length===1&&J[0].type===F.paragraph?J[0].children:J;let Y=y$(G,!0,()=>J9($,0,$.length,G,X));return Z&&Y.length>0?[{type:F.paragraph,children:Y}]:Y}function $6($,Z,G,X){let J=c6($,0,G);if(!(J&&(J.endPos>=$.length||$[J.endPos]===" ")))return dZ($,Z,G,X);let V=J.endPos<$.length?J.endPos+1:J.endPos,K=$.slice(V),U=dZ(K,Z,G,X),Q=[J];if(J.endPos<$.length)Q.push({type:F.text,text:" "});return Q.push(...U),Q}function iZ($,Z){if(!$[0])return!1;let G=$[0].indexOf(Z);if(G===-1)return!1;let X=G+Z.length;if(X>=$[0].length)return!1;let J=$[0][X];return J?y(J)===wZ:!1}function Z6($,Z,G){if($.length===0)return!1;let X=$[$.length-1],J=Z.trim();if(!U0(J,"=")&&!U0(J,"-")||J.length<1||!/^[=-]+[ \t]*$/.test(J))return!1;let Y=[],V="";if(X.type===F.paragraph){let Q=X;Y=Q.children,V=Q.children.map((H)=>H.type===F.text?H.text:"").join("").trim()}else if(X.type===F.text){let Q=[],H=$.length-1;while(H>=0&&$[H].type===F.text)Q.unshift($[H]),H--;if(Q.length>0)Y=Q,V=Q.map((v)=>v.text).join("").trim()}if(!V)return!1;let U=J[0]==="="?1:2;if(X.type===F.paragraph)$.pop();else if(X.type===F.text)while($.length>0&&$[$.length-1].type===F.text)$.pop();return $.push(O$(U,Y,V,G.slugify)),!0}function q$($,Z,G,X,J,Y,V,K,U,Q,H,v){let _=X.spaceEquivalent,j=$.slice(Z+X.charCount,G);if(_>=J+4){let D=j$($,Z,U);if(D){let M=D,W=$Z(M.text||"",Y);return V.push({...M,text:W}),{processed:!0,newPos:M.endPos,wasBlank:!1}}}let O=_-(Y-1);if(_+1>=Y&&O<=3){let D=Z+X.charCount;if(D<G){let M=$[D];if(M==="`"||M==="~"){let W=VZ($,D,U,Q);if(W){let A=W,P=$Z(A.text||"",Y-1);return V.push({...A,text:P,endPos:A.endPos}),{processed:!0,newPos:A.endPos,wasBlank:!1}}}if(M==="|"){let W=J6($,D,U,Q);if(W){let A=W;return V.push(A),{processed:!0,newPos:A.endPos,wasBlank:!1}}}}}if(j.length>0&&(j[0]==="-"||j[0]==="*"||j[0]==="+"||j[0]>="0"&&j[0]<="9")){if(/^([-*+]|\d{1,9}[.)])\s+/.test(j)){let M=s9(j,0,j.length,U,Q);return V.push({type:F.text,text:`
`},...M),{processed:!0,newPos:p($,G),wasBlank:!1}}}let z=R6($,Z,V,j,U,Q);if(z!==null)return{processed:!0,newPos:z,wasBlank:!1};let q=YZ(j,U,Q,{inline:!1,list:!0});if(q.length>0){if(H&&q[0].type===F.paragraph){let D=q[0];if(V.push({type:F.text,text:`
`},...D.children),q.length>1)V.push(...q.slice(1))}else if(!K&&q[0].type===F.paragraph&&V.length>0){let D=V[V.length-1],M=q[0];if(D.type===F.paragraph)D.children.push({type:F.text,text:`
`},...M.children);else if(D.type===F.heading)V.push(...M.children);else if(!i9(V))V.push({type:F.text,text:" "},...M.children);else V.push(...q);if(q.length>1)V.push(...q.slice(1))}else V.push(...q);return{processed:!0,newPos:p($,G),wasBlank:!1}}if(K){let D=y$(U,!0,()=>J9(j,0,j.length,U,Q));V.push({type:F.paragraph,children:D})}else D$(j,V,U,Q);return{processed:!0,newPos:p($,G),wasBlank:!1}}function JZ($,Z,G,X){if(G.inline)return null;var J=G.inList;if(G.inList=!0,Z>0){var Y=y($,Z-1);if(Y!==o&&Y!==v0)return G.inList=J,null}var V=C($,Z),K=_0($,Z,V);if(K.spaceEquivalent>3&&!G.inList)return G.inList=J,null;var U=$.slice(Z,V),Q=K.charCount,H=U.slice(Q),v=l$(H);if(!v)return G.inList=J,null;var{match:_,ordered:j,listItemRegex:O}=v,z=K.spaceEquivalent,q=j?parseInt(_[1],10):void 0,D=j?_[2]:void 0,M=j?void 0:_[1],W=j?_[3]==="":_[2]==="";function A(Q0,c0){if(Q0===0)return!0;var p0=y($,Q0-1);if(p0!==o)return!1;if(!c0)return!0;var B0=Q0-2;while(B0>=0){var n=y($,B0);if(n!==k&&n!==t)break;B0--}return B0<0||y($,B0)===o}if(W&&!A(Z,!0))return G.inList=J,null;if(j&&q!==1&&!A(Z,!1))return null;if(!j&&iZ(_,M))return null;var P=_.index||0,w=j?P+_[1].length+_[2].length+1:W?P+_[1].length:P+_[1].length+1,x=Z+Q+w,S=A$($,x,V,z,w),b=S.contentStartColumn,R=z+P+_[1].length,N=j?R+_[2].length+1:W?R:R+1,T=[],f=[];function E(Q0,c0,p0){return p0?Q0>=c0:Q0>c0}function I(){return T[T.length-1]}function g(){return f[f.length-1]??b}function c(Q0,c0){let p0=tZ(c0),B0=G.inList;G.inList=!0;let n=JZ($,Q0,G,X);if(G.inList=B0,n)return p0.push(n),n;return null}var L=p($,V),Z0=L,B=!1;while(Z0<$.length){var d=C($,Z0),m=$.slice(Z0,d);if(m.trim()===""){var s=p($,d);while(s<$.length){var G0=y($,s);if(G0===o);else if(!h6.has($[s]))break;s++}var l=C($,s),v1=$.slice(s,l),K0=_0($,s,l),w0=v1.slice(K0.charCount);if(U9(w0,K0,j,M,D,z,O))B=!0;else{var b0=ZZ($,s,l,K0,w0,G,X);if(b0){var Y0=b0;while(Y0<$.length&&y($,Y0)===o)Y0++;if(Y0<$.length){var g0=C($,Y0),H0=$.slice(Y0,g0),C0=_0($,Y0,g0),L1=H0.slice(C0.charCount);if(U9(L1,C0,j,M,D,z,O))B=!0}}}break}var J0=_0($,Z0,d),q0=m.slice(J0.charCount),M0=l$(q0);if(!M0)break;var x0=M0.match;if(j){if(x0[2]!==D)break}else if(x0[1]!==M)break;Z0=p($,d)}var i=j?_[3]:_[2];i=i.trimStart();var O0=Z+Q+(_.index||0),a=j?O0+_[1].length+_[2].length:O0+_[1].length,L0=a;while(L0<$.length){var G0=y($,L0);if(G0!==k&&G0!==t)break;L0++}var V0=0,X0=a;while(X0<V){var G0=y($,X0);if(G0===t)V0+=4-V0%4;else if(G0===k)V0++;else break;X0++}var e=!1;if(a<$.length&&y($,a)===t){var k0=1,d0=a+1;while(d0<$.length&&y($,d0)===t)k0++,d0++;if(k0>=2)i="      "+i,e=!0}if(!j)W=W&&V0===0;if(V0>=4&&!e)i=" ".repeat(V0-1)+i.trimStart();var _1=i.trim()==="";let z1=B;if(!B&&L<$.length){var j1=L;while(j1<$.length){var D1=C($,j1),D0=$.slice(j1,D1);if(p1($,j1,D1)){var t0=p($,D1);while(t0<$.length){var W0=C($,t0);if(p1($,t0,W0))t0=p($,W0);else break}if(t0<$.length){var Y1=_0($,t0,$.length),I0=Y1.spaceEquivalent;if(I0>=z){var T0=$.slice(t0,C($,t0)),s0=T0.slice(Y1.charCount).match(O),T1=s0&&(j?s0[2]===D:s0[1]===M),A1=null;for(var $0=L;$0<j1;$0=C($,$0)+1){var $1=C($,$0),q1=_0($,$0,$1),i0=$.slice($0,$1).slice(q1.charCount).match(O),C1=i0&&q1.spaceEquivalent>z&&q1.spaceEquivalent>=b&&(j?i0[2]===D:i0[1]===M);if(C1){var F1=q1.spaceEquivalent+1,S1=j?F1+i0[1].length+i0[2].length+1:F1+i0[1].length+1,l1=$0+q1.charCount+i0[0].length,h=A$($,l1,$1,F1,S1-F1);A1=h.contentStartColumn;break}}var A0=V0>=5?N:b;if(!T1&&I0>=A0&&(A1===null||I0+1<A1))z1=!0}}break}var r=_0($,j1,D1),N0=r.spaceEquivalent,Z1=D0.slice(r.charCount),J1=Z1.match(O),S0=J1&&(j?J1[2]===D:J1[1]===M);if(S0){if(N0<=z)break}j1=p($,D1)}}var m0=i;if(U0(i,"```")||U0(i,"~~~")){var X1=j?_[1].length+_[2].length+1:_[1].length+1,d1=eZ($,i,L,X1);m0=d1.content,L=d1.endPos}var G1=!W&&i.trim()===""&&V0>0&&V0<5;if(!z1){var o0=m0.length>0?m0[0]:"",E1=o0===">",Z=L;while(Z<$.length){var V=C($,Z),U=$.slice(Z,V);if(U.trim()==="")break;var K=_0($,Z,V);if(K.spaceEquivalent<N)break;var H=U.slice(K.charCount);if(K.spaceEquivalent<=z&&U9(H,K,j,M,D,z,O))break;if(u$(H)&&K.spaceEquivalent>z)break;var h0=H.length>0?H[0]:"",Q9=h0===">"&&E1;if(h0===">"&&!Q9||h0==="#"||U0(H,"```")||U0(H,"~~~"))break;m0+=`
`+H,L=Z=p($,V)}}if(T.push($6(m0,z1,G,X)),f.push(b),z1&&(V0>=5||G1)){let Q0=I();L=lZ($,Q0,N,L,z,j,M,D,O,G,X,!0)}else if(!z1){let Q0=N-1;while(L<$.length){let c0=C($,L),p0=$.slice(L,c0),B0=_0($,L,c0),n=B0.spaceEquivalent,y0=p0.slice(B0.charCount);if(p0.trim()===""||n<=z&&U9(y0,B0,j,M,D,z,O)||u$(y0)&&n>z||n<Q0)break;let H1=I(),a0=q$($,L,c0,B0,Q0,b,H1,!1,G,X,!0,z);if(a0.processed)L=a0.newPos;else break}}var z0=!1;while(L<$.length){let Q0=C($,L),c0=$.slice(L,Q0),p0=_0($,L,Q0),B0=p0.charCount,n=p0.spaceEquivalent;if(c0.trim()==="")B=!0,z0=!0,L=p($,Q0);else if(n<z){let y0=c0.slice(B0);if(y0.startsWith("<")&&uZ($,L,B0,z,n,X))break;let H1=y0.trim();if(H1.length>0&&T.length>0&&!r9(H1[0])&&!U9(y0,p0,j,M,D,z,O)){let a0=I();if(a0.length>0){let F0=a0[a0.length-1];if(!z0&&(F0.type===F.paragraph||F0.type===F.text)){D$(y0,a0,G,X),z0=!1,L=p($,Q0);continue}}}break}else{let y0=c0.slice(B0);if(T.length>0){let u=f[T.length-1]||b;if(n+1>=u&&!U9(y0,p0,j,M,D,z,O)){let e0=I();if(e0.length>0&&Z6(e0,y0,X)){L=p($,Q0);continue}}}if(v$($,L,G,X))break;if(z0){let u=ZZ($,L,Q0,p0,y0,G,X);if(u){L=u,z0=!1;continue}}if(n<=z){if(y0.startsWith("<")&&uZ($,L,B0,z,n,X))break;if(!U9(y0,p0,j,M,D,z,O)){if(n===z&&!z0){let u=y0.trim();if(u.length>0&&!r9(u[0])){let e0=o9($,L,G,X);if(e0&&e0.type!==F.paragraph)break;let u0=I();if(u0.length>0&&!i9(u0)){D$(y0,u0,G,X,!0),z0=!1,L=p($,Q0);continue}}}break}}if(hZ(T,W,z0,i))break;let a0=l$(y0),F0=a0?a0.match:null,m1=F0&&(j?F0[2]===D:F0[1]===M);if(m1&&n>3&&z0)break;if(m1&&n<=z+3){if(n>=4&&z0)break;if(n===z){let u=j?F0[3]:F0[2];if(u=u.trimStart(),L=_$($,T,f,u,L,Q0,n,B0,F0,j,B,G,X).newCurrentPos,z0=!1,u.trim()===""){let u0=T[T.length-1],E0=g();L=lZ($,u0,E0,L,z,j,M,D,O,G,X)}continue}if(n>z){if(z0){let E0=j?F0[3]:F0[2];E0=E0.trimStart(),L=_$($,T,f,E0,L,Q0,n,B0,F0,j,B,G,X).newCurrentPos,z0=!1;continue}let u=I(),e0=n+1,u0=E(e0,g(),i9(u));if(u0){let E0=c(L,u);if(E0){L=E0.endPos,z0=!1;continue}}if(!u0&&m1){let E0=j?F0[3]:F0[2];if(E0=E0.trimStart(),!B){let V1=p($,Q0);while(V1<$.length){let l0=C($,V1),U1=$.slice(V1,l0),R0=_0($,V1,l0),w1=R0.spaceEquivalent;if(U1.trim()===""){let S9=p($,l0);if(S9<$.length){let o1=_0($,S9,$.length).spaceEquivalent,S$=n+(j?F0[1].length+F0[2].length+1:F0[1].length+1);if(o1+1>S$)break}break}else if(w1<=z){let P0=U1.slice(R0.charCount).match(O);if(P0&&(j?P0[2]===D:P0[1]===M)&&w1<=z)break}V1=p($,l0)}}L=_$($,T,f,E0,L,Q0,n,B0,F0,j,B,G,X).newCurrentPos,z0=!1;continue}else if(!u0&&!m1)break;{let E0=I(),f0=E0.length===0;if(f0&&hZ(T,W,z0,i))break;let V1=E0.some((R0)=>R0.type===F.codeBlock||R0.type===F.paragraph||R0.type===F.blockQuote||R0.type===F.orderedList||R0.type===F.unorderedList||R0.type===F.heading),l0=f0&&T.length===1?N:b;if(V1?n>=l0:n>l0){let R0=q$($,L,Q0,p0,l0,b,I(),z0,G,X,void 0,z);if(R0.processed){z0=R0.wasBlank,L=R0.newPos;continue}}else break}}else if(n===z){if(!j&&F0&&iZ(F0,F0[1]))break;let u=j?F0[3]:F0[2];u=u.trimStart(),L=_$($,T,f,u,L,Q0,z,B0,F0,j,B,G,X).newCurrentPos,z0=!1}}else if(n>z){let u=I();if(u$(y0)){let f0=n+1;if(E(f0,g(),i9(u))){let U1=c(L,u);if(U1){L=U1.endPos,z0=!1;continue}}if(n-z>3){let U1=u.length>0?u[u.length-1]:null;if(U1&&(U1.type===F.paragraph||U1.type===F.text)){D$(y0,u,G,X),z0=!1,L=p($,Q0);continue}}else break}else{let f0=c(L,u);if(f0){L=f0.endPos,z0=!1;continue}}let u0=b;if(i9(u)?n>=u0-1:n>u0-1){let f0=q$($,L,Q0,p0,u0-1,b,I(),z0,G,X,void 0,z);if(f0.processed){z0=f0.wasBlank,L=f0.newPos;continue}}else break}else break}}if(B&&T.length>1&&T[0].length>0&&T[0][0].type!==F.paragraph){for(var j0=1;j0<T.length;j0++)if(T[j0].length>0&&T[j0][0].type===F.paragraph){var i1=!1;for(var k1=0;k1<T[0].length;k1++){var B1=T[0][k1].type;if(B1===F.codeBlock||B1===F.heading||B1===F.blockQuote||B1===F.orderedList||B1===F.unorderedList||B1===F.htmlBlock||B1===F.breakThematic){i1=!0;break}}if(!i1)T[0]=[{type:F.paragraph,children:T[0]}];break}}let T9=j?{type:F.orderedList,items:T,ordered:!0,start:q}:{type:F.unorderedList,items:T,ordered:!1};return G.inList=J,{...T9,endPos:L}}function J6($,Z,G,X){if(G.inline)return null;let J=[],Y=Z;while(Y<$.length){let O=C($,Y);if(p1($,Y,O))break;let z=$.slice(Y,O).trim();if(!(z.indexOf("|")!==-1||J.length>=3&&z&&!r9(z[0])))break;J.push(z),Y=p($,O)}if(J.length<2)return null;let V=(O)=>O[0]==="|"&&O[O.length-1]==="|"?O.slice(1,-1):O,K=(O)=>{let z=[],q="",D=!1;for(let M=0;M<O.length;M++){let W=O[M];if(W==="\\"&&M+1<O.length&&O[M+1]==="|")q+="|",M++;else if(W==="`")D=!D,q+=W;else if(W==="|"&&!D)z.push(q.trim()),q="";else q+=W}return z.push(q.trim()),z},U=K(V(J[0]));if(!U.length)return null;let Q=K(V(J[1]));if(Q.length!==U.length||Q.some((O)=>!/^:?-+:?$/.test(O)))return null;let H=Q.map((O)=>{let z=O[0]===":",q=O[O.length-1]===":";return z&&q?"center":z?"left":q?"right":null});if(X.optimizeForStreaming&&J.length===2)return null;let v=(O)=>y$(G,!0,()=>O.map((z)=>J9(z,0,z.length,G,X))),_=v(U),j=J.slice(2).map((O)=>{let z=O.indexOf("|")!==-1?K(V(O)):[O.trim()],q=U.length;while(z.length<q)z.push("");return z.length=q,v(z)});return{type:F.table,header:_,cells:j,align:H,endPos:Y}}var n6=["div","p","section","article","aside","nav","header","footer","main","h1","h2","h3","h4","h5","h6","blockquote","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","td","th","form","fieldset","hr","pre","details","summary","figure","figcaption"],t6=new Set(["pre","script","style","textarea"]);function c9($){return n6.indexOf($.toLowerCase())!==-1}function B$($){return t6.has($)}function p1($,Z,G){for(var X=Z;X<G;X++){let J=y($,X);if(J!==k&&J!==t&&J!==v0)return!1}return!0}function y$($,Z,G){let X=$.inline;$.inline=Z;try{return G()}finally{$.inline=X}}function d$($,Z,G){var X=Z;while(X<G){var J=C($,X);if(p1($,X,J))return X;X=p($,J)}return G}function i$($,Z,G){return{type:F.htmlComment,text:t1($),endPos:Z,...G}}function b9($,Z,G,X,J,Y,V,K,U){var Q=t1(Z),H=Q;if(K&&(K.forceBlock||K.optimizeForStreaming)&&Z&&!Y){var v=new RegExp("^<"+$.toLowerCase()+"(\\s[^>]*)?>$","i");if(v.test(Z.trim()))H=""}var _=H,j=$.toLowerCase(),O=new RegExp("^<"+j+"[\\s>]","i");if(O.test(_)){var z=_.indexOf(">");if(z!==-1){_=_.slice(z+1);var q="</"+j+">",D=_.indexOf(q);if(D!==-1)_=_.slice(0,D)}}else{var M="</"+j+">",W=_.indexOf(M);if(W!==-1)_=_.slice(0,W)}var A=[];if(_&&K&&!K.optimizeForStreaming){var P=U||{inline:!1,inHTML:!0,inAnchor:!1},w=_.trim(),x=N$.test(w),S=b$.test(w),b=w$.test(w);if(x||S||b){var R={...P,inline:!1,inHTML:!0,inAnchor:P.inAnchor||j==="a"};A=n9(w,R,K)}else if(w){var N={...P,inline:!0,inHTML:!0,inAnchor:P.inAnchor||j==="a"};A=J9(w,0,w.length,N,K)}}return{type:F.htmlBlock,tag:$,attrs:X||{},rawAttrs:J,children:A,rawText:H,text:_,verbatim:!0,isClosingTag:Y,canInterruptParagraph:V,endPos:G}}function a9($){let Z=b$.test($),G=N$.test($),X=P6.test($);return Z||G&&!X}function cZ($,Z,G,X,J,Y,V,K,U,Q){if(!K.inHTML&&!K.inline&&!Y$(J,`
`)){let K0=Y,w0=V.length;while(K0<w0){let b0=C(V,K0);if(p1(V,K0,b0))break;let Y0=V.slice(K0,b0).trim();if(Y0.length>0&&r9(Y0[0])){let g0=R$(V,K0,K,Q);if(g0){K0=g0.endPos;continue}let H0=R9(V,K0);if(H0){K0=H0.endPos;continue}return null}K0=p(V,b0)}}let H=Z,v=B$(H);var _=!v&&!O9(Z),j=void 0;if(J){var O=J.indexOf(">");if(O!==-1){var z=J.slice(0,O+1);if(z.indexOf(`
`)!==-1)j=z;var q=O;for(var D=1;D<O;D++){var M=z[D];if(M===" "||M==="\t"||M===`
`||M===">"){q=D;break}}G=z.slice(q,O)}}var W=G.replace(/^[\s\n\r\t]+/,""),A=Z9(W,Z,$,Q),P={...A},w=!1,x=!1;if(_&&X.length>0){var S="</"+H,b=X.indexOf(S);if(b>=0){var R=b+S.length;while(R<X.length&&(X[R]===" "||X[R]==="\t"))R++;if(R<X.length&&X[R]===">"){var N=X.slice(0,b);if(a9(N))X=N,x=!0;else w=!0}}if(!x){var T=X.length-1;if(X[T]===`
`){T--;while(T>=0&&(X[T]===" "||X[T]==="\t"||X[T]==="\r"))T--;if(T>=0&&X[T]===`
`)w=!0}}}var f=v||_&&w&&!a9(X),E=t1(X),I=E;if(f){if(E.length>0&&E[0]===`
`)E=E.slice(1),I=E;if(E.length>0&&E[E.length-1]===`
`)E=E.slice(0,-1),I=E;var S="</"+H+">",b=E.indexOf(S);if(b!==-1)E=E.slice(0,b)}let g=E.match(/^([ \t]*)/),c=g?g[1]:"",L=new RegExp(`^${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"gm"),Z0=E.replace(L,""),B=N$.test(Z0),d=b$.test(Z0),m=H==="p",s=w$.test(Z0),G0=m?B:B||d||K.inHTML&&s,l=[];if(Z0)if(G0||s){let K0={...K,inline:!1,inHTML:!0,inAnchor:K.inAnchor||H==="a"};l=n9(Z0,K0,Q)}else{let K0={...K,inline:!0,inHTML:Q.optimizeForStreaming?!0:K.inHTML,inAnchor:U||K.inAnchor||H==="a"};l=J9(Z0,0,Z0.length,K0,Q)}var v1=void 0;if(f)if(j!==void 0)v1=j+I;else v1=I;return{type:F.htmlBlock,tag:f?Z:$,attrs:P,rawAttrs:G,children:l,rawText:v1,text:Z0,verbatim:f,canInterruptParagraph:!0,endPos:Y}}function R$($,Z,G,X){if($[Z]!=="<")return null;if(X.optimizeForStreaming&&G.inHTML)return null;if(!G.inline);if(Z+1<$.length){if($[Z+1]==="?"){var J=F$($,Z);if(J&&J.kind==="pi")return i$(J.text||"",J.endPos,{raw:!0})}else if($[Z+1]==="!"){if(Z+3<$.length&&$.slice(Z,Z+4)==="<!--"){if(G.inline);var Y=F$($,Z);if(Y&&Y.kind==="comment"){var V=Y.text||"",K=!1;if(V==="<!-->")V="",K=!0;else if(V==="<!--->")V="-",K=!0;else if(V.startsWith("<!--")&&V.endsWith("-->"))V=V.slice(4,-3);if(G.inline);return i$(V,Y.endPos,{endsWithGreaterThan:K})}}var U=F$($,Z);if(U&&(U.kind==="declaration"||U.kind==="cdata"))return i$(U.text||"",U.endPos,{raw:!0})}}if(Z+1<$.length){let v9=$[Z+1];if(v9===" "||v9===`
`||v9==="\t"||v9==="\r")return null}var Q=$.indexOf(">",Z+1);if(Q!==-1){var H=$.slice(Z+1,Q),v=H.indexOf(" ")!==-1||H.indexOf("\t")!==-1;if(!v&&(U0(H,"http://")||U0(H,"https://")))return null;if(!v&&rZ(H))return null}var _=R9($,Z);if(!_&&!G.inline){var j=$.length,O=C($,Z),z=Z,q=0;while(z<O&&q<3&&($[z]===" "||$[z]==="\t"))q++,z++;if(z>=O||$[z]!=="<")return null;if(z+1<O){var R0=n$($,z+1);if(R0){var w1=R0.tagName,D=c9(w1);if(!D)return null;var M=R0.nextPos,W=!1,A=!1,P="",w=O,x=!1;while(w<j&&!x){var S=!1;while(M<w){var b=$[M];if(A){if(b===P)A=!1,P="";if(b===`
`||b==="\r")W=!0;M++,S=!0}else if(b==='"'||b==="'")A=!0,P=b,M++,S=!0;else if(b===`
`||b==="\r"){W=!0,M++,S=!0;var R=C($,M);if(R===M)break;w=R}else if(b===">"){M++,x=!0;break}else M++,S=!0}if(x)break;if(!S&&M>=w){var N=C($,w+1);if(N<=w)break;w=N}else if(M>=w&&w<j){var N=C($,w+1);if(N<=w)break;w=N}else break}if(!W&&x)return null;if(M>=O&&O<j)M=O;var T=D?"type6":"type7",f=M,E=d$($,p($,O),j),I=$.slice(f,E),g=Z+1<$.length&&$[Z+1]==="/";if(T==="type7"&&I.trim()===""){var c=$.slice(Z,E),L=C(c,0);if(L<c.length)L++;var Z0=c.slice(0,L);return b9(w1,Z0,E,{},void 0,g,!1,X,G)}var B=$.slice(Z,E);return b9(w1,B,E,{},void 0,g,T==="type6",X,G)}}return null}if(!_)return null;if(Q!==-1){var d=$.slice(Z+1,Q);if((U0(d,"http://")||U0(d,"https://"))&&(d.indexOf(" ")!==-1||d.indexOf("\t")!==-1))return null}var w0=Z+(_.isClosing?2:1);if(w0<$.length){var m=$[w0],s=y(m);if(s>=97&&s<=122||s>=65&&s<=90){if(w0+1<$.length&&$[w0+1]===":")return null}}if(_.isClosing){var G0=_.attrs.trim();if(G0.length>0)return null;if(!G.inline){var j=$.length,O=C($,Z),f=_.endPos,l=f;while(l<O&&($[l]===" "||$[l]==="\t"||$[l]==="\r"))l++;var v1=l>=O||$[l]==="<"&&function(){var DZ=R9($,l);return DZ&&c9(DZ.tagLower)}();if(v1){var E=d$($,p($,O),j),I=$.slice(f,E);if(I.length>0){if(I[0]==="\r"&&I[1]===`
`)I=I.slice(2);else if(I[0]===`
`||I[0]==="\r")I=I.slice(1)}let K6=_.tagLower||_.tagName.toLowerCase();return b9(_.tagName,I,E,Z9(_.whitespaceBeforeAttrs+_.attrs,K6,_.tagName,X),_.whitespaceBeforeAttrs+_.attrs,!0,!1,X,G)}}var K0=$.slice(Z,_.endPos);return{type:F.htmlSelfClosing,tag:_.tagName,attrs:{},endPos:_.endPos,isClosingTag:!0,rawText:K0}}var w0=Z+(_.isClosing?2:1);if(w0<$.length){var b0=$[w0];if(b0===" "||b0==="\t"||b0===`
`||b0==="\r")return null}var Y0=_.tagLower,g0=O9(_.tagName);let H0=_.tagName.length>0&&_.tagName[0]>="A"&&_.tagName[0]<="Z";if(_.isSelfClosing||g0&&Y0!=="a"){if(_.hasNewline&&!H0)return null;if(!G.inHTML&&!G.inline&&!H0)return null;var C0=_.attrs.replace(/\/\s*$/,""),L1=Z9(C0,Y0,_.tagName,X),K0=G.inline?$.slice(Z,_.endPos):void 0;let jZ={type:F.htmlSelfClosing,tag:_.tagName,attrs:L1,endPos:_.endPos};if(K0!==void 0)jZ.rawText=K0;return jZ}if(G.inline){var J0=_.attrs.replace(/\/\s*$/,""),q0=_.whitespaceBeforeAttrs+J0,M0=Z9(J0,Y0,_.tagName,X),x0={...M0},i=_.endPos,O0=[];if(!O9(_.tagName)){var a=S6($,_.endPos,Y0);if(a!==null){var L0=$.slice(_.endPos,a[0]);if(L0)if(G.inHTML&&w$.test(L0)||a9(L0))O0=n9(L0,{...G,inline:!1,inHTML:!0,inAnchor:G.inAnchor||Y0==="a"},X);else O0=J9(L0,0,L0.length,{...G,inline:!0,inHTML:X.optimizeForStreaming?!0:G.inHTML,inAnchor:G.inAnchor||Y0==="a"},X);i=a[1]}}return{type:F.htmlBlock,tag:_.tagName,attrs:x0,rawAttrs:q0,children:O0,verbatim:!1,endPos:i}}if(!G.inline){var j=$.length,O=C($,Z),V0=_.tagLower,X0=B$(V0),e=!X0&&c9(_.tagName),k0=!1,d0=Z;while(d0<_.endPos){if($[d0]===">"){k0=!0;break}d0++}var l=_.endPos;while(l<O&&($[l]===" "||$[l]==="\t"))l++;var _1=l>=O||$[l]===`
`||$[l]==="\r"||e&&l<O||!k0;if(X0&&k0&&!_.isClosing){var{tagName:z1,endPos:j1,attrs:D1}=_,D0=j1;if($[D0]===`
`)D0++;var t0=D0,W0=D0,Y1=1,I0=V0.length+1;while(Y1>0){var T0=$.indexOf("<",D0);if(T0===-1){W0=j,D0=j;break}var s0=-1,T1=-1;if($[T0+1]==="/")T1=T0;else if(T0+I0+1<=j&&($[T0+1]===V0[0]||$[T0+1]===z1[0])){var A1=$.substring(T0+1,T0+I0);if(A1.toLowerCase()===V0&&($[T0+I0]===" "||$[T0+I0]===">"))s0=T0}if(s0===-1&&T1===-1){D0=T0+1;continue}if(s0!==-1&&(T1===-1||s0<T1))D0=s0+I0+1,Y1++;else{var $0=T1+2;while($0<j){var $1=$[$0];if($1!==" "&&$1!=="\t"&&$1!==`
`&&$1!=="\r")break;$0++}if($0+V0.length>j)break;var q1=$.substring($0,$0+V0.length);if(q1.toLowerCase()!==V0){D0=$0;continue}$0+=V0.length;while($0<j){var i0=$[$0];if(i0!==" "&&i0!=="\t"&&i0!==`
`&&i0!=="\r")break;$0++}if($0>=j||$[$0]!==">"){D0=$0;continue}var C1=$0+1,F1=C($,C1);W0=F1,D0=F1+1,Y1--}}var S1=0;while(D0+S1<j&&$[D0+S1]===`
`)S1++;var l1=$.slice(Z,D0+S1),h=$.slice(t0,W0),A0=D0+S1;return cZ(_.tagName,_.tagName,D1,h,l1,A0,$,G,!1,X)}if(_1||!k0){var T=e?"type6":"type7",f=_.endPos,E=d$($,p($,O),j);if(T==="type6"&&!_.isClosing){let $$=H0?_.tagName:_.tagLower||_.tagName.toLowerCase();var r="</"+$$,N0="<"+$$,Z1=f,J1=1,S0=-1;while(Z1<E&&J1>0){var m0=$.indexOf(N0,Z1),X1=$.indexOf(r,Z1);while(m0!==-1&&m0<E){var d1=m0+N0.length;if(d1>=j){m0=-1;break}var G1=$[d1];if(G1===" "||G1==="\t"||G1===`
`||G1==="\r"||G1===">")break;m0=$.indexOf(N0,d1)}if(m0===-1||m0>=E)m0=E;if(X1===-1||X1>=E)X1=E;if(m0<X1)J1++,Z1=m0+N0.length;else if(X1<E){if(J1--,J1===0){S0=X1;break}Z1=X1+r.length}else break}if(S0!==-1&&S0<E){var o0=S0+r.length;while(o0<j&&($[o0]===" "||$[o0]==="\t"))o0++;if(o0<j&&$[o0]===">"){var E1=o0+1,h0=E1;while(h0<j&&$[h0]!==`
`)h0++;if(h0<j)h0++;while(h0<j&&($[h0]===" "||$[h0]==="\t"))h0++;if(h0<j&&$[h0]==="<"&&!U0($.slice(h0),r)){var Q9=R9($,h0);if(Q9)E=E1}}}else if(S0=$.indexOf(r,f),S0!==-1){var e9=$.slice(f,S0),z0=H0||a9(e9);if(z0){var j0=S0+r.length;while(j0<j&&($[j0]===" "||$[j0]==="\t"))j0++;if(j0<j&&$[j0]===">"){var i1=C($,j0+1);E=i1}}}}var I=$.slice(f,E),k1=_.whitespaceBeforeAttrs+_.attrs,g=_.isClosing;let qZ=()=>{let $$=_.tagLower||_.tagName.toLowerCase(),P9=_.whitespaceBeforeAttrs+_.attrs;return{parsed:Z9(P9,$$,_.tagName,X),raw:P9}};if(T==="type7"&&I.trim()===""){var B1=$.slice(Z,_.endPos),T9=B1.indexOf(`
`)!==-1;if(T9)return null;var Q0=_.endPos,L=C($,Q0);if(L<$.length)L++;var Z0=$.slice(Z,L);let HZ=qZ();return b9(_.tagName,Z0,E,HZ.parsed,HZ.raw,g,!1,X,G)}var c0=_.hasNewline,p0=!k0;if((c0||p0)&&T==="type7"){var B0=_.endPos,n=$.slice(Z,B0),y0=I,B=n+y0;let P9=qZ();return b9(_.tagName,B,E,P9.parsed,P9.raw,g,!1,X,G)}let FZ=_.tagLower||_.tagName.toLowerCase();var H1=Z9(k1,FZ,_.tagName,X),a0={...H1};if(T==="type6"){var F0=I,m1=I.indexOf("</"+FZ);if(m1>=0){var l=m1+2+_.tagName.length;while(l<I.length&&(I[l]===" "||I[l]==="\t"))l++;if(l<I.length&&I[l]===">")F0=I.slice(0,m1)}if(a9(F0))return cZ(_.tagName,_.tagName,k1,F0,$.slice(Z,_.endPos),E,$,G,!1,X)}var u=I;if(u.length>0){if(u[0]==="\r"&&u[1]===`
`)u=u.slice(2);else if(u[0]===`
`||u[0]==="\r")u=u.slice(1)}var e0=u.split(`
`),u0=1/0;for(var E0=0;E0<e0.length;E0++){var f0=e0[E0];if(f0.trim().length===0)continue;var q=0;while(q<f0.length&&(f0[q]===" "||f0[q]==="\t"))q++;if(q<u0)u0=q}if(u0>0&&u0<1/0){var V1=[];for(var l0=0;l0<e0.length;l0++){var U1=e0[l0];if(U1.trim().length===0)V1.push(U1);else V1.push(U1.slice(u0))}u=V1.join(`
`)}return b9(_.tagName,u,E,a0,k1,g,T==="type6"?!0:!1,X,G)}}if(G.inline)return null;var R0=n$($,Z+1);if(!R0)return null;var w1=R0.tagName;if(!O9(w1))return null;let S9=R0.tagLower;var P0=R0.nextPos,o1=$.length;while(P0<o1&&g1($[P0]))P0++;var _Z=P0;while(P0<o1&&$[P0]!==">")P0++;if(P0>=o1)return null;let S$=$.slice(_Z,P0).trim(),E9=P0+1;while(E9<o1&&g1($[E9]))E9++;let Y6="</"+S9+">",zZ=$.toLowerCase().indexOf(Y6,E9);if(zZ!==-1){if($.slice(E9,zZ).trim())return null}P0++;let V6=P0;while(P0<o1&&g1($[P0]))P0++;if(P0<o1&&$[P0]===`
`)P0++;let U6=Z9(S$,w1,w1,X);return{type:F.htmlSelfClosing,tag:w1,attrs:U6,endPos:V6}}function e6($,Z){if($[Z]!=="<")return null;var G=$.length,X=!1,J=Z+1;if(Z+1<G&&$[Z+1]==="/")X=!0,J=Z+2;var Y=n$($,J);if(!Y)return null;var{tagName:V,tagLower:K,nextPos:U}=Y;if(U<G){var Q=$[U];if(Q===">"||Q==="/"){var H=Q===">"?U+1:U+2;if(Q==="/"&&(U+1>=G||$[U+1]!==">"))return null;var v=Q==="/",_=c9(V),j=!B$(K)&&!_;return{kind:"tag",tagNameLower:K,tagName:V,isClosing:X,isSelfClosing:v,hasNewline:!1,type6Candidate:_,type7Candidate:j,endPos:H,attrs:"",whitespaceBeforeAttrs:""}}}var O=U,z=!1;while(U<G){var q=$[U],D=y($,U);if(q===" "||q==="\t");else if(D===10||D===13)z=!0;else break;U++}var M=$.slice(O,U),W=U,A=!1,P="",w=0,x=!1,S=!1,b=0;while(W<G){var R=$[W],D=y($,W);if(b===1){if(R==='"'){if(W+1<G&&$[W+1]==='"')return null;b=0}W++}else if(b===2){if(R==="'")b=0;W++}else if(R==='"')b=1,W++;else if(R==="'")b=2,W++;else if(R==="{"||R==="}"&&w>0)w+=R==="{"?1:-1,W++;else if(R===">"&&w===0){if(W>U){var N=W-1;while(N>=U){var T=$[N];if(T!==" "&&T!=="\t")break;N--}if(N>=U&&$[N]==="/")x=!0,S=N<W-1}W++;break}else{if(R==="*"||R==="#"||R==="!"){var f=W+1;while(f<G){var E=$[f];if(E==="="||E===" "||E==="\t"||E===`
`||E==="\r"||E===">")break;f++}if(f<G&&$[f]==="=")return null}if(D===10||D===13)z=!0;W++}}if(W>G||$[W-1]!==">")return null;if(b===1||b===2)return null;if(w>0)return null;if(S)return null;var I=W-1;if(x)I--;var g=$.slice(U,I),c=x,L=-1,Z0=!1,B="",d=!1;for(var m=0;m<g.length;m++){var q=g[m];if(Z0){if(q===B)Z0=!1,L=m,B="",d=!1}else if(q==='"'||q==="'")Z0=!0,B=q,d=!1;else if(q==="=")d=!0;else if(L!==-1&&m===L+1){var D=q.charCodeAt(0);if(M9(D))return null}else if(d&&!Z0&&(q==="*"||q==="#"||q==="!"))return null;else if(g1(q))d=!1}var s=c9(V),G0=!B$(K)&&!s;return{kind:"tag",tagNameLower:K,tagName:V,isClosing:X,isSelfClosing:c,hasNewline:z,type6Candidate:s,type7Candidate:G0,endPos:W,attrs:g,whitespaceBeforeAttrs:M}}function F$($,Z){if(Z>=$.length||$[Z]!=="<")return null;var G=$.length;if(Z+1>=G)return null;var X=$[Z+1];if(X==="!"){if(Z+4<=G&&$.slice(Z,Z+4)==="<!--"){var J=Z+4;if(J<G&&$[J]===">")return{kind:"comment",hasNewline:!1,endPos:J+1,text:$.slice(Z,J+1),raw:!0};if(J+1<G&&$[J]==="-"&&$[J+1]===">")return{kind:"comment",hasNewline:!1,endPos:J+2,text:$.slice(Z,J+2),raw:!0};while(J+2<G){if($.slice(J,J+3)==="-->")return{kind:"comment",hasNewline:!1,endPos:J+3,text:$.slice(Z,J+3),raw:!0};J++}return null}if(Z+9<=G&&$.slice(Z,Z+9)==="<![CDATA["){var J=Z+9;while(J+2<G){if($.slice(J,J+3)==="]]>")return{kind:"cdata",hasNewline:!1,endPos:J+3,text:$.slice(Z,J+3),raw:!0};J++}return null}if(Z+2<G&&M9($.charCodeAt(Z+2))){var J=Z+2;while(J<G&&$[J]!==">")J++;if(J>=G)return null;return{kind:"declaration",hasNewline:!1,endPos:J+1,text:$.slice(Z,J+1),raw:!0}}return null}if(X==="?"){var J=Z+2;while(J+1<G){if($.slice(J,J+2)==="?>")return{kind:"pi",hasNewline:!1,endPos:J+2,text:$.slice(Z,J+2),raw:!0};J++}return null}return e6($,Z)}function c$($,Z){if(Z>=$.length)return!1;var G=$[Z];return G==="="||G==="-"||G==="_"||G==="*"||G==="#"||G===">"||G==="`"||G==="~"||G==="["||G>="0"&&G<="9"}function z$($,Z){if(Z>=$.length)return!1;var G=$[Z];return G==='"'||G==="'"||G==="("}function $5($,Z,G){var X=$.length;if(Z>=X||$[Z]!==G)return null;Z++;var J=Z,Y=!1;while(Z<X&&$[Z]!==G){var V=$.charCodeAt(Z);if(V===o){if(Y)return null;Y=!0,Z++}else if(V===v0)if(Z+1<X&&$.charCodeAt(Z+1)===o){if(Y)return null;Y=!0,Z+=2}else Y=!1,Z++;else{if(Y=!1,V===G9&&Z+1<X)Z++;Z++}}if(Z>=X)return null;return{value:$.slice(J,Z),endPos:Z+1}}function Z5($,Z){var G=$.length;if(Z>=G||$[Z]!=="(")return null;Z++;var X=Z,J=1,Y=!1;while(Z<G&&J>0){var V=$.charCodeAt(Z);if(V===o){if(Y)return null;Y=!0,Z++}else if(V===v0)if(Z+1<G&&$.charCodeAt(Z+1)===o){if(Y)return null;Y=!0,Z+=2}else Y=!1,Z++;else{if(Y=!1,V===G9&&Z+1<G)Z++;else if(V===LZ)J++;else if(V===TZ)J--;Z++}}if(J!==0)return null;return{value:$.slice(X,Z-1),endPos:Z}}function J5($,Z){var G=$.length,X=Z;while(X<G){var J=X===0||$[X-1]===`
`,Y=$.charCodeAt(X);if(Y===o&&X>Z){var V=X+1;if(V<G&&$.charCodeAt(V)===v0)V++;if(V<G&&$.charCodeAt(V)===o){var K=V+1;while(K<G&&($[K]===" "||$[K]==="\t"))K++;var U=K-(X+1);if($.charCodeAt(X+1)===v0)U--;if(K<G&&$.charCodeAt(K)!==o&&$.charCodeAt(K)!==v0&&U<4)return X}}if(J&&U0($,"[^",X)){var Q=X+2;while(Q<G&&$[Q]!=="]")Q++;if(Q<G&&$[Q]==="]"&&Q+1<G&&$[Q+1]===":")return X}X++}return G}function X5($,Z,G){let X=$.length,J=Z,Y=J<X&&$[J]==="<";if(Y)J++;let V=J,K=V;if(V>=X){if(!Y)return null;K=V}else if(G>0&&V<X&&$[V]===`
`)return null;else while(K<X){if(Y&&$[K]===">")break;if($[K]===`
`){let b=K+1;if(b>=X)break;if(b<X&&$[b]===`
`)break;let R=b;while(R<X&&($[R]===" "||$[R]==="\t"))R++;if(R<X&&z$($,R))break;if(R<X&&$[R]==="[")break;if(R<X){let N=$[R];if(c$($,R))break;if(N>="a"&&N<="z"){let T=R+1;while(T<X&&T<R+32&&($[T]>="a"&&$[T]<="z"||$[T]>="A"&&$[T]<="Z"||$[T]>="0"&&$[T]<="9"||$[T]==="+"||$[T]==="."||$[T]==="-"))T++;if(T<X&&$[T]===":");else break}}K=R;continue}if(!Y&&($[K]===" "||$[K]==="\t")){let b=K+1;while(b<X&&($[b]===" "||$[b]==="\t"))b++;if(b<X&&z$($,b))break;if(b<X&&$[b]===`
`){let R=b+1;if(R<X&&$[R]===`
`)break;let N=R;while(N<X&&($[N]===" "||$[N]==="\t"))N++;if(N<X&&z$($,N))break}}K++}if(Y&&(K>=X||$[K]!==">"))return null;let U=$.slice(V,K),Q=[],H=0;for(let b=0;b<=U.length;b++)if(b===U.length||U[b]===`
`){let R=U.slice(H,b);if(R=R.trim(),R.length>0||Q.length===0){if(Q.push(R),b<U.length)Q.push(`
`)}else if(b<U.length)Q.push(`
`);H=b+1}U=Q.join(""),U=U.trim(),J=Y?K+1:K;var v=!1;if(J<X&&$[J]===`
`){var _=J+1,j=_;while(j<X&&($[j]===" "||$[j]==="\t"))j++;if(j<X){let b=$[j];if(c$($,j))v=!0;if(!v&&b!=="="&&b!=="-"){var O=C($,j);if(O<X){var z=p($,O),q=z;while(q<X&&($[q]===" "||$[q]==="\t"))q++;if(q<X){var D=$[q];if(D==="="||D==="-")v=!0}}}}}if(!v&&J<X&&z$($,J))return null;let M=0;while(J<X&&!v){let b=$[J];if(b===`
`){if(M++,M>1)break;J++;var W=J;if(J=n0($,J),J<X&&W9($[J])&&$[J]!==`
`){J=W-1;break}if(J<X){let R=$[J];if(c$($,J)){v=!0,J=W-1;break}}}else if(b===" "||b==="\t")J++;else if(W9(b))break;else break}let A=void 0;if(J<X){let b=$[J];var P=b==="("?Z5($,J):b==='"'||b==="'"?$5($,J,b):null;if(P===null&&(b==='"'||b==="'"||b==="("))return null;if(P){A=P.value,J=P.endPos;var w=J;while(w<X&&($[w]===" "||$[w]==="\t"))w++;if(w<X&&$[w]!==`
`&&$[w]!=="\r")return null;J=w}}if(J=n0($,J),J<X&&$[J]!==`
`){var x=J;while(x<X&&$[x]!==`
`){if($[x]!==" "&&$[x]!=="\t")return null;x++}}if(A===void 0&&J<X&&$[J]!==`
`){var S=J;while(S<X&&$[S]!==`
`){if($[S]!==" "&&$[S]!=="\t")return null;S++}}return{endPos:J<X&&$[J]===`
`?J+1:J,target:U,title:A}}function G5($,Z){let G=Z,X=J5($,Z),J=X<$.length&&$[X]===`
`&&$[X+1]===`
`,Y=X,V=Z;var K=[];let U=V,Q=0,H=!1;while(U<Y){let O=C($,U);if(O>Y)O=Y;if(Q===0){let z=O;while(z>U&&($[z-1]===" "||$[z-1]==="\t"))z--;let q=$.slice(U,z);K.push(q),H=q.length===0}else{let z=0,q=U;while(q<O&&q<U+4&&$[q]===" ")z++,q++;let D=!1;for(let W=U;W<O;W++)if($[W]!==" "&&$[W]!=="\t"&&$[W]!=="\r"){D=!0;break}let M=!D;if(z>=4&&H)K.push($.slice(U,O));else if(z===4&&!H)K.push($.slice(U+4,O));else K.push($.slice(U,O));H=M}if(O<Y){let z=y($,O);if(z===v0||z===o)K.push(`
`),U=p($,O);else U=Y}else U=Y;Q++}let v=K.join("");if(J)v=v.replace(/\n$/,"");var _=v.length;while(_>0){var j=v[_-1];if(j===`
`||j===" ")_--;else break}if(_<v.length)v=v.slice(0,_);return{endPos:X,target:v,title:void 0}}function L9($,Z,G,X,J){if($[Z]!=="[")return null;var Y=Z+1<$.length&&$[Z+1]==="^";if(J?!Y:Y)return null;var V=Z;while(V>0&&$[V-1]!==`
`)V--;if(_0($,V,Z).spaceEquivalent>=4||G.inline)return null;var K=Z+(J?2:1),U=$.length,Q=f6($,K,U,"]");if(Q===-1)return null;var H=$.slice(K,Q);if(H.length>999)return null;var v=!1,_=!1,j=!1;for(var O=0;O<H.length;O++){var z=H[O];if(z==="\\"&&O+1<H.length){O++;continue}var q=y(z);if(q===n1||q===A9)_=!0;else if(q===o||q===v0)j=!0;else if(q!==k&&q!==t)v=!0}if(!v||_)return null;var D=Q+1;if(j){var M=y($,K),W=y($,Q-1);if(M===o||M===v0||W===o||W===v0||D>=U||$[D]!==":")return null}else if(D>=U||$[D]!==":"){if(D=n0($,D),D<U&&y($,D)===o)D=n0($,D+1);if(D>=U||$[D]!==":")return null}D++;var A=0;while(D<U){var P=y($,D);if(P===o){if(++A>1)break;D=n0($,D+1)}else if(P===k||P===t)D++;else break}let w=J?G5($,D):X5($,D,A);if(!w)return null;let x=sZ(H),S=G.refs||{},b=J?`^${x}`:x;if(!S[b])S[b]={target:H$(w.target.trim()),title:w.title?H$(w.title):void 0},G.refs=S;return{type:J?F.footnote:F.ref,endPos:w.endPos}}function X6($,Z,G){var X=[],J=G===null?0:G+1;while(J<Z.length){var Y=Z[J];if(!Y||Y.type!=="*"&&Y.type!=="_"&&Y.type!=="~"&&Y.type!=="="){J++;continue}if(!Y.canClose||!Y.active){J++;continue}var V=Y.type==="*"?0:Y.type==="_"?1:Y.type==="~"?2:3,K=V*6+Y.length%3*2+(Y.canOpen?1:0),U=X[K]!==void 0?X[K]:G===null?-1:G,Q=-1,H=Y.type,v=Y.inAnchor,_=Y.canOpen,j=Y.length,O=j%3;for(var z=J-1;z>U;z--){var q=Z[z];if(!q||!q.active||q.type!==H||!q.canOpen||q.inAnchor!==v)continue;var D=q.length;if(!_&&!q.canClose||O===0||(D+j)%3!==0){Q=z;break}}if(Q>=0){var M=Z[Q],D=M.length,W=D>=2&&j>=2,A=W?2:1;if(A>D||A>j){J++;continue}var P=M.nodeIndex,w=Y.nodeIndex,x=P+1,S=w,b=$.slice(x,S);if(b.length>0){var R=S-x;$.splice(x,R);for(var N=0;N<Z.length;N++)if(Z[N].nodeIndex>x)Z[N].nodeIndex-=R;if(w>x)w-=R}var T=M.type==="~"?"del":M.type==="="?"mark":W?"strong":"em",f={type:F.textFormatted,tag:T,children:b},E=$[P];if(!E||!E.text){M.active=Y.active=!1;continue}var I=E.text.length<=A;if(I){$.splice(P,1);for(var N=0;N<Z.length;N++)if(Z[N].nodeIndex>P)Z[N].nodeIndex--;if(w>P)w--}else E.text=E.text.slice(A);var g=$[w];if(!g||!g.text){M.active=Y.active=!1;continue}var c=g.text.length<=A;if(c){$.splice(w,1);for(var N=0;N<Z.length;N++)if(Z[N].nodeIndex>w)Z[N].nodeIndex--}else g.text=g.text.slice(A);var L=I?P<w?w-1:P:P+1;if(L<0||L>$.length)L=L<0?0:$.length;$.splice(L,0,f);for(var N=0;N<Z.length;N++)if(Z[N].nodeIndex>=L)Z[N].nodeIndex++;for(var N=Q+1;N<J;N++)Z[N].active=!1;if(I)M.active=!1;else if(M.length-=A,M.length===0)M.active=!1;if(c)Y.active=!1,J++;else if(Y.length-=A,Y.length===0)Y.active=!1,J++}else{if(X[K]=J-1,!Y.canOpen)Y.active=!1;J++}}var Z0=0;for(var z=0;z<Z.length;z++)if(Z[z].active)Z[Z0++]=Z[z];Z.length=Z0}function UZ($,Z,G){var X=[],J=0,Y=-3,V=Y;if(Z.inline)return J9($,0,$.length,Z,G);if(J===0&&$.startsWith("---")){var K=r6($,J);if(K)X.push(K),J=K.endPos}while(J<$.length){while(J<$.length&&$[J]===`
`)J++;if(J>=$.length)break;V=Y;let v=$[J],_=o9($,J,Z,G);if(_){let D=_.type;if(D===F.codeBlock){var U=v==="`"||v==="~";if(!U&&(v===" "||v==="\t")){let M=C($,J),W=_0($,J,M);U=W.spaceEquivalent<=3&&J+W.charCount<$.length&&($[J+W.charCount]==="`"||$[J+W.charCount]==="~")}}else if(D===F.breakThematic);else if(D===F.blockQuote);else if(D===F.heading);else if(D===F.orderedList||D===F.unorderedList);else if(D===F.table);else if(D===F.htmlComment);else if(D===F.htmlBlock);else if(D===F.ref);if(_.type===F.htmlComment){X.push(_);let M=J;J=_.endPos;let W=C($,M);if(J<W){let A=$.slice(J,W);if(A.trim().length>0)X.push({type:F.text,text:A});if(J=W,J<$.length&&$[J]===`
`)J++}continue}if(_.type===F.htmlBlock||_.type===F.htmlSelfClosing)if(_.type===F.htmlSelfClosing&&_.isClosingTag===!0&&!Z.inline&&!Z.inHTML);else{X.push(_),J=_.endPos;continue}else{X.push(_),J=_.endPos;continue}}let j=V!==Y?V:J;if(V===Y){if(g1(v)){let D=C($,J),M=_0($,J,D),W=J+M.charCount;if(M.spaceEquivalent<=3&&W<$.length&&$[W]==="[")j=W;else j=-1}else if(v==="[")j=J;else j=-1;V=j}if(j>=0&&j+1<$.length&&$[j+1]==="^")j=-1;if(j>=0){let D=L9($,j,Z,G,!1);if(D){X.push(D),J=D.endPos;continue}let M=k6($,j,J===0);if(M.shouldSkip){J=M.newPos;continue}}let O=oZ($,J,Z,G);if(O){X.push(O),J=O.endPos;continue}let z=J;if(g1($[z])){let D=C($,J),M=_0($,J,D);z=J+M.charCount}if(z<$.length&&$[z]==="["&&z+1<$.length&&$[z+1]==="^"){let D=L9($,z,Z,G,!0);if(D){J=D.endPos;continue}}let q=e$($,J,Z,G);if(q){X.push(q),J=q.endPos;continue}J++}let Q=Z.refs||{},H={};for(let v in Q)H[v]=Q[v];if(U$(H))return[{type:F.refCollection,refs:H},...X];return X}function G6($,Z,G){var X=0,J=!0;let Y=$.length;while(X<Y){var V=0;while(X<Y&&y($,X)===o)V++,X++;if(X>=Y)break;if(V>0)J=!0;let W=y($,X);if(W===N1||W===_9){var K=VZ($,X,{inline:!1},G);if(K){X=K.endPos,J=!0;continue}}var U=X,Q=0;while(U<Y&&Q<4){let A=y($,U);if(A===k)Q++,U++;else if(A===t)Q+=4-Q%4,U++;else break}if(Q<4&&U<Y&&y($,U)===n1&&J)if(U+1<Y&&y($,U+1)===I9){J=!1;var D=C($,X);X=D>=Y?Y:p($,D);continue}else{var H=L9($,U,{inline:!1,refs:Z},G,!1);if(H){X=H.endPos,J=!0;continue}var D=C($,X),v=$.indexOf(":",U+1);if(v===-1||v>=D){var _=_0($,X,D);if(!p1($,X,D)&&W!==f9&&W!==K1&&W!==b1&&W!==X9&&_.spaceEquivalent<4)J=!1}X=D>=Y?Y:p($,D);continue}if(W===K1&&J){var j=X,O=[];while(j<Y){var D=C($,j),z=j;while(z<D){let P=y($,z);if(P===k||P===t)z++;else break}if(z>=D||y($,z)!==K1)break;var q=z+1;if(q<D&&(y($,q)===k||y($,q)===t))q++;O.push($.slice(q,D)),j=p($,D)}if(O.length){G6(O.join(`
`),Z,G),X=j,J=!0;continue}}var D=C($,X);if(D>=Y)X=Y;else{var M=p1($,X,D),_=_0($,X,D);X=p($,D),J=W===f9||W===K1||W===b1||W===X9||M||_.spaceEquivalent>=4}}}function L$($,Z){if($.charCodeAt(0)===65279)$=$.slice(1);$=t1($);let X={...{inline:!1,refs:{}}},J={...Z,slugify:Z?.slugify?(V)=>Z.slugify(V,f1):f1,sanitizer:Z?.sanitizer||H9,tagfilter:Z?.tagfilter!==!1};if(!X.inline)G6($,X.refs||{},J);return UZ($,X,J)}var{hasKeys:KZ}=K$;function K9($){if(!$)return $;var Z=!1,G=0,X=$.length;while(G<X){var J=$.charCodeAt(G);if(J===h1||J===O1||J===K1||J===D9){Z=!0;break}G++}if(!Z)return $;var Y="";G=0;var V=0;while(G<X){var J=$.charCodeAt(G),K=null;if(J===h1)K="&amp;";else if(J===O1)K="&lt;";else if(J===K1)K="&gt;";else if(J===D9)K="&quot;";if(K){if(G>V)Y+=$.slice(V,G);Y+=K,V=G+1}G++}if(V<X)Y+=$.slice(V);return Y}function QZ($){var Z=!1,G=0,X=$.length;while(G<X){var J=$.charCodeAt(G);if(J===h1||J===O1||J===K1||J===D9){Z=!0;break}G++}if(!Z)return $;return $.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&(?!([a-zA-Z0-9]+|#[0-9]+|#x[0-9a-fA-F]+);)/g,"&amp;")}function u1($={}){var Z=!1;for(var G in $){Z=!0;break}if(!Z)return"";var X="";for(var G in $){var J=$[G];if(J===void 0||J===null)continue;if(X+=" ",J===!0)X+=G;else if(J==="")X+=G+'=""';else if(G==="style"&&typeof J==="object"&&J!==null){var Y="",V=!0;for(var K in J){var U=J[K];if(U!=null){if(V)V=!1;else Y+="; ";var Q="";for(var H=0;H<K.length;H++){var v=K.charCodeAt(H);if(v>=y1&&v<=P1)Q+="-"+String.fromCharCode(v+J$);else Q+=K[H]}Y+=Q+": "+U}}if(Y)X+='style="'+QZ(Y)+'"'}else if(typeof J==="string")X+=G+'="'+QZ(J)+'"';else if(typeof J==="number")X+=G+'="'+J+'"'}return X}function t9($,Z,G,X){let J=e1($,G),Y=$9($,G);if(!X||!KZ(X)){let Q=u1(Y);return`<${J}${Q}>${Z}</${J}>`}var V={...Y};for(var K in X)V[K]=X[K];let U=u1(V);return`<${J}${U}>${Z}</${J}>`}function T$($,Z){return $.type===F.footnote||$.type===F.ref||$.type===F.frontmatter&&!Z}function M1($,Z={}){let G=Z.sanitizer||H9,X=Z.slugify||f1;var J=Z.refs||{},Y=Z.overrides||{},V={},K=[],U=!1;for(var Q=0;Q<$.length;Q++){var H=$[Q];if(H.type===F.refCollection&&!U){V=H.refs||{},U=!0;continue}if(T$(H,!!Z.preserveFrontmatter))continue;K.push(H)}for(var v in V)J[v]=V[v];var _={...Z,refs:J,overrides:Y};function j(B){var d="",m=0,s=B.length;while(m<s)if(B[m]==="%"&&m+2<s&&O(B.charCodeAt(m+1))&&O(B.charCodeAt(m+2)))d+=B[m]+B[m+1]+B[m+2],m+=3;else{var G0=B.charCodeAt(m);if(G0===G9)d+="%5C";else if(G0===N1)d+="%60";else d+=encodeURI(B[m]);m++}return d}function O(B){return B>=r1&&B<=s1||B>=R1&&B<=c1||B>=y1&&B<=AZ}function z(B){var d=G(B,"a","href");if(d===null||d===B)return d;return j(d)}function q(B,d){var m=B||{};if(KZ(d)){m={...m};for(var s in d)m[s]=d[s]}return m}function D(B){return B.length?M1(B,_):""}function M(B,d={}){if(!B||typeof B!=="object")return"";if(B.type===F.ref||B.type===F.refCollection||T$(B,!!Z.preserveFrontmatter))return"";switch(B.type){case F.blockQuote:{var m=B.children?M1(B.children,_):"";if(B.alert)return m=`<header>${K9(B.alert)}</header>`+m,t9("blockquote",m,Y,{class:"markdown-alert-"+X(B.alert.toLowerCase(),f1)});return t9("blockquote",m,Y)}case F.breakLine:return"<br />";case F.breakThematic:return"<hr />";case F.frontmatter:return"<pre>"+K9(B.text)+"</pre>";case F.codeBlock:{var s=B.attrs||{};if(B.lang){s={...s};let r=V9(B.lang),N0=s.class||s.className||"";s.class=N0?N0+" language-"+r:"language-"+r,delete s.className}let h=u1(s),A0=B.text||"";return`<pre><code${h}>${K9(A0)}</code></pre>`}case F.codeInline:return"<code>"+K9(B.text||"")+"</code>";case F.footnoteReference:{let h=G(B.target||"","a","href")||"",A0=K9(B.text||"");return`<a href="${K9(h)}"><sup>${A0}</sup></a>`}case F.gfmTask:return"<input"+(B.completed?' checked=""':"")+' disabled="" type="checkbox">';case F.heading:{let h=B.level||1,A0=B.id?.trim()?{id:B.id}:void 0;return t9("h"+h,B.children?M1(B.children,_):"",Y,A0)}case F.htmlComment:{let h=B;if(h.raw)return h.text;if(h.endsWithGreaterThan)return`<!--${B.text}>`;return`<!--${B.text}-->`}case F.htmlBlock:{let h=B,A0=h.tag||"div",r=e1(A0,Y),N0=$9(A0,Y);var G0;if(h.rawAttrs!==void 0){let J1=h.rawAttrs;G0=(J1.length>0&&!/^[\s]/.test(J1)?" ":"")+J1+(KZ(N0)?" "+u1(N0).trim():"")}else G0=u1(q(h.attrs,N0));if(Z.tagfilter&&u9(r))return h.isClosingTag?`&lt;/${r}>`:`&lt;${r}${G0}>`;if(h.rawText){if(h.verbatim){var a=Z.tagfilter?l9(h.rawText):h.rawText;if(h.isClosingTag)return`</${r}>${a}`;var l=r.toLowerCase(),v1=l==="pre"||l==="script"||l==="style"||l==="textarea";if(v1){var K0=h.rawText.length,w0=0;while(w0<K0&&h.rawText.charCodeAt(w0)===k)w0++;if(w0<K0&&h.rawText.charCodeAt(w0)===O1){var b0=h.rawText.indexOf(">",w0);if(b0!==-1){var Y0=h.rawText.slice(w0,b0+1);if(Y0.charCodeAt(1)>=R1&&Y0.charCodeAt(1)<=x1){var g0=1,H0=g0;while(H0<Y0.length&&Y0.charCodeAt(H0)>=R1&&Y0.charCodeAt(H0)<=x1)H0++;var C0=Y0.slice(g0,H0).toLowerCase();if(C0===l){var L1=h.rawText.slice(b0+1);return Y0+(Z.tagfilter?l9(L1):L1)}}}}var J0="</"+l+">",q0=h.rawText.indexOf(J0)!==-1;return q0?`<${r}${G0}>${a}`:`<${r}${G0}>${a}</${r}>`}var M0=h.rawText.trim();if(M0.length>0&&M0.charCodeAt(0)===O1){var x0=M0.charCodeAt(1);if(x0>=R1&&x0<=x1||x0>=y1&&x0<=P1){var g0=1,H0=g0;while(H0<M0.length){var i=M0.charCodeAt(H0);if(i>=R1&&i<=x1||i>=y1&&i<=P1||i>=r1&&i<=s1||i===b1)H0++;else break}var C0=M0.slice(g0,H0).toLowerCase();if(C0===l)return a}}var O0=0;while(O0<a.length&&a.charCodeAt(O0)===k)O0++;return`<${r}${G0}>${O0>0?a.slice(O0):M0?a:""}`}var a=Z.tagfilter?l9(h.rawText):h.rawText;return`<${r}${G0}>${a}</${r}>`}let Z1=h.children?M1(h.children,_):"";if(h.isClosingTag)return`</${r}>${Z1}`;return Z1.trim()?`<${r}${G0}>${Z1}</${r}>`:`<${r}${G0}>${Z1}`}case F.htmlSelfClosing:{let h=B,A0=h.tag||"div",r=e1(A0,Y);if(h.rawText)return Z.tagfilter&&u9(r)?h.rawText.replace(/^</,"&lt;"):h.rawText;if(h.isClosingTag)return`</${r}>`;let N0=$9(A0,Y),Z1=q(h.attrs,N0),J1=u1(Z1);if(Z.tagfilter&&u9(r))return`&lt;${r}${J1} />`;return`<${r}${J1} />`}case F.image:{let h=e1("img",Y),A0=$9("img",Y),r=G(B.target||"","img","src")||"";var L0={...A0,alt:B.alt||""};if(B.title)L0.title=B.title;return`<${h} src="${K9(r)}"${u1(L0)} />`}case F.link:{let h=e1("a",Y);var L0={...$9("a",Y)};if(B.target!=null){let N0=z(j(V9(B.target)));if(N0!=null)L0.href=N0}if(B.title)L0.title=V9(B.title);return`<${h}${u1(L0)}>${B.children?M1(B.children,_):""}</${h}>`}case F.table:{let h=B,A0=h.align||[];var V0="",X0=h.header||[];for(var e=0;e<X0.length;e++){var k0=A0[e];V0+="<th"+(k0?` align="${k0}"`:"")+">"+M1(X0[e],_)+"</th>"}var d0="",_1=h.cells||[];for(var z1=0;z1<_1.length;z1++){var j1=_1[z1]||[];d0+="<tr>";for(var D1=0;D1<j1.length;D1++){var k0=A0[D1];d0+="<td"+(k0?` align="${k0}"`:"")+">"+M1(j1[D1],_)+"</td>"}d0+="</tr>"}let r=e1("table",Y),N0=u1($9("table",Y));return`<${r}${N0}><thead><tr>${V0}</tr></thead>${d0?`<tbody>${d0}</tbody>`:""}</${r}>`}case F.text:{var D0=B.text||"";if(!D0)return D0;var t0=!1,W0=0,Y1=D0.length;while(W0<Y1){var i=D0.charCodeAt(W0);if(i===h1||i===O1||i===K1||i===D9){t0=!0;break}W0++}if(!t0)return D0;var I0="";W0=0;var T0=0;while(W0<Y1){var i=D0.charCodeAt(W0),s0=null;if(i===h1)s0="&amp;";else if(i===O1)s0="&lt;";else if(i===K1)s0="&gt;";else if(i===D9)s0="&quot;";if(s0){if(W0>T0)I0+=D0.slice(T0,W0);I0+=s0,T0=W0+1}W0++}if(T0<Y1)I0+=D0.slice(T0);return I0}case F.textFormatted:return t9(B.tag||"strong",B.children?M1(B.children,_):"",Y);case F.orderedList:case F.unorderedList:{var T1="",A1=B.items||[];for(var $0=0;$0<A1.length;$0++)T1+="<li>"+M1(A1[$0],_)+"</li>";let h=B.type===F.orderedList?"ol":"ul",A0=B.type===F.orderedList&&B.start!=null&&B.start!==1?{start:B.start}:void 0;return t9(h,T1,Y,A0)}case F.paragraph:{var $1={..._,refs:{},wrapper:null};if(Z.forceInline)return B.children?M1(B.children,$1):"";var m=B.children?M1(B.children,$1):"",q1=!1;for(var i0=0;i0<m.length-1;i0++)if(m.charCodeAt(i0)===k&&m.charCodeAt(i0+1)===o){q1=!0;break}if(q1){var I0="",W0=0,Y1=m.length,C1=!1,F1=0;while(W0<Y1){var i=m.charCodeAt(W0);if(i===O1)C1=!0,F1=0;else if(i===K1)C1=!1,F1=0;else if(C1&&i===D9)F1++;if(i===k&&W0+1<Y1&&m.charCodeAt(W0+1)===o){if(C1&&F1%2===1)I0+=` 
`;else I0+=`
`;W0+=2}else I0+=m[W0],W0++}m=I0}let A0=u1($9("p",Y)),r=e1("p",Y),N0=B;var S1="";if(N0.removedClosingTags?.length)for(var l1=0;l1<N0.removedClosingTags.length;l1++)S1+=M(N0.removedClosingTags[l1],d);return`<${r}${A0}>${m}</${r}>${S1}`}default:return""}}function W(B,d={}){if(!B||typeof B!=="object")return"";if(Z.renderRule)return Z.renderRule(()=>{if(B.type===F.ref||B.type===F.refCollection||T$(B,!!Z.preserveFrontmatter))return"";return M(B,d)},B,D,d);if(B.type===F.ref||B.type===F.refCollection||T$(B,!!Z.preserveFrontmatter))return"";return M(B,d)}var A="";if(Array.isArray($))for(var P=0;P<K.length;P++)A+=W(K[P],{key:P,refs:J});else A=W($,{refs:J});var w="";for(var v in J)if(v.charCodeAt(0)===I9){if(!w)w="<footer>";let d=v.slice(1),m=UZ(J[v].target,{inline:!0,refs:J},{..._,overrides:_.overrides,sanitizer:G,slugify:(G0)=>X(G0,f1),tagfilter:_.tagfilter!==!1});var x=[];for(var S=0;S<m.length;S++)if(m[S].type!==F.refCollection)x.push(m[S]);let s=M1(x,{..._,refs:{},forceInline:!0,wrapper:null});w+=`<div id="${QZ(X(d,f1))}">${K9(d)}: ${s}</div>`}if(w)w+="</footer>";if(Z.wrapper===null)return A+w;let b=K.length>1,R=Z.wrapper!=null,N=R&&typeof Z.wrapper==="string";if(!(Z.forceWrapper||Z.forceInline&&R||b&&R))return A+w;var f=A;if(Z.forceInline||Z.forceWrapper&&N&&!Z.wrapperWasAutoSet){if(!b&&K.length===1&&K[0].type===F.paragraph){let B=K[0];if(B.children)f=M1(B.children,{..._,refs:{},forceInline:!0,wrapper:null})}}let E=typeof Z.wrapper==="string"?Z.wrapper:Z.forceInline?"span":"div";var I="";if(Z.wrapperProps){var g={};for(var c in Z.wrapperProps){var L=Z.wrapperProps[c];if(L!=null){var Z0=G(String(L),E,c);if(Z0!==null)g[c]=Z0}}I=u1(g)}return`<${E}${I}>${f+w}</${E}>`}function V5($,Z){let G=Z?.forceInline||!1,X={...Z,overrides:Z?.overrides,sanitizer:Z?.sanitizer,slugify:Z?.slugify?(H)=>Z.slugify(H,f1):f1,tagfilter:Z?.tagfilter!==!1},J=L$($,{...X,forceInline:G}),Y={...Z,forceInline:G};var V=!1;if(Z?.wrapper===void 0){var K=0;for(var U=0;U<J.length;U++){var Q=J[U];if(Q.type!==F.refCollection&&Q.type!==F.footnote&&Q.type!==F.ref&&(Q.type!==F.frontmatter||!Z?.preserveFrontmatter))K++}if(K>1||Z?.forceWrapper)Y.wrapper="div",V=!0;else if(G&&K>0)Y.wrapper="span",V=!0}return Y.wrapperWasAutoSet=V,M1(J,Y)}

//# debugId=5BDB60F27787B31764756E2164756E21
//# sourceMappingURL=html.js.map
