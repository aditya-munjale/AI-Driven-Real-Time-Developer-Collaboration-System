var eZ=Object.defineProperty;var $6=($,Z)=>{for(var Y in Z)eZ($,Y,{get:Z[Y],enumerable:!0,configurable:!0,set:(G)=>Z[Y]=()=>G})};import*as H1 from"react";var C=32,l=9,V0=13,d=10,t0=96,t1=126,g1=91,D9=94,C1=62,T9=35,V5=37,D1=45,d1=61,k1=92,S9=42,e1=95,j9=60,E9=64,H9=93,F9=33,x9=38,P9=58,U5=70,i1=102,c1=104,x1=119,r9=116,w$=112,zZ=115,_Z=160,qZ=12;var I9=46,$9=47;var Q5=34,DZ=43,jZ=124,HZ=123;var FZ=40,OZ=41,B$=120,N$=88,Z9=48,G9=57,m1=65,h1=90,a1=97,r1=122,X1=128,WZ=32;var Z6={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},W=Z6;var x$={};$6(x$,{startsWith:()=>c,slugify:()=>K1,skipWhitespace:()=>g0,shouldFilterTag:()=>$$,sanitizer:()=>X9,parseFrontmatterBounds:()=>R$,normalizeInput:()=>p1,normalizeCRLF:()=>q6,isVoidElement:()=>K9,isUnicodeWhitespace:()=>V9,isUnicodePunctuation:()=>t9,isAlnumCode:()=>o9,isASCIIWhitespace:()=>g9,isASCIIPunctuation:()=>Q6,inlineCharTypeTable:()=>f9,includes:()=>X6,htmlAttrsToJSXProps:()=>s9,hasKeys:()=>e9,getTag:()=>D6,getOverrideProps:()=>j6,get:()=>E$,findLineEnd:()=>I,extractPlainText:()=>wZ,endsWith:()=>n9,decodeEntityReferences:()=>M9,charClassTable:()=>W9,applyTagFilterToText:()=>Z$,VOID_ELEMENTS:()=>b$,SHOULD_RENDER_AS_BLOCK_R:()=>L$,SANITIZE_R:()=>O9,NAMED_CODES_TO_UNICODE:()=>J6,HTML_TO_JSX_MAP:()=>AZ,HTML_CHAR_CODE_R:()=>vZ,ATTRIBUTES_TO_SANITIZE:()=>T$});import{NAMED_CODES_TO_UNICODE as G6,decodeEntity as Y6}from"#entities";function R$($){if(!c($,"---"))return null;let Z=3;while(Z<$.length&&($[Z]===" "||$[Z]==="\t"))Z++;if(Z<$.length&&$[Z]==="\r")Z++;if(Z>=$.length||$[Z]!==`
`)return null;Z++;let Y=!1;while(Z<$.length){let G=Z;while(Z<$.length&&$[Z]!==`
`&&$[Z]!=="\r")Z++;if(Z>=$.length)break;let J=Z;if($[Z]==="\r")Z++;if(Z<$.length&&$[Z]===`
`)Z++;if(c($,"---",G))return{endPos:Z,hasValidYaml:Y};let X=$.indexOf(":",G);if(X!==-1&&X<J)Y=!0}return null}var J6=G6,vZ=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,AZ={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"};function s9($){var Z={};for(var Y in $){var G=Y.toLowerCase(),J=AZ[G];Z[J||Y]=$[Y]}return Z}var L$=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/;function M9($){if($.indexOf("&")===-1)return $;return $.replace(vZ,(Z,Y)=>{var G=Y6(Y);if(G)return G;if(Y[0]==="#"){var J=Y[1]==="x"||Y[1]==="X"?parseInt(Y.slice(2),16):parseInt(Y.slice(1),10);if(J===0||J>=55296&&J<=57343||J>1114111)return"�";return J<=65535?String.fromCharCode(J):String.fromCharCode(55296+(J-65536>>10),56320+(J-65536&1023))}return Z})}var O9=/(javascript|vbscript|data(?!:image)):/i;function X9($){if(O9.test($))return null;if($.indexOf("%")===-1)return $;try{let Z=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(O9.test(Z))return null}catch(Z){return null}return $}var c0={},e0,x0;e0=[192,193,194,195,196,197,224,225,226,227,228,229,230,198];for(x0=0;x0<e0.length;x0++)c0[e0[x0]]="a";c0[231]=c0[199]="c";c0[240]=c0[208]="d";e0=[200,201,202,203,233,232,234,235];for(x0=0;x0<e0.length;x0++)c0[e0[x0]]="e";e0=[207,239,206,238,205,237,204,236];for(x0=0;x0<e0.length;x0++)c0[e0[x0]]="i";c0[209]=c0[241]="n";e0=[248,216,339,338,213,245,212,244,211,243,210,242];for(x0=0;x0<e0.length;x0++)c0[e0[x0]]="o";e0=[220,252,219,251,218,250,217,249];for(x0=0;x0<e0.length;x0++)c0[e0[x0]]="u";c0[376]=c0[255]=c0[221]=c0[253]="y";function o9($){return $>=Z9&&$<=G9||$>=m1&&$<=h1||$>=a1&&$<=r1}function K1($){var Z=[];for(var Y=0;Y<$.length;Y++){var G=$.charCodeAt(Y);if(o9(G))if(G>=m1&&G<=h1)Z.push(String.fromCharCode(G+WZ));else Z.push($[Y]);else if(G===C||G===D1)Z.push("-");else{var J=c0[G];if(J)Z.push(J)}}return Z.join("")}function X6($,Z){return $.indexOf(Z)!==-1}function c($,Z,Y){return $.startsWith(Z,Y)}function n9($,Z,Y){return $.startsWith(Z,(Y===void 0?$.length:Y)-Z.length)}var b$=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","animateTransform","set"]);function K9($){let Z=$.toLowerCase();if(b$.has(Z))return!0;let Y=Z.indexOf(":");if(Y!==-1)return Z=Z.slice(Y+1),b$.has(Z);return!1}var T$=["src","href","data","formAction","srcDoc","action"],S$=1,J9=2,MZ=1,K6=2,V6=3,U6=4,W9=function(){let $=new Uint8Array(128),Z;$[l]=$[d]=$[qZ]=$[V0]=$[C]=S$;for(Z=F9;Z<=$9;Z++)$[Z]=J9;for(Z=P9;Z<=E9;Z++)$[Z]=J9;for(Z=g1;Z<=t0;Z++)$[Z]=J9;for(Z=HZ;Z<=t1;Z++)$[Z]=J9;return $}(),f9=function(){let $=new Uint8Array(128);return $[k1]=K6,$[g1]=U6,$[S9]=$[e1]=$[t1]=$[d1]=V6,$[t0]=$[j9]=$[E9]=$[H9]=$[d]=$[C]=$[F9]=MZ,$[i1]=$[c1]=$[x1]=MZ,$}();function Q6($){return $<X1&&(W9[$]&J9)!==0}function g9($){return $<X1&&(W9[$]&S$)!==0}var z6=/[\p{P}\p{S}]/u,_6=/\p{Zs}/u;function V9($){if(!$)return!0;let Z=$.charCodeAt(0);return Z<X1?(W9[Z]&S$)!==0:_6.test($)}function t9($){if(typeof $==="number")return $<X1&&(W9[$]&J9)!==0;if(!$)return!1;let Z=$.charCodeAt(0);return Z<X1?(W9[Z]&J9)!==0:z6.test($)}function I($,Z){let Y=$.indexOf(`
`,Z);if(Y===-1)return $.length;if(Y>0&&$.charCodeAt(Y-1)===V0)return Y-1;return Y}var Y9=[];function p1($){var Z=$.indexOf("\r"),Y=$.indexOf("\x00");if(Z===-1&&Y===-1)return $;var G=$.length;Y9.length=0;var J=0,X=0;if(Z===-1)X=Y;else if(Y===-1)X=Z;else X=Z<Y?Z:Y;for(;X<G;X++){var K=$.charCodeAt(X);if(K===V0){if(J<X)Y9.push($.slice(J,X));if(X+1<G&&$.charCodeAt(X+1)===d)X++;Y9.push(`
`),J=X+1}else if(K===0){if(J<X)Y9.push($.slice(J,X));Y9.push("�"),J=X+1}}if(J<G)Y9.push($.slice(J));return Y9.join("")}function q6($){return p1($)}function g0($,Z,Y){let G=Y??$.length;while(Z<G&&($[Z]===" "||$[Z]==="\t"))Z++;return Z}function e9($){if(!$)return!1;for(var Z in $)return!0;return!1}function E$($,Z,Y){var G=$,J=Z.split("."),X=0;while(X<J.length){if(G=G?.[J[X]],G===void 0)break;X++}return G||Y}function D6($,Z){if(!Z)return $;let Y=E$(Z,$,void 0);if(typeof Y==="string")return Y;if(typeof Y==="object"&&Y.component)return Y.component;return $}function j6($,Z){if(!Z)return{};let Y=E$(Z,$,void 0);return typeof Y==="object"&&Y.props?Y.props:{}}function wZ($,Z){var Y="";for(var G=0,J=$.length;G<J;G++){var X=$[G],K=X.type;if(K===Z.text||K===Z.codeInline){var Q=X.text;if(Q)Y+=Q}else if(K===Z.textFormatted||K===Z.link){if(X.children)Y+=wZ(X.children,Z)}else if(K===Z.image){if(X.alt)Y+=X.alt}}return Y}function $$($){var Z=$.toLowerCase();return Z==="title"||Z==="textarea"||Z==="style"||Z==="xmp"||Z==="iframe"||Z==="noembed"||Z==="noframes"||Z==="script"||Z==="plaintext"}function Z$($){return $.replace(/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi,function(Z,Y,G,J){return"&lt;"+Y+G+J})}function H6($){console.warn($)}function A9($,Z,Y,G){var J=b(Y),X=$.length,K=G??X-Z,Q=0;while(Q<K&&Z+Q<X&&b($,Z+Q)===J)Q++;return Q}function BZ($,Z,Y,G,J){if(J===0?Y>=G:Z<=G)return!1;let X=J===0?$[Y]:$[Z-1],K=J===0?Z>0?$[Z-1]:null:Y<$.length?$[Y]:null;var Q=b(X);if(Q<X1?g9(Q):V9(X))return!1;var V=K?b(K):null,U=K===null||K===`
`||K==="\r"||(V!==null?V<X1?g9(V):V9(K):!0),H=q$(Q,X);if(!H)return!0;if(U)return!0;return K?q$(b(K),K):!1}function Q$($){var Z="",Y=0;while(Y<$.length)if($[Y]==="\\"&&Y+1<$.length){var G=$[Y+1];Z+=t9(b(G))?G:"\\"+G,Y+=2}else Z+=$[Y++];return M9(Z)}function k($,Z){if(Z>=$.length)return Z;if($.charCodeAt(Z)===V0&&Z+1<$.length&&$.charCodeAt(Z+1)===d)return Z+2;if($.charCodeAt(Z)===d)return Z+1;return Z+1}function F6($,Z){if($>=X1)return 0;var Y=f9[$];if(Z&&Y===1&&($===i1||$===c1||$===x1))return 0;return Y}function O6($,Z,Y,G,J,X){if(!Y.length||Y[Y.length-1].type!==W.blockQuote)return null;let K=g0(G,0,G.length);if(K>=G.length||G[K]!==">")return null;let Q=uZ($,Z,J,X);if(!Q)return null;let V=Y[Y.length-1],U=Q;if(U.children)V.children.push(...U.children);return U.endPos}function z$($,Z,Y,G){return{type:W.heading,level:$,children:Z,id:G(Y)}}var h$=/\\(.)/g,W6=/\s+#+\s*$/,o$=/^(?:(\d{1,9})([.)])\s+(.*)$|(\d{1,9})([.)])\s*$|([-*+])\s+(.*)$|([-*+])\s*$)/,p$=/^(\d{1,9})([.)])(\s+|$)/,u$=/^([*+\-])(\s+|$)/,H$=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/i,gZ=/^<([a-z][^ >/]*) ?(?:[^>/]+[^/]|)>/i,b=function($,Z=0){return $.charCodeAt(Z)},_$=function($){return o9(b($))},l$=function($){return g9(b($))},j1=function($){return $===" "||$==="\t"},C9=function($){return $===" "||$==="\t"||$===`
`||$==="\r"},q$=function($,Z){return t9($<X1?$:Z)},M6=function($){var Z=b($);return _$($)||Z===D1||Z===e1||Z===P9||Z===I9};function d$($,Z){var Y=$.length;if(Z>=Y)return null;var G=b($[Z]);if(!U9(G))return null;var J=Z,X=Z;while(X<Y){var K=b($[X]);if(K>=a1&&K<=r1||K>=m1&&K<=h1||K>=Z9&&K<=G9||K===D1)X++;else{var Q=b($[X]);if(Q===C||Q===l||Q===d||Q===V0||Q===C1||Q===$9)break;else return null}}if(X===J)return null;var V=$.slice(J,X);for(var U=0;U<V.length;U++){var K=b(V[U]);if(!(K>=a1&&K<=r1||K>=m1&&K<=h1||K>=Z9&&K<=G9||K===D1))return null}return{tagName:V,tagLower:V.toLowerCase(),nextPos:X}}function o1($,Z){var Y=U$($,Z);if(!Y||Y.kind!=="tag")return null;return{tagName:Y.tagName||"",tagLower:Y.tagNameLower||"",attrs:Y.attrs||"",endPos:Y.endPos,isClosing:Y.isClosing||!1,isSelfClosing:Y.isSelfClosing||!1,hasNewline:Y.hasNewline,hasSpaceBeforeSlash:!1,whitespaceBeforeAttrs:Y.whitespaceBeforeAttrs||""}}function v6($,Z,Y){var G=1,J=Z;while(G>0&&J<$.length){var X=$.indexOf("<",J);if(X===-1)return null;var K=o1($,X);if(!K){J=X+1;continue}if(K.isClosing&&K.tagLower===Y&&--G===0)return[X,K.endPos];if(!K.isClosing&&!K.isSelfClosing&&K.tagLower===Y)G++;J=K.endPos}return null}var A6=/^\{.*\}$/,F$=/\n\n/,O$=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m,w6=/<\/?(?:pre|script|style|textarea)\b/i,CZ=/^<[A-Z]/,B6=/\n$/,N6=new Set(["#",">","-","*","+","`","|","0","1","2","3","4","5","6","7","8","9"]);function y6($,Z,Y,G){let J=Z;while(J<Y){if($[J]==="\\"&&J+1<Y){J+=2;continue}if($[J]===G)return J;J++}return-1}function NZ($,Z){var Y=Z.indexOf(":");if(Y>0){var G=Z.slice(Y+1).trim(),J=G.length;if(J>=2){var X=G[0];if((X==='"'||X==="'")&&G[J-1]===X)G=G.slice(1,-1)}$.push([Z.slice(0,Y).trim(),G])}}function b6($){var Z=[];if(!$)return Z;var Y="",G=0,J="";for(var X=0;X<$.length;X++){var K=$[X];if(K==='"'||K==="'"){if(!J)J=K,G++;else if(K===J)J="",G--}else if(K==="("&&n9(Y,"url"))G++;else if(K===")"&&G>0)G--;else if(K===";"&&G===0){NZ(Z,Y),Y="";continue}Y+=K}return NZ(Z,Y),Z}function R6(tag,key,value,sanitizeUrlFn,options){if(key==="style")return b6(value).reduce(function($,[Z,Y]){let G=sanitizeUrlFn(Y,tag,Z);if(G!=null)$[Z.replace(/(-[a-z])/g,(J)=>J[1].toUpperCase())]=G;return $},{});if(value.match(A6)){if(value=value.slice(1,value.length-1),value=value?value.replace(h$,"$1"):value,value.length>0){let $=value[0];if($==="["||$==="{")try{return JSON.parse(value)}catch(Z){return value}}if(value==="true")return!0;if(value==="false")return!1;if(options.evalUnserializableExpressions)try{return eval(`(${value})`)}catch($){return value}return value}if(T$.indexOf(key)!==-1)return sanitizeUrlFn(value?value.replace(h$,"$1"):value,tag,key);return value==="true"?!0:value==="false"?!1:value}function u1($,Z,Y,G){let J={};if(!$||!$.trim())return J;let X=[],K=0,Q=$.length;while(K<Q){while(K<Q&&C9($[K]))K++;if(K>=Q)break;let H=K;while(K<Q&&M6($[K]))K++;if(K===H){K++;continue}let M=$.slice(H,K);while(K<Q&&C9($[K]))K++;if(K>=Q||$[K]!=="="){X.push(M);continue}K++;while(K<Q&&C9($[K]))K++;if(K>=Q){X.push(M+"=");break}let z=K,q=$[K];if(q==='"'||q==="'"){K++;while(K<Q){if($[K]===q){if(K+1>=Q){K++;break}let F=$[K+1];if(C9(F)||F==="/"){K++;break}}K++}}else if(q==="{"){let F=1;K++;while(K<Q&&F>0){if($[K]==="{")F++;else if($[K]==="}"){if(F--,F===0){K++;break}}K++}}else while(K<Q&&!C9($[K]))K++;X.push(M+"="+$.slice(z,K))}if(!X?.length)return J;let V=Z.toLowerCase();for(let H=0;H<X.length;H++){let M=X[H],z=M.indexOf("=");if(z!==-1){let q=M.slice(0,z).trim(),F=q.toLowerCase();if(F==="ref")continue;let _=M.slice(z+1).trim(),j=((D)=>{let O=D[0];if((O==='"'||O==="'")&&D.length>=2&&D[D.length-1]===O)return D.slice(1,-1);return D})(_);if(F==="href"&&V==="a"||F==="src"&&V==="img"){let D=G.sanitizer(j,V,F);if(D==null){H6(`Stripped unsafe ${F} on <${Y}>`);continue}J[q]=D}else{let D=R6(V,F,j,G.sanitizer,G);J[q]=D}}else if(M!=="style")J[M]=!0}if($.indexOf("%")!==-1)try{if(O9.test(decodeURIComponent($)))for(var U in J)delete J[U]}catch(H){}else if(O9.test($))for(var U in J)delete J[U];return J}var p9=function($){return N6.has($)};function L6($,Z,Y){let G=Z+1;while(G<$.length&&$[G]!=="]"){if($[G]==="\\"&&G+1<$.length){G+=2;continue}G++}if(G>=$.length)return{shouldSkip:!1,newPos:0};let J=Z+1,X=G,K=J<X&&($[J]===`
`||$[J]==="\r"),Q=X>J&&($[X-1]===`
`||$[X-1]==="\r"),V=G+1;if(V=g0($,V),V>=$.length||$[V]!==":")return{shouldSkip:!1,newPos:0};if((K||Q)&&Y){let U=V+1;if(U=g0($,U),U<$.length&&$[U]===`
`)U=g0($,U+1);while(U<$.length&&$[U]!==`
`)U++;if(U<$.length)U++;return{shouldSkip:!0,newPos:U}}return T6($,V)}function T6($,Z){let Y=Z+1;if(Y=g0($,Y),Y<$.length&&$[Y]===`
`)Y=g0($,Y+1);while(Y<$.length&&$[Y]!==`
`)Y++;if(Y>=$.length)return{shouldSkip:!1,newPos:0};Y++;let G=g0($,Y);if(G>=$.length||$[G]!=='"'&&$[G]!=="'")return{shouldSkip:!1,newPos:0};let J=$[G],X=G+1;while(X<$.length&&$[X]!==J&&$[X]!==`
`){if($[X]==="\\"&&X+1<$.length){X+=2;continue}X++}if(X>=$.length||$[X]!==J)return{shouldSkip:!1,newPos:0};let K=g0($,X+1);if(K<$.length&&$[K]!==`
`&&$[K]!=="\r")return{shouldSkip:!0,newPos:Y};return{shouldSkip:!1,newPos:0}}function kZ($){for(var Z=0;Z<$.length;Z++){var Y=$[Z];if(Y.type===W.link)return!0;if(Y.type===W.textFormatted){var G=Y;if(G.children&&kZ(G.children))return!0}}return!1}function i$($){var Z="";for(var Y=0,G=$.length;Y<G;Y++){var J=$[Y],X=J.type;if(X===W.text)Z+=J.text;else if(X===W.image){var K=J;if(K.alt)Z+=K.alt}else if(X===W.textFormatted){var Q=J;if(Q.children)Z+=i$(Q.children)}else if(X===W.link){var V=J;if(V.children)Z+=i$(V.children)}}return Z}var S6=new Set([" ","\t","\r",`
`,"\f","\v"]);function l1($,Z,Y,G,J){var X=[],K=[],Q=[],V=Z,U=Z,H=J.disableAutoLink||G.inAnchor,M=!1,z=!!G.inAnchor,q=!!J.disableParsingRawHTML,F=J.optimizeForStreaming,_=-1,j=-1,D=[],O=function(f0,J1){if(F&&G.inHTML)return!1;if(!z&&(!J1||!J.disableAutoLink)){var y0=I$($,V,G,J,"<");if(y0)return v(V),X.push(y0),V=y0.endPos,U=V,!0}if(q)return!1;var n1=M$($,V,G,J);if(n1){v(V);var c9=X.length;if(X.push(n1),D)D.push(c9);return V=n1.endPos,U=V,!0}if(F&&j===-1){if(V+1<Y){var Z0=b($,V+1);if(Z0>=m1&&Z0<=h1||Z0>=a1&&Z0<=r1||Z0===$9||Z0===F9)j=V}}if(!f0)return!1;var G0=o1($,V);if(!G0)return!1;var E1=V+(G0.isClosing?2:1);if(E1>=$.length||j1($[E1]))return!1;var v1=$.indexOf(">",V+1);if(v1!==-1){var G1=V+1,y9=v1-G1;if(y9>=7){var n=c($,"http://",G1);if(n||c($,"https://",G1)){for(var S0=G1;S0<v1;S0++)if(j1($[S0]))return!1}}}var b0=b($,E1);if(U9(b0)&&E1+1<$.length&&$[E1+1]===":")return!1;if(G0.isClosing&&G0.attrs.trim().length)return!1;if(G0.attrs.length){var U0=!1,u="";for(var _0=0;_0<G0.attrs.length;_0++){var n0=G0.attrs[_0];if(U0&&n0===u)U0=!1;else if(!U0&&(n0==='"'||n0==="'"))U0=!0,u=n0;else if(n0==="*"||n0==="#"||n0==="!"){var E0=_0+1;while(E0<G0.attrs.length&&G0.attrs[E0]!=="="&&G0.attrs[E0]!==" "&&G0.attrs[E0]!=="\t")E0++;if(E0<G0.attrs.length&&G0.attrs[E0]==="=")return!1}}}var X0=$.slice(V,G0.endPos),A1=G0.tagName.toLowerCase(),m=X0,C0=m.indexOf(">");if(C0!==-1){m=m.slice(C0+1);var R0="</"+A1+">",O0=m.indexOf(R0);if(O0!==-1)m=m.slice(0,O0)}var A0=[];if(m.trim()&&J){var d0={...G,inline:!1,inHTML:!0},L0=m.trim();if(F$.test(L0)||O$.test(L0)||H$.test(L0))A0=d9(L0,d0,J);else if(L0)d0.inline=!0,A0=l1(L0,0,L0.length,d0,J)}var i0=G0.whitespaceBeforeAttrs+G0.attrs,D0=u1(i0,A1,G0.tagName,J),Y1={type:W.htmlBlock,tag:G0.tagName,attrs:D0,children:A0,rawText:X0,text:m,verbatim:!0,endPos:G0.endPos};return v(V),X.push(Y1),V=Y1.endPos,U=V,!0},v=function(f0){if(f0>U){var J1=$.slice(U,f0);X.push({type:W.text,text:M?M9(J1):J1}),U=f0,M=!1}};while(V<Y){var A=b($,V),E=F6(A,H);if(E===0){if(A===x9)M=!0;V++;while(V<Y){if(A=b($,V),A>=X1)break;if(A===x9)M=!0;var w=f9[A];if(w!==0){if(H&&w===1&&(A===i1||A===c1||A===x1)){V++;continue}break}V++}continue}if(A===t0){var S=V,R=0;while(V+R<Y){if(b($,V+R)!==t0)break;R++}if(R>0){var y=V+R,N=-1,B=y;while(B<Y){while(B<Y&&b($,B)!==t0)B++;if(B>=Y)break;var T=0;while(B+T<Y&&b($,B+T)===t0)T++;if(T>R)T=R;var f=B+T;if(T===R&&(B<=y||b($,B-1)!==t0)&&(f>=Y||b($,f)!==t0)){N=B,B=f;break}B++}if(N!==-1){var x=$.slice(y,N),P=!1;for(var g=0;g<x.length;g++){var h=b(x,g);if(h===d||h===V0){P=!0;break}}var L=x;if(P)L=x.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ");if(L.length>0){var a=b(L,0),i=b(L,L.length-1);if(a===C&&i===C){for(var j0=1;j0<L.length-1;j0++)if(b(L,j0)!==C){L=L.slice(1,L.length-1);break}}}v(S),X.push({type:W.codeInline,text:L}),V=B,U=V;continue}if(F&&_===-1){_=S,v(S),Y=S;break}V=y;continue}}if(!z&&!H&&(A===i1||A===c1||A===x1)){var w0=null,z0=V+1<Y?b($,V+1):0,T0=V+2<Y?b($,V+2):0,p=V+3<Y?b($,V+3):0,V1=V+4<Y?b($,V+4):0,J0=V+5<Y?b($,V+5):0;if(A===c1&&z0===r9&&T0===r9&&p===w$)w0="h";else if(A===x1&&z0===x1&&T0===x1&&p===I9)w0="w";else if(A===i1&&z0===r9&&T0===w$&&p===P9&&V1===$9&&J0===$9)w0="f";if(w0){var P0=I$($,V,G,J,w0);if(P0){v(V),X.push(P0),V=P0.endPos,U=V;continue}}}if(!z&&!H&&A===E9){var M0=I$($,V,G,J,"@");if(M0&&"emailStart"in M0){var{emailStart:Q0,endPos:a0}=M0,I0=[];for(var f=K.length-1;f>=0;f--){var k0=K[f];if(k0.sourcePos>=Q0&&k0.sourcePos<a0){if(k0.nodeIndex>=0&&k0.nodeIndex<X.length)X.splice(k0.nodeIndex,1),I0.push(k0.nodeIndex);K.splice(f,1)}}if(Q0<U){for(var B=X.length-1;B>=0;B--)if(X[B].type===W.text){X.splice(B,1),I0.push(B);break}U=Q0}if(I0.length){I0.sort(function(f0,J1){return f0-J1});var B1=0;for(var r=0;r<K.length;r++){var k0=K[r];while(B1<I0.length&&I0[B1]<k0.nodeIndex)B1++;k0.nodeIndex-=B1}}v(Q0),X.push(M0),V=a0,U=V;continue}}if(A===j9){if(O(!0,!1))continue}if(A===k1){if(V+1<Y&&b($,V+1)===d){var K0=V+2;while(K0<Y&&b($,K0)===C)K0++;if(K0>=Y){V++;continue}v(V),X.push({type:W.breakLine}),V+=2;while(V<Y&&b($,V)===C)V++;U=V;continue}var B0=V+1<Y?$[V+1]:"";if(B0&&"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~".indexOf(B0)!==-1){v(V),X.push({type:W.text,text:B0==="&"?"&​":B0}),V+=2,U=V;continue}}if(A===g1){if(!z){if(V+1<Y&&$[V+1]==="^"){var m0=V+2;while(m0<Y&&$[m0]!=="]")m0++;if(m0<Y){var H0=$.slice(V+2,m0);v(V),X.push({type:W.footnoteReference,target:`#${J.slugify(H0)}`,text:H0}),V=m0+1,U=V;continue}}if(G.inList&&V+2<Y&&b($,V+2)===H9){var q0=b($,V+1);if(q0===C||q0===B$||q0===N$){v(V),X.push({type:W.gfmTask,completed:q0===B$||q0===N$}),V+=3,U=V;continue}}}var e=!1;if(V>Z&&$[V-1]==="!"){var l0=0;for(var Y0=V-2;Y0>=Z&&$[Y0]==="\\";Y0--)l0++;if((l0&1)===0){if(e=!0,U<V-1)v(V-1);if(X.length>0&&X[X.length-1].type===W.text){var $0=X[X.length-1];if($0.text.endsWith("!")){if($0.text=$0.text.slice(0,-1),!$0.text)X.pop()}}}}if(!e)v(V);if(U=V+1,!z||e)Q.push({type:e?"image":"link",pos:e?V-1:V,resultIdx:X.length,inAnchor:z});V++;continue}if(A===H9&&Q.length>0){var s=Q[Q.length-1],r0=s.pos+(s.type==="image"?2:1),$1=V;v(V);var U1=V+1,F1=n$(X,s),Q1=s.type==="link"&&kZ(F1),N1=!1;if(!Q1&&U1<Y&&$[U1]==="("){var F0=I6($,U1+1,!0);if(F0){yZ(X,K,Q,s,r0,$1,J.sanitizer(Q$(F0.target),"a","href"),F0.title?Q$(F0.title):void 0),V=F0.endPos,U=V;continue}}var s0=G.refs||{};e9(s0);var O1=null,P1=V;if(U1<Y&&$[U1]==="["){var z1=U1+1,B=z1;while(B<Y&&$[B]!=="]")B++;if(B<Y)O1=$.slice(z1,B),P1=B,N1=!0}if(!N1||O1==="")O1=$.slice(r0,$1);var h0=hZ(O1);if(!Q1&&s0&&s0[h0]){var _1=s0[h0];yZ(X,K,Q,s,r0,$1,_1.target,_1.title),V=P1+1,U=V;continue}var y1=s.resultIdx;if(Q.pop(),X.length=y1,F){if(X.push(...F1),U1<Y&&$[U1]==="(")return X}else{if(s.type==="image")X.push({type:W.text,text:"!"});X.push({type:W.text,text:"["},...F1,{type:W.text,text:"]"})}for(var g=0;g<K.length;g++)if(K[g].nodeIndex>=y1)K[g].nodeIndex++;V++,U=V;continue}if(A===S9||A===e1||A===t1||A===d1){var W1=$[V],o=V,Z1=A9($,V,W1);if((W1==="~"||W1==="=")&&Z1!==2){V++;continue}var q1=o+Z1,o0=BZ($,o,q1,Y,0),Q9=BZ($,o,q1,Z,1),b1=o0,R1=Q9;if(W1==="_"&&o0&&Q9){if(o>0){var z9=$[o-1],N9=b(z9);b1=q$(N9,z9)}if(q1<Y){var _9=$[q1],M1=b(_9);R1=q$(M1,_9)}}v(o),K.push({nodeIndex:X.length,type:W1,length:Z1,canOpen:b1,canClose:R1,active:!0,sourcePos:o,inAnchor:z}),X.push({type:W.text,text:$.slice(o,o+Z1)}),V=o+Z1,U=V;continue}if(A===d){var Y0=V-1,I1=0;while(Y0>=U&&b($,Y0)===C)I1++,Y0--;if(I1>=2){var K0=V+1;while(K0<Y&&b($,K0)===C)K0++;if(K0>=Y){v(Y0+1),V=Y,U=Y;continue}v(Y0+1),X.push({type:W.breakLine}),V++;while(V<Y&&b($,V)===C)V++;U=V;continue}var L1=V>U?b($,V-1):0,q0=V+1<Y?b($,V+1):0,T1=V>U&&L1===C&&q0===C?V-1:V;if(v(T1),X.push({type:W.text,text:`
`}),U=V+1,V>Z&&L1===C&&U<Y&&b($,U)===C)U++;V=U;continue}if(A===x9)M=!0;V++;while(V<Y){var A=b($,V);if(A>=X1)break;if(A===x9)M=!0;var w=f9[A];if(w===0){V++;continue}if(w===1&&(A===i1||A===c1||A===x1)&&H){V++;continue}break}}if(v(V),K.length)rZ(X,K,null);if(F){var v0=X.length;for(var N0=D.length-1;N0>=0;N0--){var p0=D[N0];if(p0<X.length&&X[p0].type===W.htmlBlock){var S1=X[p0];if(!K9(S1.tag)&&(!S1.children||S1.children.length===0)){if(X.splice(p0,1),p0<v0)v0--;for(var g=0;g<K.length;g++)if(K[g].nodeIndex>p0)K[g].nodeIndex--;for(var g=N0+1;g<D.length;g++)if(D[g]>p0)D[g]--}}}if(_!==-1&&_<v0){for(var u0=X.length-1;u0>=0;u0--)if(X[u0].type===W.text){v0=u0;break}}if(j!==-1&&j<v0){for(var u0=X.length-1;u0>=0;u0--)if(X[u0].type===W.text){v0=u0;break}}for(var B=K.length-1;B>=0;B--)if(K[B].active&&K[B].nodeIndex<v0){if(X.splice(K[B].nodeIndex,1),K[B].nodeIndex<v0)v0--;for(var f=0;f<B;f++)if(K[f].nodeIndex>K[B].nodeIndex)K[f].nodeIndex--}if(v0<X.length)X.length=v0;return X}if(Q.length){Q.sort(function(f0,J1){return f0.resultIdx-J1.resultIdx});for(var B=0;B<Q.length;B++)X.splice(Q[B].resultIdx+B,0,{type:W.text,text:Q[B].type==="image"?"![":"["})}return X}function E6($,Z,Y,G,J){var X=!1;for(var K=0;K<Z.length;K++)if(Z[K].sourcePos>=G&&Z[K].sourcePos<J){X=!0;break}if(!X)return;var Q=n$($,Y),V=[];for(var K=0;K<Z.length;K++){var U=Z[K];if(U.sourcePos>=G&&U.sourcePos<J)V.push({nodeIndex:U.nodeIndex-Y.resultIdx,type:U.type,length:U.length,canOpen:U.canOpen,canClose:U.canClose,active:U.active,sourcePos:U.sourcePos,inAnchor:U.inAnchor})}rZ(Q,V,null),$.length=Y.resultIdx;for(var H=0;H<Q.length;H++)$.push(Q[H]);var M=[];for(var K=0;K<Z.length;K++)if(Z[K].sourcePos<G||Z[K].sourcePos>=J)M.push(Z[K]);Z.length=0;for(var H=0;H<M.length;H++)Z.push(M[H])}function x6($,Z,Y,G){if($.type==="link")return{type:W.link,target:Y,title:G,children:Z};return{type:W.image,target:Y||"",alt:i$(Z),title:G}}function n$($,Z){return $.slice(Z.resultIdx)}function yZ($,Z,Y,G,J,X,K,Q){E6($,Z,G,J,X);var V=n$($,G);Y.pop(),$.length=G.resultIdx,$.push(x6(G,V,K,Q))}function P6($,Z,Y){let G=g0($,Z),J=G<$.length&&$[G]==="<";if(J)G++;let X=G;if(J&&G<$.length&&$[G]===">")return{target:"",endPos:G+1,hadSpace:!1};let K,Q;var V=!1;if(J){Q=G;while(Q<$.length&&$[Q]!==">"){let M=$[Q];if(M===`
`||M==="\r"||M==="<")return null;if(M==="\\"){Q+=2;continue}Q++}if(Q>=$.length||$[Q]!==">")return null;Q++;let U=X;while(U<Q-1&&j1($[U]))U++;let H=Q-1;while(H>U&&j1($[H-1]))H--;K=$.slice(U,H),G=Q}else{let U=0;Q=G;while(Q<$.length){let H=$[Q];if(H===" "||H==="\t"||H===`
`){V=!0;break}if(!Y&&H===")")break;if(Y&&H==="("){if(Q>0&&$[Q-1]==="\\"){Q++;continue}U++,Q++;continue}if(Y&&H===")"){if(Q>0&&$[Q-1]==="\\"){Q++;continue}if(U===0)break;U--,Q++;continue}Q++}K=$.slice(X,Q),G=Q}return{target:K,endPos:G,hadSpace:V}}function bZ($,Z,Y,G){let J=Z,X=0;while(J<$.length){let Q=$[J];if(j1(Q))J++;else if(Q===`
`){if(X>=1)break;X++,J++}else if(V9(Q))break;else break}if(Y&&!G){if(J>=$.length||$[J]!=='"'&&$[J]!=="'"&&$[J]!=="(")return{title:void 0,endPos:J}}let K=void 0;if(J<$.length){let Q=$[J];if(Q==='"'||Q==="'"){J++;let V=J;while(J<$.length&&$[J]!==Q){if($[J]==="\\")J++;J++}if(J<$.length)K=$.slice(V,J),J++}else if(Q==="("){J++;let V=J,U=1;while(J<$.length&&U>0){if($[J]==="\\"&&J+1<$.length)J++;else if($[J]==="(")U++;else if($[J]===")")U--;J++}if(U===0)K=$.slice(V,J-1)}}return J=g0($,J),{title:K,endPos:J}}function I6($,Z,Y){let G=P6($,Z,Y);if(!G)return null;let J=Z;J=g0($,J);let X=J<$.length&&$[J]==="<";if(X&&G.target===""&&G.endPos===J+2){let Q=bZ($,G.endPos,!1,X);if(Q.endPos>=$.length||$[Q.endPos]!==")")return null;return{target:"",title:Q.title,endPos:Q.endPos+1}}let K=bZ($,G.endPos,G.hadSpace,X);if(K.endPos>=$.length||$[K.endPos]!==")")return null;return{target:G.target,title:K.title,endPos:K.endPos+1}}var f6;((G)=>{G[G.URI=0]="URI";G[G.EMAIL=1]="EMAIL";G[G.ANGLE=2]="ANGLE"})(f6||={});function U9($){return $>=m1&&$<=h1||$>=a1&&$<=r1}function mZ($){let Z=$.indexOf(":");if(Z<2||Z>32)return!1;let Y=b($);if(!U9(Y))return!1;for(let G=1;G<Z;G++){let J=$[G],X=b(J);if(!_$(J)&&J!=="+"&&J!=="."&&J!=="-")return!1}return!0}function RZ($,Z,Y){if(Z===0)return!0;return(Y?` 	
\r*_~(`:` 	
*_~(`).indexOf($[Z-1])!==-1}function G$($,Z,Y,G,J){let X=G($,"a","href");if(!X)return null;return{type:W.link,target:X,children:[{type:W.text,text:Z}],endPos:Y,...J!==void 0?{emailStart:J}:{}}}function P$($,Z,Y,G,J){if(Y.inAnchor||J!==2&&G.disableAutoLink)return null;if(J===2){if($[Z]!=="<")return null;let _=Z+1;while(_<$.length&&$[_]!==">"){let R=b($,_);if(R===C||R===l||R===d||R===V0||R<C)return null;_++}if(_>=$.length||$[_]!==">")return null;let j=$.slice(Z+1,_);if(!j.length)return null;let D=j.indexOf("\\")!==-1,O=mZ(j),v=c(j,"http://")||c(j,"https://"),A=!1;if(!O&&!v&&j.length>=7){let R=j[0];if(R==="m"||R==="M"){let y=j.toLowerCase();if(c(y,"mailto:")){A=!0;let N=y.indexOf(":"),B=j.slice(N+1);return G$("mailto:"+B,j,_+1,G.sanitizer)}}}let E=!D&&j.indexOf("@")!==-1&&j.indexOf("//")===-1&&!O;if(!v&&!A&&!E&&!O)return null;let w=j,S=j;if(!A&&!O&&!v&&E)w="mailto:"+j;return G$(w,S,_+1,G.sanitizer)}if(J===1){let _=Z;while(_>0&&(_$($[_-1])||".+-_".indexOf($[_-1])!==-1))_--;if(_>=Z||!RZ($,_,!0))return null;let j=Z+1,D=!1;while(j<$.length){let A=$[j];if(A===".")D=!0,j++;else if(_$(A)||A==="-"||A==="_")j++;else break}if(!D||j<=Z+1)return null;while(j>Z+1&&$[j-1]===".")j--;if(j>Z+1&&($[j-1]==="-"||$[j-1]==="_"))return null;if(j-(Z+1)<1e4){if($.indexOf(".",Z+1)>=j||$.indexOf(".",Z+1)===-1)return null}else if($.slice(Z+1,j).indexOf(".")===-1)return null;let v=$.slice(_,j);return G$("mailto:"+v,v,j,G.sanitizer,_)}let X=c($,"http://",Z)||c($,"https://",Z),K=!X&&c($,"ftp://",Z),Q=!X&&!K&&c($,"www.",Z);if(!(X||K||Q)||!RZ($,Z,!1))return null;var V=Z+(X?b($,Z+4)===zZ?8:7:K?6:4),U=V;while(V<$.length){let _=b($,V);if(_===C||_===l||_===d||_===j9||_===C1)break;V++}if(V<=U)return null;let H=V;while(H>U){let _=$[H-1];if(H>U+1&&$[H-2]==="\\")break;if(_==="?"||_==="!"||_==="."||_===","||_===":"||_==="*"||_==="_"||_==="~")H--;else if(_===";"){let j=H-2;while(j>=U&&$[j]!=="&"&&$[j]!==" ")j--;if(j>=U&&$[j]==="&"){let D=$.slice(j+1,H-1);if(D.length>=2&&D.length<=10&&/^[a-zA-Z0-9]+$/.test(D)&&(D==="lt"||D==="gt"||D.length>=3&&(c(D,"amp")||c(D,"apos")||c(D,"quot")||c(D,"nbsp")||/^[a-z]{3,10}$/.test(D))))break;H=j;break}H--}else if(_===")"){let j=0,D=0;for(let O=U;O<H;O++){if($[O]==="(")j++;if($[O]===")")D++}if(D>j)H--;else break}else break}if(V=H,V<=U)return null;var M=U,z=-1,q=-1;while(M<V){let _=b($,M);if(_>=m1&&_<=h1||_>=a1&&_<=r1||_>=Z9&&_<=G9||_===D1||_===e1||_===I9){if(_===I9)q=z,z=M;M++;continue}break}if(M===U||z===-1)return null;if(q===-1)q=U-1;for(let _=q+1;_<z;_++)if($[_]==="_")return null;for(let _=z+1;_<M;_++)if($[_]==="_")return null;let F=$.slice(Z,V);return G$(Q?"http://"+F:F,F,V,G.sanitizer)}function I$($,Z,Y,G,J){if(J==="<")return P$($,Z,Y,G,2);if(J==="h"||J==="f"||J==="w")return P$($,Z,Y,G,0);if(J==="@")return P$($,Z,Y,G,1);return null}function hZ($){var Z=$.trim(),Y=Z.replace(/[\s\t\n\r]+/g," ");if(Y.indexOf("ẞ")!==-1)return Y.replace(/\u1E9E/g,"ss").toLowerCase();return Y.toLowerCase()}function g6($,Z,Y){if(Z+3>=$.length||$[Z]!=="[")return null;let G=$[Z+1];if(G!==" "&&G!=="x"&&G!=="X")return null;if($[Z+2]!=="]")return null;return{type:W.gfmTask,completed:G.toLowerCase()==="x",endPos:Z+3}}function t$($,Z,Y,G){let{inline:J,inList:X,inBlockQuote:K}=Z;if(G.inline!==void 0)Z.inline=G.inline;if(G.list!==void 0)Z.inList=G.list;if(G.inBlockQuote!==void 0)Z.inBlockQuote=G.inBlockQuote;let Q=d9($,Z,Y);return Z.inline=J,Z.inList=X,Z.inBlockQuote=K,Q}function u9($,Z,Y,G,J){return W$(G,!0,()=>l1($,Z,Y,G,J))}function l9($,Z,Y,G){var J=$[Z];if(J===void 0)return null;var X=Z,K=null,Q=J,V=null,U=b(J),H=U===C||U===l;if(H){if(V=I($,Z),K=t($,Z,V),X=Z+K.charCount,X>=$.length)return X$($,Z,Y);Q=$[X]}var M=K?K.spaceEquivalent:0;if(M>=4){if(H)return X$($,Z,Y);return null}var z=b(Q);if(z===C1){var q=uZ($,Z,Y,G);if(q)return q}else if(z===e1)return D$($,Z,Y,G);else if(z===D1||z===S9||z===DZ){var F=D$($,Z,Y,G);if(F)return F;var _=s$($,Z,Y,G);if(_)return _}else if(z>=Z9&&z<=G9){var _=s$($,Z,Y,G);if(_)return _}else if(z===T9)return C6($,X,Y,G);else if(z===g1)return B9($,X,Y,G,X+1<$.length&&b($,X+1)===D9);else if(z===j9&&!G.disableParsingRawHTML)return M$($,X,Y,G);else if(z===t0||z===t1){if(!V)V=I($,Z);if(!K)K=t($,Z,V);if(K.spaceEquivalent<=3)return e$($,X,Y,G)}else if(z===jZ)return aZ($,Z,Y,G);if(H)return X$($,Z,Y);return null}function d9($,Z,Y){let G=[],J=0;while(J<$.length){while(J<$.length&&$[J]===`
`)J++;if(J>=$.length)break;var X=$[J];if(Z.inList&&G.length>0){var K=G[G.length-1];if(K?.type===W.paragraph){var Q=K,V=b(X);if(V===D1||V===d1||V===C||V===l){var U=I($,J),H=$.slice(J,U),M=t($,J,U);if(M.spaceEquivalent<4){var z=H.slice(M.charCount).trim();if(cZ(G,z,Y)){J=U+(U<$.length&&$[U]===`
`?1:0);continue}}}}}var q=l9($,J,Z,Y);if(q){G.push(q),J=q.endPos;continue}var F=pZ($,J,Z,Y);if(F){G.push(F),J=F.endPos;continue}var _=$.slice(J).trim();if(_){if(Z.inBlockQuote&&G.length>0){let v=function(A){if(A.type===W.blockQuote){var E=A;if(E.children&&E.children.length>0){var w=E.children[E.children.length-1];if(w.type===W.paragraph)return w}}else if(A.type===W.orderedList||A.type===W.unorderedList){var S=A;if(S.items&&S.items.length>0){var R=S.items[S.items.length-1];if(R&&R.length>0){var y=R[R.length-1],N=v(y);if(N)return N}}}return null};for(var j=G.length-1;j>=0;j--){var Q=v(G[j]);if(Q){var O=c$($,J,Z,Y);if(O){var D=O;if(Q.children&&D.children)Q.children.push({type:W.text,text:`
`},...D.children);J=O.endPos;continue}}}}var O=c$($,J,Z,Y);if(O){G.push(O),J=O.endPos;continue}}J++}return G}function C6($,Z,Y,G){if(Y.inline)return null;let J=I($,Z),X=t($,Z,J,3);if(X.spaceEquivalent>3&&!Y.inList)return null;var K=Z+X.charCount;if(K>=$.length||$[K]!=="#")return null;let Q=A9($,K,"#",6);if(K+=Q,K>=$.length)return null;let V=$[K];if(V===`
`||V==="\r"){let q=I($,K);return{...z$(Q,[],"",G.slugify),endPos:q+(q<$.length?1:0)}}if(V!==" "&&V!=="\t")return null;let U=K,H=I($,U);var M=$.slice(U,H).replace(W6,"").trim();let z=u9(M,0,M.length,Y,G);return{...z$(Q,z,M,G.slugify),endPos:H+(H<$.length?1:0)}}function pZ($,Z,Y,G){if(Y.inline||Y.inBlockQuote||Y.inList)return null;let J=I($,Z);if(J>=$.length)return null;let X=k($,J),K=-1,Q=null;for(var V=0;X<$.length&&V<10;V++){let N=I($,X);if(N>=$.length)break;var U=X;while(U<N&&(b($,U)===C||b($,U)===l||b($,U)===V0))U++;if(U>=N)break;var H=0,M=X;while(M<N&&H<3&&b($,M)===C)H++,M++;if(M<N){let B=b($,M);if(B===d1||B===D1){let T=$[M];var z=0,q=!1,F=M;while(F<N){let f=b($,F);if(f===B){if(q){z=0;break}z++}else if(f===C||f===l)q=!0;else{z=0;break}F++}if(z>=1){K=N,Q=T;break}}}X=k($,N)}if(!Q)return null;let _=b($,Z);if(_===T9||_===C1||$[Z]==="|")return null;let j=Z;var D=Z,O=!1;while(D<X){let N=I($,D);if(N>=X)break;var v=D;while(v<N&&(b($,v)===C||b($,v)===l||b($,v)===V0))v++;if(v<N)O=!0,j=N;D=k($,N)}if(!O)return null;let A=$.slice(Z,j);var E=0,w=A.length;while(E<w&&(A.charCodeAt(E)===C||A.charCodeAt(E)===l||A.charCodeAt(E)===V0||A.charCodeAt(E)===d))E++;while(w>E&&(A.charCodeAt(w-1)===C||A.charCodeAt(w-1)===l||A.charCodeAt(w-1)===V0||A.charCodeAt(w-1)===d))w--;let S=A.slice(E,w);if(!S)return null;let R=Q==="="?1:2,y=u9(S,0,S.length,Y,G);return{...z$(R,y,S,G.slugify),endPos:K+(K<$.length?1:0)}}function c$($,Z,Y,G){if(Y.inline)return null;if(G.optimizeForStreaming&&$[Z]==="|"){var J=Math.min(500,$.length-Z),X=$.substr(Z,J),K=0,Q=!1;for(var V=0;V<X.length;V++){if(X[V]==="|")K++;if(X[V]==="-"||X[V]===":")Q=!0}if(K>=3&&Q){var U=I($,Z);while(U<$.length){var H=k($,U);if(H>=$.length)break;var M=I($,H),z=$.slice(H,M);if(z.indexOf("|")===-1&&z.indexOf("-")===-1)break;if(U=M,M>=$.length)break}return{type:W.paragraph,children:[],endPos:k($,U)}}}let q=Z,F=$.length;while(q<F){let r=I($,q),K0=!0;for(let $0=q;$0<r;$0++){let s=b($,$0);if(s!==C&&s!==l&&s!==V0){K0=!1;break}}if(K0){q=r;break}if(r>=F){q=F;break}let B0=k($,r);if(B0>=F){q=F;break}let m0=I($,B0),H0=!0,q0="";for(let $0=B0;$0<m0;$0++){let s=b($,$0);if(s!==C&&s!==l&&s!==V0){if(H0=!1,q0==="")q0=$[$0];break}}if(H0){q=r;break}let e=!1,l0=t($,B0,m0),Y0=l0.spaceEquivalent===4&&l0.charCount===4;if(q0==="<"&&!Y0&&!G.disableParsingRawHTML){let s=B0,r0=0;while(s<m0&&r0<3){let $1=b($,s);if($1===C||$1===l)r0++,s++;else break}if(s<m0&&$[s]==="<"){var _=M$($,s,{...Y,inline:!1},G);if(_)e=!("canInterruptParagraph"in _)||_.canInterruptParagraph}}if(Y0)e=!1;else if(!e&&q0&&p9(q0))if(q0==="["){let $0=B0;if($0+1>=F||$[$0+1]!=="^")e=!1;else e=!0}else if(q0==="*"||q0==="+")if(D$($,B0,Y,G))e=!0;else{let s=B0+1<F?$[B0+1]:"";if(s&&j1(s))e=!0;else e=!1}else{let $0=l9($,B0,Y,G);if($0)if($0.type===W.codeBlock)if(t($,B0,m0).spaceEquivalent>=4)e=!1;else e=!0;else if($0.type===W.unorderedList||$0.type===W.orderedList)if($0.type===W.orderedList)e=$0.start===1;else e=!0;else if(q0==="-")if(q>Z)e=!0;else e=!0;else if($0.type===W.ref)e=!1;else e=!0}if(e){q=r;break}q=k($,r)}if(q<=Z)return null;var j=Z,D=q;while(j<D){let r=b($,j);if(r===C||r===l)j++;else break}let O=I($,j);var v=D>O,A;if(!v)A=$.slice(j,D);else{var E=[],w=j,S=0;while(w<D){var R=I($,w);if(R>D)R=D;if(S===0)E.push($.slice(w,R));else{var y=0;while(y<4&&w+y<R)if(b($,w+y)===C)y++;else break;var N=y===4?w+4:w;E.push($.slice(N,R))}if(R<D){let r=b($,R);if(r===V0||r===d)E.push(`
`),w=k($,R);else w=D}else w=D;S++}A=E.join("")}var B=A.length;while(B>0){var T=A.charCodeAt(B-1);if(T===C||T===l)B--;else break}if(B<A.length)A=A.slice(0,B);let f=!1;for(let r=0;r<A.length;r++){let K0=A.charCodeAt(r);if(K0!==C&&K0!==l&&K0!==d&&K0!==V0){f=!0;break}}if(!f)return null;var x=A,P=q,g=-1,h=q-1;while(h>=j){if(b($,h)===d){g=h;break}h--}if(g>=0){var L=!1;for(var a=j;a<g;a++){let r=b($,a);if(r!==C&&r!==l&&r!==d&&r!==V0){L=!0;break}}if(!L){var i=g+1;while(i<$.length){let r=b($,i);if(r===C||r===l)i++;else break}var j0=i-(g+1);if(j0<4&&i<$.length&&$[i]==="["){var w0={...Y,inline:!1},z0=B9($,i,w0,G,!1);if(z0){var T0=0,h=j;while(h<=g){let K0=$.indexOf(`
`,h);if(K0===-1||K0>g)break;T0++,h=K0+1}var p=0,V1=0;h=0;while(h<A.length){let K0=A.indexOf(`
`,h);if(K0===-1)break;if(V1++,V1===T0){p=K0+1;break}h=K0+1}if(p>0)x=A.slice(0,p-1);P=z0.endPos,Y.refs=w0.refs}}}}let J0=u9(x,0,x.length,Y,G);var P0={type:W.paragraph,children:J0,endPos:P};if(J0.length>0){var M0=[];for(var Q0=J0.length-1;Q0>=0;Q0--){var a0=J0[Q0];if(a0.type===W.htmlSelfClosing&&a0.isClosingTag===!0)M0.push(Q0);else if(a0.type===W.text){var I0=a0;if(I0.text&&I0.text.trim().length>0)break}else break}if(M0.length>=3){var k0=M0[M0.length-1],B1=J0.slice(k0+1);J0.splice(k0+1),P0.removedClosingTags=B1}}return P0}function k6($,Z){if(Z!==0)return null;let Y=R$($);if(!Y?.hasValidYaml)return null;let G=Y.endPos-1;if(G>0&&$[G-1]==="\r")G--;let J=p1($.slice(0,G));return{type:W.frontmatter,text:J,endPos:Y.endPos}}function D$($,Z,Y,G){let J=I($,Z),X=t($,Z,J,3);if(X.spaceEquivalent>3)return null;var K=Z+X.charCount;if(K>=J)return null;let Q=$[K];if(Q!=="-"&&Q!=="*"&&Q!=="_")return null;var V=0,U=K;while(U<J){var H=$[U];if(H===Q)V++;else if(H!==" "&&H!=="\t")return null;U++}if(V<3)return null;return{type:W.breakThematic,endPos:k($,J)}}function t($,Z,Y,G){let J=0,X=0,K=Z;while(K<Y){var Q=b($,K);if(Q!==C&&Q!==l)break;if(G!==void 0&&J>=G)break;if(Q===l)J+=4-J%4;else J+=1;X++,K++}return{spaceEquivalent:J,charCount:X}}function LZ($,Z,Y,G){let J=0,X=0,K=G;for(let M=Z;M<Y&&X<4;M++){var Q=b($,M);if(Q===l){let z=4-K%4;if(X+=z,J++,K+=z,X>=4)break}else if(Q===C){if(X++,J++,K++,X>=4)break}else break}let V=$.slice(Z+J,Y);var U=0;for(var H=Z;H<Y;H++){if($[H]==="\t")U++;if(U>=2)break}if(U>=2&&c(V,"\t")&&G>0)V="  "+V.slice(1);return V}function X$($,Z,Y){let G=I($,Z),J=t($,Z,G);if(J.spaceEquivalent<4)return null;let X=J.spaceEquivalent,K=I($,Z+J.charCount),Q=Z,V=0;var U=Q-1;while(U>=0&&$[U]!==`
`&&$[U]!=="\r")U--;U++;while(U<Q){if($[U]==="\t")V=V+4-V%4;else V++;U++}let H=LZ($,Q,K,V),M=k($,K);if(M>=$.length){if(!H.trim())return null;return{type:W.codeBlock,text:H,endPos:M}}var z=[];z.push(H);let q=M;while(q<$.length){let _=I($,q);if(w1($,q,_)){let j=_+1;if(j<$.length){let D=I($,j),O=t($,j,D),v=$[j+O.charCount];if(v&&v!==`
`&&(O.spaceEquivalent<4||v===">"&&O.spaceEquivalent<X))break}z.push(`
`)}else{if(t($,q,_).spaceEquivalent<4)break;let D=LZ($,q,_,0);z.push(`
`),z.push(D)}q=k($,_)}let F=z.join("");if(F=F.replace(B6,""),!F.trim())return null;return{type:W.codeBlock,text:F,endPos:q}}function e$($,Z,Y,G){let J=$[Z];if(J!=="`"&&J!=="~")return null;let X=A9($,Z,J);if(X<3)return null;let K=Z;while(K>0&&b($,K-1)!==d)K--;let Q=t($,K,Z),V=Q.spaceEquivalent,U=V;if(V===4&&Q.charCount===4)V=0,U=4;if(V>=4)return null;let H=g0($,Z+X),M=I($,H),z=$.slice(H,M).trim();if(J==="`"&&z.indexOf("`")!==-1)return null;z=z.replace(h$,"$1");let q=z.indexOf(" "),F=q>0?z.slice(0,q):z,_=q>0?z.slice(q+1).trim():"",j=_&&/=\s*["']/.test(_)?u1(_,"code","code",G):void 0,D=k($,M),O=D,v=!1;while(O<$.length){let S=I($,O),R=O,y=0;while(R<S){let N=b($,R);if(N===C){if(y++,R++,y>=4)break}else if(N===l){if(y+=4-y%4,R++,y>=4)break}else break}if(y<4){let N=A9($,R,J,S-R);if(N>=X){let B=R+N;while(B<S){let T=b($,B);if(T===C||T===l)B++;else break}if(B===S){v=!0;break}if(N>=3&&B<S){let T=R+N;if(!(T<S&&(b($,T)===C||b($,T)===l))){let x=!0;if(J==="`"){if($.slice(T,S).indexOf("`")!==-1)x=!1}if(x)break}}}}else if(U===4&&V===0&&y===4){let N=A9($,R,J,S-R);if(N>=X&&w1($,R+N,S)){v=!0;break}}O=k($,S)}let A=O>D&&$[O-1]===`
`?O-1:O;if(A>D&&$[A-1]==="\r")A--;let E=p1($.slice(D,A));if(U)E=a$(E,U);let w=v&&O<$.length?k($,I($,O)):O;return{type:W.codeBlock,text:E,lang:F,attrs:j,endPos:w}}function m6($,Z,Y){for(var G=0;G<$.length;G++)if(!l$($[G])){let X=t$($,Z,Y,{inline:!1,inBlockQuote:!0});for(var J=0;J<X.length;J++){let K=X[J];if("endPos"in K)delete K.endPos}return X}return[]}function uZ($,Z,Y,G){if(Y.inline)return null;let J=Z;while(J<$.length&&($[J]===" "||$[J]==="\t"))J++;if(J>=$.length||$[J]!==">")return null;let X=Z;var K=[],Q=void 0,V=!1,U=-1,H=!1,M=null,z=null,q=0,F=!1;while(X<$.length){let w=I($,X),S=X;while(S<w&&($[S]===" "||$[S]==="\t"))S++;if(S<w&&$[S]===">"){let R=S+1;if(R<w&&$[R]===" ")R++;let N=t($,R,w).spaceEquivalent>=4,B=!1,T=null,f=0;if(R<w){let P=$[R];if(P==="`"||P==="~"){let g=0,h=R;while(h<w&&$[h]===P&&g<20)g++,h++;if(g>=3)B=!0,T=P,f=g}}if(H&&M==="fenced"&&T===z&&f>=q)H=!1,M=null,z=null,q=0;else if(N||B)H=!0,M=N?"indented":"fenced",z=T,q=f;var _=!N&&!B;if(_){for(var j=R;j<w;j++)if(!l$($[j])){_=!1;break}}if(F=_,U===-1&&!_)U=K.length;if(!_)V=!0;let x=S+1;if(x<w&&$[x]==="\t"){K.push("  ");let P=4;for(let g=x+1;g<w;g++){let h=$[g];var D=b(h);if(D===l){let L=4-P%4;if(L===1)K.push(" ");else if(L===2)K.push("  ");else if(L===3)K.push("   ");else K.push(" ".repeat(L));P+=L}else K.push(h),P++}if(w<$.length)K.push(`
`)}else{let P=x;if(P<w&&$[P]===" ")P++;if(K.push($.slice(P,w)),w<$.length)K.push(`
`)}}else{var O=!0;for(var j=X;j<w;j++)if(!l$($[j])){O=!1;break}if(O||H)break;if(t($,X,w).spaceEquivalent===0){let y=l9($,X,Y,G);if(y&&y.type!==W.ref&&y.type!==W.codeBlock)break;if(F)break}if(K.push($.slice(X,w)),w<$.length)K.push(`
`)}X=k($,w)}if(X===Z)return null;if(K.length>0&&K[K.length-1]===`
`)K.pop();let v=K.join("");if(v.length>=4&&v.charCodeAt(0)===g1&&v.charCodeAt(1)===F9){let w=v.indexOf(`]
`,2);if(w>2)Q=v.slice(2,w),v=v.slice(w+2)}let A=m6(v,Y,G),E={type:W.blockQuote,children:A,endPos:X};if(Q)E.alert=Q;return E}function a$($,Z){return $.split(`
`).map(function(Y){if(Y.length===0)return Y;let G=Z,J=0,X=0,K=0;while(X<Y.length&&J<G)if(Y[X]===" ")J++,K++,X++;else if(Y[X]==="\t"){let Q=4-K%4;if(J+Q<=G)J+=Q,K+=Q,X++;else{let V=G-J,U=Math.max(0,Q-V);return" ".repeat(U)+Y.slice(X+1)}}else break;return Y.slice(X)}).join(`
`)}function K$($,Z,Y,G,J=!0){let X=(J?`
`:"")+$,K=u9(X,0,X.length,Y,G);if(Z.length>0&&Z[Z.length-1].type===W.paragraph)Z[Z.length-1].children.push(...K);else Z.push(...K)}function k9($){return $.some(function(Z){return Z.type===W.codeBlock||Z.type===W.paragraph||Z.type===W.blockQuote||Z.type===W.orderedList||Z.type===W.unorderedList||Z.type===W.heading})}function f$($){return!!$.match(o$)}function lZ($){if($.length===0)return $;var Z=$[$.length-1];if((Z.type===W.orderedList||Z.type===W.unorderedList)&&Z.items?.length>0)return lZ(Z.items.slice(-1)[0]);return $}function r$($,Z,Y,G,J,X,K){if(!c(J,"["))return null;var Q={inline:!1,list:!1,refs:X.refs||{}},V=B9($,Z+G.charCount,Q,K,!1);return V?V.endPos:null}function TZ($,Z,Y,G){if($.length!==1||!Y)return!1;if($[0].length!==0)return!1;if(Z)return!0;if(!Z&&G.trim()==="")return!0;return!1}function SZ($,Z){var Y=$.index||0;return Z?Y+$[1].length+$[2].length+1:Y+$[1].length+1}function j$($,Z,Y,G,J){var X=0,K=G+J,Q=Z;while(Q<Y&&X<4){var V=b($,Q);if(V===C)X++,K++;else if(V===l){var U=4-K%4;if(X+U>4)break;X+=U,K+=U}else break;Q++}return{contentStartColumn:K,contentStartPos:Q}}function g$($){var Z=$.match(o$);if(!Z)return null;if(Z[1])return{match:[$,Z[1],Z[2],Z[3]],ordered:!0,listItemRegex:p$};if(Z[4])return{match:[$,Z[4],Z[5],""],ordered:!0,listItemRegex:p$};if(Z[6])return{match:[$,Z[6],Z[7]],ordered:!1,listItemRegex:u$};if(Z[8])return{match:[$,Z[8],""],ordered:!1,listItemRegex:u$};return null}function s1($,Z,Y,G,J,X,K){if(Z.spaceEquivalent!==X)return!1;var Q=$.match(K);if(Q)return Y?Q[2]===J:Q[1]===G;var V=$.match(o$);if(!V)return!1;if(Y)return V[4]&&V[5]===J;else return V[8]===G}function dZ($,Z,Y,G){var J=Z,X=Y,K=Z[0];while(X<$.length){var Q=I($,X),V=$.slice(X,Q),U=c(V," ".repeat(G))?V.slice(G):V;if(c(U.trim(),K)&&A9(U.trim(),0,K)>=3)return{content:J,endPos:k($,Q)};J+=`
`+U,X=k($,Q)}return{content:J,endPos:X}}function Y$($,Z,Y,G,J,X,K,Q,V,U,H,M,z){var q=U?void 0:V[1],F=U?V[2]:void 0,_=U?p$:u$,j=H;if(!H){var D=k($,X),O=D;while(O<$.length){var v=I($,O),A=$.slice(O,v),E=t($,O,v),w=E.spaceEquivalent;if(w1($,O,v)){var S=k($,v);if(S<$.length){var R=I($,S),y=t($,S,R),N=y.spaceEquivalent,f=SZ(V,U),x=J+Q+f,P=j$($,x,X,K,f),g=P.contentStartColumn;if(N+1>g){j=!0;break}}break}else if(w<=K){var B=A.slice(E.charCount),T=B.match(_);if(T&&(U?T[2]===F:T[1]===q))break}O=k($,v)}}var f=SZ(V,U),x=J+Q+f,P=j$($,x,X,K,f),g=P.contentStartColumn,h=G,L=k($,X);if(c(G,"```")||c(G,"~~~")){var a=U?V[1].length+V[2].length+1:V[1].length+1,i=dZ($,G,L,a);h=i.content,L=i.endPos}return Z.push(iZ(h,j,M,z)),Y.push(g),{newCurrentPos:L,itemHasBlankLine:j}}function EZ($,Z,Y,G,J,X){if(J>G||X.disableParsingRawHTML)return!1;let K=Z+Y;if(K>=$.length||$[K]!=="<")return!1;return h6($,K)}function h6($,Z){if(Z>=$.length||$[Z]!=="<")return!1;let Y=$.length,G=Z+1;if(G<Y&&$[G]==="/")G++;if(G>=Y)return!1;let J=b($,G);if(!U9(J))return!1;G++;while(G<Y){let K=$[G],Q=b($,G);if(K===">"||K===" "||K==="\t"||K===`
`||K==="\r"||K==="/")break;if(K==="-"||K==="_"||U9(Q)||Q>=48&&Q<=57)G++;else return!1}let X=0;while(G<Y){let K=$[G],Q=b($,G);if(X===1){if(K==='"')X=0;G++}else if(X===2){if(K==="'")X=0;G++}else if(K==='"')X=1,G++;else if(K==="'")X=2,G++;else if(K===">")return!0;else if(K==="/"&&G+1<Y&&$[G+1]===">")return!0;else if(Q===10||Q===13)return!1;else G++}return!1}function xZ($,Z,Y,G,J,X,K,Q,V,U,H,M){let z=G,q=!1;while(z<$.length){let F=I($,z),_=t($,z,F),j=_.spaceEquivalent;if(w1($,z,F)){q=!0,z=k($,F);continue}let D=$.slice(z+_.charCount,F);if(j<=J&&s1(D,_,X,K,Q,J,V))break;if(j>=Y){if(M&&q){let v=r$($,z,F,_,D,U,H);if(v){z=v,q=!1;continue}}let O=V$($,z,F,_,Y-1,Y,Z,q,U,H,void 0,J);if(O.processed){z=O.newPos,q=O.wasBlank;continue}}else break}return z}function PZ($,Z,Y,G){let J=t$($,Y,G,{inline:!1,list:!0});if(J.length>0)return!Z&&J.length===1&&J[0].type===W.paragraph?J[0].children:J;let X=W$(Y,!0,()=>l1($,0,$.length,Y,G));return Z&&X.length>0?[{type:W.paragraph,children:X}]:X}function iZ($,Z,Y,G){let J=g6($,0,Y);if(!(J&&(J.endPos>=$.length||$[J.endPos]===" ")))return PZ($,Z,Y,G);let K=J.endPos<$.length?J.endPos+1:J.endPos,Q=$.slice(K),V=PZ(Q,Z,Y,G),U=[J];if(J.endPos<$.length)U.push({type:W.text,text:" "});return U.push(...V),U}function IZ($,Z){if(!$[0])return!1;let Y=$[0].indexOf(Z);if(Y===-1)return!1;let G=Y+Z.length;if(G>=$[0].length)return!1;let J=$[0][G];return J?b(J)===_Z:!1}function cZ($,Z,Y){if($.length===0)return!1;let G=$[$.length-1],J=Z.trim();if(!c(J,"=")&&!c(J,"-")||J.length<1||!/^[=-]+[ \t]*$/.test(J))return!1;let X=[],K="";if(G.type===W.paragraph){let U=G;X=U.children,K=U.children.map((H)=>H.type===W.text?H.text:"").join("").trim()}else if(G.type===W.text){let U=[],H=$.length-1;while(H>=0&&$[H].type===W.text)U.unshift($[H]),H--;if(U.length>0)X=U,K=U.map((M)=>M.text).join("").trim()}if(!K)return!1;let V=J[0]==="="?1:2;if(G.type===W.paragraph)$.pop();else if(G.type===W.text)while($.length>0&&$[$.length-1].type===W.text)$.pop();return $.push(z$(V,X,K,Y.slugify)),!0}function V$($,Z,Y,G,J,X,K,Q,V,U,H,M){let z=G.spaceEquivalent,q=$.slice(Z+G.charCount,Y);if(z>=J+4){let D=X$($,Z,V);if(D){let O=D,v=a$(O.text||"",X);return K.push({...O,text:v}),{processed:!0,newPos:O.endPos,wasBlank:!1}}}let F=z-(X-1);if(z+1>=X&&F<=3){let D=Z+G.charCount;if(D<Y){let O=$[D];if(O==="`"||O==="~"){let v=e$($,D,V,U);if(v){let A=v,E=a$(A.text||"",X-1);return K.push({...A,text:E,endPos:A.endPos}),{processed:!0,newPos:A.endPos,wasBlank:!1}}}if(O==="|"){let v=aZ($,D,V,U);if(v){let A=v;return K.push(A),{processed:!0,newPos:A.endPos,wasBlank:!1}}}}}if(q.length>0&&(q[0]==="-"||q[0]==="*"||q[0]==="+"||q[0]>="0"&&q[0]<="9")){if(/^([-*+]|\d{1,9}[.)])\s+/.test(q)){let O=u9(q,0,q.length,V,U);return K.push({type:W.text,text:`
`},...O),{processed:!0,newPos:k($,Y),wasBlank:!1}}}let _=O6($,Z,K,q,V,U);if(_!==null)return{processed:!0,newPos:_,wasBlank:!1};let j=t$(q,V,U,{inline:!1,list:!0});if(j.length>0){if(H&&j[0].type===W.paragraph){let D=j[0];if(K.push({type:W.text,text:`
`},...D.children),j.length>1)K.push(...j.slice(1))}else if(!Q&&j[0].type===W.paragraph&&K.length>0){let D=K[K.length-1],O=j[0];if(D.type===W.paragraph)D.children.push({type:W.text,text:`
`},...O.children);else if(D.type===W.heading)K.push(...O.children);else if(!k9(K))K.push({type:W.text,text:" "},...O.children);else K.push(...j);if(j.length>1)K.push(...j.slice(1))}else K.push(...j);return{processed:!0,newPos:k($,Y),wasBlank:!1}}if(Q){let D=W$(V,!0,()=>l1(q,0,q.length,V,U));K.push({type:W.paragraph,children:D})}else K$(q,K,V,U);return{processed:!0,newPos:k($,Y),wasBlank:!1}}function s$($,Z,Y,G){if(Y.inline)return null;var J=Y.inList;if(Y.inList=!0,Z>0){var X=b($,Z-1);if(X!==d&&X!==V0)return Y.inList=J,null}var K=I($,Z),Q=t($,Z,K);if(Q.spaceEquivalent>3&&!Y.inList)return Y.inList=J,null;var V=$.slice(Z,K),U=Q.charCount,H=V.slice(U),M=g$(H);if(!M)return Y.inList=J,null;var{match:z,ordered:q,listItemRegex:F}=M,_=Q.spaceEquivalent,j=q?parseInt(z[1],10):void 0,D=q?z[2]:void 0,O=q?void 0:z[1],v=q?z[3]==="":z[2]==="";function A(n,S0){if(n===0)return!0;var b0=b($,n-1);if(b0!==d)return!1;if(!S0)return!0;var U0=n-2;while(U0>=0){var u=b($,U0);if(u!==C&&u!==l)break;U0--}return U0<0||b($,U0)===d}if(v&&!A(Z,!0))return Y.inList=J,null;if(q&&j!==1&&!A(Z,!1))return null;if(!q&&IZ(z,O))return null;var E=z.index||0,w=q?E+z[1].length+z[2].length+1:v?E+z[1].length:E+z[1].length+1,S=Z+U+w,R=j$($,S,K,_,w),y=R.contentStartColumn,N=_+E+z[1].length,B=q?N+z[2].length+1:v?N:N+1,T=[],f=[];function x(n,S0,b0){return b0?n>=S0:n>S0}function P(){return T[T.length-1]}function g(){return f[f.length-1]??y}function h(n,S0){let b0=lZ(S0),U0=Y.inList;Y.inList=!0;let u=s$($,n,Y,G);if(Y.inList=U0,u)return b0.push(u),u;return null}var L=k($,K),a=L,i=!1;while(a<$.length){var j0=I($,a),w0=$.slice(a,j0);if(w0.trim()===""){var z0=k($,j0);while(z0<$.length){var T0=b($,z0);if(T0===d);else if(!S6.has($[z0]))break;z0++}var p=I($,z0),V1=$.slice(z0,p),J0=t($,z0,p),P0=V1.slice(J0.charCount);if(s1(P0,J0,q,O,D,_,F))i=!0;else{var M0=r$($,z0,p,J0,P0,Y,G);if(M0){var Q0=M0;while(Q0<$.length&&b($,Q0)===d)Q0++;if(Q0<$.length){var a0=I($,Q0),I0=$.slice(Q0,a0),k0=t($,Q0,a0),B1=I0.slice(k0.charCount);if(s1(B1,k0,q,O,D,_,F))i=!0}}}break}var r=t($,a,j0),K0=w0.slice(r.charCount),B0=g$(K0);if(!B0)break;var m0=B0.match;if(q){if(m0[2]!==D)break}else if(m0[1]!==O)break;a=k($,j0)}var H0=q?z[3]:z[2];H0=H0.trimStart();var q0=Z+U+(z.index||0),e=q?q0+z[1].length+z[2].length:q0+z[1].length,l0=e;while(l0<$.length){var T0=b($,l0);if(T0!==C&&T0!==l)break;l0++}var Y0=0,$0=e;while($0<K){var T0=b($,$0);if(T0===l)Y0+=4-Y0%4;else if(T0===C)Y0++;else break;$0++}var s=!1;if(e<$.length&&b($,e)===l){var r0=1,$1=e+1;while($1<$.length&&b($,$1)===l)r0++,$1++;if(r0>=2)H0="      "+H0,s=!0}if(!q)v=v&&Y0===0;if(Y0>=4&&!s)H0=" ".repeat(Y0-1)+H0.trimStart();var U1=H0.trim()==="";let F1=i;if(!i&&L<$.length){var Q1=L;while(Q1<$.length){var N1=I($,Q1),F0=$.slice(Q1,N1);if(w1($,Q1,N1)){var s0=k($,N1);while(s0<$.length){var O1=I($,s0);if(w1($,s0,O1))s0=k($,O1);else break}if(s0<$.length){var P1=t($,s0,$.length),z1=P1.spaceEquivalent;if(z1>=_){var h0=$.slice(s0,I($,s0)),_1=h0.slice(P1.charCount).match(F),y1=_1&&(q?_1[2]===D:_1[1]===O),W1=null;for(var o=L;o<Q1;o=I($,o)+1){var Z1=I($,o),q1=t($,o,Z1),o0=$.slice(o,Z1).slice(q1.charCount).match(F),Q9=o0&&q1.spaceEquivalent>_&&q1.spaceEquivalent>=y&&(q?o0[2]===D:o0[1]===O);if(Q9){var b1=q1.spaceEquivalent+1,R1=q?b1+o0[1].length+o0[2].length+1:b1+o0[1].length+1,z9=o+q1.charCount+o0[0].length,N9=j$($,z9,Z1,b1,R1-b1);W1=N9.contentStartColumn;break}}var _9=Y0>=5?B:y;if(!y1&&z1>=_9&&(W1===null||z1+1<W1))F1=!0}}break}var M1=t($,Q1,N1),I1=M1.spaceEquivalent,L1=F0.slice(M1.charCount),T1=L1.match(F),v0=T1&&(q?T1[2]===D:T1[1]===O);if(v0){if(I1<=_)break}Q1=k($,N1)}}var N0=H0;if(c(H0,"```")||c(H0,"~~~")){var p0=q?z[1].length+z[2].length+1:z[1].length+1,S1=dZ($,H0,L,p0);N0=S1.content,L=S1.endPos}var u0=!v&&H0.trim()===""&&Y0>0&&Y0<5;if(!F1){var f0=N0.length>0?N0[0]:"",J1=f0===">",Z=L;while(Z<$.length){var K=I($,Z),V=$.slice(Z,K);if(V.trim()==="")break;var Q=t($,Z,K);if(Q.spaceEquivalent<B)break;var H=V.slice(Q.charCount);if(Q.spaceEquivalent<=_&&s1(H,Q,q,O,D,_,F))break;if(f$(H)&&Q.spaceEquivalent>_)break;var y0=H.length>0?H[0]:"",n1=y0===">"&&J1;if(y0===">"&&!n1||y0==="#"||c(H,"```")||c(H,"~~~"))break;N0+=`
`+H,L=Z=k($,K)}}if(T.push(iZ(N0,F1,Y,G)),f.push(y),F1&&(Y0>=5||u0)){let n=P();L=xZ($,n,B,L,_,q,O,D,F,Y,G,!0)}else if(!F1){let n=B-1;while(L<$.length){let S0=I($,L),b0=$.slice(L,S0),U0=t($,L,S0),u=U0.spaceEquivalent,_0=b0.slice(U0.charCount);if(b0.trim()===""||u<=_&&s1(_0,U0,q,O,D,_,F)||f$(_0)&&u>_||u<n)break;let n0=P(),E0=V$($,L,S0,U0,n,y,n0,!1,Y,G,!0,_);if(E0.processed)L=E0.newPos;else break}}var Z0=!1;while(L<$.length){let n=I($,L),S0=$.slice(L,n),b0=t($,L,n),U0=b0.charCount,u=b0.spaceEquivalent;if(S0.trim()==="")i=!0,Z0=!0,L=k($,n);else if(u<_){let _0=S0.slice(U0);if(_0.startsWith("<")&&EZ($,L,U0,_,u,G))break;let n0=_0.trim();if(n0.length>0&&T.length>0&&!p9(n0[0])&&!s1(_0,b0,q,O,D,_,F)){let E0=P();if(E0.length>0){let X0=E0[E0.length-1];if(!Z0&&(X0.type===W.paragraph||X0.type===W.text)){K$(_0,E0,Y,G),Z0=!1,L=k($,n);continue}}}break}else{let _0=S0.slice(U0);if(T.length>0){let m=f[T.length-1]||y;if(u+1>=m&&!s1(_0,b0,q,O,D,_,F)){let C0=P();if(C0.length>0&&cZ(C0,_0,G)){L=k($,n);continue}}}if(D$($,L,Y,G))break;if(Z0){let m=r$($,L,n,b0,_0,Y,G);if(m){L=m,Z0=!1;continue}}if(u<=_){if(_0.startsWith("<")&&EZ($,L,U0,_,u,G))break;if(!s1(_0,b0,q,O,D,_,F)){if(u===_&&!Z0){let m=_0.trim();if(m.length>0&&!p9(m[0])){let C0=l9($,L,Y,G);if(C0&&C0.type!==W.paragraph)break;let R0=P();if(R0.length>0&&!k9(R0)){K$(_0,R0,Y,G,!0),Z0=!1,L=k($,n);continue}}}break}}if(TZ(T,v,Z0,H0))break;let E0=g$(_0),X0=E0?E0.match:null,A1=X0&&(q?X0[2]===D:X0[1]===O);if(A1&&u>3&&Z0)break;if(A1&&u<=_+3){if(u>=4&&Z0)break;if(u===_){let m=q?X0[3]:X0[2];if(m=m.trimStart(),L=Y$($,T,f,m,L,n,u,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1,m.trim()===""){let R0=T[T.length-1],O0=g();L=xZ($,R0,O0,L,_,q,O,D,F,Y,G)}continue}if(u>_){if(Z0){let O0=q?X0[3]:X0[2];O0=O0.trimStart(),L=Y$($,T,f,O0,L,n,u,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1;continue}let m=P(),C0=u+1,R0=x(C0,g(),k9(m));if(R0){let O0=h(L,m);if(O0){L=O0.endPos,Z0=!1;continue}}if(!R0&&A1){let O0=q?X0[3]:X0[2];if(O0=O0.trimStart(),!i){let d0=k($,n);while(d0<$.length){let L0=I($,d0),i0=$.slice(d0,L0),D0=t($,d0,L0),Y1=D0.spaceEquivalent;if(i0.trim()===""){let b9=k($,L0);if(b9<$.length){let f1=t($,b9,$.length).spaceEquivalent,A$=u+(q?X0[1].length+X0[2].length+1:X0[1].length+1);if(f1+1>A$)break}break}else if(Y1<=_){let W0=i0.slice(D0.charCount).match(F);if(W0&&(q?W0[2]===D:W0[1]===O)&&Y1<=_)break}d0=k($,L0)}}L=Y$($,T,f,O0,L,n,u,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1;continue}else if(!R0&&!A1)break;{let O0=P(),A0=O0.length===0;if(A0&&TZ(T,v,Z0,H0))break;let d0=O0.some((D0)=>D0.type===W.codeBlock||D0.type===W.paragraph||D0.type===W.blockQuote||D0.type===W.orderedList||D0.type===W.unorderedList||D0.type===W.heading),L0=A0&&T.length===1?B:y;if(d0?u>=L0:u>L0){let D0=V$($,L,n,b0,L0,y,P(),Z0,Y,G,void 0,_);if(D0.processed){Z0=D0.wasBlank,L=D0.newPos;continue}}else break}}else if(u===_){if(!q&&X0&&IZ(X0,X0[1]))break;let m=q?X0[3]:X0[2];m=m.trimStart(),L=Y$($,T,f,m,L,n,_,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1}}else if(u>_){let m=P();if(f$(_0)){let A0=u+1;if(x(A0,g(),k9(m))){let i0=h(L,m);if(i0){L=i0.endPos,Z0=!1;continue}}if(u-_>3){let i0=m.length>0?m[m.length-1]:null;if(i0&&(i0.type===W.paragraph||i0.type===W.text)){K$(_0,m,Y,G),Z0=!1,L=k($,n);continue}}else break}else{let A0=h(L,m);if(A0){L=A0.endPos,Z0=!1;continue}}let R0=y;if(k9(m)?u>=R0-1:u>R0-1){let A0=V$($,L,n,b0,R0-1,y,P(),Z0,Y,G,void 0,_);if(A0.processed){Z0=A0.wasBlank,L=A0.newPos;continue}}else break}else break}}if(i&&T.length>1&&T[0].length>0&&T[0][0].type!==W.paragraph){for(var G0=1;G0<T.length;G0++)if(T[G0].length>0&&T[G0][0].type===W.paragraph){var E1=!1;for(var v1=0;v1<T[0].length;v1++){var G1=T[0][v1].type;if(G1===W.codeBlock||G1===W.heading||G1===W.blockQuote||G1===W.orderedList||G1===W.unorderedList||G1===W.htmlBlock||G1===W.breakThematic){E1=!0;break}}if(!E1)T[0]=[{type:W.paragraph,children:T[0]}];break}}let y9=q?{type:W.orderedList,items:T,ordered:!0,start:j}:{type:W.unorderedList,items:T,ordered:!1};return Y.inList=J,{...y9,endPos:L}}function aZ($,Z,Y,G){if(Y.inline)return null;let J=[],X=Z;while(X<$.length){let F=I($,X);if(w1($,X,F))break;let _=$.slice(X,F).trim();if(!(_.indexOf("|")!==-1||J.length>=3&&_&&!p9(_[0])))break;J.push(_),X=k($,F)}if(J.length<2)return null;let K=(F)=>F[0]==="|"&&F[F.length-1]==="|"?F.slice(1,-1):F,Q=(F)=>{let _=[],j="",D=!1;for(let O=0;O<F.length;O++){let v=F[O];if(v==="\\"&&O+1<F.length&&F[O+1]==="|")j+="|",O++;else if(v==="`")D=!D,j+=v;else if(v==="|"&&!D)_.push(j.trim()),j="";else j+=v}return _.push(j.trim()),_},V=Q(K(J[0]));if(!V.length)return null;let U=Q(K(J[1]));if(U.length!==V.length||U.some((F)=>!/^:?-+:?$/.test(F)))return null;let H=U.map((F)=>{let _=F[0]===":",j=F[F.length-1]===":";return _&&j?"center":_?"left":j?"right":null});if(G.optimizeForStreaming&&J.length===2)return null;let M=(F)=>W$(Y,!0,()=>F.map((_)=>l1(_,0,_.length,Y,G))),z=M(V),q=J.slice(2).map((F)=>{let _=F.indexOf("|")!==-1?Q(K(F)):[F.trim()],j=V.length;while(_.length<j)_.push("");return _.length=j,M(_)});return{type:W.table,header:z,cells:q,align:H,endPos:X}}var p6=["div","p","section","article","aside","nav","header","footer","main","h1","h2","h3","h4","h5","h6","blockquote","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","td","th","form","fieldset","hr","pre","details","summary","figure","figcaption"],u6=new Set(["pre","script","style","textarea"]);function m9($){return p6.indexOf($.toLowerCase())!==-1}function w9($){return u6.has($)}function w1($,Z,Y){for(var G=Z;G<Y;G++){let J=b($,G);if(J!==C&&J!==l&&J!==V0)return!1}return!0}function W$($,Z,Y){let G=$.inline;$.inline=Z;try{return Y()}finally{$.inline=G}}function C$($,Z,Y){var G=Z;while(G<Y){var J=I($,G);if(w1($,G,J))return G;G=k($,J)}return Y}function k$($,Z,Y){return{type:W.htmlComment,text:p1($),endPos:Z,...Y}}function v9($,Z,Y,G,J,X,K,Q,V){var U=p1(Z),H=U;if(Q&&(Q.forceBlock||Q.optimizeForStreaming)&&Z&&!X){var M=new RegExp("^<"+$.toLowerCase()+"(\\s[^>]*)?>$","i");if(M.test(Z.trim()))H=""}var z=H,q=$.toLowerCase(),F=new RegExp("^<"+q+"[\\s>]","i");if(F.test(z)){var _=z.indexOf(">");if(_!==-1){z=z.slice(_+1);var j="</"+q+">",D=z.indexOf(j);if(D!==-1)z=z.slice(0,D)}}else{var O="</"+q+">",v=z.indexOf(O);if(v!==-1)z=z.slice(0,v)}var A=[];if(z&&Q&&!Q.optimizeForStreaming){var E=V||{inline:!1,inHTML:!0,inAnchor:!1},w=z.trim(),S=F$.test(w),R=O$.test(w),y=H$.test(w);if(S||R||y){var N={...E,inline:!1,inHTML:!0,inAnchor:E.inAnchor||q==="a"};A=d9(w,N,Q)}else if(w){var B={...E,inline:!0,inHTML:!0,inAnchor:E.inAnchor||q==="a"};A=l1(w,0,w.length,B,Q)}}return{type:W.htmlBlock,tag:$,attrs:G||{},rawAttrs:J,children:A,rawText:H,text:z,verbatim:!0,isClosingTag:X,canInterruptParagraph:K,endPos:Y}}function h9($){let Z=O$.test($),Y=F$.test($),G=w6.test($);return Z||Y&&!G}function fZ($,Z,Y,G,J,X,K,Q,V,U){if(!Q.inHTML&&!Q.inline&&!n9(J,`
`)){let J0=X,P0=K.length;while(J0<P0){let M0=I(K,J0);if(w1(K,J0,M0))break;let Q0=K.slice(J0,M0).trim();if(Q0.length>0&&p9(Q0[0])){let a0=M$(K,J0,Q,U);if(a0){J0=a0.endPos;continue}let I0=o1(K,J0);if(I0){J0=I0.endPos;continue}return null}J0=k(K,M0)}}let H=Z,M=w9(H);var z=!M&&!K9(Z),q=void 0;if(J){var F=J.indexOf(">");if(F!==-1){var _=J.slice(0,F+1);if(_.indexOf(`
`)!==-1)q=_;var j=F;for(var D=1;D<F;D++){var O=_[D];if(O===" "||O==="\t"||O===`
`||O===">"){j=D;break}}Y=_.slice(j,F)}}var v=Y.replace(/^[\s\n\r\t]+/,""),A=u1(v,Z,$,U),E={...A},w=!1,S=!1;if(z&&G.length>0){var R="</"+H,y=G.indexOf(R);if(y>=0){var N=y+R.length;while(N<G.length&&(G[N]===" "||G[N]==="\t"))N++;if(N<G.length&&G[N]===">"){var B=G.slice(0,y);if(h9(B))G=B,S=!0;else w=!0}}if(!S){var T=G.length-1;if(G[T]===`
`){T--;while(T>=0&&(G[T]===" "||G[T]==="\t"||G[T]==="\r"))T--;if(T>=0&&G[T]===`
`)w=!0}}}var f=M||z&&w&&!h9(G),x=p1(G),P=x;if(f){if(x.length>0&&x[0]===`
`)x=x.slice(1),P=x;if(x.length>0&&x[x.length-1]===`
`)x=x.slice(0,-1),P=x;var R="</"+H+">",y=x.indexOf(R);if(y!==-1)x=x.slice(0,y)}let g=x.match(/^([ \t]*)/),h=g?g[1]:"",L=new RegExp(`^${h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"gm"),a=x.replace(L,""),i=F$.test(a),j0=O$.test(a),w0=H==="p",z0=H$.test(a),T0=w0?i:i||j0||Q.inHTML&&z0,p=[];if(a)if(T0||z0){let J0={...Q,inline:!1,inHTML:!0,inAnchor:Q.inAnchor||H==="a"};p=d9(a,J0,U)}else{let J0={...Q,inline:!0,inHTML:U.optimizeForStreaming?!0:Q.inHTML,inAnchor:V||Q.inAnchor||H==="a"};p=l1(a,0,a.length,J0,U)}var V1=void 0;if(f)if(q!==void 0)V1=q+P;else V1=P;return{type:W.htmlBlock,tag:f?Z:$,attrs:E,rawAttrs:Y,children:p,rawText:V1,text:a,verbatim:f,canInterruptParagraph:!0,endPos:X}}function M$($,Z,Y,G){if($[Z]!=="<")return null;if(G.optimizeForStreaming&&Y.inHTML)return null;if(!Y.inline);if(Z+1<$.length){if($[Z+1]==="?"){var J=U$($,Z);if(J&&J.kind==="pi")return k$(J.text||"",J.endPos,{raw:!0})}else if($[Z+1]==="!"){if(Z+3<$.length&&$.slice(Z,Z+4)==="<!--"){if(Y.inline);var X=U$($,Z);if(X&&X.kind==="comment"){var K=X.text||"",Q=!1;if(K==="<!-->")K="",Q=!0;else if(K==="<!--->")K="-",Q=!0;else if(K.startsWith("<!--")&&K.endsWith("-->"))K=K.slice(4,-3);if(Y.inline);return k$(K,X.endPos,{endsWithGreaterThan:Q})}}var V=U$($,Z);if(V&&(V.kind==="declaration"||V.kind==="cdata"))return k$(V.text||"",V.endPos,{raw:!0})}}if(Z+1<$.length){let q9=$[Z+1];if(q9===" "||q9===`
`||q9==="\t"||q9==="\r")return null}var U=$.indexOf(">",Z+1);if(U!==-1){var H=$.slice(Z+1,U),M=H.indexOf(" ")!==-1||H.indexOf("\t")!==-1;if(!M&&(c(H,"http://")||c(H,"https://")))return null;if(!M&&mZ(H))return null}var z=o1($,Z);if(!z&&!Y.inline){var q=$.length,F=I($,Z),_=Z,j=0;while(_<F&&j<3&&($[_]===" "||$[_]==="\t"))j++,_++;if(_>=F||$[_]!=="<")return null;if(_+1<F){var D0=d$($,_+1);if(D0){var Y1=D0.tagName,D=m9(Y1);if(!D)return null;var O=D0.nextPos,v=!1,A=!1,E="",w=F,S=!1;while(w<q&&!S){var R=!1;while(O<w){var y=$[O];if(A){if(y===E)A=!1,E="";if(y===`
`||y==="\r")v=!0;O++,R=!0}else if(y==='"'||y==="'")A=!0,E=y,O++,R=!0;else if(y===`
`||y==="\r"){v=!0,O++,R=!0;var N=I($,O);if(N===O)break;w=N}else if(y===">"){O++,S=!0;break}else O++,R=!0}if(S)break;if(!R&&O>=w){var B=I($,w+1);if(B<=w)break;w=B}else if(O>=w&&w<q){var B=I($,w+1);if(B<=w)break;w=B}else break}if(!v&&S)return null;if(O>=F&&F<q)O=F;var T=D?"type6":"type7",f=O,x=C$($,k($,F),q),P=$.slice(f,x),g=Z+1<$.length&&$[Z+1]==="/";if(T==="type7"&&P.trim()===""){var h=$.slice(Z,x),L=I(h,0);if(L<h.length)L++;var a=h.slice(0,L);return v9(Y1,a,x,{},void 0,g,!1,G,Y)}var i=$.slice(Z,x);return v9(Y1,i,x,{},void 0,g,T==="type6",G,Y)}}return null}if(!z)return null;if(U!==-1){var j0=$.slice(Z+1,U);if((c(j0,"http://")||c(j0,"https://"))&&(j0.indexOf(" ")!==-1||j0.indexOf("\t")!==-1))return null}var P0=Z+(z.isClosing?2:1);if(P0<$.length){var w0=$[P0],z0=b(w0);if(z0>=97&&z0<=122||z0>=65&&z0<=90){if(P0+1<$.length&&$[P0+1]===":")return null}}if(z.isClosing){var T0=z.attrs.trim();if(T0.length>0)return null;if(!Y.inline){var q=$.length,F=I($,Z),f=z.endPos,p=f;while(p<F&&($[p]===" "||$[p]==="\t"||$[p]==="\r"))p++;var V1=p>=F||$[p]==="<"&&function(){var KZ=o1($,p);return KZ&&m9(KZ.tagLower)}();if(V1){var x=C$($,k($,F),q),P=$.slice(f,x);if(P.length>0){if(P[0]==="\r"&&P[1]===`
`)P=P.slice(2);else if(P[0]===`
`||P[0]==="\r")P=P.slice(1)}let tZ=z.tagLower||z.tagName.toLowerCase();return v9(z.tagName,P,x,u1(z.whitespaceBeforeAttrs+z.attrs,tZ,z.tagName,G),z.whitespaceBeforeAttrs+z.attrs,!0,!1,G,Y)}}var J0=$.slice(Z,z.endPos);return{type:W.htmlSelfClosing,tag:z.tagName,attrs:{},endPos:z.endPos,isClosingTag:!0,rawText:J0}}var P0=Z+(z.isClosing?2:1);if(P0<$.length){var M0=$[P0];if(M0===" "||M0==="\t"||M0===`
`||M0==="\r")return null}var Q0=z.tagLower,a0=K9(z.tagName);let I0=z.tagName.length>0&&z.tagName[0]>="A"&&z.tagName[0]<="Z";if(z.isSelfClosing||a0&&Q0!=="a"){if(z.hasNewline&&!I0)return null;if(!Y.inHTML&&!Y.inline&&!I0)return null;var k0=z.attrs.replace(/\/\s*$/,""),B1=u1(k0,Q0,z.tagName,G),J0=Y.inline?$.slice(Z,z.endPos):void 0;let XZ={type:W.htmlSelfClosing,tag:z.tagName,attrs:B1,endPos:z.endPos};if(J0!==void 0)XZ.rawText=J0;return XZ}if(Y.inline){var r=z.attrs.replace(/\/\s*$/,""),K0=z.whitespaceBeforeAttrs+r,B0=u1(r,Q0,z.tagName,G),m0={...B0},H0=z.endPos,q0=[];if(!K9(z.tagName)){var e=v6($,z.endPos,Q0);if(e!==null){var l0=$.slice(z.endPos,e[0]);if(l0)if(Y.inHTML&&H$.test(l0)||h9(l0))q0=d9(l0,{...Y,inline:!1,inHTML:!0,inAnchor:Y.inAnchor||Q0==="a"},G);else q0=l1(l0,0,l0.length,{...Y,inline:!0,inHTML:G.optimizeForStreaming?!0:Y.inHTML,inAnchor:Y.inAnchor||Q0==="a"},G);H0=e[1]}}return{type:W.htmlBlock,tag:z.tagName,attrs:m0,rawAttrs:K0,children:q0,verbatim:!1,endPos:H0}}if(!Y.inline){var q=$.length,F=I($,Z),Y0=z.tagLower,$0=w9(Y0),s=!$0&&m9(z.tagName),r0=!1,$1=Z;while($1<z.endPos){if($[$1]===">"){r0=!0;break}$1++}var p=z.endPos;while(p<F&&($[p]===" "||$[p]==="\t"))p++;var U1=p>=F||$[p]===`
`||$[p]==="\r"||s&&p<F||!r0;if($0&&r0&&!z.isClosing){var{tagName:F1,endPos:Q1,attrs:N1}=z,F0=Q1;if($[F0]===`
`)F0++;var s0=F0,O1=F0,P1=1,z1=Y0.length+1;while(P1>0){var h0=$.indexOf("<",F0);if(h0===-1){O1=q,F0=q;break}var _1=-1,y1=-1;if($[h0+1]==="/")y1=h0;else if(h0+z1+1<=q&&($[h0+1]===Y0[0]||$[h0+1]===F1[0])){var W1=$.substring(h0+1,h0+z1);if(W1.toLowerCase()===Y0&&($[h0+z1]===" "||$[h0+z1]===">"))_1=h0}if(_1===-1&&y1===-1){F0=h0+1;continue}if(_1!==-1&&(y1===-1||_1<y1))F0=_1+z1+1,P1++;else{var o=y1+2;while(o<q){var Z1=$[o];if(Z1!==" "&&Z1!=="\t"&&Z1!==`
`&&Z1!=="\r")break;o++}if(o+Y0.length>q)break;var q1=$.substring(o,o+Y0.length);if(q1.toLowerCase()!==Y0){F0=o;continue}o+=Y0.length;while(o<q){var o0=$[o];if(o0!==" "&&o0!=="\t"&&o0!==`
`&&o0!=="\r")break;o++}if(o>=q||$[o]!==">"){F0=o;continue}var Q9=o+1,b1=I($,Q9);O1=b1,F0=b1+1,P1--}}var R1=0;while(F0+R1<q&&$[F0+R1]===`
`)R1++;var z9=$.slice(Z,F0+R1),N9=$.slice(s0,O1),_9=F0+R1;return fZ(z.tagName,z.tagName,N1,N9,z9,_9,$,Y,!1,G)}if(U1||!r0){var T=s?"type6":"type7",f=z.endPos,x=C$($,k($,F),q);if(T==="type6"&&!z.isClosing){let a9=I0?z.tagName:z.tagLower||z.tagName.toLowerCase();var M1="</"+a9,I1="<"+a9,L1=f,T1=1,v0=-1;while(L1<x&&T1>0){var N0=$.indexOf(I1,L1),p0=$.indexOf(M1,L1);while(N0!==-1&&N0<x){var S1=N0+I1.length;if(S1>=q){N0=-1;break}var u0=$[S1];if(u0===" "||u0==="\t"||u0===`
`||u0==="\r"||u0===">")break;N0=$.indexOf(I1,S1)}if(N0===-1||N0>=x)N0=x;if(p0===-1||p0>=x)p0=x;if(N0<p0)T1++,L1=N0+I1.length;else if(p0<x){if(T1--,T1===0){v0=p0;break}L1=p0+M1.length}else break}if(v0!==-1&&v0<x){var f0=v0+M1.length;while(f0<q&&($[f0]===" "||$[f0]==="\t"))f0++;if(f0<q&&$[f0]===">"){var J1=f0+1,y0=J1;while(y0<q&&$[y0]!==`
`)y0++;if(y0<q)y0++;while(y0<q&&($[y0]===" "||$[y0]==="\t"))y0++;if(y0<q&&$[y0]==="<"&&!c($.slice(y0),M1)){var n1=o1($,y0);if(n1)x=J1}}}else if(v0=$.indexOf(M1,f),v0!==-1){var c9=$.slice(f,v0),Z0=I0||h9(c9);if(Z0){var G0=v0+M1.length;while(G0<q&&($[G0]===" "||$[G0]==="\t"))G0++;if(G0<q&&$[G0]===">"){var E1=I($,G0+1);x=E1}}}}var P=$.slice(f,x),v1=z.whitespaceBeforeAttrs+z.attrs,g=z.isClosing;let VZ=()=>{let a9=z.tagLower||z.tagName.toLowerCase(),L9=z.whitespaceBeforeAttrs+z.attrs;return{parsed:u1(L9,a9,z.tagName,G),raw:L9}};if(T==="type7"&&P.trim()===""){var G1=$.slice(Z,z.endPos),y9=G1.indexOf(`
`)!==-1;if(y9)return null;var n=z.endPos,L=I($,n);if(L<$.length)L++;var a=$.slice(Z,L);let QZ=VZ();return v9(z.tagName,a,x,QZ.parsed,QZ.raw,g,!1,G,Y)}var S0=z.hasNewline,b0=!r0;if((S0||b0)&&T==="type7"){var U0=z.endPos,u=$.slice(Z,U0),_0=P,i=u+_0;let L9=VZ();return v9(z.tagName,i,x,L9.parsed,L9.raw,g,!1,G,Y)}let UZ=z.tagLower||z.tagName.toLowerCase();var n0=u1(v1,UZ,z.tagName,G),E0={...n0};if(T==="type6"){var X0=P,A1=P.indexOf("</"+UZ);if(A1>=0){var p=A1+2+z.tagName.length;while(p<P.length&&(P[p]===" "||P[p]==="\t"))p++;if(p<P.length&&P[p]===">")X0=P.slice(0,A1)}if(h9(X0))return fZ(z.tagName,z.tagName,v1,X0,$.slice(Z,z.endPos),x,$,Y,!1,G)}var m=P;if(m.length>0){if(m[0]==="\r"&&m[1]===`
`)m=m.slice(2);else if(m[0]===`
`||m[0]==="\r")m=m.slice(1)}var C0=m.split(`
`),R0=1/0;for(var O0=0;O0<C0.length;O0++){var A0=C0[O0];if(A0.trim().length===0)continue;var j=0;while(j<A0.length&&(A0[j]===" "||A0[j]==="\t"))j++;if(j<R0)R0=j}if(R0>0&&R0<1/0){var d0=[];for(var L0=0;L0<C0.length;L0++){var i0=C0[L0];if(i0.trim().length===0)d0.push(i0);else d0.push(i0.slice(R0))}m=d0.join(`
`)}return v9(z.tagName,m,x,E0,v1,g,T==="type6"?!0:!1,G,Y)}}if(Y.inline)return null;var D0=d$($,Z+1);if(!D0)return null;var Y1=D0.tagName;if(!K9(Y1))return null;let b9=D0.tagLower;var W0=D0.nextPos,f1=$.length;while(W0<f1&&j1($[W0]))W0++;var YZ=W0;while(W0<f1&&$[W0]!==">")W0++;if(W0>=f1)return null;let A$=$.slice(YZ,W0).trim(),R9=W0+1;while(R9<f1&&j1($[R9]))R9++;let sZ="</"+b9+">",JZ=$.toLowerCase().indexOf(sZ,R9);if(JZ!==-1){if($.slice(R9,JZ).trim())return null}W0++;let oZ=W0;while(W0<f1&&j1($[W0]))W0++;if(W0<f1&&$[W0]===`
`)W0++;let nZ=u1(A$,Y1,Y1,G);return{type:W.htmlSelfClosing,tag:Y1,attrs:nZ,endPos:oZ}}function l6($,Z){if($[Z]!=="<")return null;var Y=$.length,G=!1,J=Z+1;if(Z+1<Y&&$[Z+1]==="/")G=!0,J=Z+2;var X=d$($,J);if(!X)return null;var{tagName:K,tagLower:Q,nextPos:V}=X;if(V<Y){var U=$[V];if(U===">"||U==="/"){var H=U===">"?V+1:V+2;if(U==="/"&&(V+1>=Y||$[V+1]!==">"))return null;var M=U==="/",z=m9(K),q=!w9(Q)&&!z;return{kind:"tag",tagNameLower:Q,tagName:K,isClosing:G,isSelfClosing:M,hasNewline:!1,type6Candidate:z,type7Candidate:q,endPos:H,attrs:"",whitespaceBeforeAttrs:""}}}var F=V,_=!1;while(V<Y){var j=$[V],D=b($,V);if(j===" "||j==="\t");else if(D===10||D===13)_=!0;else break;V++}var O=$.slice(F,V),v=V,A=!1,E="",w=0,S=!1,R=!1,y=0;while(v<Y){var N=$[v],D=b($,v);if(y===1){if(N==='"'){if(v+1<Y&&$[v+1]==='"')return null;y=0}v++}else if(y===2){if(N==="'")y=0;v++}else if(N==='"')y=1,v++;else if(N==="'")y=2,v++;else if(N==="{"||N==="}"&&w>0)w+=N==="{"?1:-1,v++;else if(N===">"&&w===0){if(v>V){var B=v-1;while(B>=V){var T=$[B];if(T!==" "&&T!=="\t")break;B--}if(B>=V&&$[B]==="/")S=!0,R=B<v-1}v++;break}else{if(N==="*"||N==="#"||N==="!"){var f=v+1;while(f<Y){var x=$[f];if(x==="="||x===" "||x==="\t"||x===`
`||x==="\r"||x===">")break;f++}if(f<Y&&$[f]==="=")return null}if(D===10||D===13)_=!0;v++}}if(v>Y||$[v-1]!==">")return null;if(y===1||y===2)return null;if(w>0)return null;if(R)return null;var P=v-1;if(S)P--;var g=$.slice(V,P),h=S,L=-1,a=!1,i="",j0=!1;for(var w0=0;w0<g.length;w0++){var j=g[w0];if(a){if(j===i)a=!1,L=w0,i="",j0=!1}else if(j==='"'||j==="'")a=!0,i=j,j0=!1;else if(j==="=")j0=!0;else if(L!==-1&&w0===L+1){var D=j.charCodeAt(0);if(U9(D))return null}else if(j0&&!a&&(j==="*"||j==="#"||j==="!"))return null;else if(j1(j))j0=!1}var z0=m9(K),T0=!w9(Q)&&!z0;return{kind:"tag",tagNameLower:Q,tagName:K,isClosing:G,isSelfClosing:h,hasNewline:_,type6Candidate:z0,type7Candidate:T0,endPos:v,attrs:g,whitespaceBeforeAttrs:O}}function U$($,Z){if(Z>=$.length||$[Z]!=="<")return null;var Y=$.length;if(Z+1>=Y)return null;var G=$[Z+1];if(G==="!"){if(Z+4<=Y&&$.slice(Z,Z+4)==="<!--"){var J=Z+4;if(J<Y&&$[J]===">")return{kind:"comment",hasNewline:!1,endPos:J+1,text:$.slice(Z,J+1),raw:!0};if(J+1<Y&&$[J]==="-"&&$[J+1]===">")return{kind:"comment",hasNewline:!1,endPos:J+2,text:$.slice(Z,J+2),raw:!0};while(J+2<Y){if($.slice(J,J+3)==="-->")return{kind:"comment",hasNewline:!1,endPos:J+3,text:$.slice(Z,J+3),raw:!0};J++}return null}if(Z+9<=Y&&$.slice(Z,Z+9)==="<![CDATA["){var J=Z+9;while(J+2<Y){if($.slice(J,J+3)==="]]>")return{kind:"cdata",hasNewline:!1,endPos:J+3,text:$.slice(Z,J+3),raw:!0};J++}return null}if(Z+2<Y&&U9($.charCodeAt(Z+2))){var J=Z+2;while(J<Y&&$[J]!==">")J++;if(J>=Y)return null;return{kind:"declaration",hasNewline:!1,endPos:J+1,text:$.slice(Z,J+1),raw:!0}}return null}if(G==="?"){var J=Z+2;while(J+1<Y){if($.slice(J,J+2)==="?>")return{kind:"pi",hasNewline:!1,endPos:J+2,text:$.slice(Z,J+2),raw:!0};J++}return null}return l6($,Z)}function m$($,Z){if(Z>=$.length)return!1;var Y=$[Z];return Y==="="||Y==="-"||Y==="_"||Y==="*"||Y==="#"||Y===">"||Y==="`"||Y==="~"||Y==="["||Y>="0"&&Y<="9"}function J$($,Z){if(Z>=$.length)return!1;var Y=$[Z];return Y==='"'||Y==="'"||Y==="("}function d6($,Z,Y){var G=$.length;if(Z>=G||$[Z]!==Y)return null;Z++;var J=Z,X=!1;while(Z<G&&$[Z]!==Y){var K=$.charCodeAt(Z);if(K===d){if(X)return null;X=!0,Z++}else if(K===V0)if(Z+1<G&&$.charCodeAt(Z+1)===d){if(X)return null;X=!0,Z+=2}else X=!1,Z++;else{if(X=!1,K===k1&&Z+1<G)Z++;Z++}}if(Z>=G)return null;return{value:$.slice(J,Z),endPos:Z+1}}function i6($,Z){var Y=$.length;if(Z>=Y||$[Z]!=="(")return null;Z++;var G=Z,J=1,X=!1;while(Z<Y&&J>0){var K=$.charCodeAt(Z);if(K===d){if(X)return null;X=!0,Z++}else if(K===V0)if(Z+1<Y&&$.charCodeAt(Z+1)===d){if(X)return null;X=!0,Z+=2}else X=!1,Z++;else{if(X=!1,K===k1&&Z+1<Y)Z++;else if(K===FZ)J++;else if(K===OZ)J--;Z++}}if(J!==0)return null;return{value:$.slice(G,Z-1),endPos:Z}}function c6($,Z){var Y=$.length,G=Z;while(G<Y){var J=G===0||$[G-1]===`
`,X=$.charCodeAt(G);if(X===d&&G>Z){var K=G+1;if(K<Y&&$.charCodeAt(K)===V0)K++;if(K<Y&&$.charCodeAt(K)===d){var Q=K+1;while(Q<Y&&($[Q]===" "||$[Q]==="\t"))Q++;var V=Q-(G+1);if($.charCodeAt(G+1)===V0)V--;if(Q<Y&&$.charCodeAt(Q)!==d&&$.charCodeAt(Q)!==V0&&V<4)return G}}if(J&&c($,"[^",G)){var U=G+2;while(U<Y&&$[U]!=="]")U++;if(U<Y&&$[U]==="]"&&U+1<Y&&$[U+1]===":")return G}G++}return Y}function a6($,Z,Y){let G=$.length,J=Z,X=J<G&&$[J]==="<";if(X)J++;let K=J,Q=K;if(K>=G){if(!X)return null;Q=K}else if(Y>0&&K<G&&$[K]===`
`)return null;else while(Q<G){if(X&&$[Q]===">")break;if($[Q]===`
`){let y=Q+1;if(y>=G)break;if(y<G&&$[y]===`
`)break;let N=y;while(N<G&&($[N]===" "||$[N]==="\t"))N++;if(N<G&&J$($,N))break;if(N<G&&$[N]==="[")break;if(N<G){let B=$[N];if(m$($,N))break;if(B>="a"&&B<="z"){let T=N+1;while(T<G&&T<N+32&&($[T]>="a"&&$[T]<="z"||$[T]>="A"&&$[T]<="Z"||$[T]>="0"&&$[T]<="9"||$[T]==="+"||$[T]==="."||$[T]==="-"))T++;if(T<G&&$[T]===":");else break}}Q=N;continue}if(!X&&($[Q]===" "||$[Q]==="\t")){let y=Q+1;while(y<G&&($[y]===" "||$[y]==="\t"))y++;if(y<G&&J$($,y))break;if(y<G&&$[y]===`
`){let N=y+1;if(N<G&&$[N]===`
`)break;let B=N;while(B<G&&($[B]===" "||$[B]==="\t"))B++;if(B<G&&J$($,B))break}}Q++}if(X&&(Q>=G||$[Q]!==">"))return null;let V=$.slice(K,Q),U=[],H=0;for(let y=0;y<=V.length;y++)if(y===V.length||V[y]===`
`){let N=V.slice(H,y);if(N=N.trim(),N.length>0||U.length===0){if(U.push(N),y<V.length)U.push(`
`)}else if(y<V.length)U.push(`
`);H=y+1}V=U.join(""),V=V.trim(),J=X?Q+1:Q;var M=!1;if(J<G&&$[J]===`
`){var z=J+1,q=z;while(q<G&&($[q]===" "||$[q]==="\t"))q++;if(q<G){let y=$[q];if(m$($,q))M=!0;if(!M&&y!=="="&&y!=="-"){var F=I($,q);if(F<G){var _=k($,F),j=_;while(j<G&&($[j]===" "||$[j]==="\t"))j++;if(j<G){var D=$[j];if(D==="="||D==="-")M=!0}}}}}if(!M&&J<G&&J$($,J))return null;let O=0;while(J<G&&!M){let y=$[J];if(y===`
`){if(O++,O>1)break;J++;var v=J;if(J=g0($,J),J<G&&V9($[J])&&$[J]!==`
`){J=v-1;break}if(J<G){let N=$[J];if(m$($,J)){M=!0,J=v-1;break}}}else if(y===" "||y==="\t")J++;else if(V9(y))break;else break}let A=void 0;if(J<G){let y=$[J];var E=y==="("?i6($,J):y==='"'||y==="'"?d6($,J,y):null;if(E===null&&(y==='"'||y==="'"||y==="("))return null;if(E){A=E.value,J=E.endPos;var w=J;while(w<G&&($[w]===" "||$[w]==="\t"))w++;if(w<G&&$[w]!==`
`&&$[w]!=="\r")return null;J=w}}if(J=g0($,J),J<G&&$[J]!==`
`){var S=J;while(S<G&&$[S]!==`
`){if($[S]!==" "&&$[S]!=="\t")return null;S++}}if(A===void 0&&J<G&&$[J]!==`
`){var R=J;while(R<G&&$[R]!==`
`){if($[R]!==" "&&$[R]!=="\t")return null;R++}}return{endPos:J<G&&$[J]===`
`?J+1:J,target:V,title:A}}function r6($,Z){let Y=Z,G=c6($,Z),J=G<$.length&&$[G]===`
`&&$[G+1]===`
`,X=G,K=Z;var Q=[];let V=K,U=0,H=!1;while(V<X){let F=I($,V);if(F>X)F=X;if(U===0){let _=F;while(_>V&&($[_-1]===" "||$[_-1]==="\t"))_--;let j=$.slice(V,_);Q.push(j),H=j.length===0}else{let _=0,j=V;while(j<F&&j<V+4&&$[j]===" ")_++,j++;let D=!1;for(let v=V;v<F;v++)if($[v]!==" "&&$[v]!=="\t"&&$[v]!=="\r"){D=!0;break}let O=!D;if(_>=4&&H)Q.push($.slice(V,F));else if(_===4&&!H)Q.push($.slice(V+4,F));else Q.push($.slice(V,F));H=O}if(F<X){let _=b($,F);if(_===V0||_===d)Q.push(`
`),V=k($,F);else V=X}else V=X;U++}let M=Q.join("");if(J)M=M.replace(/\n$/,"");var z=M.length;while(z>0){var q=M[z-1];if(q===`
`||q===" ")z--;else break}if(z<M.length)M=M.slice(0,z);return{endPos:G,target:M,title:void 0}}function B9($,Z,Y,G,J){if($[Z]!=="[")return null;var X=Z+1<$.length&&$[Z+1]==="^";if(J?!X:X)return null;var K=Z;while(K>0&&$[K-1]!==`
`)K--;if(t($,K,Z).spaceEquivalent>=4||Y.inline)return null;var Q=Z+(J?2:1),V=$.length,U=y6($,Q,V,"]");if(U===-1)return null;var H=$.slice(Q,U);if(H.length>999)return null;var M=!1,z=!1,q=!1;for(var F=0;F<H.length;F++){var _=H[F];if(_==="\\"&&F+1<H.length){F++;continue}var j=b(_);if(j===g1||j===H9)z=!0;else if(j===d||j===V0)q=!0;else if(j!==C&&j!==l)M=!0}if(!M||z)return null;var D=U+1;if(q){var O=b($,Q),v=b($,U-1);if(O===d||O===V0||v===d||v===V0||D>=V||$[D]!==":")return null}else if(D>=V||$[D]!==":"){if(D=g0($,D),D<V&&b($,D)===d)D=g0($,D+1);if(D>=V||$[D]!==":")return null}D++;var A=0;while(D<V){var E=b($,D);if(E===d){if(++A>1)break;D=g0($,D+1)}else if(E===C||E===l)D++;else break}let w=J?r6($,D):a6($,D,A);if(!w)return null;let S=hZ(H),R=Y.refs||{},y=J?`^${S}`:S;if(!R[y])R[y]={target:Q$(w.target.trim()),title:w.title?Q$(w.title):void 0},Y.refs=R;return{type:J?W.footnote:W.ref,endPos:w.endPos}}function rZ($,Z,Y){var G=[],J=Y===null?0:Y+1;while(J<Z.length){var X=Z[J];if(!X||X.type!=="*"&&X.type!=="_"&&X.type!=="~"&&X.type!=="="){J++;continue}if(!X.canClose||!X.active){J++;continue}var K=X.type==="*"?0:X.type==="_"?1:X.type==="~"?2:3,Q=K*6+X.length%3*2+(X.canOpen?1:0),V=G[Q]!==void 0?G[Q]:Y===null?-1:Y,U=-1,H=X.type,M=X.inAnchor,z=X.canOpen,q=X.length,F=q%3;for(var _=J-1;_>V;_--){var j=Z[_];if(!j||!j.active||j.type!==H||!j.canOpen||j.inAnchor!==M)continue;var D=j.length;if(!z&&!j.canClose||F===0||(D+q)%3!==0){U=_;break}}if(U>=0){var O=Z[U],D=O.length,v=D>=2&&q>=2,A=v?2:1;if(A>D||A>q){J++;continue}var E=O.nodeIndex,w=X.nodeIndex,S=E+1,R=w,y=$.slice(S,R);if(y.length>0){var N=R-S;$.splice(S,N);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>S)Z[B].nodeIndex-=N;if(w>S)w-=N}var T=O.type==="~"?"del":O.type==="="?"mark":v?"strong":"em",f={type:W.textFormatted,tag:T,children:y},x=$[E];if(!x||!x.text){O.active=X.active=!1;continue}var P=x.text.length<=A;if(P){$.splice(E,1);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>E)Z[B].nodeIndex--;if(w>E)w--}else x.text=x.text.slice(A);var g=$[w];if(!g||!g.text){O.active=X.active=!1;continue}var h=g.text.length<=A;if(h){$.splice(w,1);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>w)Z[B].nodeIndex--}else g.text=g.text.slice(A);var L=P?E<w?w-1:E:E+1;if(L<0||L>$.length)L=L<0?0:$.length;$.splice(L,0,f);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>=L)Z[B].nodeIndex++;for(var B=U+1;B<J;B++)Z[B].active=!1;if(P)O.active=!1;else if(O.length-=A,O.length===0)O.active=!1;if(h)X.active=!1,J++;else if(X.length-=A,X.length===0)X.active=!1,J++}else{if(G[Q]=J-1,!X.canOpen)X.active=!1;J++}}var a=0;for(var _=0;_<Z.length;_++)if(Z[_].active)Z[a++]=Z[_];Z.length=a}function i9($,Z,Y){var G=[],J=0,X=-3,K=X;if(Z.inline)return l1($,0,$.length,Z,Y);if(J===0&&$.startsWith("---")){var Q=k6($,J);if(Q)G.push(Q),J=Q.endPos}while(J<$.length){while(J<$.length&&$[J]===`
`)J++;if(J>=$.length)break;K=X;let M=$[J],z=l9($,J,Z,Y);if(z){let D=z.type;if(D===W.codeBlock){var V=M==="`"||M==="~";if(!V&&(M===" "||M==="\t")){let O=I($,J),v=t($,J,O);V=v.spaceEquivalent<=3&&J+v.charCount<$.length&&($[J+v.charCount]==="`"||$[J+v.charCount]==="~")}}else if(D===W.breakThematic);else if(D===W.blockQuote);else if(D===W.heading);else if(D===W.orderedList||D===W.unorderedList);else if(D===W.table);else if(D===W.htmlComment);else if(D===W.htmlBlock);else if(D===W.ref);if(z.type===W.htmlComment){G.push(z);let O=J;J=z.endPos;let v=I($,O);if(J<v){let A=$.slice(J,v);if(A.trim().length>0)G.push({type:W.text,text:A});if(J=v,J<$.length&&$[J]===`
`)J++}continue}if(z.type===W.htmlBlock||z.type===W.htmlSelfClosing)if(z.type===W.htmlSelfClosing&&z.isClosingTag===!0&&!Z.inline&&!Z.inHTML);else{G.push(z),J=z.endPos;continue}else{G.push(z),J=z.endPos;continue}}let q=K!==X?K:J;if(K===X){if(j1(M)){let D=I($,J),O=t($,J,D),v=J+O.charCount;if(O.spaceEquivalent<=3&&v<$.length&&$[v]==="[")q=v;else q=-1}else if(M==="[")q=J;else q=-1;K=q}if(q>=0&&q+1<$.length&&$[q+1]==="^")q=-1;if(q>=0){let D=B9($,q,Z,Y,!1);if(D){G.push(D),J=D.endPos;continue}let O=L6($,q,J===0);if(O.shouldSkip){J=O.newPos;continue}}let F=pZ($,J,Z,Y);if(F){G.push(F),J=F.endPos;continue}let _=J;if(j1($[_])){let D=I($,J),O=t($,J,D);_=J+O.charCount}if(_<$.length&&$[_]==="["&&_+1<$.length&&$[_+1]==="^"){let D=B9($,_,Z,Y,!0);if(D){J=D.endPos;continue}}let j=c$($,J,Z,Y);if(j){G.push(j),J=j.endPos;continue}J++}let U=Z.refs||{},H={};for(let M in U)H[M]=U[M];if(e9(H))return[{type:W.refCollection,refs:H},...G];return G}function v$($,Z,Y){var G=0,J=!0;let X=$.length;while(G<X){var K=0;while(G<X&&b($,G)===d)K++,G++;if(G>=X)break;if(K>0)J=!0;let v=b($,G);if(v===t0||v===t1){var Q=e$($,G,{inline:!1},Y);if(Q){G=Q.endPos,J=!0;continue}}var V=G,U=0;while(V<X&&U<4){let A=b($,V);if(A===C)U++,V++;else if(A===l)U+=4-U%4,V++;else break}if(U<4&&V<X&&b($,V)===g1&&J)if(V+1<X&&b($,V+1)===D9){J=!1;var D=I($,G);G=D>=X?X:k($,D);continue}else{var H=B9($,V,{inline:!1,refs:Z},Y,!1);if(H){G=H.endPos,J=!0;continue}var D=I($,G),M=$.indexOf(":",V+1);if(M===-1||M>=D){var z=t($,G,D);if(!w1($,G,D)&&v!==T9&&v!==C1&&v!==D1&&v!==d1&&z.spaceEquivalent<4)J=!1}G=D>=X?X:k($,D);continue}if(v===C1&&J){var q=G,F=[];while(q<X){var D=I($,q),_=q;while(_<D){let E=b($,_);if(E===C||E===l)_++;else break}if(_>=D||b($,_)!==C1)break;var j=_+1;if(j<D&&(b($,j)===C||b($,j)===l))j++;F.push($.slice(j,D)),q=k($,D)}if(F.length){v$(F.join(`
`),Z,Y),G=q,J=!0;continue}}var D=I($,G);if(D>=X)G=X;else{var O=w1($,G,D),z=t($,G,D);G=k($,D),J=v===T9||v===C1||v===D1||v===d1||O||z.spaceEquivalent>=4}}}function s6($,Z){if($.charCodeAt(0)===65279)$=$.slice(1);$=p1($);let G={...{inline:!1,refs:{}}},J={...Z,slugify:Z?.slugify?(K)=>Z.slugify(K,K1):K1,sanitizer:Z?.sanitizer||X9,tagfilter:Z?.tagfilter!==!1};if(!G.inline)v$($,G.refs||{},J);return i9($,G,J)}var n6=/^\n+/,$Z=typeof H1.createContext<"u"?H1.createContext(void 0):void 0;function t6($){let Z=!1;for(let G=0;G<$.length;G++){let J=$.charCodeAt(G);if(J>127||J===k1||J===t0){Z=!0;break}}if(!Z)return $;let Y="";for(let G=0;G<$.length;G++){let J=$[G];if(J==="%"&&G+2<$.length&&/[0-9A-Fa-f]/.test($[G+1])&&/[0-9A-Fa-f]/.test($[G+2]))Y+=$[G]+$[G+1]+$[G+2],G+=2;else if(J.charCodeAt(0)===k1)Y+="%5C";else if(J.charCodeAt(0)===t0)Y+="%60";else{let X=J.charCodeAt(0);Y+=X>127?encodeURIComponent(J):J}}return Y}function e6($,Z,Y,G,J,X,K,Q){switch($.type){case W.blockQuote:{let U={key:Y.key};if($.alert)U.className="markdown-alert-"+X($.alert.toLowerCase(),K1),$.children.unshift({attrs:{},children:[{type:W.text,text:$.alert}],verbatim:!0,type:W.htmlBlock,tag:"header"});return G("blockquote",U,Z($.children,Y))}case W.breakLine:return G("br",{key:Y.key});case W.breakThematic:return G("hr",{key:Y.key});case W.frontmatter:if(Q.preserveFrontmatter)return G("pre",{key:Y.key},$.text);return null;case W.codeBlock:let V=$.lang?M9($.lang):"";return G("pre",{key:Y.key},G("code",{...s9($.attrs||{}),className:V?`language-${V} lang-${V}`:""},$.text));case W.codeInline:return G("code",{key:Y.key},$.text);case W.footnoteReference:return G("a",{key:Y.key,href:J($.target,"a","href")},G("sup",{key:Y.key},$.text));case W.gfmTask:return G("input",{checked:$.completed,key:Y.key,readOnly:!0,type:"checkbox"});case W.heading:return G(`h${$.level}`,{id:$.id,key:Y.key},Z($.children,Y));case W.htmlBlock:{let U=$;if(Q.tagfilter&&$$(U.tag)){let H;if("rawText"in U&&typeof U.rawText==="string")H=U.rawText;else{let M="";if(U.attrs){for(let[z,q]of Object.entries(U.attrs))if(q===!0)M+=` ${z}`;else if(q!==void 0&&q!==null&&q!==!1)M+=` ${z}="${String(q)}"`}H=`<${U.tag}${M}>`}return G("span",{key:Y.key},H)}if(U.rawText&&U.verbatim){let D=function(N){if(N.type===W.htmlSelfClosing&&"isClosingTag"in N&&N.isClosingTag)return[];if(N.type===W.paragraph){let B=N.children;return B?B.flatMap(D):[]}if(N.type===W.text)return N.text?.trim()?[N]:[];if(N.type===W.htmlBlock&&N.children)return[{...N,children:N.children?.flatMap(D)}];return[N]},H=U.tag.toLowerCase(),M=w9(H),z=/<[a-z][^>]{0,100}>/i.test(U.rawText),q=/<\/?pre\b/i.test(U.rawText);if(M&&!z){let N=U.rawText.replace(new RegExp("\\s*</"+H+">\\s*$","i"),"");if(Q.tagfilter)N=Z$(N);return G($.tag,{key:Y.key,...$.attrs},N)}if(q){let N=Q.tagfilter?Z$(U.rawText):U.rawText;return G($.tag,{key:Y.key,...$.attrs,dangerouslySetInnerHTML:{__html:N}})}let F={slugify:(N)=>X(N,K1),sanitizer:J,tagfilter:!0},_=U.rawText.replace(/>\s+</g,"><").replace(/\n+/g," ").trim();if(new RegExp(`^<${U.tag}(\\s[^>]*)?>(\\s*</${U.tag}>)?$`,"i").test(_))return G($.tag,{key:Y.key,...$.attrs});let O=i9(_,{inline:!1,refs:K,inHTML:!1},F),A="</"+U.tag.toLowerCase()+">",E=new RegExp(`^<${U.tag}(\\s|>)`,"i").test(_),w=_.toLowerCase().trimEnd().endsWith(A),S=E&&w,R=!U.attrs||Object.keys(U.attrs).length===0,y=U.children&&U.children.length>0;if(S&&R)return Z(O.flatMap(D),Y);if(S&&y)return G($.tag,{key:Y.key,...$.attrs},Z(U.children,Y));return G($.tag,{key:Y.key,...$.attrs},Z(O.flatMap(D),Y))}return G($.tag,{key:Y.key,...$.attrs},$.children?Z($.children,Y):"")}case W.htmlSelfClosing:{let U=$;if(Q.tagfilter&&$$(U.tag)){let H;if("rawText"in U&&typeof U.rawText==="string")H=U.rawText;else{let M="";if(U.attrs){for(let[z,q]of Object.entries(U.attrs))if(q===!0)M+=` ${z}`;else if(q!==void 0&&q!==null&&q!==!1)M+=` ${z}="${String(q)}"`}H=`<${U.tag}${M} />`}return G("span",{key:Y.key},H)}return G($.tag,{key:Y.key,...$.attrs})}case W.image:return G("img",{key:Y.key,alt:$.alt&&$.alt.length>0?$.alt:void 0,title:$.title||void 0,src:J($.target,"img","src")});case W.link:{let U={key:Y.key};if($.target!=null)U.href=t6($.target);if($.title)U.title=$.title;return G("a",U,Z($.children,Y))}case W.table:{let U=$;return G("table",{key:Y.key},G("thead",null,G("tr",null,U.header.map(function(M,z){return G("th",{key:z,style:U.align[z]==null?{}:{textAlign:U.align[z]}},Z(M,Y))}))),G("tbody",null,U.cells.map(function(M,z){return G("tr",{key:z},M.map(function(F,_){return G("td",{key:_,style:U.align[_]==null?{}:{textAlign:U.align[_]}},Z(F,Y))}))})))}case W.text:return $.text;case W.textFormatted:return G($.tag,{key:Y.key},Z($.children,Y));case W.orderedList:case W.unorderedList:{let U=$.type===W.orderedList?"ol":"ul";return G(U,{key:Y.key,start:$.type===W.orderedList?$.start:void 0},$.items.map(function(M,z){return G("li",{key:z},Z(M,Y))}))}case W.paragraph:return G("p",{key:Y.key},Z($.children,Y));case W.ref:return null;default:return null}}var $5=($,Z,Y,G,J,X)=>{let K=(U,H,M)=>{let z=()=>e6(U,H,M,Z,Y,G,J,X);return $?$(z,U,H,M):z()},Q=(U)=>U.map((H)=>("text"in H)?H.text:""),V=(U,H={})=>{let M=(H.renderDepth||0)+1;if(M>2500)return Q(U);H.renderDepth=M;let z=H.key,q=[],F=!1;for(let _=0;_<U.length;_++){H.key=_;let j=K(U[_],V,H),D=typeof j==="string";if(D&&F)q[q.length-1]+=j;else if(j!==null)if(Array.isArray(j))for(let O=0;O<j.length;O++)q.push(j[O]);else q.push(j);F=D}return H.key=z,H.renderDepth=M-1,q};return V},Z5=(...$)=>$.filter(Boolean).join(" "),ZZ=($,Z,Y)=>{let G=$,J=Z.split("."),X=0;while(X<J.length){if(G=G?.[J[X]],G===void 0)break;X++}return G||Y},G5=($,Z)=>{let Y=ZZ(Z,$,void 0);return!Y?$:typeof Y==="function"||typeof Y==="object"&&("render"in Y)?Y:ZZ(Z,`${$}.component`,$)};function Y5($,Z){let Y={...Z||{}};Y.overrides=Y.overrides||{};let G=Y.slugify||K1,J=Y.sanitizer||X9,X=Y.createElement||H1.createElement,K=(j)=>GZ(j,{...Y,wrapper:null});function Q(j,D,...O){let v=ZZ(Y.overrides,`${j}.props`,{}),A=s9(D||{});if(K){for(let[E,w]of Object.entries(A))if(typeof w==="string"&&w.length>0&&w[0]==="<"&&(gZ.test(w)||CZ.test(w)||o1(w,0)))A[E]=K(w.trim())}return X(G5(j,Y.overrides),{...A,...v,className:Z5(A?.className,v.className)||void 0},...O)}let V=[];for(let j=0;j<$.length;j++){let D=$[j];if(D.type===W.htmlBlock&&"rawText"in D&&D.rawText&&/<\/?pre\b/i.test(D.rawText)&&j+1<$.length&&$[j+1].type===W.paragraph&&"removedClosingTags"in $[j+1]&&$[j+1].removedClosingTags){let A=function(w){let S="";for(let R of w){let y=R.type;if(y===W.text)S+=R.text;else if(y===W.htmlSelfClosing&&"rawText"in R&&R.rawText)S+=R.rawText;else if(y===W.textFormatted){let N=R,B=N.tag==="em"?"_":N.tag==="strong"?"**":"";S+=B+A(N.children)+B}else if("children"in R&&R.children)S+=A(R.children)}return S},O=D,v=$[j+1],E=A(v.children);if(v.removedClosingTags)E+=v.removedClosingTags.filter((w)=>w.type===W.htmlSelfClosing&&("rawText"in w)&&w.rawText&&w.rawText.indexOf(`</${O.tag}>`)===-1).map((w)=>w.type===W.htmlSelfClosing&&("rawText"in w)?w.rawText||"":"").join("");O.rawText=(O.rawText||"")+`
`+E,O.text=O.rawText,j++}V.push(D)}$=V;let U={...Y,slugify:(j)=>G(j,K1),sanitizer:J,tagfilter:Y.tagfilter!==!1},H=$[0]&&$[0].type===W.refCollection?$[0].refs:{},M=$5(Y.renderRule,Q,J,G,H,Y),z=M($,{inline:Y.forceInline,refs:H}),q=[];for(let j in H)if(j.charCodeAt(0)===D9)q.push({identifier:j,footnote:H[j].target});if(q.length)z.push(Q("footer",{key:"footer"},q.map(function(D){let O=D.identifier.charCodeAt(0)===D9?D.identifier.slice(1):D.identifier,v=i9(D.footnote,{inline:!0,refs:H},U);return Q("div",{id:G(O,K1),key:D.identifier},O+": ",M(v,{inline:!0,refs:H}))})));if(Y.wrapper===null)return z;let F=Y.wrapper||(Y.forceInline?"span":"div"),_;if(z.length>1||Y.forceWrapper)_=z;else if(z.length===1)return z[0];else return null;return X(F,{key:"outer",...Y.wrapperProps},_)}function GZ($="",Z={}){let Y={...Z||{}};Y.overrides=Y.overrides||{};let G=Y.slugify||K1,J=Y.sanitizer||X9;function X(V){let U=Y.forceInline||!Y.forceBlock&&!L$.test(V),H={...Y,slugify:(q)=>G(q,K1),sanitizer:J,tagfilter:Y.tagfilter!==!1};if(!U)v$(V,K,H);let M=V;if(!U){let q=M.length;while(q>0&&(M[q-1]===`
`||M[q-1]==="\r"))q--;M=M.slice(0,q),M=`${M.replace(n6,"")}

`}if(Y.optimizeForStreaming){let q=M.lastIndexOf("<");if(q!==-1){if(M.slice(q).indexOf(">")===-1)M=M.slice(0,q)}}let z=i9(U?V:M,{inline:U,refs:K},H);return Y5(z,{...H,forceInline:U})}let K={};return X($)}var F5=({options:$,children:Z})=>{if(!$Z)return Z;return H1.createElement($Z.Provider,{value:$},Z)},J5=({children:$,options:Z,...Y})=>{if(!(typeof H1.useContext<"u")){let V={...Z,overrides:{...Z?.overrides},wrapperProps:{...Z?.wrapperProps,...Y}};return GZ($===null||$===void 0?"":$,V)}let J=H1.useContext($Z),X=H1.useMemo(()=>({...J,...Z,overrides:{...J?.overrides,...Z?.overrides},wrapperProps:{...J?.wrapperProps,...Z?.wrapperProps,...Y}}),[J,Z,Y]),K=$===null||$===void 0?"":$;return H1.useMemo(()=>GZ(K,X),[K,X])},A5=J5;export{K1 as slugify,X9 as sanitizer,s6 as parser,A5 as default,GZ as compiler,Y5 as astToJSX,W as RuleType,F5 as MarkdownProvider,$Z as MarkdownContext,J5 as Markdown};

//# debugId=9B1D569A64E01F8E64756E2164756E21
//# sourceMappingURL=react.js.map
