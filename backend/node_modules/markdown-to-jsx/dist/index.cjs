var z6=Object.create;var{getPrototypeOf:_6,defineProperty:S9,getOwnPropertyNames:OZ,getOwnPropertyDescriptor:q6}=Object,WZ=Object.prototype.hasOwnProperty;var D6=($,Z,Y)=>{Y=$!=null?z6(_6($)):{};let G=Z||!$||!$.__esModule?S9(Y,"default",{value:$,enumerable:!0}):Y;for(let J of OZ($))if(!WZ.call(G,J))S9(G,J,{get:()=>$[J],enumerable:!0});return G},FZ=new WeakMap,MZ=($)=>{var Z=FZ.get($),Y;if(Z)return Z;if(Z=S9({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")OZ($).map((G)=>!WZ.call(Z,G)&&S9(Z,G,{get:()=>$[G],enumerable:!(Y=q6($,G))||Y.enumerable}));return FZ.set($,Z),Z};var L$=($,Z)=>{for(var Y in Z)S9($,Y,{get:Z[Y],enumerable:!0,configurable:!0,set:(G)=>Z[Y]=()=>G})};var j5={};L$(j5,{slugify:()=>a0,sanitizer:()=>P1,parser:()=>N$,default:()=>UZ,compiler:()=>N9,astToJSX:()=>X6,RuleType:()=>F,MarkdownProvider:()=>D5,MarkdownContext:()=>y$,Markdown:()=>b$});module.exports=MZ(j5);var H1=D6(require("react"));var C=32,l=9,V0=13,d=10,e0=96,e1=126,C1=91,D9=94,k1=62,E9=35,W5=37,D1=45,i1=61,m1=92,x9=42,$9=95,j9=60,P9=64,H9=93,F9=33,I9=38,f9=58,M5=70,c1=102,a1=104,x1=119,o9=116,T$=112,vZ=115,AZ=160,wZ=12;var g9=46,Z9=47;var v5=34,BZ=43,NZ=124,yZ=123;var bZ=40,RZ=41,S$=120,E$=88,G9=48,Y9=57,h1=65,p1=90,r1=97,s1=122,K1=128,LZ=32;var j6={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},F=j6;var m$={};L$(m$,{startsWith:()=>c,slugify:()=>a0,skipWhitespace:()=>g0,shouldFilterTag:()=>Y$,sanitizer:()=>P1,parseFrontmatterBounds:()=>I$,normalizeInput:()=>u1,normalizeCRLF:()=>B6,isVoidElement:()=>K9,isUnicodeWhitespace:()=>V9,isUnicodePunctuation:()=>Z$,isAlnumCode:()=>e9,isASCIIWhitespace:()=>k9,isASCIIPunctuation:()=>v6,inlineCharTypeTable:()=>C9,includes:()=>F6,htmlAttrsToJSXProps:()=>t9,hasKeys:()=>G$,getTag:()=>N6,getOverrideProps:()=>y6,get:()=>k$,findLineEnd:()=>I,extractPlainText:()=>xZ,endsWith:()=>$$,decodeEntityReferences:()=>M9,charClassTable:()=>W9,applyTagFilterToText:()=>J$,VOID_ELEMENTS:()=>P$,SHOULD_RENDER_AS_BLOCK_R:()=>f$,SANITIZE_R:()=>O9,NAMED_CODES_TO_UNICODE:()=>H6,HTML_TO_JSX_MAP:()=>EZ,HTML_CHAR_CODE_R:()=>SZ,ATTRIBUTES_TO_SANITIZE:()=>g$});var n9=require("#entities");function I$($){if(!c($,"---"))return null;let Z=3;while(Z<$.length&&($[Z]===" "||$[Z]==="\t"))Z++;if(Z<$.length&&$[Z]==="\r")Z++;if(Z>=$.length||$[Z]!==`
`)return null;Z++;let Y=!1;while(Z<$.length){let G=Z;while(Z<$.length&&$[Z]!==`
`&&$[Z]!=="\r")Z++;if(Z>=$.length)break;let J=Z;if($[Z]==="\r")Z++;if(Z<$.length&&$[Z]===`
`)Z++;if(c($,"---",G))return{endPos:Z,hasValidYaml:Y};let X=$.indexOf(":",G);if(X!==-1&&X<J)Y=!0}return null}var H6=n9.NAMED_CODES_TO_UNICODE,SZ=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,EZ={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"};function t9($){var Z={};for(var Y in $){var G=Y.toLowerCase(),J=EZ[G];Z[J||Y]=$[Y]}return Z}var f$=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/;function M9($){if($.indexOf("&")===-1)return $;return $.replace(SZ,(Z,Y)=>{var G=n9.decodeEntity(Y);if(G)return G;if(Y[0]==="#"){var J=Y[1]==="x"||Y[1]==="X"?parseInt(Y.slice(2),16):parseInt(Y.slice(1),10);if(J===0||J>=55296&&J<=57343||J>1114111)return"�";return J<=65535?String.fromCharCode(J):String.fromCharCode(55296+(J-65536>>10),56320+(J-65536&1023))}return Z})}var O9=/(javascript|vbscript|data(?!:image)):/i;function P1($){if(O9.test($))return null;if($.indexOf("%")===-1)return $;try{let Z=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(O9.test(Z))return null}catch(Z){return null}return $}var c0={},$1,x0;$1=[192,193,194,195,196,197,224,225,226,227,228,229,230,198];for(x0=0;x0<$1.length;x0++)c0[$1[x0]]="a";c0[231]=c0[199]="c";c0[240]=c0[208]="d";$1=[200,201,202,203,233,232,234,235];for(x0=0;x0<$1.length;x0++)c0[$1[x0]]="e";$1=[207,239,206,238,205,237,204,236];for(x0=0;x0<$1.length;x0++)c0[$1[x0]]="i";c0[209]=c0[241]="n";$1=[248,216,339,338,213,245,212,244,211,243,210,242];for(x0=0;x0<$1.length;x0++)c0[$1[x0]]="o";$1=[220,252,219,251,218,250,217,249];for(x0=0;x0<$1.length;x0++)c0[$1[x0]]="u";c0[376]=c0[255]=c0[221]=c0[253]="y";function e9($){return $>=G9&&$<=Y9||$>=h1&&$<=p1||$>=r1&&$<=s1}function a0($){var Z=[];for(var Y=0;Y<$.length;Y++){var G=$.charCodeAt(Y);if(e9(G))if(G>=h1&&G<=p1)Z.push(String.fromCharCode(G+LZ));else Z.push($[Y]);else if(G===C||G===D1)Z.push("-");else{var J=c0[G];if(J)Z.push(J)}}return Z.join("")}function F6($,Z){return $.indexOf(Z)!==-1}function c($,Z,Y){return $.startsWith(Z,Y)}function $$($,Z,Y){return $.startsWith(Z,(Y===void 0?$.length:Y)-Z.length)}var P$=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","animateTransform","set"]);function K9($){let Z=$.toLowerCase();if(P$.has(Z))return!0;let Y=Z.indexOf(":");if(Y!==-1)return Z=Z.slice(Y+1),P$.has(Z);return!1}var g$=["src","href","data","formAction","srcDoc","action"],C$=1,X9=2,TZ=1,O6=2,W6=3,M6=4,W9=function(){let $=new Uint8Array(128),Z;$[l]=$[d]=$[wZ]=$[V0]=$[C]=C$;for(Z=F9;Z<=Z9;Z++)$[Z]=X9;for(Z=f9;Z<=P9;Z++)$[Z]=X9;for(Z=C1;Z<=e0;Z++)$[Z]=X9;for(Z=yZ;Z<=e1;Z++)$[Z]=X9;return $}(),C9=function(){let $=new Uint8Array(128);return $[m1]=O6,$[C1]=M6,$[x9]=$[$9]=$[e1]=$[i1]=W6,$[e0]=$[j9]=$[P9]=$[H9]=$[d]=$[C]=$[F9]=TZ,$[c1]=$[a1]=$[x1]=TZ,$}();function v6($){return $<K1&&(W9[$]&X9)!==0}function k9($){return $<K1&&(W9[$]&C$)!==0}var A6=/[\p{P}\p{S}]/u,w6=/\p{Zs}/u;function V9($){if(!$)return!0;let Z=$.charCodeAt(0);return Z<K1?(W9[Z]&C$)!==0:w6.test($)}function Z$($){if(typeof $==="number")return $<K1&&(W9[$]&X9)!==0;if(!$)return!1;let Z=$.charCodeAt(0);return Z<K1?(W9[Z]&X9)!==0:A6.test($)}function I($,Z){let Y=$.indexOf(`
`,Z);if(Y===-1)return $.length;if(Y>0&&$.charCodeAt(Y-1)===V0)return Y-1;return Y}var J9=[];function u1($){var Z=$.indexOf("\r"),Y=$.indexOf("\x00");if(Z===-1&&Y===-1)return $;var G=$.length;J9.length=0;var J=0,X=0;if(Z===-1)X=Y;else if(Y===-1)X=Z;else X=Z<Y?Z:Y;for(;X<G;X++){var K=$.charCodeAt(X);if(K===V0){if(J<X)J9.push($.slice(J,X));if(X+1<G&&$.charCodeAt(X+1)===d)X++;J9.push(`
`),J=X+1}else if(K===0){if(J<X)J9.push($.slice(J,X));J9.push("�"),J=X+1}}if(J<G)J9.push($.slice(J));return J9.join("")}function B6($){return u1($)}function g0($,Z,Y){let G=Y??$.length;while(Z<G&&($[Z]===" "||$[Z]==="\t"))Z++;return Z}function G$($){if(!$)return!1;for(var Z in $)return!0;return!1}function k$($,Z,Y){var G=$,J=Z.split("."),X=0;while(X<J.length){if(G=G?.[J[X]],G===void 0)break;X++}return G||Y}function N6($,Z){if(!Z)return $;let Y=k$(Z,$,void 0);if(typeof Y==="string")return Y;if(typeof Y==="object"&&Y.component)return Y.component;return $}function y6($,Z){if(!Z)return{};let Y=k$(Z,$,void 0);return typeof Y==="object"&&Y.props?Y.props:{}}function xZ($,Z){var Y="";for(var G=0,J=$.length;G<J;G++){var X=$[G],K=X.type;if(K===Z.text||K===Z.codeInline){var Q=X.text;if(Q)Y+=Q}else if(K===Z.textFormatted||K===Z.link){if(X.children)Y+=xZ(X.children,Z)}else if(K===Z.image){if(X.alt)Y+=X.alt}}return Y}function Y$($){var Z=$.toLowerCase();return Z==="title"||Z==="textarea"||Z==="style"||Z==="xmp"||Z==="iframe"||Z==="noembed"||Z==="noframes"||Z==="script"||Z==="plaintext"}function J$($){return $.replace(/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi,function(Z,Y,G,J){return"&lt;"+Y+G+J})}function b6($){console.warn($)}function A9($,Z,Y,G){var J=b(Y),X=$.length,K=G??X-Z,Q=0;while(Q<K&&Z+Q<X&&b($,Z+Q)===J)Q++;return Q}function PZ($,Z,Y,G,J){if(J===0?Y>=G:Z<=G)return!1;let X=J===0?$[Y]:$[Z-1],K=J===0?Z>0?$[Z-1]:null:Y<$.length?$[Y]:null;var Q=b(X);if(Q<K1?k9(Q):V9(X))return!1;var V=K?b(K):null,U=K===null||K===`
`||K==="\r"||(V!==null?V<K1?k9(V):V9(K):!0),H=H$(Q,X);if(!H)return!0;if(U)return!0;return K?H$(b(K),K):!1}function q$($){var Z="",Y=0;while(Y<$.length)if($[Y]==="\\"&&Y+1<$.length){var G=$[Y+1];Z+=Z$(b(G))?G:"\\"+G,Y+=2}else Z+=$[Y++];return M9(Z)}function k($,Z){if(Z>=$.length)return Z;if($.charCodeAt(Z)===V0&&Z+1<$.length&&$.charCodeAt(Z+1)===d)return Z+2;if($.charCodeAt(Z)===d)return Z+1;return Z+1}function R6($,Z){if($>=K1)return 0;var Y=C9[$];if(Z&&Y===1&&($===c1||$===a1||$===x1))return 0;return Y}function L6($,Z,Y,G,J,X){if(!Y.length||Y[Y.length-1].type!==F.blockQuote)return null;let K=g0(G,0,G.length);if(K>=G.length||G[K]!==">")return null;let Q=tZ($,Z,J,X);if(!Q)return null;let V=Y[Y.length-1],U=Q;if(U.children)V.children.push(...U.children);return U.endPos}function D$($,Z,Y,G){return{type:F.heading,level:$,children:Z,id:G(Y)}}var a$=/\\(.)/g,T6=/\s+#+\s*$/,YZ=/^(?:(\d{1,9})([.)])\s+(.*)$|(\d{1,9})([.)])\s*$|([-*+])\s+(.*)$|([-*+])\s*$)/,r$=/^(\d{1,9})([.)])(\s+|$)/,s$=/^([*+\-])(\s+|$)/,W$=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/i,cZ=/^<([a-z][^ >/]*) ?(?:[^>/]+[^/]|)>/i,b=function($,Z=0){return $.charCodeAt(Z)},j$=function($){return e9(b($))},o$=function($){return k9(b($))},j1=function($){return $===" "||$==="\t"},m9=function($){return $===" "||$==="\t"||$===`
`||$==="\r"},H$=function($,Z){return Z$($<K1?$:Z)},S6=function($){var Z=b($);return j$($)||Z===D1||Z===$9||Z===f9||Z===g9};function n$($,Z){var Y=$.length;if(Z>=Y)return null;var G=b($[Z]);if(!U9(G))return null;var J=Z,X=Z;while(X<Y){var K=b($[X]);if(K>=r1&&K<=s1||K>=h1&&K<=p1||K>=G9&&K<=Y9||K===D1)X++;else{var Q=b($[X]);if(Q===C||Q===l||Q===d||Q===V0||Q===k1||Q===Z9)break;else return null}}if(X===J)return null;var V=$.slice(J,X);for(var U=0;U<V.length;U++){var K=b(V[U]);if(!(K>=r1&&K<=s1||K>=h1&&K<=p1||K>=G9&&K<=Y9||K===D1))return null}return{tagName:V,tagLower:V.toLowerCase(),nextPos:X}}function n1($,Z){var Y=_$($,Z);if(!Y||Y.kind!=="tag")return null;return{tagName:Y.tagName||"",tagLower:Y.tagNameLower||"",attrs:Y.attrs||"",endPos:Y.endPos,isClosing:Y.isClosing||!1,isSelfClosing:Y.isSelfClosing||!1,hasNewline:Y.hasNewline,hasSpaceBeforeSlash:!1,whitespaceBeforeAttrs:Y.whitespaceBeforeAttrs||""}}function E6($,Z,Y){var G=1,J=Z;while(G>0&&J<$.length){var X=$.indexOf("<",J);if(X===-1)return null;var K=n1($,X);if(!K){J=X+1;continue}if(K.isClosing&&K.tagLower===Y&&--G===0)return[X,K.endPos];if(!K.isClosing&&!K.isSelfClosing&&K.tagLower===Y)G++;J=K.endPos}return null}var x6=/^\{.*\}$/,M$=/\n\n/,v$=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m,P6=/<\/?(?:pre|script|style|textarea)\b/i,aZ=/^<[A-Z]/,I6=/\n$/,f6=new Set(["#",">","-","*","+","`","|","0","1","2","3","4","5","6","7","8","9"]);function g6($,Z,Y,G){let J=Z;while(J<Y){if($[J]==="\\"&&J+1<Y){J+=2;continue}if($[J]===G)return J;J++}return-1}function IZ($,Z){var Y=Z.indexOf(":");if(Y>0){var G=Z.slice(Y+1).trim(),J=G.length;if(J>=2){var X=G[0];if((X==='"'||X==="'")&&G[J-1]===X)G=G.slice(1,-1)}$.push([Z.slice(0,Y).trim(),G])}}function C6($){var Z=[];if(!$)return Z;var Y="",G=0,J="";for(var X=0;X<$.length;X++){var K=$[X];if(K==='"'||K==="'"){if(!J)J=K,G++;else if(K===J)J="",G--}else if(K==="("&&$$(Y,"url"))G++;else if(K===")"&&G>0)G--;else if(K===";"&&G===0){IZ(Z,Y),Y="";continue}Y+=K}return IZ(Z,Y),Z}function k6(tag,key,value,sanitizeUrlFn,options){if(key==="style")return C6(value).reduce(function($,[Z,Y]){let G=sanitizeUrlFn(Y,tag,Z);if(G!=null)$[Z.replace(/(-[a-z])/g,(J)=>J[1].toUpperCase())]=G;return $},{});if(value.match(x6)){if(value=value.slice(1,value.length-1),value=value?value.replace(a$,"$1"):value,value.length>0){let $=value[0];if($==="["||$==="{")try{return JSON.parse(value)}catch(Z){return value}}if(value==="true")return!0;if(value==="false")return!1;if(options.evalUnserializableExpressions)try{return eval(`(${value})`)}catch($){return value}return value}if(g$.indexOf(key)!==-1)return sanitizeUrlFn(value?value.replace(a$,"$1"):value,tag,key);return value==="true"?!0:value==="false"?!1:value}function l1($,Z,Y,G){let J={};if(!$||!$.trim())return J;let X=[],K=0,Q=$.length;while(K<Q){while(K<Q&&m9($[K]))K++;if(K>=Q)break;let H=K;while(K<Q&&S6($[K]))K++;if(K===H){K++;continue}let M=$.slice(H,K);while(K<Q&&m9($[K]))K++;if(K>=Q||$[K]!=="="){X.push(M);continue}K++;while(K<Q&&m9($[K]))K++;if(K>=Q){X.push(M+"=");break}let z=K,q=$[K];if(q==='"'||q==="'"){K++;while(K<Q){if($[K]===q){if(K+1>=Q){K++;break}let O=$[K+1];if(m9(O)||O==="/"){K++;break}}K++}}else if(q==="{"){let O=1;K++;while(K<Q&&O>0){if($[K]==="{")O++;else if($[K]==="}"){if(O--,O===0){K++;break}}K++}}else while(K<Q&&!m9($[K]))K++;X.push(M+"="+$.slice(z,K))}if(!X?.length)return J;let V=Z.toLowerCase();for(let H=0;H<X.length;H++){let M=X[H],z=M.indexOf("=");if(z!==-1){let q=M.slice(0,z).trim(),O=q.toLowerCase();if(O==="ref")continue;let _=M.slice(z+1).trim(),j=((D)=>{let W=D[0];if((W==='"'||W==="'")&&D.length>=2&&D[D.length-1]===W)return D.slice(1,-1);return D})(_);if(O==="href"&&V==="a"||O==="src"&&V==="img"){let D=G.sanitizer(j,V,O);if(D==null){b6(`Stripped unsafe ${O} on <${Y}>`);continue}J[q]=D}else{let D=k6(V,O,j,G.sanitizer,G);J[q]=D}}else if(M!=="style")J[M]=!0}if($.indexOf("%")!==-1)try{if(O9.test(decodeURIComponent($)))for(var U in J)delete J[U]}catch(H){}else if(O9.test($))for(var U in J)delete J[U];return J}var l9=function($){return f6.has($)};function m6($,Z,Y){let G=Z+1;while(G<$.length&&$[G]!=="]"){if($[G]==="\\"&&G+1<$.length){G+=2;continue}G++}if(G>=$.length)return{shouldSkip:!1,newPos:0};let J=Z+1,X=G,K=J<X&&($[J]===`
`||$[J]==="\r"),Q=X>J&&($[X-1]===`
`||$[X-1]==="\r"),V=G+1;if(V=g0($,V),V>=$.length||$[V]!==":")return{shouldSkip:!1,newPos:0};if((K||Q)&&Y){let U=V+1;if(U=g0($,U),U<$.length&&$[U]===`
`)U=g0($,U+1);while(U<$.length&&$[U]!==`
`)U++;if(U<$.length)U++;return{shouldSkip:!0,newPos:U}}return h6($,V)}function h6($,Z){let Y=Z+1;if(Y=g0($,Y),Y<$.length&&$[Y]===`
`)Y=g0($,Y+1);while(Y<$.length&&$[Y]!==`
`)Y++;if(Y>=$.length)return{shouldSkip:!1,newPos:0};Y++;let G=g0($,Y);if(G>=$.length||$[G]!=='"'&&$[G]!=="'")return{shouldSkip:!1,newPos:0};let J=$[G],X=G+1;while(X<$.length&&$[X]!==J&&$[X]!==`
`){if($[X]==="\\"&&X+1<$.length){X+=2;continue}X++}if(X>=$.length||$[X]!==J)return{shouldSkip:!1,newPos:0};let K=g0($,X+1);if(K<$.length&&$[K]!==`
`&&$[K]!=="\r")return{shouldSkip:!0,newPos:Y};return{shouldSkip:!1,newPos:0}}function rZ($){for(var Z=0;Z<$.length;Z++){var Y=$[Z];if(Y.type===F.link)return!0;if(Y.type===F.textFormatted){var G=Y;if(G.children&&rZ(G.children))return!0}}return!1}function t$($){var Z="";for(var Y=0,G=$.length;Y<G;Y++){var J=$[Y],X=J.type;if(X===F.text)Z+=J.text;else if(X===F.image){var K=J;if(K.alt)Z+=K.alt}else if(X===F.textFormatted){var Q=J;if(Q.children)Z+=t$(Q.children)}else if(X===F.link){var V=J;if(V.children)Z+=t$(V.children)}}return Z}var p6=new Set([" ","\t","\r",`
`,"\f","\v"]);function d1($,Z,Y,G,J){var X=[],K=[],Q=[],V=Z,U=Z,H=J.disableAutoLink||G.inAnchor,M=!1,z=!!G.inAnchor,q=!!J.disableParsingRawHTML,O=J.optimizeForStreaming,_=-1,j=-1,D=[],W=function(f0,X1){if(O&&G.inHTML)return!1;if(!z&&(!X1||!J.disableAutoLink)){var y0=p$($,V,G,J,"<");if(y0)return v(V),X.push(y0),V=y0.endPos,U=V,!0}if(q)return!1;var t1=w$($,V,G,J);if(t1){v(V);var r9=X.length;if(X.push(t1),D)D.push(r9);return V=t1.endPos,U=V,!0}if(O&&j===-1){if(V+1<Y){var Z0=b($,V+1);if(Z0>=h1&&Z0<=p1||Z0>=r1&&Z0<=s1||Z0===Z9||Z0===F9)j=V}}if(!f0)return!1;var G0=n1($,V);if(!G0)return!1;var E1=V+(G0.isClosing?2:1);if(E1>=$.length||j1($[E1]))return!1;var v1=$.indexOf(">",V+1);if(v1!==-1){var Y1=V+1,b9=v1-Y1;if(b9>=7){var n=c($,"http://",Y1);if(n||c($,"https://",Y1)){for(var S0=Y1;S0<v1;S0++)if(j1($[S0]))return!1}}}var b0=b($,E1);if(U9(b0)&&E1+1<$.length&&$[E1+1]===":")return!1;if(G0.isClosing&&G0.attrs.trim().length)return!1;if(G0.attrs.length){var U0=!1,u="";for(var _0=0;_0<G0.attrs.length;_0++){var t0=G0.attrs[_0];if(U0&&t0===u)U0=!1;else if(!U0&&(t0==='"'||t0==="'"))U0=!0,u=t0;else if(t0==="*"||t0==="#"||t0==="!"){var E0=_0+1;while(E0<G0.attrs.length&&G0.attrs[E0]!=="="&&G0.attrs[E0]!==" "&&G0.attrs[E0]!=="\t")E0++;if(E0<G0.attrs.length&&G0.attrs[E0]==="=")return!1}}}var X0=$.slice(V,G0.endPos),A1=G0.tagName.toLowerCase(),m=X0,C0=m.indexOf(">");if(C0!==-1){m=m.slice(C0+1);var R0="</"+A1+">",O0=m.indexOf(R0);if(O0!==-1)m=m.slice(0,O0)}var A0=[];if(m.trim()&&J){var d0={...G,inline:!1,inHTML:!0},L0=m.trim();if(M$.test(L0)||v$.test(L0)||W$.test(L0))A0=c9(L0,d0,J);else if(L0)d0.inline=!0,A0=d1(L0,0,L0.length,d0,J)}var i0=G0.whitespaceBeforeAttrs+G0.attrs,D0=l1(i0,A1,G0.tagName,J),J1={type:F.htmlBlock,tag:G0.tagName,attrs:D0,children:A0,rawText:X0,text:m,verbatim:!0,endPos:G0.endPos};return v(V),X.push(J1),V=J1.endPos,U=V,!0},v=function(f0){if(f0>U){var X1=$.slice(U,f0);X.push({type:F.text,text:M?M9(X1):X1}),U=f0,M=!1}};while(V<Y){var A=b($,V),E=R6(A,H);if(E===0){if(A===I9)M=!0;V++;while(V<Y){if(A=b($,V),A>=K1)break;if(A===I9)M=!0;var w=C9[A];if(w!==0){if(H&&w===1&&(A===c1||A===a1||A===x1)){V++;continue}break}V++}continue}if(A===e0){var S=V,R=0;while(V+R<Y){if(b($,V+R)!==e0)break;R++}if(R>0){var y=V+R,N=-1,B=y;while(B<Y){while(B<Y&&b($,B)!==e0)B++;if(B>=Y)break;var T=0;while(B+T<Y&&b($,B+T)===e0)T++;if(T>R)T=R;var f=B+T;if(T===R&&(B<=y||b($,B-1)!==e0)&&(f>=Y||b($,f)!==e0)){N=B,B=f;break}B++}if(N!==-1){var x=$.slice(y,N),P=!1;for(var g=0;g<x.length;g++){var h=b(x,g);if(h===d||h===V0){P=!0;break}}var L=x;if(P)L=x.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ");if(L.length>0){var a=b(L,0),i=b(L,L.length-1);if(a===C&&i===C){for(var j0=1;j0<L.length-1;j0++)if(b(L,j0)!==C){L=L.slice(1,L.length-1);break}}}v(S),X.push({type:F.codeInline,text:L}),V=B,U=V;continue}if(O&&_===-1){_=S,v(S),Y=S;break}V=y;continue}}if(!z&&!H&&(A===c1||A===a1||A===x1)){var w0=null,z0=V+1<Y?b($,V+1):0,T0=V+2<Y?b($,V+2):0,p=V+3<Y?b($,V+3):0,V1=V+4<Y?b($,V+4):0,J0=V+5<Y?b($,V+5):0;if(A===a1&&z0===o9&&T0===o9&&p===T$)w0="h";else if(A===x1&&z0===x1&&T0===x1&&p===g9)w0="w";else if(A===c1&&z0===o9&&T0===T$&&p===f9&&V1===Z9&&J0===Z9)w0="f";if(w0){var P0=p$($,V,G,J,w0);if(P0){v(V),X.push(P0),V=P0.endPos,U=V;continue}}}if(!z&&!H&&A===P9){var M0=p$($,V,G,J,"@");if(M0&&"emailStart"in M0){var{emailStart:Q0,endPos:r0}=M0,I0=[];for(var f=K.length-1;f>=0;f--){var k0=K[f];if(k0.sourcePos>=Q0&&k0.sourcePos<r0){if(k0.nodeIndex>=0&&k0.nodeIndex<X.length)X.splice(k0.nodeIndex,1),I0.push(k0.nodeIndex);K.splice(f,1)}}if(Q0<U){for(var B=X.length-1;B>=0;B--)if(X[B].type===F.text){X.splice(B,1),I0.push(B);break}U=Q0}if(I0.length){I0.sort(function(f0,X1){return f0-X1});var B1=0;for(var r=0;r<K.length;r++){var k0=K[r];while(B1<I0.length&&I0[B1]<k0.nodeIndex)B1++;k0.nodeIndex-=B1}}v(Q0),X.push(M0),V=r0,U=V;continue}}if(A===j9){if(W(!0,!1))continue}if(A===m1){if(V+1<Y&&b($,V+1)===d){var K0=V+2;while(K0<Y&&b($,K0)===C)K0++;if(K0>=Y){V++;continue}v(V),X.push({type:F.breakLine}),V+=2;while(V<Y&&b($,V)===C)V++;U=V;continue}var B0=V+1<Y?$[V+1]:"";if(B0&&"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~".indexOf(B0)!==-1){v(V),X.push({type:F.text,text:B0==="&"?"&​":B0}),V+=2,U=V;continue}}if(A===C1){if(!z){if(V+1<Y&&$[V+1]==="^"){var m0=V+2;while(m0<Y&&$[m0]!=="]")m0++;if(m0<Y){var H0=$.slice(V+2,m0);v(V),X.push({type:F.footnoteReference,target:`#${J.slugify(H0)}`,text:H0}),V=m0+1,U=V;continue}}if(G.inList&&V+2<Y&&b($,V+2)===H9){var q0=b($,V+1);if(q0===C||q0===S$||q0===E$){v(V),X.push({type:F.gfmTask,completed:q0===S$||q0===E$}),V+=3,U=V;continue}}}var e=!1;if(V>Z&&$[V-1]==="!"){var l0=0;for(var Y0=V-2;Y0>=Z&&$[Y0]==="\\";Y0--)l0++;if((l0&1)===0){if(e=!0,U<V-1)v(V-1);if(X.length>0&&X[X.length-1].type===F.text){var $0=X[X.length-1];if($0.text.endsWith("!")){if($0.text=$0.text.slice(0,-1),!$0.text)X.pop()}}}}if(!e)v(V);if(U=V+1,!z||e)Q.push({type:e?"image":"link",pos:e?V-1:V,resultIdx:X.length,inAnchor:z});V++;continue}if(A===H9&&Q.length>0){var s=Q[Q.length-1],s0=s.pos+(s.type==="image"?2:1),Z1=V;v(V);var U1=V+1,F1=JZ(X,s),Q1=s.type==="link"&&rZ(F1),N1=!1;if(!Q1&&U1<Y&&$[U1]==="("){var F0=i6($,U1+1,!0);if(F0){fZ(X,K,Q,s,s0,Z1,J.sanitizer(q$(F0.target),"a","href"),F0.title?q$(F0.title):void 0),V=F0.endPos,U=V;continue}}var o0=G.refs||{};G$(o0);var O1=null,I1=V;if(U1<Y&&$[U1]==="["){var z1=U1+1,B=z1;while(B<Y&&$[B]!=="]")B++;if(B<Y)O1=$.slice(z1,B),I1=B,N1=!0}if(!N1||O1==="")O1=$.slice(s0,Z1);var h0=oZ(O1);if(!Q1&&o0&&o0[h0]){var _1=o0[h0];fZ(X,K,Q,s,s0,Z1,_1.target,_1.title),V=I1+1,U=V;continue}var y1=s.resultIdx;if(Q.pop(),X.length=y1,O){if(X.push(...F1),U1<Y&&$[U1]==="(")return X}else{if(s.type==="image")X.push({type:F.text,text:"!"});X.push({type:F.text,text:"["},...F1,{type:F.text,text:"]"})}for(var g=0;g<K.length;g++)if(K[g].nodeIndex>=y1)K[g].nodeIndex++;V++,U=V;continue}if(A===x9||A===$9||A===e1||A===i1){var W1=$[V],o=V,G1=A9($,V,W1);if((W1==="~"||W1==="=")&&G1!==2){V++;continue}var q1=o+G1,n0=PZ($,o,q1,Y,0),Q9=PZ($,o,q1,Z,1),b1=n0,R1=Q9;if(W1==="_"&&n0&&Q9){if(o>0){var z9=$[o-1],y9=b(z9);b1=H$(y9,z9)}if(q1<Y){var _9=$[q1],M1=b(_9);R1=H$(M1,_9)}}v(o),K.push({nodeIndex:X.length,type:W1,length:G1,canOpen:b1,canClose:R1,active:!0,sourcePos:o,inAnchor:z}),X.push({type:F.text,text:$.slice(o,o+G1)}),V=o+G1,U=V;continue}if(A===d){var Y0=V-1,f1=0;while(Y0>=U&&b($,Y0)===C)f1++,Y0--;if(f1>=2){var K0=V+1;while(K0<Y&&b($,K0)===C)K0++;if(K0>=Y){v(Y0+1),V=Y,U=Y;continue}v(Y0+1),X.push({type:F.breakLine}),V++;while(V<Y&&b($,V)===C)V++;U=V;continue}var L1=V>U?b($,V-1):0,q0=V+1<Y?b($,V+1):0,T1=V>U&&L1===C&&q0===C?V-1:V;if(v(T1),X.push({type:F.text,text:`
`}),U=V+1,V>Z&&L1===C&&U<Y&&b($,U)===C)U++;V=U;continue}if(A===I9)M=!0;V++;while(V<Y){var A=b($,V);if(A>=K1)break;if(A===I9)M=!0;var w=C9[A];if(w===0){V++;continue}if(w===1&&(A===c1||A===a1||A===x1)&&H){V++;continue}break}}if(v(V),K.length)J6(X,K,null);if(O){var v0=X.length;for(var N0=D.length-1;N0>=0;N0--){var p0=D[N0];if(p0<X.length&&X[p0].type===F.htmlBlock){var S1=X[p0];if(!K9(S1.tag)&&(!S1.children||S1.children.length===0)){if(X.splice(p0,1),p0<v0)v0--;for(var g=0;g<K.length;g++)if(K[g].nodeIndex>p0)K[g].nodeIndex--;for(var g=N0+1;g<D.length;g++)if(D[g]>p0)D[g]--}}}if(_!==-1&&_<v0){for(var u0=X.length-1;u0>=0;u0--)if(X[u0].type===F.text){v0=u0;break}}if(j!==-1&&j<v0){for(var u0=X.length-1;u0>=0;u0--)if(X[u0].type===F.text){v0=u0;break}}for(var B=K.length-1;B>=0;B--)if(K[B].active&&K[B].nodeIndex<v0){if(X.splice(K[B].nodeIndex,1),K[B].nodeIndex<v0)v0--;for(var f=0;f<B;f++)if(K[f].nodeIndex>K[B].nodeIndex)K[f].nodeIndex--}if(v0<X.length)X.length=v0;return X}if(Q.length){Q.sort(function(f0,X1){return f0.resultIdx-X1.resultIdx});for(var B=0;B<Q.length;B++)X.splice(Q[B].resultIdx+B,0,{type:F.text,text:Q[B].type==="image"?"![":"["})}return X}function u6($,Z,Y,G,J){var X=!1;for(var K=0;K<Z.length;K++)if(Z[K].sourcePos>=G&&Z[K].sourcePos<J){X=!0;break}if(!X)return;var Q=JZ($,Y),V=[];for(var K=0;K<Z.length;K++){var U=Z[K];if(U.sourcePos>=G&&U.sourcePos<J)V.push({nodeIndex:U.nodeIndex-Y.resultIdx,type:U.type,length:U.length,canOpen:U.canOpen,canClose:U.canClose,active:U.active,sourcePos:U.sourcePos,inAnchor:U.inAnchor})}J6(Q,V,null),$.length=Y.resultIdx;for(var H=0;H<Q.length;H++)$.push(Q[H]);var M=[];for(var K=0;K<Z.length;K++)if(Z[K].sourcePos<G||Z[K].sourcePos>=J)M.push(Z[K]);Z.length=0;for(var H=0;H<M.length;H++)Z.push(M[H])}function l6($,Z,Y,G){if($.type==="link")return{type:F.link,target:Y,title:G,children:Z};return{type:F.image,target:Y||"",alt:t$(Z),title:G}}function JZ($,Z){return $.slice(Z.resultIdx)}function fZ($,Z,Y,G,J,X,K,Q){u6($,Z,G,J,X);var V=JZ($,G);Y.pop(),$.length=G.resultIdx,$.push(l6(G,V,K,Q))}function d6($,Z,Y){let G=g0($,Z),J=G<$.length&&$[G]==="<";if(J)G++;let X=G;if(J&&G<$.length&&$[G]===">")return{target:"",endPos:G+1,hadSpace:!1};let K,Q;var V=!1;if(J){Q=G;while(Q<$.length&&$[Q]!==">"){let M=$[Q];if(M===`
`||M==="\r"||M==="<")return null;if(M==="\\"){Q+=2;continue}Q++}if(Q>=$.length||$[Q]!==">")return null;Q++;let U=X;while(U<Q-1&&j1($[U]))U++;let H=Q-1;while(H>U&&j1($[H-1]))H--;K=$.slice(U,H),G=Q}else{let U=0;Q=G;while(Q<$.length){let H=$[Q];if(H===" "||H==="\t"||H===`
`){V=!0;break}if(!Y&&H===")")break;if(Y&&H==="("){if(Q>0&&$[Q-1]==="\\"){Q++;continue}U++,Q++;continue}if(Y&&H===")"){if(Q>0&&$[Q-1]==="\\"){Q++;continue}if(U===0)break;U--,Q++;continue}Q++}K=$.slice(X,Q),G=Q}return{target:K,endPos:G,hadSpace:V}}function gZ($,Z,Y,G){let J=Z,X=0;while(J<$.length){let Q=$[J];if(j1(Q))J++;else if(Q===`
`){if(X>=1)break;X++,J++}else if(V9(Q))break;else break}if(Y&&!G){if(J>=$.length||$[J]!=='"'&&$[J]!=="'"&&$[J]!=="(")return{title:void 0,endPos:J}}let K=void 0;if(J<$.length){let Q=$[J];if(Q==='"'||Q==="'"){J++;let V=J;while(J<$.length&&$[J]!==Q){if($[J]==="\\")J++;J++}if(J<$.length)K=$.slice(V,J),J++}else if(Q==="("){J++;let V=J,U=1;while(J<$.length&&U>0){if($[J]==="\\"&&J+1<$.length)J++;else if($[J]==="(")U++;else if($[J]===")")U--;J++}if(U===0)K=$.slice(V,J-1)}}return J=g0($,J),{title:K,endPos:J}}function i6($,Z,Y){let G=d6($,Z,Y);if(!G)return null;let J=Z;J=g0($,J);let X=J<$.length&&$[J]==="<";if(X&&G.target===""&&G.endPos===J+2){let Q=gZ($,G.endPos,!1,X);if(Q.endPos>=$.length||$[Q.endPos]!==")")return null;return{target:"",title:Q.title,endPos:Q.endPos+1}}let K=gZ($,G.endPos,G.hadSpace,X);if(K.endPos>=$.length||$[K.endPos]!==")")return null;return{target:G.target,title:K.title,endPos:K.endPos+1}}var c6;((G)=>{G[G.URI=0]="URI";G[G.EMAIL=1]="EMAIL";G[G.ANGLE=2]="ANGLE"})(c6||={});function U9($){return $>=h1&&$<=p1||$>=r1&&$<=s1}function sZ($){let Z=$.indexOf(":");if(Z<2||Z>32)return!1;let Y=b($);if(!U9(Y))return!1;for(let G=1;G<Z;G++){let J=$[G],X=b(J);if(!j$(J)&&J!=="+"&&J!=="."&&J!=="-")return!1}return!0}function CZ($,Z,Y){if(Z===0)return!0;return(Y?` 	
\r*_~(`:` 	
*_~(`).indexOf($[Z-1])!==-1}function X$($,Z,Y,G,J){let X=G($,"a","href");if(!X)return null;return{type:F.link,target:X,children:[{type:F.text,text:Z}],endPos:Y,...J!==void 0?{emailStart:J}:{}}}function h$($,Z,Y,G,J){if(Y.inAnchor||J!==2&&G.disableAutoLink)return null;if(J===2){if($[Z]!=="<")return null;let _=Z+1;while(_<$.length&&$[_]!==">"){let R=b($,_);if(R===C||R===l||R===d||R===V0||R<C)return null;_++}if(_>=$.length||$[_]!==">")return null;let j=$.slice(Z+1,_);if(!j.length)return null;let D=j.indexOf("\\")!==-1,W=sZ(j),v=c(j,"http://")||c(j,"https://"),A=!1;if(!W&&!v&&j.length>=7){let R=j[0];if(R==="m"||R==="M"){let y=j.toLowerCase();if(c(y,"mailto:")){A=!0;let N=y.indexOf(":"),B=j.slice(N+1);return X$("mailto:"+B,j,_+1,G.sanitizer)}}}let E=!D&&j.indexOf("@")!==-1&&j.indexOf("//")===-1&&!W;if(!v&&!A&&!E&&!W)return null;let w=j,S=j;if(!A&&!W&&!v&&E)w="mailto:"+j;return X$(w,S,_+1,G.sanitizer)}if(J===1){let _=Z;while(_>0&&(j$($[_-1])||".+-_".indexOf($[_-1])!==-1))_--;if(_>=Z||!CZ($,_,!0))return null;let j=Z+1,D=!1;while(j<$.length){let A=$[j];if(A===".")D=!0,j++;else if(j$(A)||A==="-"||A==="_")j++;else break}if(!D||j<=Z+1)return null;while(j>Z+1&&$[j-1]===".")j--;if(j>Z+1&&($[j-1]==="-"||$[j-1]==="_"))return null;if(j-(Z+1)<1e4){if($.indexOf(".",Z+1)>=j||$.indexOf(".",Z+1)===-1)return null}else if($.slice(Z+1,j).indexOf(".")===-1)return null;let v=$.slice(_,j);return X$("mailto:"+v,v,j,G.sanitizer,_)}let X=c($,"http://",Z)||c($,"https://",Z),K=!X&&c($,"ftp://",Z),Q=!X&&!K&&c($,"www.",Z);if(!(X||K||Q)||!CZ($,Z,!1))return null;var V=Z+(X?b($,Z+4)===vZ?8:7:K?6:4),U=V;while(V<$.length){let _=b($,V);if(_===C||_===l||_===d||_===j9||_===k1)break;V++}if(V<=U)return null;let H=V;while(H>U){let _=$[H-1];if(H>U+1&&$[H-2]==="\\")break;if(_==="?"||_==="!"||_==="."||_===","||_===":"||_==="*"||_==="_"||_==="~")H--;else if(_===";"){let j=H-2;while(j>=U&&$[j]!=="&"&&$[j]!==" ")j--;if(j>=U&&$[j]==="&"){let D=$.slice(j+1,H-1);if(D.length>=2&&D.length<=10&&/^[a-zA-Z0-9]+$/.test(D)&&(D==="lt"||D==="gt"||D.length>=3&&(c(D,"amp")||c(D,"apos")||c(D,"quot")||c(D,"nbsp")||/^[a-z]{3,10}$/.test(D))))break;H=j;break}H--}else if(_===")"){let j=0,D=0;for(let W=U;W<H;W++){if($[W]==="(")j++;if($[W]===")")D++}if(D>j)H--;else break}else break}if(V=H,V<=U)return null;var M=U,z=-1,q=-1;while(M<V){let _=b($,M);if(_>=h1&&_<=p1||_>=r1&&_<=s1||_>=G9&&_<=Y9||_===D1||_===$9||_===g9){if(_===g9)q=z,z=M;M++;continue}break}if(M===U||z===-1)return null;if(q===-1)q=U-1;for(let _=q+1;_<z;_++)if($[_]==="_")return null;for(let _=z+1;_<M;_++)if($[_]==="_")return null;let O=$.slice(Z,V);return X$(Q?"http://"+O:O,O,V,G.sanitizer)}function p$($,Z,Y,G,J){if(J==="<")return h$($,Z,Y,G,2);if(J==="h"||J==="f"||J==="w")return h$($,Z,Y,G,0);if(J==="@")return h$($,Z,Y,G,1);return null}function oZ($){var Z=$.trim(),Y=Z.replace(/[\s\t\n\r]+/g," ");if(Y.indexOf("ẞ")!==-1)return Y.replace(/\u1E9E/g,"ss").toLowerCase();return Y.toLowerCase()}function a6($,Z,Y){if(Z+3>=$.length||$[Z]!=="[")return null;let G=$[Z+1];if(G!==" "&&G!=="x"&&G!=="X")return null;if($[Z+2]!=="]")return null;return{type:F.gfmTask,completed:G.toLowerCase()==="x",endPos:Z+3}}function XZ($,Z,Y,G){let{inline:J,inList:X,inBlockQuote:K}=Z;if(G.inline!==void 0)Z.inline=G.inline;if(G.list!==void 0)Z.inList=G.list;if(G.inBlockQuote!==void 0)Z.inBlockQuote=G.inBlockQuote;let Q=c9($,Z,Y);return Z.inline=J,Z.inList=X,Z.inBlockQuote=K,Q}function d9($,Z,Y,G,J){return A$(G,!0,()=>d1($,Z,Y,G,J))}function i9($,Z,Y,G){var J=$[Z];if(J===void 0)return null;var X=Z,K=null,Q=J,V=null,U=b(J),H=U===C||U===l;if(H){if(V=I($,Z),K=t($,Z,V),X=Z+K.charCount,X>=$.length)return U$($,Z,Y);Q=$[X]}var M=K?K.spaceEquivalent:0;if(M>=4){if(H)return U$($,Z,Y);return null}var z=b(Q);if(z===k1){var q=tZ($,Z,Y,G);if(q)return q}else if(z===$9)return F$($,Z,Y,G);else if(z===D1||z===x9||z===BZ){var O=F$($,Z,Y,G);if(O)return O;var _=GZ($,Z,Y,G);if(_)return _}else if(z>=G9&&z<=Y9){var _=GZ($,Z,Y,G);if(_)return _}else if(z===E9)return r6($,X,Y,G);else if(z===C1)return B9($,X,Y,G,X+1<$.length&&b($,X+1)===D9);else if(z===j9&&!G.disableParsingRawHTML)return w$($,X,Y,G);else if(z===e0||z===e1){if(!V)V=I($,Z);if(!K)K=t($,Z,V);if(K.spaceEquivalent<=3)return KZ($,X,Y,G)}else if(z===NZ)return Y6($,Z,Y,G);if(H)return U$($,Z,Y);return null}function c9($,Z,Y){let G=[],J=0;while(J<$.length){while(J<$.length&&$[J]===`
`)J++;if(J>=$.length)break;var X=$[J];if(Z.inList&&G.length>0){var K=G[G.length-1];if(K?.type===F.paragraph){var Q=K,V=b(X);if(V===D1||V===i1||V===C||V===l){var U=I($,J),H=$.slice(J,U),M=t($,J,U);if(M.spaceEquivalent<4){var z=H.slice(M.charCount).trim();if(G6(G,z,Y)){J=U+(U<$.length&&$[U]===`
`?1:0);continue}}}}}var q=i9($,J,Z,Y);if(q){G.push(q),J=q.endPos;continue}var O=nZ($,J,Z,Y);if(O){G.push(O),J=O.endPos;continue}var _=$.slice(J).trim();if(_){if(Z.inBlockQuote&&G.length>0){let v=function(A){if(A.type===F.blockQuote){var E=A;if(E.children&&E.children.length>0){var w=E.children[E.children.length-1];if(w.type===F.paragraph)return w}}else if(A.type===F.orderedList||A.type===F.unorderedList){var S=A;if(S.items&&S.items.length>0){var R=S.items[S.items.length-1];if(R&&R.length>0){var y=R[R.length-1],N=v(y);if(N)return N}}}return null};for(var j=G.length-1;j>=0;j--){var Q=v(G[j]);if(Q){var W=e$($,J,Z,Y);if(W){var D=W;if(Q.children&&D.children)Q.children.push({type:F.text,text:`
`},...D.children);J=W.endPos;continue}}}}var W=e$($,J,Z,Y);if(W){G.push(W),J=W.endPos;continue}}J++}return G}function r6($,Z,Y,G){if(Y.inline)return null;let J=I($,Z),X=t($,Z,J,3);if(X.spaceEquivalent>3&&!Y.inList)return null;var K=Z+X.charCount;if(K>=$.length||$[K]!=="#")return null;let Q=A9($,K,"#",6);if(K+=Q,K>=$.length)return null;let V=$[K];if(V===`
`||V==="\r"){let q=I($,K);return{...D$(Q,[],"",G.slugify),endPos:q+(q<$.length?1:0)}}if(V!==" "&&V!=="\t")return null;let U=K,H=I($,U);var M=$.slice(U,H).replace(T6,"").trim();let z=d9(M,0,M.length,Y,G);return{...D$(Q,z,M,G.slugify),endPos:H+(H<$.length?1:0)}}function nZ($,Z,Y,G){if(Y.inline||Y.inBlockQuote||Y.inList)return null;let J=I($,Z);if(J>=$.length)return null;let X=k($,J),K=-1,Q=null;for(var V=0;X<$.length&&V<10;V++){let N=I($,X);if(N>=$.length)break;var U=X;while(U<N&&(b($,U)===C||b($,U)===l||b($,U)===V0))U++;if(U>=N)break;var H=0,M=X;while(M<N&&H<3&&b($,M)===C)H++,M++;if(M<N){let B=b($,M);if(B===i1||B===D1){let T=$[M];var z=0,q=!1,O=M;while(O<N){let f=b($,O);if(f===B){if(q){z=0;break}z++}else if(f===C||f===l)q=!0;else{z=0;break}O++}if(z>=1){K=N,Q=T;break}}}X=k($,N)}if(!Q)return null;let _=b($,Z);if(_===E9||_===k1||$[Z]==="|")return null;let j=Z;var D=Z,W=!1;while(D<X){let N=I($,D);if(N>=X)break;var v=D;while(v<N&&(b($,v)===C||b($,v)===l||b($,v)===V0))v++;if(v<N)W=!0,j=N;D=k($,N)}if(!W)return null;let A=$.slice(Z,j);var E=0,w=A.length;while(E<w&&(A.charCodeAt(E)===C||A.charCodeAt(E)===l||A.charCodeAt(E)===V0||A.charCodeAt(E)===d))E++;while(w>E&&(A.charCodeAt(w-1)===C||A.charCodeAt(w-1)===l||A.charCodeAt(w-1)===V0||A.charCodeAt(w-1)===d))w--;let S=A.slice(E,w);if(!S)return null;let R=Q==="="?1:2,y=d9(S,0,S.length,Y,G);return{...D$(R,y,S,G.slugify),endPos:K+(K<$.length?1:0)}}function e$($,Z,Y,G){if(Y.inline)return null;if(G.optimizeForStreaming&&$[Z]==="|"){var J=Math.min(500,$.length-Z),X=$.substr(Z,J),K=0,Q=!1;for(var V=0;V<X.length;V++){if(X[V]==="|")K++;if(X[V]==="-"||X[V]===":")Q=!0}if(K>=3&&Q){var U=I($,Z);while(U<$.length){var H=k($,U);if(H>=$.length)break;var M=I($,H),z=$.slice(H,M);if(z.indexOf("|")===-1&&z.indexOf("-")===-1)break;if(U=M,M>=$.length)break}return{type:F.paragraph,children:[],endPos:k($,U)}}}let q=Z,O=$.length;while(q<O){let r=I($,q),K0=!0;for(let $0=q;$0<r;$0++){let s=b($,$0);if(s!==C&&s!==l&&s!==V0){K0=!1;break}}if(K0){q=r;break}if(r>=O){q=O;break}let B0=k($,r);if(B0>=O){q=O;break}let m0=I($,B0),H0=!0,q0="";for(let $0=B0;$0<m0;$0++){let s=b($,$0);if(s!==C&&s!==l&&s!==V0){if(H0=!1,q0==="")q0=$[$0];break}}if(H0){q=r;break}let e=!1,l0=t($,B0,m0),Y0=l0.spaceEquivalent===4&&l0.charCount===4;if(q0==="<"&&!Y0&&!G.disableParsingRawHTML){let s=B0,s0=0;while(s<m0&&s0<3){let Z1=b($,s);if(Z1===C||Z1===l)s0++,s++;else break}if(s<m0&&$[s]==="<"){var _=w$($,s,{...Y,inline:!1},G);if(_)e=!("canInterruptParagraph"in _)||_.canInterruptParagraph}}if(Y0)e=!1;else if(!e&&q0&&l9(q0))if(q0==="["){let $0=B0;if($0+1>=O||$[$0+1]!=="^")e=!1;else e=!0}else if(q0==="*"||q0==="+")if(F$($,B0,Y,G))e=!0;else{let s=B0+1<O?$[B0+1]:"";if(s&&j1(s))e=!0;else e=!1}else{let $0=i9($,B0,Y,G);if($0)if($0.type===F.codeBlock)if(t($,B0,m0).spaceEquivalent>=4)e=!1;else e=!0;else if($0.type===F.unorderedList||$0.type===F.orderedList)if($0.type===F.orderedList)e=$0.start===1;else e=!0;else if(q0==="-")if(q>Z)e=!0;else e=!0;else if($0.type===F.ref)e=!1;else e=!0}if(e){q=r;break}q=k($,r)}if(q<=Z)return null;var j=Z,D=q;while(j<D){let r=b($,j);if(r===C||r===l)j++;else break}let W=I($,j);var v=D>W,A;if(!v)A=$.slice(j,D);else{var E=[],w=j,S=0;while(w<D){var R=I($,w);if(R>D)R=D;if(S===0)E.push($.slice(w,R));else{var y=0;while(y<4&&w+y<R)if(b($,w+y)===C)y++;else break;var N=y===4?w+4:w;E.push($.slice(N,R))}if(R<D){let r=b($,R);if(r===V0||r===d)E.push(`
`),w=k($,R);else w=D}else w=D;S++}A=E.join("")}var B=A.length;while(B>0){var T=A.charCodeAt(B-1);if(T===C||T===l)B--;else break}if(B<A.length)A=A.slice(0,B);let f=!1;for(let r=0;r<A.length;r++){let K0=A.charCodeAt(r);if(K0!==C&&K0!==l&&K0!==d&&K0!==V0){f=!0;break}}if(!f)return null;var x=A,P=q,g=-1,h=q-1;while(h>=j){if(b($,h)===d){g=h;break}h--}if(g>=0){var L=!1;for(var a=j;a<g;a++){let r=b($,a);if(r!==C&&r!==l&&r!==d&&r!==V0){L=!0;break}}if(!L){var i=g+1;while(i<$.length){let r=b($,i);if(r===C||r===l)i++;else break}var j0=i-(g+1);if(j0<4&&i<$.length&&$[i]==="["){var w0={...Y,inline:!1},z0=B9($,i,w0,G,!1);if(z0){var T0=0,h=j;while(h<=g){let K0=$.indexOf(`
`,h);if(K0===-1||K0>g)break;T0++,h=K0+1}var p=0,V1=0;h=0;while(h<A.length){let K0=A.indexOf(`
`,h);if(K0===-1)break;if(V1++,V1===T0){p=K0+1;break}h=K0+1}if(p>0)x=A.slice(0,p-1);P=z0.endPos,Y.refs=w0.refs}}}}let J0=d9(x,0,x.length,Y,G);var P0={type:F.paragraph,children:J0,endPos:P};if(J0.length>0){var M0=[];for(var Q0=J0.length-1;Q0>=0;Q0--){var r0=J0[Q0];if(r0.type===F.htmlSelfClosing&&r0.isClosingTag===!0)M0.push(Q0);else if(r0.type===F.text){var I0=r0;if(I0.text&&I0.text.trim().length>0)break}else break}if(M0.length>=3){var k0=M0[M0.length-1],B1=J0.slice(k0+1);J0.splice(k0+1),P0.removedClosingTags=B1}}return P0}function s6($,Z){if(Z!==0)return null;let Y=I$($);if(!Y?.hasValidYaml)return null;let G=Y.endPos-1;if(G>0&&$[G-1]==="\r")G--;let J=u1($.slice(0,G));return{type:F.frontmatter,text:J,endPos:Y.endPos}}function F$($,Z,Y,G){let J=I($,Z),X=t($,Z,J,3);if(X.spaceEquivalent>3)return null;var K=Z+X.charCount;if(K>=J)return null;let Q=$[K];if(Q!=="-"&&Q!=="*"&&Q!=="_")return null;var V=0,U=K;while(U<J){var H=$[U];if(H===Q)V++;else if(H!==" "&&H!=="\t")return null;U++}if(V<3)return null;return{type:F.breakThematic,endPos:k($,J)}}function t($,Z,Y,G){let J=0,X=0,K=Z;while(K<Y){var Q=b($,K);if(Q!==C&&Q!==l)break;if(G!==void 0&&J>=G)break;if(Q===l)J+=4-J%4;else J+=1;X++,K++}return{spaceEquivalent:J,charCount:X}}function kZ($,Z,Y,G){let J=0,X=0,K=G;for(let M=Z;M<Y&&X<4;M++){var Q=b($,M);if(Q===l){let z=4-K%4;if(X+=z,J++,K+=z,X>=4)break}else if(Q===C){if(X++,J++,K++,X>=4)break}else break}let V=$.slice(Z+J,Y);var U=0;for(var H=Z;H<Y;H++){if($[H]==="\t")U++;if(U>=2)break}if(U>=2&&c(V,"\t")&&G>0)V="  "+V.slice(1);return V}function U$($,Z,Y){let G=I($,Z),J=t($,Z,G);if(J.spaceEquivalent<4)return null;let X=J.spaceEquivalent,K=I($,Z+J.charCount),Q=Z,V=0;var U=Q-1;while(U>=0&&$[U]!==`
`&&$[U]!=="\r")U--;U++;while(U<Q){if($[U]==="\t")V=V+4-V%4;else V++;U++}let H=kZ($,Q,K,V),M=k($,K);if(M>=$.length){if(!H.trim())return null;return{type:F.codeBlock,text:H,endPos:M}}var z=[];z.push(H);let q=M;while(q<$.length){let _=I($,q);if(w1($,q,_)){let j=_+1;if(j<$.length){let D=I($,j),W=t($,j,D),v=$[j+W.charCount];if(v&&v!==`
`&&(W.spaceEquivalent<4||v===">"&&W.spaceEquivalent<X))break}z.push(`
`)}else{if(t($,q,_).spaceEquivalent<4)break;let D=kZ($,q,_,0);z.push(`
`),z.push(D)}q=k($,_)}let O=z.join("");if(O=O.replace(I6,""),!O.trim())return null;return{type:F.codeBlock,text:O,endPos:q}}function KZ($,Z,Y,G){let J=$[Z];if(J!=="`"&&J!=="~")return null;let X=A9($,Z,J);if(X<3)return null;let K=Z;while(K>0&&b($,K-1)!==d)K--;let Q=t($,K,Z),V=Q.spaceEquivalent,U=V;if(V===4&&Q.charCount===4)V=0,U=4;if(V>=4)return null;let H=g0($,Z+X),M=I($,H),z=$.slice(H,M).trim();if(J==="`"&&z.indexOf("`")!==-1)return null;z=z.replace(a$,"$1");let q=z.indexOf(" "),O=q>0?z.slice(0,q):z,_=q>0?z.slice(q+1).trim():"",j=_&&/=\s*["']/.test(_)?l1(_,"code","code",G):void 0,D=k($,M),W=D,v=!1;while(W<$.length){let S=I($,W),R=W,y=0;while(R<S){let N=b($,R);if(N===C){if(y++,R++,y>=4)break}else if(N===l){if(y+=4-y%4,R++,y>=4)break}else break}if(y<4){let N=A9($,R,J,S-R);if(N>=X){let B=R+N;while(B<S){let T=b($,B);if(T===C||T===l)B++;else break}if(B===S){v=!0;break}if(N>=3&&B<S){let T=R+N;if(!(T<S&&(b($,T)===C||b($,T)===l))){let x=!0;if(J==="`"){if($.slice(T,S).indexOf("`")!==-1)x=!1}if(x)break}}}}else if(U===4&&V===0&&y===4){let N=A9($,R,J,S-R);if(N>=X&&w1($,R+N,S)){v=!0;break}}W=k($,S)}let A=W>D&&$[W-1]===`
`?W-1:W;if(A>D&&$[A-1]==="\r")A--;let E=u1($.slice(D,A));if(U)E=$Z(E,U);let w=v&&W<$.length?k($,I($,W)):W;return{type:F.codeBlock,text:E,lang:O,attrs:j,endPos:w}}function o6($,Z,Y){for(var G=0;G<$.length;G++)if(!o$($[G])){let X=XZ($,Z,Y,{inline:!1,inBlockQuote:!0});for(var J=0;J<X.length;J++){let K=X[J];if("endPos"in K)delete K.endPos}return X}return[]}function tZ($,Z,Y,G){if(Y.inline)return null;let J=Z;while(J<$.length&&($[J]===" "||$[J]==="\t"))J++;if(J>=$.length||$[J]!==">")return null;let X=Z;var K=[],Q=void 0,V=!1,U=-1,H=!1,M=null,z=null,q=0,O=!1;while(X<$.length){let w=I($,X),S=X;while(S<w&&($[S]===" "||$[S]==="\t"))S++;if(S<w&&$[S]===">"){let R=S+1;if(R<w&&$[R]===" ")R++;let N=t($,R,w).spaceEquivalent>=4,B=!1,T=null,f=0;if(R<w){let P=$[R];if(P==="`"||P==="~"){let g=0,h=R;while(h<w&&$[h]===P&&g<20)g++,h++;if(g>=3)B=!0,T=P,f=g}}if(H&&M==="fenced"&&T===z&&f>=q)H=!1,M=null,z=null,q=0;else if(N||B)H=!0,M=N?"indented":"fenced",z=T,q=f;var _=!N&&!B;if(_){for(var j=R;j<w;j++)if(!o$($[j])){_=!1;break}}if(O=_,U===-1&&!_)U=K.length;if(!_)V=!0;let x=S+1;if(x<w&&$[x]==="\t"){K.push("  ");let P=4;for(let g=x+1;g<w;g++){let h=$[g];var D=b(h);if(D===l){let L=4-P%4;if(L===1)K.push(" ");else if(L===2)K.push("  ");else if(L===3)K.push("   ");else K.push(" ".repeat(L));P+=L}else K.push(h),P++}if(w<$.length)K.push(`
`)}else{let P=x;if(P<w&&$[P]===" ")P++;if(K.push($.slice(P,w)),w<$.length)K.push(`
`)}}else{var W=!0;for(var j=X;j<w;j++)if(!o$($[j])){W=!1;break}if(W||H)break;if(t($,X,w).spaceEquivalent===0){let y=i9($,X,Y,G);if(y&&y.type!==F.ref&&y.type!==F.codeBlock)break;if(O)break}if(K.push($.slice(X,w)),w<$.length)K.push(`
`)}X=k($,w)}if(X===Z)return null;if(K.length>0&&K[K.length-1]===`
`)K.pop();let v=K.join("");if(v.length>=4&&v.charCodeAt(0)===C1&&v.charCodeAt(1)===F9){let w=v.indexOf(`]
`,2);if(w>2)Q=v.slice(2,w),v=v.slice(w+2)}let A=o6(v,Y,G),E={type:F.blockQuote,children:A,endPos:X};if(Q)E.alert=Q;return E}function $Z($,Z){return $.split(`
`).map(function(Y){if(Y.length===0)return Y;let G=Z,J=0,X=0,K=0;while(X<Y.length&&J<G)if(Y[X]===" ")J++,K++,X++;else if(Y[X]==="\t"){let Q=4-K%4;if(J+Q<=G)J+=Q,K+=Q,X++;else{let V=G-J,U=Math.max(0,Q-V);return" ".repeat(U)+Y.slice(X+1)}}else break;return Y.slice(X)}).join(`
`)}function Q$($,Z,Y,G,J=!0){let X=(J?`
`:"")+$,K=d9(X,0,X.length,Y,G);if(Z.length>0&&Z[Z.length-1].type===F.paragraph)Z[Z.length-1].children.push(...K);else Z.push(...K)}function h9($){return $.some(function(Z){return Z.type===F.codeBlock||Z.type===F.paragraph||Z.type===F.blockQuote||Z.type===F.orderedList||Z.type===F.unorderedList||Z.type===F.heading})}function u$($){return!!$.match(YZ)}function eZ($){if($.length===0)return $;var Z=$[$.length-1];if((Z.type===F.orderedList||Z.type===F.unorderedList)&&Z.items?.length>0)return eZ(Z.items.slice(-1)[0]);return $}function ZZ($,Z,Y,G,J,X,K){if(!c(J,"["))return null;var Q={inline:!1,list:!1,refs:X.refs||{}},V=B9($,Z+G.charCount,Q,K,!1);return V?V.endPos:null}function mZ($,Z,Y,G){if($.length!==1||!Y)return!1;if($[0].length!==0)return!1;if(Z)return!0;if(!Z&&G.trim()==="")return!0;return!1}function hZ($,Z){var Y=$.index||0;return Z?Y+$[1].length+$[2].length+1:Y+$[1].length+1}function O$($,Z,Y,G,J){var X=0,K=G+J,Q=Z;while(Q<Y&&X<4){var V=b($,Q);if(V===C)X++,K++;else if(V===l){var U=4-K%4;if(X+U>4)break;X+=U,K+=U}else break;Q++}return{contentStartColumn:K,contentStartPos:Q}}function l$($){var Z=$.match(YZ);if(!Z)return null;if(Z[1])return{match:[$,Z[1],Z[2],Z[3]],ordered:!0,listItemRegex:r$};if(Z[4])return{match:[$,Z[4],Z[5],""],ordered:!0,listItemRegex:r$};if(Z[6])return{match:[$,Z[6],Z[7]],ordered:!1,listItemRegex:s$};if(Z[8])return{match:[$,Z[8],""],ordered:!1,listItemRegex:s$};return null}function o1($,Z,Y,G,J,X,K){if(Z.spaceEquivalent!==X)return!1;var Q=$.match(K);if(Q)return Y?Q[2]===J:Q[1]===G;var V=$.match(YZ);if(!V)return!1;if(Y)return V[4]&&V[5]===J;else return V[8]===G}function $6($,Z,Y,G){var J=Z,X=Y,K=Z[0];while(X<$.length){var Q=I($,X),V=$.slice(X,Q),U=c(V," ".repeat(G))?V.slice(G):V;if(c(U.trim(),K)&&A9(U.trim(),0,K)>=3)return{content:J,endPos:k($,Q)};J+=`
`+U,X=k($,Q)}return{content:J,endPos:X}}function K$($,Z,Y,G,J,X,K,Q,V,U,H,M,z){var q=U?void 0:V[1],O=U?V[2]:void 0,_=U?r$:s$,j=H;if(!H){var D=k($,X),W=D;while(W<$.length){var v=I($,W),A=$.slice(W,v),E=t($,W,v),w=E.spaceEquivalent;if(w1($,W,v)){var S=k($,v);if(S<$.length){var R=I($,S),y=t($,S,R),N=y.spaceEquivalent,f=hZ(V,U),x=J+Q+f,P=O$($,x,X,K,f),g=P.contentStartColumn;if(N+1>g){j=!0;break}}break}else if(w<=K){var B=A.slice(E.charCount),T=B.match(_);if(T&&(U?T[2]===O:T[1]===q))break}W=k($,v)}}var f=hZ(V,U),x=J+Q+f,P=O$($,x,X,K,f),g=P.contentStartColumn,h=G,L=k($,X);if(c(G,"```")||c(G,"~~~")){var a=U?V[1].length+V[2].length+1:V[1].length+1,i=$6($,G,L,a);h=i.content,L=i.endPos}return Z.push(Z6(h,j,M,z)),Y.push(g),{newCurrentPos:L,itemHasBlankLine:j}}function pZ($,Z,Y,G,J,X){if(J>G||X.disableParsingRawHTML)return!1;let K=Z+Y;if(K>=$.length||$[K]!=="<")return!1;return n6($,K)}function n6($,Z){if(Z>=$.length||$[Z]!=="<")return!1;let Y=$.length,G=Z+1;if(G<Y&&$[G]==="/")G++;if(G>=Y)return!1;let J=b($,G);if(!U9(J))return!1;G++;while(G<Y){let K=$[G],Q=b($,G);if(K===">"||K===" "||K==="\t"||K===`
`||K==="\r"||K==="/")break;if(K==="-"||K==="_"||U9(Q)||Q>=48&&Q<=57)G++;else return!1}let X=0;while(G<Y){let K=$[G],Q=b($,G);if(X===1){if(K==='"')X=0;G++}else if(X===2){if(K==="'")X=0;G++}else if(K==='"')X=1,G++;else if(K==="'")X=2,G++;else if(K===">")return!0;else if(K==="/"&&G+1<Y&&$[G+1]===">")return!0;else if(Q===10||Q===13)return!1;else G++}return!1}function uZ($,Z,Y,G,J,X,K,Q,V,U,H,M){let z=G,q=!1;while(z<$.length){let O=I($,z),_=t($,z,O),j=_.spaceEquivalent;if(w1($,z,O)){q=!0,z=k($,O);continue}let D=$.slice(z+_.charCount,O);if(j<=J&&o1(D,_,X,K,Q,J,V))break;if(j>=Y){if(M&&q){let v=ZZ($,z,O,_,D,U,H);if(v){z=v,q=!1;continue}}let W=z$($,z,O,_,Y-1,Y,Z,q,U,H,void 0,J);if(W.processed){z=W.newPos,q=W.wasBlank;continue}}else break}return z}function lZ($,Z,Y,G){let J=XZ($,Y,G,{inline:!1,list:!0});if(J.length>0)return!Z&&J.length===1&&J[0].type===F.paragraph?J[0].children:J;let X=A$(Y,!0,()=>d1($,0,$.length,Y,G));return Z&&X.length>0?[{type:F.paragraph,children:X}]:X}function Z6($,Z,Y,G){let J=a6($,0,Y);if(!(J&&(J.endPos>=$.length||$[J.endPos]===" ")))return lZ($,Z,Y,G);let K=J.endPos<$.length?J.endPos+1:J.endPos,Q=$.slice(K),V=lZ(Q,Z,Y,G),U=[J];if(J.endPos<$.length)U.push({type:F.text,text:" "});return U.push(...V),U}function dZ($,Z){if(!$[0])return!1;let Y=$[0].indexOf(Z);if(Y===-1)return!1;let G=Y+Z.length;if(G>=$[0].length)return!1;let J=$[0][G];return J?b(J)===AZ:!1}function G6($,Z,Y){if($.length===0)return!1;let G=$[$.length-1],J=Z.trim();if(!c(J,"=")&&!c(J,"-")||J.length<1||!/^[=-]+[ \t]*$/.test(J))return!1;let X=[],K="";if(G.type===F.paragraph){let U=G;X=U.children,K=U.children.map((H)=>H.type===F.text?H.text:"").join("").trim()}else if(G.type===F.text){let U=[],H=$.length-1;while(H>=0&&$[H].type===F.text)U.unshift($[H]),H--;if(U.length>0)X=U,K=U.map((M)=>M.text).join("").trim()}if(!K)return!1;let V=J[0]==="="?1:2;if(G.type===F.paragraph)$.pop();else if(G.type===F.text)while($.length>0&&$[$.length-1].type===F.text)$.pop();return $.push(D$(V,X,K,Y.slugify)),!0}function z$($,Z,Y,G,J,X,K,Q,V,U,H,M){let z=G.spaceEquivalent,q=$.slice(Z+G.charCount,Y);if(z>=J+4){let D=U$($,Z,V);if(D){let W=D,v=$Z(W.text||"",X);return K.push({...W,text:v}),{processed:!0,newPos:W.endPos,wasBlank:!1}}}let O=z-(X-1);if(z+1>=X&&O<=3){let D=Z+G.charCount;if(D<Y){let W=$[D];if(W==="`"||W==="~"){let v=KZ($,D,V,U);if(v){let A=v,E=$Z(A.text||"",X-1);return K.push({...A,text:E,endPos:A.endPos}),{processed:!0,newPos:A.endPos,wasBlank:!1}}}if(W==="|"){let v=Y6($,D,V,U);if(v){let A=v;return K.push(A),{processed:!0,newPos:A.endPos,wasBlank:!1}}}}}if(q.length>0&&(q[0]==="-"||q[0]==="*"||q[0]==="+"||q[0]>="0"&&q[0]<="9")){if(/^([-*+]|\d{1,9}[.)])\s+/.test(q)){let W=d9(q,0,q.length,V,U);return K.push({type:F.text,text:`
`},...W),{processed:!0,newPos:k($,Y),wasBlank:!1}}}let _=L6($,Z,K,q,V,U);if(_!==null)return{processed:!0,newPos:_,wasBlank:!1};let j=XZ(q,V,U,{inline:!1,list:!0});if(j.length>0){if(H&&j[0].type===F.paragraph){let D=j[0];if(K.push({type:F.text,text:`
`},...D.children),j.length>1)K.push(...j.slice(1))}else if(!Q&&j[0].type===F.paragraph&&K.length>0){let D=K[K.length-1],W=j[0];if(D.type===F.paragraph)D.children.push({type:F.text,text:`
`},...W.children);else if(D.type===F.heading)K.push(...W.children);else if(!h9(K))K.push({type:F.text,text:" "},...W.children);else K.push(...j);if(j.length>1)K.push(...j.slice(1))}else K.push(...j);return{processed:!0,newPos:k($,Y),wasBlank:!1}}if(Q){let D=A$(V,!0,()=>d1(q,0,q.length,V,U));K.push({type:F.paragraph,children:D})}else Q$(q,K,V,U);return{processed:!0,newPos:k($,Y),wasBlank:!1}}function GZ($,Z,Y,G){if(Y.inline)return null;var J=Y.inList;if(Y.inList=!0,Z>0){var X=b($,Z-1);if(X!==d&&X!==V0)return Y.inList=J,null}var K=I($,Z),Q=t($,Z,K);if(Q.spaceEquivalent>3&&!Y.inList)return Y.inList=J,null;var V=$.slice(Z,K),U=Q.charCount,H=V.slice(U),M=l$(H);if(!M)return Y.inList=J,null;var{match:z,ordered:q,listItemRegex:O}=M,_=Q.spaceEquivalent,j=q?parseInt(z[1],10):void 0,D=q?z[2]:void 0,W=q?void 0:z[1],v=q?z[3]==="":z[2]==="";function A(n,S0){if(n===0)return!0;var b0=b($,n-1);if(b0!==d)return!1;if(!S0)return!0;var U0=n-2;while(U0>=0){var u=b($,U0);if(u!==C&&u!==l)break;U0--}return U0<0||b($,U0)===d}if(v&&!A(Z,!0))return Y.inList=J,null;if(q&&j!==1&&!A(Z,!1))return null;if(!q&&dZ(z,W))return null;var E=z.index||0,w=q?E+z[1].length+z[2].length+1:v?E+z[1].length:E+z[1].length+1,S=Z+U+w,R=O$($,S,K,_,w),y=R.contentStartColumn,N=_+E+z[1].length,B=q?N+z[2].length+1:v?N:N+1,T=[],f=[];function x(n,S0,b0){return b0?n>=S0:n>S0}function P(){return T[T.length-1]}function g(){return f[f.length-1]??y}function h(n,S0){let b0=eZ(S0),U0=Y.inList;Y.inList=!0;let u=GZ($,n,Y,G);if(Y.inList=U0,u)return b0.push(u),u;return null}var L=k($,K),a=L,i=!1;while(a<$.length){var j0=I($,a),w0=$.slice(a,j0);if(w0.trim()===""){var z0=k($,j0);while(z0<$.length){var T0=b($,z0);if(T0===d);else if(!p6.has($[z0]))break;z0++}var p=I($,z0),V1=$.slice(z0,p),J0=t($,z0,p),P0=V1.slice(J0.charCount);if(o1(P0,J0,q,W,D,_,O))i=!0;else{var M0=ZZ($,z0,p,J0,P0,Y,G);if(M0){var Q0=M0;while(Q0<$.length&&b($,Q0)===d)Q0++;if(Q0<$.length){var r0=I($,Q0),I0=$.slice(Q0,r0),k0=t($,Q0,r0),B1=I0.slice(k0.charCount);if(o1(B1,k0,q,W,D,_,O))i=!0}}}break}var r=t($,a,j0),K0=w0.slice(r.charCount),B0=l$(K0);if(!B0)break;var m0=B0.match;if(q){if(m0[2]!==D)break}else if(m0[1]!==W)break;a=k($,j0)}var H0=q?z[3]:z[2];H0=H0.trimStart();var q0=Z+U+(z.index||0),e=q?q0+z[1].length+z[2].length:q0+z[1].length,l0=e;while(l0<$.length){var T0=b($,l0);if(T0!==C&&T0!==l)break;l0++}var Y0=0,$0=e;while($0<K){var T0=b($,$0);if(T0===l)Y0+=4-Y0%4;else if(T0===C)Y0++;else break;$0++}var s=!1;if(e<$.length&&b($,e)===l){var s0=1,Z1=e+1;while(Z1<$.length&&b($,Z1)===l)s0++,Z1++;if(s0>=2)H0="      "+H0,s=!0}if(!q)v=v&&Y0===0;if(Y0>=4&&!s)H0=" ".repeat(Y0-1)+H0.trimStart();var U1=H0.trim()==="";let F1=i;if(!i&&L<$.length){var Q1=L;while(Q1<$.length){var N1=I($,Q1),F0=$.slice(Q1,N1);if(w1($,Q1,N1)){var o0=k($,N1);while(o0<$.length){var O1=I($,o0);if(w1($,o0,O1))o0=k($,O1);else break}if(o0<$.length){var I1=t($,o0,$.length),z1=I1.spaceEquivalent;if(z1>=_){var h0=$.slice(o0,I($,o0)),_1=h0.slice(I1.charCount).match(O),y1=_1&&(q?_1[2]===D:_1[1]===W),W1=null;for(var o=L;o<Q1;o=I($,o)+1){var G1=I($,o),q1=t($,o,G1),n0=$.slice(o,G1).slice(q1.charCount).match(O),Q9=n0&&q1.spaceEquivalent>_&&q1.spaceEquivalent>=y&&(q?n0[2]===D:n0[1]===W);if(Q9){var b1=q1.spaceEquivalent+1,R1=q?b1+n0[1].length+n0[2].length+1:b1+n0[1].length+1,z9=o+q1.charCount+n0[0].length,y9=O$($,z9,G1,b1,R1-b1);W1=y9.contentStartColumn;break}}var _9=Y0>=5?B:y;if(!y1&&z1>=_9&&(W1===null||z1+1<W1))F1=!0}}break}var M1=t($,Q1,N1),f1=M1.spaceEquivalent,L1=F0.slice(M1.charCount),T1=L1.match(O),v0=T1&&(q?T1[2]===D:T1[1]===W);if(v0){if(f1<=_)break}Q1=k($,N1)}}var N0=H0;if(c(H0,"```")||c(H0,"~~~")){var p0=q?z[1].length+z[2].length+1:z[1].length+1,S1=$6($,H0,L,p0);N0=S1.content,L=S1.endPos}var u0=!v&&H0.trim()===""&&Y0>0&&Y0<5;if(!F1){var f0=N0.length>0?N0[0]:"",X1=f0===">",Z=L;while(Z<$.length){var K=I($,Z),V=$.slice(Z,K);if(V.trim()==="")break;var Q=t($,Z,K);if(Q.spaceEquivalent<B)break;var H=V.slice(Q.charCount);if(Q.spaceEquivalent<=_&&o1(H,Q,q,W,D,_,O))break;if(u$(H)&&Q.spaceEquivalent>_)break;var y0=H.length>0?H[0]:"",t1=y0===">"&&X1;if(y0===">"&&!t1||y0==="#"||c(H,"```")||c(H,"~~~"))break;N0+=`
`+H,L=Z=k($,K)}}if(T.push(Z6(N0,F1,Y,G)),f.push(y),F1&&(Y0>=5||u0)){let n=P();L=uZ($,n,B,L,_,q,W,D,O,Y,G,!0)}else if(!F1){let n=B-1;while(L<$.length){let S0=I($,L),b0=$.slice(L,S0),U0=t($,L,S0),u=U0.spaceEquivalent,_0=b0.slice(U0.charCount);if(b0.trim()===""||u<=_&&o1(_0,U0,q,W,D,_,O)||u$(_0)&&u>_||u<n)break;let t0=P(),E0=z$($,L,S0,U0,n,y,t0,!1,Y,G,!0,_);if(E0.processed)L=E0.newPos;else break}}var Z0=!1;while(L<$.length){let n=I($,L),S0=$.slice(L,n),b0=t($,L,n),U0=b0.charCount,u=b0.spaceEquivalent;if(S0.trim()==="")i=!0,Z0=!0,L=k($,n);else if(u<_){let _0=S0.slice(U0);if(_0.startsWith("<")&&pZ($,L,U0,_,u,G))break;let t0=_0.trim();if(t0.length>0&&T.length>0&&!l9(t0[0])&&!o1(_0,b0,q,W,D,_,O)){let E0=P();if(E0.length>0){let X0=E0[E0.length-1];if(!Z0&&(X0.type===F.paragraph||X0.type===F.text)){Q$(_0,E0,Y,G),Z0=!1,L=k($,n);continue}}}break}else{let _0=S0.slice(U0);if(T.length>0){let m=f[T.length-1]||y;if(u+1>=m&&!o1(_0,b0,q,W,D,_,O)){let C0=P();if(C0.length>0&&G6(C0,_0,G)){L=k($,n);continue}}}if(F$($,L,Y,G))break;if(Z0){let m=ZZ($,L,n,b0,_0,Y,G);if(m){L=m,Z0=!1;continue}}if(u<=_){if(_0.startsWith("<")&&pZ($,L,U0,_,u,G))break;if(!o1(_0,b0,q,W,D,_,O)){if(u===_&&!Z0){let m=_0.trim();if(m.length>0&&!l9(m[0])){let C0=i9($,L,Y,G);if(C0&&C0.type!==F.paragraph)break;let R0=P();if(R0.length>0&&!h9(R0)){Q$(_0,R0,Y,G,!0),Z0=!1,L=k($,n);continue}}}break}}if(mZ(T,v,Z0,H0))break;let E0=l$(_0),X0=E0?E0.match:null,A1=X0&&(q?X0[2]===D:X0[1]===W);if(A1&&u>3&&Z0)break;if(A1&&u<=_+3){if(u>=4&&Z0)break;if(u===_){let m=q?X0[3]:X0[2];if(m=m.trimStart(),L=K$($,T,f,m,L,n,u,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1,m.trim()===""){let R0=T[T.length-1],O0=g();L=uZ($,R0,O0,L,_,q,W,D,O,Y,G)}continue}if(u>_){if(Z0){let O0=q?X0[3]:X0[2];O0=O0.trimStart(),L=K$($,T,f,O0,L,n,u,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1;continue}let m=P(),C0=u+1,R0=x(C0,g(),h9(m));if(R0){let O0=h(L,m);if(O0){L=O0.endPos,Z0=!1;continue}}if(!R0&&A1){let O0=q?X0[3]:X0[2];if(O0=O0.trimStart(),!i){let d0=k($,n);while(d0<$.length){let L0=I($,d0),i0=$.slice(d0,L0),D0=t($,d0,L0),J1=D0.spaceEquivalent;if(i0.trim()===""){let R9=k($,L0);if(R9<$.length){let g1=t($,R9,$.length).spaceEquivalent,R$=u+(q?X0[1].length+X0[2].length+1:X0[1].length+1);if(g1+1>R$)break}break}else if(J1<=_){let W0=i0.slice(D0.charCount).match(O);if(W0&&(q?W0[2]===D:W0[1]===W)&&J1<=_)break}d0=k($,L0)}}L=K$($,T,f,O0,L,n,u,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1;continue}else if(!R0&&!A1)break;{let O0=P(),A0=O0.length===0;if(A0&&mZ(T,v,Z0,H0))break;let d0=O0.some((D0)=>D0.type===F.codeBlock||D0.type===F.paragraph||D0.type===F.blockQuote||D0.type===F.orderedList||D0.type===F.unorderedList||D0.type===F.heading),L0=A0&&T.length===1?B:y;if(d0?u>=L0:u>L0){let D0=z$($,L,n,b0,L0,y,P(),Z0,Y,G,void 0,_);if(D0.processed){Z0=D0.wasBlank,L=D0.newPos;continue}}else break}}else if(u===_){if(!q&&X0&&dZ(X0,X0[1]))break;let m=q?X0[3]:X0[2];m=m.trimStart(),L=K$($,T,f,m,L,n,_,U0,X0,q,i,Y,G).newCurrentPos,Z0=!1}}else if(u>_){let m=P();if(u$(_0)){let A0=u+1;if(x(A0,g(),h9(m))){let i0=h(L,m);if(i0){L=i0.endPos,Z0=!1;continue}}if(u-_>3){let i0=m.length>0?m[m.length-1]:null;if(i0&&(i0.type===F.paragraph||i0.type===F.text)){Q$(_0,m,Y,G),Z0=!1,L=k($,n);continue}}else break}else{let A0=h(L,m);if(A0){L=A0.endPos,Z0=!1;continue}}let R0=y;if(h9(m)?u>=R0-1:u>R0-1){let A0=z$($,L,n,b0,R0-1,y,P(),Z0,Y,G,void 0,_);if(A0.processed){Z0=A0.wasBlank,L=A0.newPos;continue}}else break}else break}}if(i&&T.length>1&&T[0].length>0&&T[0][0].type!==F.paragraph){for(var G0=1;G0<T.length;G0++)if(T[G0].length>0&&T[G0][0].type===F.paragraph){var E1=!1;for(var v1=0;v1<T[0].length;v1++){var Y1=T[0][v1].type;if(Y1===F.codeBlock||Y1===F.heading||Y1===F.blockQuote||Y1===F.orderedList||Y1===F.unorderedList||Y1===F.htmlBlock||Y1===F.breakThematic){E1=!0;break}}if(!E1)T[0]=[{type:F.paragraph,children:T[0]}];break}}let b9=q?{type:F.orderedList,items:T,ordered:!0,start:j}:{type:F.unorderedList,items:T,ordered:!1};return Y.inList=J,{...b9,endPos:L}}function Y6($,Z,Y,G){if(Y.inline)return null;let J=[],X=Z;while(X<$.length){let O=I($,X);if(w1($,X,O))break;let _=$.slice(X,O).trim();if(!(_.indexOf("|")!==-1||J.length>=3&&_&&!l9(_[0])))break;J.push(_),X=k($,O)}if(J.length<2)return null;let K=(O)=>O[0]==="|"&&O[O.length-1]==="|"?O.slice(1,-1):O,Q=(O)=>{let _=[],j="",D=!1;for(let W=0;W<O.length;W++){let v=O[W];if(v==="\\"&&W+1<O.length&&O[W+1]==="|")j+="|",W++;else if(v==="`")D=!D,j+=v;else if(v==="|"&&!D)_.push(j.trim()),j="";else j+=v}return _.push(j.trim()),_},V=Q(K(J[0]));if(!V.length)return null;let U=Q(K(J[1]));if(U.length!==V.length||U.some((O)=>!/^:?-+:?$/.test(O)))return null;let H=U.map((O)=>{let _=O[0]===":",j=O[O.length-1]===":";return _&&j?"center":_?"left":j?"right":null});if(G.optimizeForStreaming&&J.length===2)return null;let M=(O)=>A$(Y,!0,()=>O.map((_)=>d1(_,0,_.length,Y,G))),z=M(V),q=J.slice(2).map((O)=>{let _=O.indexOf("|")!==-1?Q(K(O)):[O.trim()],j=V.length;while(_.length<j)_.push("");return _.length=j,M(_)});return{type:F.table,header:z,cells:q,align:H,endPos:X}}var t6=["div","p","section","article","aside","nav","header","footer","main","h1","h2","h3","h4","h5","h6","blockquote","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","td","th","form","fieldset","hr","pre","details","summary","figure","figcaption"],e6=new Set(["pre","script","style","textarea"]);function p9($){return t6.indexOf($.toLowerCase())!==-1}function w9($){return e6.has($)}function w1($,Z,Y){for(var G=Z;G<Y;G++){let J=b($,G);if(J!==C&&J!==l&&J!==V0)return!1}return!0}function A$($,Z,Y){let G=$.inline;$.inline=Z;try{return Y()}finally{$.inline=G}}function d$($,Z,Y){var G=Z;while(G<Y){var J=I($,G);if(w1($,G,J))return G;G=k($,J)}return Y}function i$($,Z,Y){return{type:F.htmlComment,text:u1($),endPos:Z,...Y}}function v9($,Z,Y,G,J,X,K,Q,V){var U=u1(Z),H=U;if(Q&&(Q.forceBlock||Q.optimizeForStreaming)&&Z&&!X){var M=new RegExp("^<"+$.toLowerCase()+"(\\s[^>]*)?>$","i");if(M.test(Z.trim()))H=""}var z=H,q=$.toLowerCase(),O=new RegExp("^<"+q+"[\\s>]","i");if(O.test(z)){var _=z.indexOf(">");if(_!==-1){z=z.slice(_+1);var j="</"+q+">",D=z.indexOf(j);if(D!==-1)z=z.slice(0,D)}}else{var W="</"+q+">",v=z.indexOf(W);if(v!==-1)z=z.slice(0,v)}var A=[];if(z&&Q&&!Q.optimizeForStreaming){var E=V||{inline:!1,inHTML:!0,inAnchor:!1},w=z.trim(),S=M$.test(w),R=v$.test(w),y=W$.test(w);if(S||R||y){var N={...E,inline:!1,inHTML:!0,inAnchor:E.inAnchor||q==="a"};A=c9(w,N,Q)}else if(w){var B={...E,inline:!0,inHTML:!0,inAnchor:E.inAnchor||q==="a"};A=d1(w,0,w.length,B,Q)}}return{type:F.htmlBlock,tag:$,attrs:G||{},rawAttrs:J,children:A,rawText:H,text:z,verbatim:!0,isClosingTag:X,canInterruptParagraph:K,endPos:Y}}function u9($){let Z=v$.test($),Y=M$.test($),G=P6.test($);return Z||Y&&!G}function iZ($,Z,Y,G,J,X,K,Q,V,U){if(!Q.inHTML&&!Q.inline&&!$$(J,`
`)){let J0=X,P0=K.length;while(J0<P0){let M0=I(K,J0);if(w1(K,J0,M0))break;let Q0=K.slice(J0,M0).trim();if(Q0.length>0&&l9(Q0[0])){let r0=w$(K,J0,Q,U);if(r0){J0=r0.endPos;continue}let I0=n1(K,J0);if(I0){J0=I0.endPos;continue}return null}J0=k(K,M0)}}let H=Z,M=w9(H);var z=!M&&!K9(Z),q=void 0;if(J){var O=J.indexOf(">");if(O!==-1){var _=J.slice(0,O+1);if(_.indexOf(`
`)!==-1)q=_;var j=O;for(var D=1;D<O;D++){var W=_[D];if(W===" "||W==="\t"||W===`
`||W===">"){j=D;break}}Y=_.slice(j,O)}}var v=Y.replace(/^[\s\n\r\t]+/,""),A=l1(v,Z,$,U),E={...A},w=!1,S=!1;if(z&&G.length>0){var R="</"+H,y=G.indexOf(R);if(y>=0){var N=y+R.length;while(N<G.length&&(G[N]===" "||G[N]==="\t"))N++;if(N<G.length&&G[N]===">"){var B=G.slice(0,y);if(u9(B))G=B,S=!0;else w=!0}}if(!S){var T=G.length-1;if(G[T]===`
`){T--;while(T>=0&&(G[T]===" "||G[T]==="\t"||G[T]==="\r"))T--;if(T>=0&&G[T]===`
`)w=!0}}}var f=M||z&&w&&!u9(G),x=u1(G),P=x;if(f){if(x.length>0&&x[0]===`
`)x=x.slice(1),P=x;if(x.length>0&&x[x.length-1]===`
`)x=x.slice(0,-1),P=x;var R="</"+H+">",y=x.indexOf(R);if(y!==-1)x=x.slice(0,y)}let g=x.match(/^([ \t]*)/),h=g?g[1]:"",L=new RegExp(`^${h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"gm"),a=x.replace(L,""),i=M$.test(a),j0=v$.test(a),w0=H==="p",z0=W$.test(a),T0=w0?i:i||j0||Q.inHTML&&z0,p=[];if(a)if(T0||z0){let J0={...Q,inline:!1,inHTML:!0,inAnchor:Q.inAnchor||H==="a"};p=c9(a,J0,U)}else{let J0={...Q,inline:!0,inHTML:U.optimizeForStreaming?!0:Q.inHTML,inAnchor:V||Q.inAnchor||H==="a"};p=d1(a,0,a.length,J0,U)}var V1=void 0;if(f)if(q!==void 0)V1=q+P;else V1=P;return{type:F.htmlBlock,tag:f?Z:$,attrs:E,rawAttrs:Y,children:p,rawText:V1,text:a,verbatim:f,canInterruptParagraph:!0,endPos:X}}function w$($,Z,Y,G){if($[Z]!=="<")return null;if(G.optimizeForStreaming&&Y.inHTML)return null;if(!Y.inline);if(Z+1<$.length){if($[Z+1]==="?"){var J=_$($,Z);if(J&&J.kind==="pi")return i$(J.text||"",J.endPos,{raw:!0})}else if($[Z+1]==="!"){if(Z+3<$.length&&$.slice(Z,Z+4)==="<!--"){if(Y.inline);var X=_$($,Z);if(X&&X.kind==="comment"){var K=X.text||"",Q=!1;if(K==="<!-->")K="",Q=!0;else if(K==="<!--->")K="-",Q=!0;else if(K.startsWith("<!--")&&K.endsWith("-->"))K=K.slice(4,-3);if(Y.inline);return i$(K,X.endPos,{endsWithGreaterThan:Q})}}var V=_$($,Z);if(V&&(V.kind==="declaration"||V.kind==="cdata"))return i$(V.text||"",V.endPos,{raw:!0})}}if(Z+1<$.length){let q9=$[Z+1];if(q9===" "||q9===`
`||q9==="\t"||q9==="\r")return null}var U=$.indexOf(">",Z+1);if(U!==-1){var H=$.slice(Z+1,U),M=H.indexOf(" ")!==-1||H.indexOf("\t")!==-1;if(!M&&(c(H,"http://")||c(H,"https://")))return null;if(!M&&sZ(H))return null}var z=n1($,Z);if(!z&&!Y.inline){var q=$.length,O=I($,Z),_=Z,j=0;while(_<O&&j<3&&($[_]===" "||$[_]==="\t"))j++,_++;if(_>=O||$[_]!=="<")return null;if(_+1<O){var D0=n$($,_+1);if(D0){var J1=D0.tagName,D=p9(J1);if(!D)return null;var W=D0.nextPos,v=!1,A=!1,E="",w=O,S=!1;while(w<q&&!S){var R=!1;while(W<w){var y=$[W];if(A){if(y===E)A=!1,E="";if(y===`
`||y==="\r")v=!0;W++,R=!0}else if(y==='"'||y==="'")A=!0,E=y,W++,R=!0;else if(y===`
`||y==="\r"){v=!0,W++,R=!0;var N=I($,W);if(N===W)break;w=N}else if(y===">"){W++,S=!0;break}else W++,R=!0}if(S)break;if(!R&&W>=w){var B=I($,w+1);if(B<=w)break;w=B}else if(W>=w&&w<q){var B=I($,w+1);if(B<=w)break;w=B}else break}if(!v&&S)return null;if(W>=O&&O<q)W=O;var T=D?"type6":"type7",f=W,x=d$($,k($,O),q),P=$.slice(f,x),g=Z+1<$.length&&$[Z+1]==="/";if(T==="type7"&&P.trim()===""){var h=$.slice(Z,x),L=I(h,0);if(L<h.length)L++;var a=h.slice(0,L);return v9(J1,a,x,{},void 0,g,!1,G,Y)}var i=$.slice(Z,x);return v9(J1,i,x,{},void 0,g,T==="type6",G,Y)}}return null}if(!z)return null;if(U!==-1){var j0=$.slice(Z+1,U);if((c(j0,"http://")||c(j0,"https://"))&&(j0.indexOf(" ")!==-1||j0.indexOf("\t")!==-1))return null}var P0=Z+(z.isClosing?2:1);if(P0<$.length){var w0=$[P0],z0=b(w0);if(z0>=97&&z0<=122||z0>=65&&z0<=90){if(P0+1<$.length&&$[P0+1]===":")return null}}if(z.isClosing){var T0=z.attrs.trim();if(T0.length>0)return null;if(!Y.inline){var q=$.length,O=I($,Z),f=z.endPos,p=f;while(p<O&&($[p]===" "||$[p]==="\t"||$[p]==="\r"))p++;var V1=p>=O||$[p]==="<"&&function(){var qZ=n1($,p);return qZ&&p9(qZ.tagLower)}();if(V1){var x=d$($,k($,O),q),P=$.slice(f,x);if(P.length>0){if(P[0]==="\r"&&P[1]===`
`)P=P.slice(2);else if(P[0]===`
`||P[0]==="\r")P=P.slice(1)}let Q6=z.tagLower||z.tagName.toLowerCase();return v9(z.tagName,P,x,l1(z.whitespaceBeforeAttrs+z.attrs,Q6,z.tagName,G),z.whitespaceBeforeAttrs+z.attrs,!0,!1,G,Y)}}var J0=$.slice(Z,z.endPos);return{type:F.htmlSelfClosing,tag:z.tagName,attrs:{},endPos:z.endPos,isClosingTag:!0,rawText:J0}}var P0=Z+(z.isClosing?2:1);if(P0<$.length){var M0=$[P0];if(M0===" "||M0==="\t"||M0===`
`||M0==="\r")return null}var Q0=z.tagLower,r0=K9(z.tagName);let I0=z.tagName.length>0&&z.tagName[0]>="A"&&z.tagName[0]<="Z";if(z.isSelfClosing||r0&&Q0!=="a"){if(z.hasNewline&&!I0)return null;if(!Y.inHTML&&!Y.inline&&!I0)return null;var k0=z.attrs.replace(/\/\s*$/,""),B1=l1(k0,Q0,z.tagName,G),J0=Y.inline?$.slice(Z,z.endPos):void 0;let _Z={type:F.htmlSelfClosing,tag:z.tagName,attrs:B1,endPos:z.endPos};if(J0!==void 0)_Z.rawText=J0;return _Z}if(Y.inline){var r=z.attrs.replace(/\/\s*$/,""),K0=z.whitespaceBeforeAttrs+r,B0=l1(r,Q0,z.tagName,G),m0={...B0},H0=z.endPos,q0=[];if(!K9(z.tagName)){var e=E6($,z.endPos,Q0);if(e!==null){var l0=$.slice(z.endPos,e[0]);if(l0)if(Y.inHTML&&W$.test(l0)||u9(l0))q0=c9(l0,{...Y,inline:!1,inHTML:!0,inAnchor:Y.inAnchor||Q0==="a"},G);else q0=d1(l0,0,l0.length,{...Y,inline:!0,inHTML:G.optimizeForStreaming?!0:Y.inHTML,inAnchor:Y.inAnchor||Q0==="a"},G);H0=e[1]}}return{type:F.htmlBlock,tag:z.tagName,attrs:m0,rawAttrs:K0,children:q0,verbatim:!1,endPos:H0}}if(!Y.inline){var q=$.length,O=I($,Z),Y0=z.tagLower,$0=w9(Y0),s=!$0&&p9(z.tagName),s0=!1,Z1=Z;while(Z1<z.endPos){if($[Z1]===">"){s0=!0;break}Z1++}var p=z.endPos;while(p<O&&($[p]===" "||$[p]==="\t"))p++;var U1=p>=O||$[p]===`
`||$[p]==="\r"||s&&p<O||!s0;if($0&&s0&&!z.isClosing){var{tagName:F1,endPos:Q1,attrs:N1}=z,F0=Q1;if($[F0]===`
`)F0++;var o0=F0,O1=F0,I1=1,z1=Y0.length+1;while(I1>0){var h0=$.indexOf("<",F0);if(h0===-1){O1=q,F0=q;break}var _1=-1,y1=-1;if($[h0+1]==="/")y1=h0;else if(h0+z1+1<=q&&($[h0+1]===Y0[0]||$[h0+1]===F1[0])){var W1=$.substring(h0+1,h0+z1);if(W1.toLowerCase()===Y0&&($[h0+z1]===" "||$[h0+z1]===">"))_1=h0}if(_1===-1&&y1===-1){F0=h0+1;continue}if(_1!==-1&&(y1===-1||_1<y1))F0=_1+z1+1,I1++;else{var o=y1+2;while(o<q){var G1=$[o];if(G1!==" "&&G1!=="\t"&&G1!==`
`&&G1!=="\r")break;o++}if(o+Y0.length>q)break;var q1=$.substring(o,o+Y0.length);if(q1.toLowerCase()!==Y0){F0=o;continue}o+=Y0.length;while(o<q){var n0=$[o];if(n0!==" "&&n0!=="\t"&&n0!==`
`&&n0!=="\r")break;o++}if(o>=q||$[o]!==">"){F0=o;continue}var Q9=o+1,b1=I($,Q9);O1=b1,F0=b1+1,I1--}}var R1=0;while(F0+R1<q&&$[F0+R1]===`
`)R1++;var z9=$.slice(Z,F0+R1),y9=$.slice(o0,O1),_9=F0+R1;return iZ(z.tagName,z.tagName,N1,y9,z9,_9,$,Y,!1,G)}if(U1||!s0){var T=s?"type6":"type7",f=z.endPos,x=d$($,k($,O),q);if(T==="type6"&&!z.isClosing){let s9=I0?z.tagName:z.tagLower||z.tagName.toLowerCase();var M1="</"+s9,f1="<"+s9,L1=f,T1=1,v0=-1;while(L1<x&&T1>0){var N0=$.indexOf(f1,L1),p0=$.indexOf(M1,L1);while(N0!==-1&&N0<x){var S1=N0+f1.length;if(S1>=q){N0=-1;break}var u0=$[S1];if(u0===" "||u0==="\t"||u0===`
`||u0==="\r"||u0===">")break;N0=$.indexOf(f1,S1)}if(N0===-1||N0>=x)N0=x;if(p0===-1||p0>=x)p0=x;if(N0<p0)T1++,L1=N0+f1.length;else if(p0<x){if(T1--,T1===0){v0=p0;break}L1=p0+M1.length}else break}if(v0!==-1&&v0<x){var f0=v0+M1.length;while(f0<q&&($[f0]===" "||$[f0]==="\t"))f0++;if(f0<q&&$[f0]===">"){var X1=f0+1,y0=X1;while(y0<q&&$[y0]!==`
`)y0++;if(y0<q)y0++;while(y0<q&&($[y0]===" "||$[y0]==="\t"))y0++;if(y0<q&&$[y0]==="<"&&!c($.slice(y0),M1)){var t1=n1($,y0);if(t1)x=X1}}}else if(v0=$.indexOf(M1,f),v0!==-1){var r9=$.slice(f,v0),Z0=I0||u9(r9);if(Z0){var G0=v0+M1.length;while(G0<q&&($[G0]===" "||$[G0]==="\t"))G0++;if(G0<q&&$[G0]===">"){var E1=I($,G0+1);x=E1}}}}var P=$.slice(f,x),v1=z.whitespaceBeforeAttrs+z.attrs,g=z.isClosing;let DZ=()=>{let s9=z.tagLower||z.tagName.toLowerCase(),T9=z.whitespaceBeforeAttrs+z.attrs;return{parsed:l1(T9,s9,z.tagName,G),raw:T9}};if(T==="type7"&&P.trim()===""){var Y1=$.slice(Z,z.endPos),b9=Y1.indexOf(`
`)!==-1;if(b9)return null;var n=z.endPos,L=I($,n);if(L<$.length)L++;var a=$.slice(Z,L);let HZ=DZ();return v9(z.tagName,a,x,HZ.parsed,HZ.raw,g,!1,G,Y)}var S0=z.hasNewline,b0=!s0;if((S0||b0)&&T==="type7"){var U0=z.endPos,u=$.slice(Z,U0),_0=P,i=u+_0;let T9=DZ();return v9(z.tagName,i,x,T9.parsed,T9.raw,g,!1,G,Y)}let jZ=z.tagLower||z.tagName.toLowerCase();var t0=l1(v1,jZ,z.tagName,G),E0={...t0};if(T==="type6"){var X0=P,A1=P.indexOf("</"+jZ);if(A1>=0){var p=A1+2+z.tagName.length;while(p<P.length&&(P[p]===" "||P[p]==="\t"))p++;if(p<P.length&&P[p]===">")X0=P.slice(0,A1)}if(u9(X0))return iZ(z.tagName,z.tagName,v1,X0,$.slice(Z,z.endPos),x,$,Y,!1,G)}var m=P;if(m.length>0){if(m[0]==="\r"&&m[1]===`
`)m=m.slice(2);else if(m[0]===`
`||m[0]==="\r")m=m.slice(1)}var C0=m.split(`
`),R0=1/0;for(var O0=0;O0<C0.length;O0++){var A0=C0[O0];if(A0.trim().length===0)continue;var j=0;while(j<A0.length&&(A0[j]===" "||A0[j]==="\t"))j++;if(j<R0)R0=j}if(R0>0&&R0<1/0){var d0=[];for(var L0=0;L0<C0.length;L0++){var i0=C0[L0];if(i0.trim().length===0)d0.push(i0);else d0.push(i0.slice(R0))}m=d0.join(`
`)}return v9(z.tagName,m,x,E0,v1,g,T==="type6"?!0:!1,G,Y)}}if(Y.inline)return null;var D0=n$($,Z+1);if(!D0)return null;var J1=D0.tagName;if(!K9(J1))return null;let R9=D0.tagLower;var W0=D0.nextPos,g1=$.length;while(W0<g1&&j1($[W0]))W0++;var QZ=W0;while(W0<g1&&$[W0]!==">")W0++;if(W0>=g1)return null;let R$=$.slice(QZ,W0).trim(),L9=W0+1;while(L9<g1&&j1($[L9]))L9++;let K6="</"+R9+">",zZ=$.toLowerCase().indexOf(K6,L9);if(zZ!==-1){if($.slice(L9,zZ).trim())return null}W0++;let V6=W0;while(W0<g1&&j1($[W0]))W0++;if(W0<g1&&$[W0]===`
`)W0++;let U6=l1(R$,J1,J1,G);return{type:F.htmlSelfClosing,tag:J1,attrs:U6,endPos:V6}}function $5($,Z){if($[Z]!=="<")return null;var Y=$.length,G=!1,J=Z+1;if(Z+1<Y&&$[Z+1]==="/")G=!0,J=Z+2;var X=n$($,J);if(!X)return null;var{tagName:K,tagLower:Q,nextPos:V}=X;if(V<Y){var U=$[V];if(U===">"||U==="/"){var H=U===">"?V+1:V+2;if(U==="/"&&(V+1>=Y||$[V+1]!==">"))return null;var M=U==="/",z=p9(K),q=!w9(Q)&&!z;return{kind:"tag",tagNameLower:Q,tagName:K,isClosing:G,isSelfClosing:M,hasNewline:!1,type6Candidate:z,type7Candidate:q,endPos:H,attrs:"",whitespaceBeforeAttrs:""}}}var O=V,_=!1;while(V<Y){var j=$[V],D=b($,V);if(j===" "||j==="\t");else if(D===10||D===13)_=!0;else break;V++}var W=$.slice(O,V),v=V,A=!1,E="",w=0,S=!1,R=!1,y=0;while(v<Y){var N=$[v],D=b($,v);if(y===1){if(N==='"'){if(v+1<Y&&$[v+1]==='"')return null;y=0}v++}else if(y===2){if(N==="'")y=0;v++}else if(N==='"')y=1,v++;else if(N==="'")y=2,v++;else if(N==="{"||N==="}"&&w>0)w+=N==="{"?1:-1,v++;else if(N===">"&&w===0){if(v>V){var B=v-1;while(B>=V){var T=$[B];if(T!==" "&&T!=="\t")break;B--}if(B>=V&&$[B]==="/")S=!0,R=B<v-1}v++;break}else{if(N==="*"||N==="#"||N==="!"){var f=v+1;while(f<Y){var x=$[f];if(x==="="||x===" "||x==="\t"||x===`
`||x==="\r"||x===">")break;f++}if(f<Y&&$[f]==="=")return null}if(D===10||D===13)_=!0;v++}}if(v>Y||$[v-1]!==">")return null;if(y===1||y===2)return null;if(w>0)return null;if(R)return null;var P=v-1;if(S)P--;var g=$.slice(V,P),h=S,L=-1,a=!1,i="",j0=!1;for(var w0=0;w0<g.length;w0++){var j=g[w0];if(a){if(j===i)a=!1,L=w0,i="",j0=!1}else if(j==='"'||j==="'")a=!0,i=j,j0=!1;else if(j==="=")j0=!0;else if(L!==-1&&w0===L+1){var D=j.charCodeAt(0);if(U9(D))return null}else if(j0&&!a&&(j==="*"||j==="#"||j==="!"))return null;else if(j1(j))j0=!1}var z0=p9(K),T0=!w9(Q)&&!z0;return{kind:"tag",tagNameLower:Q,tagName:K,isClosing:G,isSelfClosing:h,hasNewline:_,type6Candidate:z0,type7Candidate:T0,endPos:v,attrs:g,whitespaceBeforeAttrs:W}}function _$($,Z){if(Z>=$.length||$[Z]!=="<")return null;var Y=$.length;if(Z+1>=Y)return null;var G=$[Z+1];if(G==="!"){if(Z+4<=Y&&$.slice(Z,Z+4)==="<!--"){var J=Z+4;if(J<Y&&$[J]===">")return{kind:"comment",hasNewline:!1,endPos:J+1,text:$.slice(Z,J+1),raw:!0};if(J+1<Y&&$[J]==="-"&&$[J+1]===">")return{kind:"comment",hasNewline:!1,endPos:J+2,text:$.slice(Z,J+2),raw:!0};while(J+2<Y){if($.slice(J,J+3)==="-->")return{kind:"comment",hasNewline:!1,endPos:J+3,text:$.slice(Z,J+3),raw:!0};J++}return null}if(Z+9<=Y&&$.slice(Z,Z+9)==="<![CDATA["){var J=Z+9;while(J+2<Y){if($.slice(J,J+3)==="]]>")return{kind:"cdata",hasNewline:!1,endPos:J+3,text:$.slice(Z,J+3),raw:!0};J++}return null}if(Z+2<Y&&U9($.charCodeAt(Z+2))){var J=Z+2;while(J<Y&&$[J]!==">")J++;if(J>=Y)return null;return{kind:"declaration",hasNewline:!1,endPos:J+1,text:$.slice(Z,J+1),raw:!0}}return null}if(G==="?"){var J=Z+2;while(J+1<Y){if($.slice(J,J+2)==="?>")return{kind:"pi",hasNewline:!1,endPos:J+2,text:$.slice(Z,J+2),raw:!0};J++}return null}return $5($,Z)}function c$($,Z){if(Z>=$.length)return!1;var Y=$[Z];return Y==="="||Y==="-"||Y==="_"||Y==="*"||Y==="#"||Y===">"||Y==="`"||Y==="~"||Y==="["||Y>="0"&&Y<="9"}function V$($,Z){if(Z>=$.length)return!1;var Y=$[Z];return Y==='"'||Y==="'"||Y==="("}function Z5($,Z,Y){var G=$.length;if(Z>=G||$[Z]!==Y)return null;Z++;var J=Z,X=!1;while(Z<G&&$[Z]!==Y){var K=$.charCodeAt(Z);if(K===d){if(X)return null;X=!0,Z++}else if(K===V0)if(Z+1<G&&$.charCodeAt(Z+1)===d){if(X)return null;X=!0,Z+=2}else X=!1,Z++;else{if(X=!1,K===m1&&Z+1<G)Z++;Z++}}if(Z>=G)return null;return{value:$.slice(J,Z),endPos:Z+1}}function G5($,Z){var Y=$.length;if(Z>=Y||$[Z]!=="(")return null;Z++;var G=Z,J=1,X=!1;while(Z<Y&&J>0){var K=$.charCodeAt(Z);if(K===d){if(X)return null;X=!0,Z++}else if(K===V0)if(Z+1<Y&&$.charCodeAt(Z+1)===d){if(X)return null;X=!0,Z+=2}else X=!1,Z++;else{if(X=!1,K===m1&&Z+1<Y)Z++;else if(K===bZ)J++;else if(K===RZ)J--;Z++}}if(J!==0)return null;return{value:$.slice(G,Z-1),endPos:Z}}function Y5($,Z){var Y=$.length,G=Z;while(G<Y){var J=G===0||$[G-1]===`
`,X=$.charCodeAt(G);if(X===d&&G>Z){var K=G+1;if(K<Y&&$.charCodeAt(K)===V0)K++;if(K<Y&&$.charCodeAt(K)===d){var Q=K+1;while(Q<Y&&($[Q]===" "||$[Q]==="\t"))Q++;var V=Q-(G+1);if($.charCodeAt(G+1)===V0)V--;if(Q<Y&&$.charCodeAt(Q)!==d&&$.charCodeAt(Q)!==V0&&V<4)return G}}if(J&&c($,"[^",G)){var U=G+2;while(U<Y&&$[U]!=="]")U++;if(U<Y&&$[U]==="]"&&U+1<Y&&$[U+1]===":")return G}G++}return Y}function J5($,Z,Y){let G=$.length,J=Z,X=J<G&&$[J]==="<";if(X)J++;let K=J,Q=K;if(K>=G){if(!X)return null;Q=K}else if(Y>0&&K<G&&$[K]===`
`)return null;else while(Q<G){if(X&&$[Q]===">")break;if($[Q]===`
`){let y=Q+1;if(y>=G)break;if(y<G&&$[y]===`
`)break;let N=y;while(N<G&&($[N]===" "||$[N]==="\t"))N++;if(N<G&&V$($,N))break;if(N<G&&$[N]==="[")break;if(N<G){let B=$[N];if(c$($,N))break;if(B>="a"&&B<="z"){let T=N+1;while(T<G&&T<N+32&&($[T]>="a"&&$[T]<="z"||$[T]>="A"&&$[T]<="Z"||$[T]>="0"&&$[T]<="9"||$[T]==="+"||$[T]==="."||$[T]==="-"))T++;if(T<G&&$[T]===":");else break}}Q=N;continue}if(!X&&($[Q]===" "||$[Q]==="\t")){let y=Q+1;while(y<G&&($[y]===" "||$[y]==="\t"))y++;if(y<G&&V$($,y))break;if(y<G&&$[y]===`
`){let N=y+1;if(N<G&&$[N]===`
`)break;let B=N;while(B<G&&($[B]===" "||$[B]==="\t"))B++;if(B<G&&V$($,B))break}}Q++}if(X&&(Q>=G||$[Q]!==">"))return null;let V=$.slice(K,Q),U=[],H=0;for(let y=0;y<=V.length;y++)if(y===V.length||V[y]===`
`){let N=V.slice(H,y);if(N=N.trim(),N.length>0||U.length===0){if(U.push(N),y<V.length)U.push(`
`)}else if(y<V.length)U.push(`
`);H=y+1}V=U.join(""),V=V.trim(),J=X?Q+1:Q;var M=!1;if(J<G&&$[J]===`
`){var z=J+1,q=z;while(q<G&&($[q]===" "||$[q]==="\t"))q++;if(q<G){let y=$[q];if(c$($,q))M=!0;if(!M&&y!=="="&&y!=="-"){var O=I($,q);if(O<G){var _=k($,O),j=_;while(j<G&&($[j]===" "||$[j]==="\t"))j++;if(j<G){var D=$[j];if(D==="="||D==="-")M=!0}}}}}if(!M&&J<G&&V$($,J))return null;let W=0;while(J<G&&!M){let y=$[J];if(y===`
`){if(W++,W>1)break;J++;var v=J;if(J=g0($,J),J<G&&V9($[J])&&$[J]!==`
`){J=v-1;break}if(J<G){let N=$[J];if(c$($,J)){M=!0,J=v-1;break}}}else if(y===" "||y==="\t")J++;else if(V9(y))break;else break}let A=void 0;if(J<G){let y=$[J];var E=y==="("?G5($,J):y==='"'||y==="'"?Z5($,J,y):null;if(E===null&&(y==='"'||y==="'"||y==="("))return null;if(E){A=E.value,J=E.endPos;var w=J;while(w<G&&($[w]===" "||$[w]==="\t"))w++;if(w<G&&$[w]!==`
`&&$[w]!=="\r")return null;J=w}}if(J=g0($,J),J<G&&$[J]!==`
`){var S=J;while(S<G&&$[S]!==`
`){if($[S]!==" "&&$[S]!=="\t")return null;S++}}if(A===void 0&&J<G&&$[J]!==`
`){var R=J;while(R<G&&$[R]!==`
`){if($[R]!==" "&&$[R]!=="\t")return null;R++}}return{endPos:J<G&&$[J]===`
`?J+1:J,target:V,title:A}}function X5($,Z){let Y=Z,G=Y5($,Z),J=G<$.length&&$[G]===`
`&&$[G+1]===`
`,X=G,K=Z;var Q=[];let V=K,U=0,H=!1;while(V<X){let O=I($,V);if(O>X)O=X;if(U===0){let _=O;while(_>V&&($[_-1]===" "||$[_-1]==="\t"))_--;let j=$.slice(V,_);Q.push(j),H=j.length===0}else{let _=0,j=V;while(j<O&&j<V+4&&$[j]===" ")_++,j++;let D=!1;for(let v=V;v<O;v++)if($[v]!==" "&&$[v]!=="\t"&&$[v]!=="\r"){D=!0;break}let W=!D;if(_>=4&&H)Q.push($.slice(V,O));else if(_===4&&!H)Q.push($.slice(V+4,O));else Q.push($.slice(V,O));H=W}if(O<X){let _=b($,O);if(_===V0||_===d)Q.push(`
`),V=k($,O);else V=X}else V=X;U++}let M=Q.join("");if(J)M=M.replace(/\n$/,"");var z=M.length;while(z>0){var q=M[z-1];if(q===`
`||q===" ")z--;else break}if(z<M.length)M=M.slice(0,z);return{endPos:G,target:M,title:void 0}}function B9($,Z,Y,G,J){if($[Z]!=="[")return null;var X=Z+1<$.length&&$[Z+1]==="^";if(J?!X:X)return null;var K=Z;while(K>0&&$[K-1]!==`
`)K--;if(t($,K,Z).spaceEquivalent>=4||Y.inline)return null;var Q=Z+(J?2:1),V=$.length,U=g6($,Q,V,"]");if(U===-1)return null;var H=$.slice(Q,U);if(H.length>999)return null;var M=!1,z=!1,q=!1;for(var O=0;O<H.length;O++){var _=H[O];if(_==="\\"&&O+1<H.length){O++;continue}var j=b(_);if(j===C1||j===H9)z=!0;else if(j===d||j===V0)q=!0;else if(j!==C&&j!==l)M=!0}if(!M||z)return null;var D=U+1;if(q){var W=b($,Q),v=b($,U-1);if(W===d||W===V0||v===d||v===V0||D>=V||$[D]!==":")return null}else if(D>=V||$[D]!==":"){if(D=g0($,D),D<V&&b($,D)===d)D=g0($,D+1);if(D>=V||$[D]!==":")return null}D++;var A=0;while(D<V){var E=b($,D);if(E===d){if(++A>1)break;D=g0($,D+1)}else if(E===C||E===l)D++;else break}let w=J?X5($,D):J5($,D,A);if(!w)return null;let S=oZ(H),R=Y.refs||{},y=J?`^${S}`:S;if(!R[y])R[y]={target:q$(w.target.trim()),title:w.title?q$(w.title):void 0},Y.refs=R;return{type:J?F.footnote:F.ref,endPos:w.endPos}}function J6($,Z,Y){var G=[],J=Y===null?0:Y+1;while(J<Z.length){var X=Z[J];if(!X||X.type!=="*"&&X.type!=="_"&&X.type!=="~"&&X.type!=="="){J++;continue}if(!X.canClose||!X.active){J++;continue}var K=X.type==="*"?0:X.type==="_"?1:X.type==="~"?2:3,Q=K*6+X.length%3*2+(X.canOpen?1:0),V=G[Q]!==void 0?G[Q]:Y===null?-1:Y,U=-1,H=X.type,M=X.inAnchor,z=X.canOpen,q=X.length,O=q%3;for(var _=J-1;_>V;_--){var j=Z[_];if(!j||!j.active||j.type!==H||!j.canOpen||j.inAnchor!==M)continue;var D=j.length;if(!z&&!j.canClose||O===0||(D+q)%3!==0){U=_;break}}if(U>=0){var W=Z[U],D=W.length,v=D>=2&&q>=2,A=v?2:1;if(A>D||A>q){J++;continue}var E=W.nodeIndex,w=X.nodeIndex,S=E+1,R=w,y=$.slice(S,R);if(y.length>0){var N=R-S;$.splice(S,N);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>S)Z[B].nodeIndex-=N;if(w>S)w-=N}var T=W.type==="~"?"del":W.type==="="?"mark":v?"strong":"em",f={type:F.textFormatted,tag:T,children:y},x=$[E];if(!x||!x.text){W.active=X.active=!1;continue}var P=x.text.length<=A;if(P){$.splice(E,1);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>E)Z[B].nodeIndex--;if(w>E)w--}else x.text=x.text.slice(A);var g=$[w];if(!g||!g.text){W.active=X.active=!1;continue}var h=g.text.length<=A;if(h){$.splice(w,1);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>w)Z[B].nodeIndex--}else g.text=g.text.slice(A);var L=P?E<w?w-1:E:E+1;if(L<0||L>$.length)L=L<0?0:$.length;$.splice(L,0,f);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>=L)Z[B].nodeIndex++;for(var B=U+1;B<J;B++)Z[B].active=!1;if(P)W.active=!1;else if(W.length-=A,W.length===0)W.active=!1;if(h)X.active=!1,J++;else if(X.length-=A,X.length===0)X.active=!1,J++}else{if(G[Q]=J-1,!X.canOpen)X.active=!1;J++}}var a=0;for(var _=0;_<Z.length;_++)if(Z[_].active)Z[a++]=Z[_];Z.length=a}function a9($,Z,Y){var G=[],J=0,X=-3,K=X;if(Z.inline)return d1($,0,$.length,Z,Y);if(J===0&&$.startsWith("---")){var Q=s6($,J);if(Q)G.push(Q),J=Q.endPos}while(J<$.length){while(J<$.length&&$[J]===`
`)J++;if(J>=$.length)break;K=X;let M=$[J],z=i9($,J,Z,Y);if(z){let D=z.type;if(D===F.codeBlock){var V=M==="`"||M==="~";if(!V&&(M===" "||M==="\t")){let W=I($,J),v=t($,J,W);V=v.spaceEquivalent<=3&&J+v.charCount<$.length&&($[J+v.charCount]==="`"||$[J+v.charCount]==="~")}}else if(D===F.breakThematic);else if(D===F.blockQuote);else if(D===F.heading);else if(D===F.orderedList||D===F.unorderedList);else if(D===F.table);else if(D===F.htmlComment);else if(D===F.htmlBlock);else if(D===F.ref);if(z.type===F.htmlComment){G.push(z);let W=J;J=z.endPos;let v=I($,W);if(J<v){let A=$.slice(J,v);if(A.trim().length>0)G.push({type:F.text,text:A});if(J=v,J<$.length&&$[J]===`
`)J++}continue}if(z.type===F.htmlBlock||z.type===F.htmlSelfClosing)if(z.type===F.htmlSelfClosing&&z.isClosingTag===!0&&!Z.inline&&!Z.inHTML);else{G.push(z),J=z.endPos;continue}else{G.push(z),J=z.endPos;continue}}let q=K!==X?K:J;if(K===X){if(j1(M)){let D=I($,J),W=t($,J,D),v=J+W.charCount;if(W.spaceEquivalent<=3&&v<$.length&&$[v]==="[")q=v;else q=-1}else if(M==="[")q=J;else q=-1;K=q}if(q>=0&&q+1<$.length&&$[q+1]==="^")q=-1;if(q>=0){let D=B9($,q,Z,Y,!1);if(D){G.push(D),J=D.endPos;continue}let W=m6($,q,J===0);if(W.shouldSkip){J=W.newPos;continue}}let O=nZ($,J,Z,Y);if(O){G.push(O),J=O.endPos;continue}let _=J;if(j1($[_])){let D=I($,J),W=t($,J,D);_=J+W.charCount}if(_<$.length&&$[_]==="["&&_+1<$.length&&$[_+1]==="^"){let D=B9($,_,Z,Y,!0);if(D){J=D.endPos;continue}}let j=e$($,J,Z,Y);if(j){G.push(j),J=j.endPos;continue}J++}let U=Z.refs||{},H={};for(let M in U)H[M]=U[M];if(G$(H))return[{type:F.refCollection,refs:H},...G];return G}function B$($,Z,Y){var G=0,J=!0;let X=$.length;while(G<X){var K=0;while(G<X&&b($,G)===d)K++,G++;if(G>=X)break;if(K>0)J=!0;let v=b($,G);if(v===e0||v===e1){var Q=KZ($,G,{inline:!1},Y);if(Q){G=Q.endPos,J=!0;continue}}var V=G,U=0;while(V<X&&U<4){let A=b($,V);if(A===C)U++,V++;else if(A===l)U+=4-U%4,V++;else break}if(U<4&&V<X&&b($,V)===C1&&J)if(V+1<X&&b($,V+1)===D9){J=!1;var D=I($,G);G=D>=X?X:k($,D);continue}else{var H=B9($,V,{inline:!1,refs:Z},Y,!1);if(H){G=H.endPos,J=!0;continue}var D=I($,G),M=$.indexOf(":",V+1);if(M===-1||M>=D){var z=t($,G,D);if(!w1($,G,D)&&v!==E9&&v!==k1&&v!==D1&&v!==i1&&z.spaceEquivalent<4)J=!1}G=D>=X?X:k($,D);continue}if(v===k1&&J){var q=G,O=[];while(q<X){var D=I($,q),_=q;while(_<D){let E=b($,_);if(E===C||E===l)_++;else break}if(_>=D||b($,_)!==k1)break;var j=_+1;if(j<D&&(b($,j)===C||b($,j)===l))j++;O.push($.slice(j,D)),q=k($,D)}if(O.length){B$(O.join(`
`),Z,Y),G=q,J=!0;continue}}var D=I($,G);if(D>=X)G=X;else{var W=w1($,G,D),z=t($,G,D);G=k($,D),J=v===E9||v===k1||v===D1||v===i1||W||z.spaceEquivalent>=4}}}function N$($,Z){if($.charCodeAt(0)===65279)$=$.slice(1);$=u1($);let G={...{inline:!1,refs:{}}},J={...Z,slugify:Z?.slugify?(K)=>Z.slugify(K,a0):a0,sanitizer:Z?.sanitizer||P1,tagfilter:Z?.tagfilter!==!1};if(!G.inline)B$($,G.refs||{},J);return a9($,G,J)}var V5=/^\n+/,y$=typeof H1.createContext<"u"?H1.createContext(void 0):void 0;function U5($){let Z=!1;for(let G=0;G<$.length;G++){let J=$.charCodeAt(G);if(J>127||J===m1||J===e0){Z=!0;break}}if(!Z)return $;let Y="";for(let G=0;G<$.length;G++){let J=$[G];if(J==="%"&&G+2<$.length&&/[0-9A-Fa-f]/.test($[G+1])&&/[0-9A-Fa-f]/.test($[G+2]))Y+=$[G]+$[G+1]+$[G+2],G+=2;else if(J.charCodeAt(0)===m1)Y+="%5C";else if(J.charCodeAt(0)===e0)Y+="%60";else{let X=J.charCodeAt(0);Y+=X>127?encodeURIComponent(J):J}}return Y}function Q5($,Z,Y,G,J,X,K,Q){switch($.type){case F.blockQuote:{let U={key:Y.key};if($.alert)U.className="markdown-alert-"+X($.alert.toLowerCase(),a0),$.children.unshift({attrs:{},children:[{type:F.text,text:$.alert}],verbatim:!0,type:F.htmlBlock,tag:"header"});return G("blockquote",U,Z($.children,Y))}case F.breakLine:return G("br",{key:Y.key});case F.breakThematic:return G("hr",{key:Y.key});case F.frontmatter:if(Q.preserveFrontmatter)return G("pre",{key:Y.key},$.text);return null;case F.codeBlock:let V=$.lang?M9($.lang):"";return G("pre",{key:Y.key},G("code",{...t9($.attrs||{}),className:V?`language-${V} lang-${V}`:""},$.text));case F.codeInline:return G("code",{key:Y.key},$.text);case F.footnoteReference:return G("a",{key:Y.key,href:J($.target,"a","href")},G("sup",{key:Y.key},$.text));case F.gfmTask:return G("input",{checked:$.completed,key:Y.key,readOnly:!0,type:"checkbox"});case F.heading:return G(`h${$.level}`,{id:$.id,key:Y.key},Z($.children,Y));case F.htmlBlock:{let U=$;if(Q.tagfilter&&Y$(U.tag)){let H;if("rawText"in U&&typeof U.rawText==="string")H=U.rawText;else{let M="";if(U.attrs){for(let[z,q]of Object.entries(U.attrs))if(q===!0)M+=` ${z}`;else if(q!==void 0&&q!==null&&q!==!1)M+=` ${z}="${String(q)}"`}H=`<${U.tag}${M}>`}return G("span",{key:Y.key},H)}if(U.rawText&&U.verbatim){let D=function(N){if(N.type===F.htmlSelfClosing&&"isClosingTag"in N&&N.isClosingTag)return[];if(N.type===F.paragraph){let B=N.children;return B?B.flatMap(D):[]}if(N.type===F.text)return N.text?.trim()?[N]:[];if(N.type===F.htmlBlock&&N.children)return[{...N,children:N.children?.flatMap(D)}];return[N]},H=U.tag.toLowerCase(),M=w9(H),z=/<[a-z][^>]{0,100}>/i.test(U.rawText),q=/<\/?pre\b/i.test(U.rawText);if(M&&!z){let N=U.rawText.replace(new RegExp("\\s*</"+H+">\\s*$","i"),"");if(Q.tagfilter)N=J$(N);return G($.tag,{key:Y.key,...$.attrs},N)}if(q){let N=Q.tagfilter?J$(U.rawText):U.rawText;return G($.tag,{key:Y.key,...$.attrs,dangerouslySetInnerHTML:{__html:N}})}let O={slugify:(N)=>X(N,a0),sanitizer:J,tagfilter:!0},_=U.rawText.replace(/>\s+</g,"><").replace(/\n+/g," ").trim();if(new RegExp(`^<${U.tag}(\\s[^>]*)?>(\\s*</${U.tag}>)?$`,"i").test(_))return G($.tag,{key:Y.key,...$.attrs});let W=a9(_,{inline:!1,refs:K,inHTML:!1},O),A="</"+U.tag.toLowerCase()+">",E=new RegExp(`^<${U.tag}(\\s|>)`,"i").test(_),w=_.toLowerCase().trimEnd().endsWith(A),S=E&&w,R=!U.attrs||Object.keys(U.attrs).length===0,y=U.children&&U.children.length>0;if(S&&R)return Z(W.flatMap(D),Y);if(S&&y)return G($.tag,{key:Y.key,...$.attrs},Z(U.children,Y));return G($.tag,{key:Y.key,...$.attrs},Z(W.flatMap(D),Y))}return G($.tag,{key:Y.key,...$.attrs},$.children?Z($.children,Y):"")}case F.htmlSelfClosing:{let U=$;if(Q.tagfilter&&Y$(U.tag)){let H;if("rawText"in U&&typeof U.rawText==="string")H=U.rawText;else{let M="";if(U.attrs){for(let[z,q]of Object.entries(U.attrs))if(q===!0)M+=` ${z}`;else if(q!==void 0&&q!==null&&q!==!1)M+=` ${z}="${String(q)}"`}H=`<${U.tag}${M} />`}return G("span",{key:Y.key},H)}return G($.tag,{key:Y.key,...$.attrs})}case F.image:return G("img",{key:Y.key,alt:$.alt&&$.alt.length>0?$.alt:void 0,title:$.title||void 0,src:J($.target,"img","src")});case F.link:{let U={key:Y.key};if($.target!=null)U.href=U5($.target);if($.title)U.title=$.title;return G("a",U,Z($.children,Y))}case F.table:{let U=$;return G("table",{key:Y.key},G("thead",null,G("tr",null,U.header.map(function(M,z){return G("th",{key:z,style:U.align[z]==null?{}:{textAlign:U.align[z]}},Z(M,Y))}))),G("tbody",null,U.cells.map(function(M,z){return G("tr",{key:z},M.map(function(O,_){return G("td",{key:_,style:U.align[_]==null?{}:{textAlign:U.align[_]}},Z(O,Y))}))})))}case F.text:return $.text;case F.textFormatted:return G($.tag,{key:Y.key},Z($.children,Y));case F.orderedList:case F.unorderedList:{let U=$.type===F.orderedList?"ol":"ul";return G(U,{key:Y.key,start:$.type===F.orderedList?$.start:void 0},$.items.map(function(M,z){return G("li",{key:z},Z(M,Y))}))}case F.paragraph:return G("p",{key:Y.key},Z($.children,Y));case F.ref:return null;default:return null}}var z5=($,Z,Y,G,J,X)=>{let K=(U,H,M)=>{let z=()=>Q5(U,H,M,Z,Y,G,J,X);return $?$(z,U,H,M):z()},Q=(U)=>U.map((H)=>("text"in H)?H.text:""),V=(U,H={})=>{let M=(H.renderDepth||0)+1;if(M>2500)return Q(U);H.renderDepth=M;let z=H.key,q=[],O=!1;for(let _=0;_<U.length;_++){H.key=_;let j=K(U[_],V,H),D=typeof j==="string";if(D&&O)q[q.length-1]+=j;else if(j!==null)if(Array.isArray(j))for(let W=0;W<j.length;W++)q.push(j[W]);else q.push(j);O=D}return H.key=z,H.renderDepth=M-1,q};return V},_5=(...$)=>$.filter(Boolean).join(" "),VZ=($,Z,Y)=>{let G=$,J=Z.split("."),X=0;while(X<J.length){if(G=G?.[J[X]],G===void 0)break;X++}return G||Y},q5=($,Z)=>{let Y=VZ(Z,$,void 0);return!Y?$:typeof Y==="function"||typeof Y==="object"&&("render"in Y)?Y:VZ(Z,`${$}.component`,$)};function X6($,Z){let Y={...Z||{}};Y.overrides=Y.overrides||{};let G=Y.slugify||a0,J=Y.sanitizer||P1,X=Y.createElement||H1.createElement,K=(j)=>N9(j,{...Y,wrapper:null});function Q(j,D,...W){let v=VZ(Y.overrides,`${j}.props`,{}),A=t9(D||{});if(K){for(let[E,w]of Object.entries(A))if(typeof w==="string"&&w.length>0&&w[0]==="<"&&(cZ.test(w)||aZ.test(w)||n1(w,0)))A[E]=K(w.trim())}return X(q5(j,Y.overrides),{...A,...v,className:_5(A?.className,v.className)||void 0},...W)}let V=[];for(let j=0;j<$.length;j++){let D=$[j];if(D.type===F.htmlBlock&&"rawText"in D&&D.rawText&&/<\/?pre\b/i.test(D.rawText)&&j+1<$.length&&$[j+1].type===F.paragraph&&"removedClosingTags"in $[j+1]&&$[j+1].removedClosingTags){let A=function(w){let S="";for(let R of w){let y=R.type;if(y===F.text)S+=R.text;else if(y===F.htmlSelfClosing&&"rawText"in R&&R.rawText)S+=R.rawText;else if(y===F.textFormatted){let N=R,B=N.tag==="em"?"_":N.tag==="strong"?"**":"";S+=B+A(N.children)+B}else if("children"in R&&R.children)S+=A(R.children)}return S},W=D,v=$[j+1],E=A(v.children);if(v.removedClosingTags)E+=v.removedClosingTags.filter((w)=>w.type===F.htmlSelfClosing&&("rawText"in w)&&w.rawText&&w.rawText.indexOf(`</${W.tag}>`)===-1).map((w)=>w.type===F.htmlSelfClosing&&("rawText"in w)?w.rawText||"":"").join("");W.rawText=(W.rawText||"")+`
`+E,W.text=W.rawText,j++}V.push(D)}$=V;let U={...Y,slugify:(j)=>G(j,a0),sanitizer:J,tagfilter:Y.tagfilter!==!1},H=$[0]&&$[0].type===F.refCollection?$[0].refs:{},M=z5(Y.renderRule,Q,J,G,H,Y),z=M($,{inline:Y.forceInline,refs:H}),q=[];for(let j in H)if(j.charCodeAt(0)===D9)q.push({identifier:j,footnote:H[j].target});if(q.length)z.push(Q("footer",{key:"footer"},q.map(function(D){let W=D.identifier.charCodeAt(0)===D9?D.identifier.slice(1):D.identifier,v=a9(D.footnote,{inline:!0,refs:H},U);return Q("div",{id:G(W,a0),key:D.identifier},W+": ",M(v,{inline:!0,refs:H}))})));if(Y.wrapper===null)return z;let O=Y.wrapper||(Y.forceInline?"span":"div"),_;if(z.length>1||Y.forceWrapper)_=z;else if(z.length===1)return z[0];else return null;return X(O,{key:"outer",...Y.wrapperProps},_)}function N9($="",Z={}){let Y={...Z||{}};Y.overrides=Y.overrides||{};let G=Y.slugify||a0,J=Y.sanitizer||P1;function X(V){let U=Y.forceInline||!Y.forceBlock&&!f$.test(V),H={...Y,slugify:(q)=>G(q,a0),sanitizer:J,tagfilter:Y.tagfilter!==!1};if(!U)B$(V,K,H);let M=V;if(!U){let q=M.length;while(q>0&&(M[q-1]===`
`||M[q-1]==="\r"))q--;M=M.slice(0,q),M=`${M.replace(V5,"")}

`}if(Y.optimizeForStreaming){let q=M.lastIndexOf("<");if(q!==-1){if(M.slice(q).indexOf(">")===-1)M=M.slice(0,q)}}let z=a9(U?V:M,{inline:U,refs:K},H);return X6(z,{...H,forceInline:U})}let K={};return X($)}var D5=({options:$,children:Z})=>{if(!y$)return Z;return H1.createElement(y$.Provider,{value:$},Z)},b$=({children:$,options:Z,...Y})=>{if(!(typeof H1.useContext<"u")){let V={...Z,overrides:{...Z?.overrides},wrapperProps:{...Z?.wrapperProps,...Y}};return N9($===null||$===void 0?"":$,V)}let J=H1.useContext(y$),X=H1.useMemo(()=>({...J,...Z,overrides:{...J?.overrides,...Z?.overrides},wrapperProps:{...J?.wrapperProps,...Z?.wrapperProps,...Y}}),[J,Z,Y]),K=$===null||$===void 0?"":$;return H1.useMemo(()=>N9(K,X),[K,X])},UZ=b$;var H5={};L$(H5,{slugify:()=>a0,sanitizer:()=>P1,parser:()=>N$,default:()=>UZ,compiler:()=>N9,RuleType:()=>F,Markdown:()=>b$});module.exports=MZ(H5);

//# debugId=FE91FB690A0DC32E64756E2164756E21
//# sourceMappingURL=index.js.map
