var tZ=Object.defineProperty;var eZ=($,Z)=>{for(var J in Z)tZ($,J,{get:Z[J],enumerable:!0,configurable:!0,set:(X)=>Z[J]=()=>X})};import*as I1 from"react";import{Image as n6,Linking as cZ,Text as d0,View as k0}from"react-native";var C=32,l=9,U0=13,d=10,$1=96,e1=126,k1=91,H9=94,m1=62,S9=35,V5=37,j1=45,c1=61,h1=92,E9=42,$9=95,F9=60,x9=64,O9=93,W9=33,P9=38,I9=58,_5=70,a1=102,r1=104,P1=119,s9=116,w$=112,VZ=115,_Z=160,zZ=12;var f9=46,Z9=47;var z5=34,qZ=43,DZ=124,jZ=123;var HZ=40,FZ=41,y$=120,N$=88,J9=48,X9=57,p1=65,u1=90,s1=97,o1=122,U1=128,OZ=32;var $6={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},v=$6;var P$={};eZ(P$,{startsWith:()=>c,slugify:()=>B1,skipWhitespace:()=>g0,shouldFilterTag:()=>Z$,sanitizer:()=>K9,parseFrontmatterBounds:()=>L$,normalizeInput:()=>l1,normalizeCRLF:()=>q6,isVoidElement:()=>U9,isUnicodeWhitespace:()=>Q9,isUnicodePunctuation:()=>e9,isAlnumCode:()=>n9,isASCIIWhitespace:()=>C9,isASCIIPunctuation:()=>V6,inlineCharTypeTable:()=>g9,includes:()=>Y6,htmlAttrsToJSXProps:()=>G6,hasKeys:()=>$$,getTag:()=>D6,getOverrideProps:()=>j6,get:()=>x$,findLineEnd:()=>I,extractPlainText:()=>AZ,endsWith:()=>t9,decodeEntityReferences:()=>o9,charClassTable:()=>v9,applyTagFilterToText:()=>J$,VOID_ELEMENTS:()=>R$,SHOULD_RENDER_AS_BLOCK_R:()=>T$,SANITIZE_R:()=>M9,NAMED_CODES_TO_UNICODE:()=>X6,HTML_TO_JSX_MAP:()=>vZ,HTML_CHAR_CODE_R:()=>MZ,ATTRIBUTES_TO_SANITIZE:()=>S$});import{NAMED_CODES_TO_UNICODE as Z6,decodeEntity as J6}from"#entities";function L$($){if(!c($,"---"))return null;let Z=3;while(Z<$.length&&($[Z]===" "||$[Z]==="\t"))Z++;if(Z<$.length&&$[Z]==="\r")Z++;if(Z>=$.length||$[Z]!==`
`)return null;Z++;let J=!1;while(Z<$.length){let X=Z;while(Z<$.length&&$[Z]!==`
`&&$[Z]!=="\r")Z++;if(Z>=$.length)break;let G=Z;if($[Z]==="\r")Z++;if(Z<$.length&&$[Z]===`
`)Z++;if(c($,"---",X))return{endPos:Z,hasValidYaml:J};let Y=$.indexOf(":",X);if(Y!==-1&&Y<G)J=!0}return null}var X6=Z6,MZ=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,vZ={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"};function G6($){var Z={};for(var J in $){var X=J.toLowerCase(),G=vZ[X];Z[G||J]=$[J]}return Z}var T$=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/;function o9($){if($.indexOf("&")===-1)return $;return $.replace(MZ,(Z,J)=>{var X=J6(J);if(X)return X;if(J[0]==="#"){var G=J[1]==="x"||J[1]==="X"?parseInt(J.slice(2),16):parseInt(J.slice(1),10);if(G===0||G>=55296&&G<=57343||G>1114111)return"�";return G<=65535?String.fromCharCode(G):String.fromCharCode(55296+(G-65536>>10),56320+(G-65536&1023))}return Z})}var M9=/(javascript|vbscript|data(?!:image)):/i;function K9($){if(M9.test($))return null;if($.indexOf("%")===-1)return $;try{let Z=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(M9.test(Z))return null}catch(Z){return null}return $}var r0={},Z1,x0;Z1=[192,193,194,195,196,197,224,225,226,227,228,229,230,198];for(x0=0;x0<Z1.length;x0++)r0[Z1[x0]]="a";r0[231]=r0[199]="c";r0[240]=r0[208]="d";Z1=[200,201,202,203,233,232,234,235];for(x0=0;x0<Z1.length;x0++)r0[Z1[x0]]="e";Z1=[207,239,206,238,205,237,204,236];for(x0=0;x0<Z1.length;x0++)r0[Z1[x0]]="i";r0[209]=r0[241]="n";Z1=[248,216,339,338,213,245,212,244,211,243,210,242];for(x0=0;x0<Z1.length;x0++)r0[Z1[x0]]="o";Z1=[220,252,219,251,218,250,217,249];for(x0=0;x0<Z1.length;x0++)r0[Z1[x0]]="u";r0[376]=r0[255]=r0[221]=r0[253]="y";function n9($){return $>=J9&&$<=X9||$>=p1&&$<=u1||$>=s1&&$<=o1}function B1($){var Z=[];for(var J=0;J<$.length;J++){var X=$.charCodeAt(J);if(n9(X))if(X>=p1&&X<=u1)Z.push(String.fromCharCode(X+OZ));else Z.push($[J]);else if(X===C||X===j1)Z.push("-");else{var G=r0[X];if(G)Z.push(G)}}return Z.join("")}function Y6($,Z){return $.indexOf(Z)!==-1}function c($,Z,J){return $.startsWith(Z,J)}function t9($,Z,J){return $.startsWith(Z,(J===void 0?$.length:J)-Z.length)}var R$=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","animateTransform","set"]);function U9($){let Z=$.toLowerCase();if(R$.has(Z))return!0;let J=Z.indexOf(":");if(J!==-1)return Z=Z.slice(J+1),R$.has(Z);return!1}var S$=["src","href","data","formAction","srcDoc","action"],E$=1,Y9=2,WZ=1,K6=2,U6=3,Q6=4,v9=function(){let $=new Uint8Array(128),Z;$[l]=$[d]=$[zZ]=$[U0]=$[C]=E$;for(Z=W9;Z<=Z9;Z++)$[Z]=Y9;for(Z=I9;Z<=x9;Z++)$[Z]=Y9;for(Z=k1;Z<=$1;Z++)$[Z]=Y9;for(Z=jZ;Z<=e1;Z++)$[Z]=Y9;return $}(),g9=function(){let $=new Uint8Array(128);return $[h1]=K6,$[k1]=Q6,$[E9]=$[$9]=$[e1]=$[c1]=U6,$[$1]=$[F9]=$[x9]=$[O9]=$[d]=$[C]=$[W9]=WZ,$[a1]=$[r1]=$[P1]=WZ,$}();function V6($){return $<U1&&(v9[$]&Y9)!==0}function C9($){return $<U1&&(v9[$]&E$)!==0}var _6=/[\p{P}\p{S}]/u,z6=/\p{Zs}/u;function Q9($){if(!$)return!0;let Z=$.charCodeAt(0);return Z<U1?(v9[Z]&E$)!==0:z6.test($)}function e9($){if(typeof $==="number")return $<U1&&(v9[$]&Y9)!==0;if(!$)return!1;let Z=$.charCodeAt(0);return Z<U1?(v9[Z]&Y9)!==0:_6.test($)}function I($,Z){let J=$.indexOf(`
`,Z);if(J===-1)return $.length;if(J>0&&$.charCodeAt(J-1)===U0)return J-1;return J}var G9=[];function l1($){var Z=$.indexOf("\r"),J=$.indexOf("\x00");if(Z===-1&&J===-1)return $;var X=$.length;G9.length=0;var G=0,Y=0;if(Z===-1)Y=J;else if(J===-1)Y=Z;else Y=Z<J?Z:J;for(;Y<X;Y++){var K=$.charCodeAt(Y);if(K===U0){if(G<Y)G9.push($.slice(G,Y));if(Y+1<X&&$.charCodeAt(Y+1)===d)Y++;G9.push(`
`),G=Y+1}else if(K===0){if(G<Y)G9.push($.slice(G,Y));G9.push("�"),G=Y+1}}if(G<X)G9.push($.slice(G));return G9.join("")}function q6($){return l1($)}function g0($,Z,J){let X=J??$.length;while(Z<X&&($[Z]===" "||$[Z]==="\t"))Z++;return Z}function $$($){if(!$)return!1;for(var Z in $)return!0;return!1}function x$($,Z,J){var X=$,G=Z.split("."),Y=0;while(Y<G.length){if(X=X?.[G[Y]],X===void 0)break;Y++}return X||J}function D6($,Z){if(!Z)return $;let J=x$(Z,$,void 0);if(typeof J==="string")return J;if(typeof J==="object"&&J.component)return J.component;return $}function j6($,Z){if(!Z)return{};let J=x$(Z,$,void 0);return typeof J==="object"&&J.props?J.props:{}}function AZ($,Z){var J="";for(var X=0,G=$.length;X<G;X++){var Y=$[X],K=Y.type;if(K===Z.text||K===Z.codeInline){var V=Y.text;if(V)J+=V}else if(K===Z.textFormatted||K===Z.link){if(Y.children)J+=AZ(Y.children,Z)}else if(K===Z.image){if(Y.alt)J+=Y.alt}}return J}function Z$($){var Z=$.toLowerCase();return Z==="title"||Z==="textarea"||Z==="style"||Z==="xmp"||Z==="iframe"||Z==="noembed"||Z==="noframes"||Z==="script"||Z==="plaintext"}function J$($){return $.replace(/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi,function(Z,J,X,G){return"&lt;"+J+X+G})}function H6($){console.warn($)}function B9($,Z,J,X){var G=N(J),Y=$.length,K=X??Y-Z,V=0;while(V<K&&Z+V<Y&&N($,Z+V)===G)V++;return V}function BZ($,Z,J,X,G){if(G===0?J>=X:Z<=X)return!1;let Y=G===0?$[J]:$[Z-1],K=G===0?Z>0?$[Z-1]:null:J<$.length?$[J]:null;var V=N(Y);if(V<U1?C9(V):Q9(Y))return!1;var U=K?N(K):null,Q=K===null||K===`
`||K==="\r"||(U!==null?U<U1?C9(U):Q9(K):!0),H=D$(V,Y);if(!H)return!0;if(Q)return!0;return K?D$(N(K),K):!1}function _$($){var Z="",J=0;while(J<$.length)if($[J]==="\\"&&J+1<$.length){var X=$[J+1];Z+=e9(N(X))?X:"\\"+X,J+=2}else Z+=$[J++];return o9(Z)}function k($,Z){if(Z>=$.length)return Z;if($.charCodeAt(Z)===U0&&Z+1<$.length&&$.charCodeAt(Z+1)===d)return Z+2;if($.charCodeAt(Z)===d)return Z+1;return Z+1}function F6($,Z){if($>=U1)return 0;var J=g9[$];if(Z&&J===1&&($===a1||$===r1||$===P1))return 0;return J}function O6($,Z,J,X,G,Y){if(!J.length||J[J.length-1].type!==v.blockQuote)return null;let K=g0(X,0,X.length);if(K>=X.length||X[K]!==">")return null;let V=mZ($,Z,G,Y);if(!V)return null;let U=J[J.length-1],Q=V;if(Q.children)U.children.push(...Q.children);return Q.endPos}function z$($,Z,J,X){return{type:v.heading,level:$,children:Z,id:X(J)}}var p$=/\\(.)/g,W6=/\s+#+\s*$/,n$=/^(?:(\d{1,9})([.)])\s+(.*)$|(\d{1,9})([.)])\s*$|([-*+])\s+(.*)$|([-*+])\s*$)/,u$=/^(\d{1,9})([.)])(\s+|$)/,l$=/^([*+\-])(\s+|$)/,F$=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/i,H5=/^<([a-z][^ >/]*) ?(?:[^>/]+[^/]|)>/i,N=function($,Z=0){return $.charCodeAt(Z)},q$=function($){return n9(N($))},d$=function($){return C9(N($))},H1=function($){return $===" "||$==="\t"},k9=function($){return $===" "||$==="\t"||$===`
`||$==="\r"},D$=function($,Z){return e9($<U1?$:Z)},M6=function($){var Z=N($);return q$($)||Z===j1||Z===$9||Z===I9||Z===f9};function i$($,Z){var J=$.length;if(Z>=J)return null;var X=N($[Z]);if(!V9(X))return null;var G=Z,Y=Z;while(Y<J){var K=N($[Y]);if(K>=s1&&K<=o1||K>=p1&&K<=u1||K>=J9&&K<=X9||K===j1)Y++;else{var V=N($[Y]);if(V===C||V===l||V===d||V===U0||V===m1||V===Z9)break;else return null}}if(Y===G)return null;var U=$.slice(G,Y);for(var Q=0;Q<U.length;Q++){var K=N(U[Q]);if(!(K>=s1&&K<=o1||K>=p1&&K<=u1||K>=J9&&K<=X9||K===j1))return null}return{tagName:U,tagLower:U.toLowerCase(),nextPos:Y}}function w9($,Z){var J=V$($,Z);if(!J||J.kind!=="tag")return null;return{tagName:J.tagName||"",tagLower:J.tagNameLower||"",attrs:J.attrs||"",endPos:J.endPos,isClosing:J.isClosing||!1,isSelfClosing:J.isSelfClosing||!1,hasNewline:J.hasNewline,hasSpaceBeforeSlash:!1,whitespaceBeforeAttrs:J.whitespaceBeforeAttrs||""}}function v6($,Z,J){var X=1,G=Z;while(X>0&&G<$.length){var Y=$.indexOf("<",G);if(Y===-1)return null;var K=w9($,Y);if(!K){G=Y+1;continue}if(K.isClosing&&K.tagLower===J&&--X===0)return[Y,K.endPos];if(!K.isClosing&&!K.isSelfClosing&&K.tagLower===J)X++;G=K.endPos}return null}var A6=/^\{.*\}$/,O$=/\n\n/,W$=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m,B6=/<\/?(?:pre|script|style|textarea)\b/i,F5=/^<[A-Z]/,w6=/\n$/,y6=new Set(["#",">","-","*","+","`","|","0","1","2","3","4","5","6","7","8","9"]);function N6($,Z,J,X){let G=Z;while(G<J){if($[G]==="\\"&&G+1<J){G+=2;continue}if($[G]===X)return G;G++}return-1}function wZ($,Z){var J=Z.indexOf(":");if(J>0){var X=Z.slice(J+1).trim(),G=X.length;if(G>=2){var Y=X[0];if((Y==='"'||Y==="'")&&X[G-1]===Y)X=X.slice(1,-1)}$.push([Z.slice(0,J).trim(),X])}}function b6($){var Z=[];if(!$)return Z;var J="",X=0,G="";for(var Y=0;Y<$.length;Y++){var K=$[Y];if(K==='"'||K==="'"){if(!G)G=K,X++;else if(K===G)G="",X--}else if(K==="("&&t9(J,"url"))X++;else if(K===")"&&X>0)X--;else if(K===";"&&X===0){wZ(Z,J),J="";continue}J+=K}return wZ(Z,J),Z}function R6(tag,key,value,sanitizeUrlFn,options){if(key==="style")return b6(value).reduce(function($,[Z,J]){let X=sanitizeUrlFn(J,tag,Z);if(X!=null)$[Z.replace(/(-[a-z])/g,(G)=>G[1].toUpperCase())]=X;return $},{});if(value.match(A6)){if(value=value.slice(1,value.length-1),value=value?value.replace(p$,"$1"):value,value.length>0){let $=value[0];if($==="["||$==="{")try{return JSON.parse(value)}catch(Z){return value}}if(value==="true")return!0;if(value==="false")return!1;if(options.evalUnserializableExpressions)try{return eval(`(${value})`)}catch($){return value}return value}if(S$.indexOf(key)!==-1)return sanitizeUrlFn(value?value.replace(p$,"$1"):value,tag,key);return value==="true"?!0:value==="false"?!1:value}function d1($,Z,J,X){let G={};if(!$||!$.trim())return G;let Y=[],K=0,V=$.length;while(K<V){while(K<V&&k9($[K]))K++;if(K>=V)break;let H=K;while(K<V&&M6($[K]))K++;if(K===H){K++;continue}let W=$.slice(H,K);while(K<V&&k9($[K]))K++;if(K>=V||$[K]!=="="){Y.push(W);continue}K++;while(K<V&&k9($[K]))K++;if(K>=V){Y.push(W+"=");break}let _=K,D=$[K];if(D==='"'||D==="'"){K++;while(K<V){if($[K]===D){if(K+1>=V){K++;break}let F=$[K+1];if(k9(F)||F==="/"){K++;break}}K++}}else if(D==="{"){let F=1;K++;while(K<V&&F>0){if($[K]==="{")F++;else if($[K]==="}"){if(F--,F===0){K++;break}}K++}}else while(K<V&&!k9($[K]))K++;Y.push(W+"="+$.slice(_,K))}if(!Y?.length)return G;let U=Z.toLowerCase();for(let H=0;H<Y.length;H++){let W=Y[H],_=W.indexOf("=");if(_!==-1){let D=W.slice(0,_).trim(),F=D.toLowerCase();if(F==="ref")continue;let z=W.slice(_+1).trim(),j=((q)=>{let M=q[0];if((M==='"'||M==="'")&&q.length>=2&&q[q.length-1]===M)return q.slice(1,-1);return q})(z);if(F==="href"&&U==="a"||F==="src"&&U==="img"){let q=X.sanitizer(j,U,F);if(q==null){H6(`Stripped unsafe ${F} on <${J}>`);continue}G[D]=q}else{let q=R6(U,F,j,X.sanitizer,X);G[D]=q}}else if(W!=="style")G[W]=!0}if($.indexOf("%")!==-1)try{if(M9.test(decodeURIComponent($)))for(var Q in G)delete G[Q]}catch(H){}else if(M9.test($))for(var Q in G)delete G[Q];return G}var u9=function($){return y6.has($)};function L6($,Z,J){let X=Z+1;while(X<$.length&&$[X]!=="]"){if($[X]==="\\"&&X+1<$.length){X+=2;continue}X++}if(X>=$.length)return{shouldSkip:!1,newPos:0};let G=Z+1,Y=X,K=G<Y&&($[G]===`
`||$[G]==="\r"),V=Y>G&&($[Y-1]===`
`||$[Y-1]==="\r"),U=X+1;if(U=g0($,U),U>=$.length||$[U]!==":")return{shouldSkip:!1,newPos:0};if((K||V)&&J){let Q=U+1;if(Q=g0($,Q),Q<$.length&&$[Q]===`
`)Q=g0($,Q+1);while(Q<$.length&&$[Q]!==`
`)Q++;if(Q<$.length)Q++;return{shouldSkip:!0,newPos:Q}}return T6($,U)}function T6($,Z){let J=Z+1;if(J=g0($,J),J<$.length&&$[J]===`
`)J=g0($,J+1);while(J<$.length&&$[J]!==`
`)J++;if(J>=$.length)return{shouldSkip:!1,newPos:0};J++;let X=g0($,J);if(X>=$.length||$[X]!=='"'&&$[X]!=="'")return{shouldSkip:!1,newPos:0};let G=$[X],Y=X+1;while(Y<$.length&&$[Y]!==G&&$[Y]!==`
`){if($[Y]==="\\"&&Y+1<$.length){Y+=2;continue}Y++}if(Y>=$.length||$[Y]!==G)return{shouldSkip:!1,newPos:0};let K=g0($,Y+1);if(K<$.length&&$[K]!==`
`&&$[K]!=="\r")return{shouldSkip:!0,newPos:J};return{shouldSkip:!1,newPos:0}}function fZ($){for(var Z=0;Z<$.length;Z++){var J=$[Z];if(J.type===v.link)return!0;if(J.type===v.textFormatted){var X=J;if(X.children&&fZ(X.children))return!0}}return!1}function c$($){var Z="";for(var J=0,X=$.length;J<X;J++){var G=$[J],Y=G.type;if(Y===v.text)Z+=G.text;else if(Y===v.image){var K=G;if(K.alt)Z+=K.alt}else if(Y===v.textFormatted){var V=G;if(V.children)Z+=c$(V.children)}else if(Y===v.link){var U=G;if(U.children)Z+=c$(U.children)}}return Z}var S6=new Set([" ","\t","\r",`
`,"\f","\v"]);function i1($,Z,J,X,G){var Y=[],K=[],V=[],U=Z,Q=Z,H=G.disableAutoLink||X.inAnchor,W=!1,_=!!X.inAnchor,D=!!G.disableParsingRawHTML,F=G.optimizeForStreaming,z=-1,j=-1,q=[],M=function(f0,K1){if(F&&X.inHTML)return!1;if(!_&&(!K1||!G.disableAutoLink)){var N0=f$($,U,X,G,"<");if(N0)return O(U),Y.push(N0),U=N0.endPos,Q=U,!0}if(D)return!1;var t1=v$($,U,X,G);if(t1){O(U);var a9=Y.length;if(Y.push(t1),q)q.push(a9);return U=t1.endPos,Q=U,!0}if(F&&j===-1){if(U+1<J){var Z0=N($,U+1);if(Z0>=p1&&Z0<=u1||Z0>=s1&&Z0<=o1||Z0===Z9||Z0===W9)j=U}}if(!f0)return!1;var J0=w9($,U);if(!J0)return!1;var x1=U+(J0.isClosing?2:1);if(x1>=$.length||H1($[x1]))return!1;var v1=$.indexOf(">",U+1);if(v1!==-1){var G1=U+1,b9=v1-G1;if(b9>=7){var n=c($,"http://",G1);if(n||c($,"https://",G1)){for(var S0=G1;S0<v1;S0++)if(H1($[S0]))return!1}}}var b0=N($,x1);if(V9(b0)&&x1+1<$.length&&$[x1+1]===":")return!1;if(J0.isClosing&&J0.attrs.trim().length)return!1;if(J0.attrs.length){var Q0=!1,u="";for(var z0=0;z0<J0.attrs.length;z0++){var e0=J0.attrs[z0];if(Q0&&e0===u)Q0=!1;else if(!Q0&&(e0==='"'||e0==="'"))Q0=!0,u=e0;else if(e0==="*"||e0==="#"||e0==="!"){var E0=z0+1;while(E0<J0.attrs.length&&J0.attrs[E0]!=="="&&J0.attrs[E0]!==" "&&J0.attrs[E0]!=="\t")E0++;if(E0<J0.attrs.length&&J0.attrs[E0]==="=")return!1}}}var Y0=$.slice(U,J0.endPos),A1=J0.tagName.toLowerCase(),m=Y0,C0=m.indexOf(">");if(C0!==-1){m=m.slice(C0+1);var R0="</"+A1+">",O0=m.indexOf(R0);if(O0!==-1)m=m.slice(0,O0)}var A0=[];if(m.trim()&&G){var c0={...X,inline:!1,inHTML:!0},L0=m.trim();if(O$.test(L0)||W$.test(L0)||F$.test(L0))A0=i9(L0,c0,G);else if(L0)c0.inline=!0,A0=i1(L0,0,L0.length,c0,G)}var a0=J0.whitespaceBeforeAttrs+J0.attrs,D0=d1(a0,A1,J0.tagName,G),Y1={type:v.htmlBlock,tag:J0.tagName,attrs:D0,children:A0,rawText:Y0,text:m,verbatim:!0,endPos:J0.endPos};return O(U),Y.push(Y1),U=Y1.endPos,Q=U,!0},O=function(f0){if(f0>Q){var K1=$.slice(Q,f0);Y.push({type:v.text,text:W?o9(K1):K1}),Q=f0,W=!1}};while(U<J){var A=N($,U),E=F6(A,H);if(E===0){if(A===P9)W=!0;U++;while(U<J){if(A=N($,U),A>=U1)break;if(A===P9)W=!0;var w=g9[A];if(w!==0){if(H&&w===1&&(A===a1||A===r1||A===P1)){U++;continue}break}U++}continue}if(A===$1){var x=U,T=0;while(U+T<J){if(N($,U+T)!==$1)break;T++}if(T>0){var y=U+T,b=-1,B=y;while(B<J){while(B<J&&N($,B)!==$1)B++;if(B>=J)break;var L=0;while(B+L<J&&N($,B+L)===$1)L++;if(L>T)L=T;var f=B+L;if(L===T&&(B<=y||N($,B-1)!==$1)&&(f>=J||N($,f)!==$1)){b=B,B=f;break}B++}if(b!==-1){var S=$.slice(y,b),P=!1;for(var g=0;g<S.length;g++){var h=N(S,g);if(h===d||h===U0){P=!0;break}}var R=S;if(P)R=S.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ");if(R.length>0){var a=N(R,0),i=N(R,R.length-1);if(a===C&&i===C){for(var j0=1;j0<R.length-1;j0++)if(N(R,j0)!==C){R=R.slice(1,R.length-1);break}}}O(x),Y.push({type:v.codeInline,text:R}),U=B,Q=U;continue}if(F&&z===-1){z=x,O(x),J=x;break}U=y;continue}}if(!_&&!H&&(A===a1||A===r1||A===P1)){var B0=null,_0=U+1<J?N($,U+1):0,T0=U+2<J?N($,U+2):0,p=U+3<J?N($,U+3):0,Q1=U+4<J?N($,U+4):0,G0=U+5<J?N($,U+5):0;if(A===r1&&_0===s9&&T0===s9&&p===w$)B0="h";else if(A===P1&&_0===P1&&T0===P1&&p===f9)B0="w";else if(A===a1&&_0===s9&&T0===w$&&p===I9&&Q1===Z9&&G0===Z9)B0="f";if(B0){var P0=f$($,U,X,G,B0);if(P0){O(U),Y.push(P0),U=P0.endPos,Q=U;continue}}}if(!_&&!H&&A===x9){var M0=f$($,U,X,G,"@");if(M0&&"emailStart"in M0){var{emailStart:V0,endPos:s0}=M0,I0=[];for(var f=K.length-1;f>=0;f--){var m0=K[f];if(m0.sourcePos>=V0&&m0.sourcePos<s0){if(m0.nodeIndex>=0&&m0.nodeIndex<Y.length)Y.splice(m0.nodeIndex,1),I0.push(m0.nodeIndex);K.splice(f,1)}}if(V0<Q){for(var B=Y.length-1;B>=0;B--)if(Y[B].type===v.text){Y.splice(B,1),I0.push(B);break}Q=V0}if(I0.length){I0.sort(function(f0,K1){return f0-K1});var y1=0;for(var r=0;r<K.length;r++){var m0=K[r];while(y1<I0.length&&I0[y1]<m0.nodeIndex)y1++;m0.nodeIndex-=y1}}O(V0),Y.push(M0),U=s0,Q=U;continue}}if(A===F9){if(M(!0,!1))continue}if(A===h1){if(U+1<J&&N($,U+1)===d){var K0=U+2;while(K0<J&&N($,K0)===C)K0++;if(K0>=J){U++;continue}O(U),Y.push({type:v.breakLine}),U+=2;while(U<J&&N($,U)===C)U++;Q=U;continue}var w0=U+1<J?$[U+1]:"";if(w0&&"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~".indexOf(w0)!==-1){O(U),Y.push({type:v.text,text:w0==="&"?"&​":w0}),U+=2,Q=U;continue}}if(A===k1){if(!_){if(U+1<J&&$[U+1]==="^"){var h0=U+2;while(h0<J&&$[h0]!=="]")h0++;if(h0<J){var H0=$.slice(U+2,h0);O(U),Y.push({type:v.footnoteReference,target:`#${G.slugify(H0)}`,text:H0}),U=h0+1,Q=U;continue}}if(X.inList&&U+2<J&&N($,U+2)===O9){var q0=N($,U+1);if(q0===C||q0===y$||q0===N$){O(U),Y.push({type:v.gfmTask,completed:q0===y$||q0===N$}),U+=3,Q=U;continue}}}var e=!1;if(U>Z&&$[U-1]==="!"){var i0=0;for(var X0=U-2;X0>=Z&&$[X0]==="\\";X0--)i0++;if((i0&1)===0){if(e=!0,Q<U-1)O(U-1);if(Y.length>0&&Y[Y.length-1].type===v.text){var $0=Y[Y.length-1];if($0.text.endsWith("!")){if($0.text=$0.text.slice(0,-1),!$0.text)Y.pop()}}}}if(!e)O(U);if(Q=U+1,!_||e)V.push({type:e?"image":"link",pos:e?U-1:U,resultIdx:Y.length,inAnchor:_});U++;continue}if(A===O9&&V.length>0){var s=V[V.length-1],o0=s.pos+(s.type==="image"?2:1),J1=U;O(U);var V1=U+1,F1=t$(Y,s),_1=s.type==="link"&&fZ(F1),N1=!1;if(!_1&&V1<J&&$[V1]==="("){var F0=I6($,V1+1,!0);if(F0){yZ(Y,K,V,s,o0,J1,G.sanitizer(_$(F0.target),"a","href"),F0.title?_$(F0.title):void 0),U=F0.endPos,Q=U;continue}}var n0=X.refs||{};$$(n0);var O1=null,f1=U;if(V1<J&&$[V1]==="["){var z1=V1+1,B=z1;while(B<J&&$[B]!=="]")B++;if(B<J)O1=$.slice(z1,B),f1=B,N1=!0}if(!N1||O1==="")O1=$.slice(o0,J1);var p0=CZ(O1);if(!_1&&n0&&n0[p0]){var q1=n0[p0];yZ(Y,K,V,s,o0,J1,q1.target,q1.title),U=f1+1,Q=U;continue}var b1=s.resultIdx;if(V.pop(),Y.length=b1,F){if(Y.push(...F1),V1<J&&$[V1]==="(")return Y}else{if(s.type==="image")Y.push({type:v.text,text:"!"});Y.push({type:v.text,text:"["},...F1,{type:v.text,text:"]"})}for(var g=0;g<K.length;g++)if(K[g].nodeIndex>=b1)K[g].nodeIndex++;U++,Q=U;continue}if(A===E9||A===$9||A===e1||A===c1){var W1=$[U],o=U,X1=B9($,U,W1);if((W1==="~"||W1==="=")&&X1!==2){U++;continue}var D1=o+X1,t0=BZ($,o,D1,J,0),z9=BZ($,o,D1,Z,1),R1=t0,L1=z9;if(W1==="_"&&t0&&z9){if(o>0){var q9=$[o-1],N9=N(q9);R1=D$(N9,q9)}if(D1<J){var D9=$[D1],M1=N(D9);L1=D$(M1,D9)}}O(o),K.push({nodeIndex:Y.length,type:W1,length:X1,canOpen:R1,canClose:L1,active:!0,sourcePos:o,inAnchor:_}),Y.push({type:v.text,text:$.slice(o,o+X1)}),U=o+X1,Q=U;continue}if(A===d){var X0=U-1,g1=0;while(X0>=Q&&N($,X0)===C)g1++,X0--;if(g1>=2){var K0=U+1;while(K0<J&&N($,K0)===C)K0++;if(K0>=J){O(X0+1),U=J,Q=J;continue}O(X0+1),Y.push({type:v.breakLine}),U++;while(U<J&&N($,U)===C)U++;Q=U;continue}var T1=U>Q?N($,U-1):0,q0=U+1<J?N($,U+1):0,S1=U>Q&&T1===C&&q0===C?U-1:U;if(O(S1),Y.push({type:v.text,text:`
`}),Q=U+1,U>Z&&T1===C&&Q<J&&N($,Q)===C)Q++;U=Q;continue}if(A===P9)W=!0;U++;while(U<J){var A=N($,U);if(A>=U1)break;if(A===P9)W=!0;var w=g9[A];if(w===0){U++;continue}if(w===1&&(A===a1||A===r1||A===P1)&&H){U++;continue}break}}if(O(U),K.length)iZ(Y,K,null);if(F){var v0=Y.length;for(var y0=q.length-1;y0>=0;y0--){var u0=q[y0];if(u0<Y.length&&Y[u0].type===v.htmlBlock){var E1=Y[u0];if(!U9(E1.tag)&&(!E1.children||E1.children.length===0)){if(Y.splice(u0,1),u0<v0)v0--;for(var g=0;g<K.length;g++)if(K[g].nodeIndex>u0)K[g].nodeIndex--;for(var g=y0+1;g<q.length;g++)if(q[g]>u0)q[g]--}}}if(z!==-1&&z<v0){for(var l0=Y.length-1;l0>=0;l0--)if(Y[l0].type===v.text){v0=l0;break}}if(j!==-1&&j<v0){for(var l0=Y.length-1;l0>=0;l0--)if(Y[l0].type===v.text){v0=l0;break}}for(var B=K.length-1;B>=0;B--)if(K[B].active&&K[B].nodeIndex<v0){if(Y.splice(K[B].nodeIndex,1),K[B].nodeIndex<v0)v0--;for(var f=0;f<B;f++)if(K[f].nodeIndex>K[B].nodeIndex)K[f].nodeIndex--}if(v0<Y.length)Y.length=v0;return Y}if(V.length){V.sort(function(f0,K1){return f0.resultIdx-K1.resultIdx});for(var B=0;B<V.length;B++)Y.splice(V[B].resultIdx+B,0,{type:v.text,text:V[B].type==="image"?"![":"["})}return Y}function E6($,Z,J,X,G){var Y=!1;for(var K=0;K<Z.length;K++)if(Z[K].sourcePos>=X&&Z[K].sourcePos<G){Y=!0;break}if(!Y)return;var V=t$($,J),U=[];for(var K=0;K<Z.length;K++){var Q=Z[K];if(Q.sourcePos>=X&&Q.sourcePos<G)U.push({nodeIndex:Q.nodeIndex-J.resultIdx,type:Q.type,length:Q.length,canOpen:Q.canOpen,canClose:Q.canClose,active:Q.active,sourcePos:Q.sourcePos,inAnchor:Q.inAnchor})}iZ(V,U,null),$.length=J.resultIdx;for(var H=0;H<V.length;H++)$.push(V[H]);var W=[];for(var K=0;K<Z.length;K++)if(Z[K].sourcePos<X||Z[K].sourcePos>=G)W.push(Z[K]);Z.length=0;for(var H=0;H<W.length;H++)Z.push(W[H])}function x6($,Z,J,X){if($.type==="link")return{type:v.link,target:J,title:X,children:Z};return{type:v.image,target:J||"",alt:c$(Z),title:X}}function t$($,Z){return $.slice(Z.resultIdx)}function yZ($,Z,J,X,G,Y,K,V){E6($,Z,X,G,Y);var U=t$($,X);J.pop(),$.length=X.resultIdx,$.push(x6(X,U,K,V))}function P6($,Z,J){let X=g0($,Z),G=X<$.length&&$[X]==="<";if(G)X++;let Y=X;if(G&&X<$.length&&$[X]===">")return{target:"",endPos:X+1,hadSpace:!1};let K,V;var U=!1;if(G){V=X;while(V<$.length&&$[V]!==">"){let W=$[V];if(W===`
`||W==="\r"||W==="<")return null;if(W==="\\"){V+=2;continue}V++}if(V>=$.length||$[V]!==">")return null;V++;let Q=Y;while(Q<V-1&&H1($[Q]))Q++;let H=V-1;while(H>Q&&H1($[H-1]))H--;K=$.slice(Q,H),X=V}else{let Q=0;V=X;while(V<$.length){let H=$[V];if(H===" "||H==="\t"||H===`
`){U=!0;break}if(!J&&H===")")break;if(J&&H==="("){if(V>0&&$[V-1]==="\\"){V++;continue}Q++,V++;continue}if(J&&H===")"){if(V>0&&$[V-1]==="\\"){V++;continue}if(Q===0)break;Q--,V++;continue}V++}K=$.slice(Y,V),X=V}return{target:K,endPos:X,hadSpace:U}}function NZ($,Z,J,X){let G=Z,Y=0;while(G<$.length){let V=$[G];if(H1(V))G++;else if(V===`
`){if(Y>=1)break;Y++,G++}else if(Q9(V))break;else break}if(J&&!X){if(G>=$.length||$[G]!=='"'&&$[G]!=="'"&&$[G]!=="(")return{title:void 0,endPos:G}}let K=void 0;if(G<$.length){let V=$[G];if(V==='"'||V==="'"){G++;let U=G;while(G<$.length&&$[G]!==V){if($[G]==="\\")G++;G++}if(G<$.length)K=$.slice(U,G),G++}else if(V==="("){G++;let U=G,Q=1;while(G<$.length&&Q>0){if($[G]==="\\"&&G+1<$.length)G++;else if($[G]==="(")Q++;else if($[G]===")")Q--;G++}if(Q===0)K=$.slice(U,G-1)}}return G=g0($,G),{title:K,endPos:G}}function I6($,Z,J){let X=P6($,Z,J);if(!X)return null;let G=Z;G=g0($,G);let Y=G<$.length&&$[G]==="<";if(Y&&X.target===""&&X.endPos===G+2){let V=NZ($,X.endPos,!1,Y);if(V.endPos>=$.length||$[V.endPos]!==")")return null;return{target:"",title:V.title,endPos:V.endPos+1}}let K=NZ($,X.endPos,X.hadSpace,Y);if(K.endPos>=$.length||$[K.endPos]!==")")return null;return{target:X.target,title:K.title,endPos:K.endPos+1}}var f6;((X)=>{X[X.URI=0]="URI";X[X.EMAIL=1]="EMAIL";X[X.ANGLE=2]="ANGLE"})(f6||={});function V9($){return $>=p1&&$<=u1||$>=s1&&$<=o1}function gZ($){let Z=$.indexOf(":");if(Z<2||Z>32)return!1;let J=N($);if(!V9(J))return!1;for(let X=1;X<Z;X++){let G=$[X],Y=N(G);if(!q$(G)&&G!=="+"&&G!=="."&&G!=="-")return!1}return!0}function bZ($,Z,J){if(Z===0)return!0;return(J?` 	
\r*_~(`:` 	
*_~(`).indexOf($[Z-1])!==-1}function X$($,Z,J,X,G){let Y=X($,"a","href");if(!Y)return null;return{type:v.link,target:Y,children:[{type:v.text,text:Z}],endPos:J,...G!==void 0?{emailStart:G}:{}}}function I$($,Z,J,X,G){if(J.inAnchor||G!==2&&X.disableAutoLink)return null;if(G===2){if($[Z]!=="<")return null;let z=Z+1;while(z<$.length&&$[z]!==">"){let T=N($,z);if(T===C||T===l||T===d||T===U0||T<C)return null;z++}if(z>=$.length||$[z]!==">")return null;let j=$.slice(Z+1,z);if(!j.length)return null;let q=j.indexOf("\\")!==-1,M=gZ(j),O=c(j,"http://")||c(j,"https://"),A=!1;if(!M&&!O&&j.length>=7){let T=j[0];if(T==="m"||T==="M"){let y=j.toLowerCase();if(c(y,"mailto:")){A=!0;let b=y.indexOf(":"),B=j.slice(b+1);return X$("mailto:"+B,j,z+1,X.sanitizer)}}}let E=!q&&j.indexOf("@")!==-1&&j.indexOf("//")===-1&&!M;if(!O&&!A&&!E&&!M)return null;let w=j,x=j;if(!A&&!M&&!O&&E)w="mailto:"+j;return X$(w,x,z+1,X.sanitizer)}if(G===1){let z=Z;while(z>0&&(q$($[z-1])||".+-_".indexOf($[z-1])!==-1))z--;if(z>=Z||!bZ($,z,!0))return null;let j=Z+1,q=!1;while(j<$.length){let A=$[j];if(A===".")q=!0,j++;else if(q$(A)||A==="-"||A==="_")j++;else break}if(!q||j<=Z+1)return null;while(j>Z+1&&$[j-1]===".")j--;if(j>Z+1&&($[j-1]==="-"||$[j-1]==="_"))return null;if(j-(Z+1)<1e4){if($.indexOf(".",Z+1)>=j||$.indexOf(".",Z+1)===-1)return null}else if($.slice(Z+1,j).indexOf(".")===-1)return null;let O=$.slice(z,j);return X$("mailto:"+O,O,j,X.sanitizer,z)}let Y=c($,"http://",Z)||c($,"https://",Z),K=!Y&&c($,"ftp://",Z),V=!Y&&!K&&c($,"www.",Z);if(!(Y||K||V)||!bZ($,Z,!1))return null;var U=Z+(Y?N($,Z+4)===VZ?8:7:K?6:4),Q=U;while(U<$.length){let z=N($,U);if(z===C||z===l||z===d||z===F9||z===m1)break;U++}if(U<=Q)return null;let H=U;while(H>Q){let z=$[H-1];if(H>Q+1&&$[H-2]==="\\")break;if(z==="?"||z==="!"||z==="."||z===","||z===":"||z==="*"||z==="_"||z==="~")H--;else if(z===";"){let j=H-2;while(j>=Q&&$[j]!=="&"&&$[j]!==" ")j--;if(j>=Q&&$[j]==="&"){let q=$.slice(j+1,H-1);if(q.length>=2&&q.length<=10&&/^[a-zA-Z0-9]+$/.test(q)&&(q==="lt"||q==="gt"||q.length>=3&&(c(q,"amp")||c(q,"apos")||c(q,"quot")||c(q,"nbsp")||/^[a-z]{3,10}$/.test(q))))break;H=j;break}H--}else if(z===")"){let j=0,q=0;for(let M=Q;M<H;M++){if($[M]==="(")j++;if($[M]===")")q++}if(q>j)H--;else break}else break}if(U=H,U<=Q)return null;var W=Q,_=-1,D=-1;while(W<U){let z=N($,W);if(z>=p1&&z<=u1||z>=s1&&z<=o1||z>=J9&&z<=X9||z===j1||z===$9||z===f9){if(z===f9)D=_,_=W;W++;continue}break}if(W===Q||_===-1)return null;if(D===-1)D=Q-1;for(let z=D+1;z<_;z++)if($[z]==="_")return null;for(let z=_+1;z<W;z++)if($[z]==="_")return null;let F=$.slice(Z,U);return X$(V?"http://"+F:F,F,U,X.sanitizer)}function f$($,Z,J,X,G){if(G==="<")return I$($,Z,J,X,2);if(G==="h"||G==="f"||G==="w")return I$($,Z,J,X,0);if(G==="@")return I$($,Z,J,X,1);return null}function CZ($){var Z=$.trim(),J=Z.replace(/[\s\t\n\r]+/g," ");if(J.indexOf("ẞ")!==-1)return J.replace(/\u1E9E/g,"ss").toLowerCase();return J.toLowerCase()}function g6($,Z,J){if(Z+3>=$.length||$[Z]!=="[")return null;let X=$[Z+1];if(X!==" "&&X!=="x"&&X!=="X")return null;if($[Z+2]!=="]")return null;return{type:v.gfmTask,completed:X.toLowerCase()==="x",endPos:Z+3}}function e$($,Z,J,X){let{inline:G,inList:Y,inBlockQuote:K}=Z;if(X.inline!==void 0)Z.inline=X.inline;if(X.list!==void 0)Z.inList=X.list;if(X.inBlockQuote!==void 0)Z.inBlockQuote=X.inBlockQuote;let V=i9($,Z,J);return Z.inline=G,Z.inList=Y,Z.inBlockQuote=K,V}function l9($,Z,J,X,G){return M$(X,!0,()=>i1($,Z,J,X,G))}function d9($,Z,J,X){var G=$[Z];if(G===void 0)return null;var Y=Z,K=null,V=G,U=null,Q=N(G),H=Q===C||Q===l;if(H){if(U=I($,Z),K=t($,Z,U),Y=Z+K.charCount,Y>=$.length)return K$($,Z,J);V=$[Y]}var W=K?K.spaceEquivalent:0;if(W>=4){if(H)return K$($,Z,J);return null}var _=N(V);if(_===m1){var D=mZ($,Z,J,X);if(D)return D}else if(_===$9)return j$($,Z,J,X);else if(_===j1||_===E9||_===qZ){var F=j$($,Z,J,X);if(F)return F;var z=o$($,Z,J,X);if(z)return z}else if(_>=J9&&_<=X9){var z=o$($,Z,J,X);if(z)return z}else if(_===S9)return C6($,Y,J,X);else if(_===k1)return y9($,Y,J,X,Y+1<$.length&&N($,Y+1)===H9);else if(_===F9&&!X.disableParsingRawHTML)return v$($,Y,J,X);else if(_===$1||_===e1){if(!U)U=I($,Z);if(!K)K=t($,Z,U);if(K.spaceEquivalent<=3)return $Z($,Y,J,X)}else if(_===DZ)return dZ($,Z,J,X);if(H)return K$($,Z,J);return null}function i9($,Z,J){let X=[],G=0;while(G<$.length){while(G<$.length&&$[G]===`
`)G++;if(G>=$.length)break;var Y=$[G];if(Z.inList&&X.length>0){var K=X[X.length-1];if(K?.type===v.paragraph){var V=K,U=N(Y);if(U===j1||U===c1||U===C||U===l){var Q=I($,G),H=$.slice(G,Q),W=t($,G,Q);if(W.spaceEquivalent<4){var _=H.slice(W.charCount).trim();if(lZ(X,_,J)){G=Q+(Q<$.length&&$[Q]===`
`?1:0);continue}}}}}var D=d9($,G,Z,J);if(D){X.push(D),G=D.endPos;continue}var F=kZ($,G,Z,J);if(F){X.push(F),G=F.endPos;continue}var z=$.slice(G).trim();if(z){if(Z.inBlockQuote&&X.length>0){let O=function(A){if(A.type===v.blockQuote){var E=A;if(E.children&&E.children.length>0){var w=E.children[E.children.length-1];if(w.type===v.paragraph)return w}}else if(A.type===v.orderedList||A.type===v.unorderedList){var x=A;if(x.items&&x.items.length>0){var T=x.items[x.items.length-1];if(T&&T.length>0){var y=T[T.length-1],b=O(y);if(b)return b}}}return null};for(var j=X.length-1;j>=0;j--){var V=O(X[j]);if(V){var M=a$($,G,Z,J);if(M){var q=M;if(V.children&&q.children)V.children.push({type:v.text,text:`
`},...q.children);G=M.endPos;continue}}}}var M=a$($,G,Z,J);if(M){X.push(M),G=M.endPos;continue}}G++}return X}function C6($,Z,J,X){if(J.inline)return null;let G=I($,Z),Y=t($,Z,G,3);if(Y.spaceEquivalent>3&&!J.inList)return null;var K=Z+Y.charCount;if(K>=$.length||$[K]!=="#")return null;let V=B9($,K,"#",6);if(K+=V,K>=$.length)return null;let U=$[K];if(U===`
`||U==="\r"){let D=I($,K);return{...z$(V,[],"",X.slugify),endPos:D+(D<$.length?1:0)}}if(U!==" "&&U!=="\t")return null;let Q=K,H=I($,Q);var W=$.slice(Q,H).replace(W6,"").trim();let _=l9(W,0,W.length,J,X);return{...z$(V,_,W,X.slugify),endPos:H+(H<$.length?1:0)}}function kZ($,Z,J,X){if(J.inline||J.inBlockQuote||J.inList)return null;let G=I($,Z);if(G>=$.length)return null;let Y=k($,G),K=-1,V=null;for(var U=0;Y<$.length&&U<10;U++){let b=I($,Y);if(b>=$.length)break;var Q=Y;while(Q<b&&(N($,Q)===C||N($,Q)===l||N($,Q)===U0))Q++;if(Q>=b)break;var H=0,W=Y;while(W<b&&H<3&&N($,W)===C)H++,W++;if(W<b){let B=N($,W);if(B===c1||B===j1){let L=$[W];var _=0,D=!1,F=W;while(F<b){let f=N($,F);if(f===B){if(D){_=0;break}_++}else if(f===C||f===l)D=!0;else{_=0;break}F++}if(_>=1){K=b,V=L;break}}}Y=k($,b)}if(!V)return null;let z=N($,Z);if(z===S9||z===m1||$[Z]==="|")return null;let j=Z;var q=Z,M=!1;while(q<Y){let b=I($,q);if(b>=Y)break;var O=q;while(O<b&&(N($,O)===C||N($,O)===l||N($,O)===U0))O++;if(O<b)M=!0,j=b;q=k($,b)}if(!M)return null;let A=$.slice(Z,j);var E=0,w=A.length;while(E<w&&(A.charCodeAt(E)===C||A.charCodeAt(E)===l||A.charCodeAt(E)===U0||A.charCodeAt(E)===d))E++;while(w>E&&(A.charCodeAt(w-1)===C||A.charCodeAt(w-1)===l||A.charCodeAt(w-1)===U0||A.charCodeAt(w-1)===d))w--;let x=A.slice(E,w);if(!x)return null;let T=V==="="?1:2,y=l9(x,0,x.length,J,X);return{...z$(T,y,x,X.slugify),endPos:K+(K<$.length?1:0)}}function a$($,Z,J,X){if(J.inline)return null;if(X.optimizeForStreaming&&$[Z]==="|"){var G=Math.min(500,$.length-Z),Y=$.substr(Z,G),K=0,V=!1;for(var U=0;U<Y.length;U++){if(Y[U]==="|")K++;if(Y[U]==="-"||Y[U]===":")V=!0}if(K>=3&&V){var Q=I($,Z);while(Q<$.length){var H=k($,Q);if(H>=$.length)break;var W=I($,H),_=$.slice(H,W);if(_.indexOf("|")===-1&&_.indexOf("-")===-1)break;if(Q=W,W>=$.length)break}return{type:v.paragraph,children:[],endPos:k($,Q)}}}let D=Z,F=$.length;while(D<F){let r=I($,D),K0=!0;for(let $0=D;$0<r;$0++){let s=N($,$0);if(s!==C&&s!==l&&s!==U0){K0=!1;break}}if(K0){D=r;break}if(r>=F){D=F;break}let w0=k($,r);if(w0>=F){D=F;break}let h0=I($,w0),H0=!0,q0="";for(let $0=w0;$0<h0;$0++){let s=N($,$0);if(s!==C&&s!==l&&s!==U0){if(H0=!1,q0==="")q0=$[$0];break}}if(H0){D=r;break}let e=!1,i0=t($,w0,h0),X0=i0.spaceEquivalent===4&&i0.charCount===4;if(q0==="<"&&!X0&&!X.disableParsingRawHTML){let s=w0,o0=0;while(s<h0&&o0<3){let J1=N($,s);if(J1===C||J1===l)o0++,s++;else break}if(s<h0&&$[s]==="<"){var z=v$($,s,{...J,inline:!1},X);if(z)e=!("canInterruptParagraph"in z)||z.canInterruptParagraph}}if(X0)e=!1;else if(!e&&q0&&u9(q0))if(q0==="["){let $0=w0;if($0+1>=F||$[$0+1]!=="^")e=!1;else e=!0}else if(q0==="*"||q0==="+")if(j$($,w0,J,X))e=!0;else{let s=w0+1<F?$[w0+1]:"";if(s&&H1(s))e=!0;else e=!1}else{let $0=d9($,w0,J,X);if($0)if($0.type===v.codeBlock)if(t($,w0,h0).spaceEquivalent>=4)e=!1;else e=!0;else if($0.type===v.unorderedList||$0.type===v.orderedList)if($0.type===v.orderedList)e=$0.start===1;else e=!0;else if(q0==="-")if(D>Z)e=!0;else e=!0;else if($0.type===v.ref)e=!1;else e=!0}if(e){D=r;break}D=k($,r)}if(D<=Z)return null;var j=Z,q=D;while(j<q){let r=N($,j);if(r===C||r===l)j++;else break}let M=I($,j);var O=q>M,A;if(!O)A=$.slice(j,q);else{var E=[],w=j,x=0;while(w<q){var T=I($,w);if(T>q)T=q;if(x===0)E.push($.slice(w,T));else{var y=0;while(y<4&&w+y<T)if(N($,w+y)===C)y++;else break;var b=y===4?w+4:w;E.push($.slice(b,T))}if(T<q){let r=N($,T);if(r===U0||r===d)E.push(`
`),w=k($,T);else w=q}else w=q;x++}A=E.join("")}var B=A.length;while(B>0){var L=A.charCodeAt(B-1);if(L===C||L===l)B--;else break}if(B<A.length)A=A.slice(0,B);let f=!1;for(let r=0;r<A.length;r++){let K0=A.charCodeAt(r);if(K0!==C&&K0!==l&&K0!==d&&K0!==U0){f=!0;break}}if(!f)return null;var S=A,P=D,g=-1,h=D-1;while(h>=j){if(N($,h)===d){g=h;break}h--}if(g>=0){var R=!1;for(var a=j;a<g;a++){let r=N($,a);if(r!==C&&r!==l&&r!==d&&r!==U0){R=!0;break}}if(!R){var i=g+1;while(i<$.length){let r=N($,i);if(r===C||r===l)i++;else break}var j0=i-(g+1);if(j0<4&&i<$.length&&$[i]==="["){var B0={...J,inline:!1},_0=y9($,i,B0,X,!1);if(_0){var T0=0,h=j;while(h<=g){let K0=$.indexOf(`
`,h);if(K0===-1||K0>g)break;T0++,h=K0+1}var p=0,Q1=0;h=0;while(h<A.length){let K0=A.indexOf(`
`,h);if(K0===-1)break;if(Q1++,Q1===T0){p=K0+1;break}h=K0+1}if(p>0)S=A.slice(0,p-1);P=_0.endPos,J.refs=B0.refs}}}}let G0=l9(S,0,S.length,J,X);var P0={type:v.paragraph,children:G0,endPos:P};if(G0.length>0){var M0=[];for(var V0=G0.length-1;V0>=0;V0--){var s0=G0[V0];if(s0.type===v.htmlSelfClosing&&s0.isClosingTag===!0)M0.push(V0);else if(s0.type===v.text){var I0=s0;if(I0.text&&I0.text.trim().length>0)break}else break}if(M0.length>=3){var m0=M0[M0.length-1],y1=G0.slice(m0+1);G0.splice(m0+1),P0.removedClosingTags=y1}}return P0}function k6($,Z){if(Z!==0)return null;let J=L$($);if(!J?.hasValidYaml)return null;let X=J.endPos-1;if(X>0&&$[X-1]==="\r")X--;let G=l1($.slice(0,X));return{type:v.frontmatter,text:G,endPos:J.endPos}}function j$($,Z,J,X){let G=I($,Z),Y=t($,Z,G,3);if(Y.spaceEquivalent>3)return null;var K=Z+Y.charCount;if(K>=G)return null;let V=$[K];if(V!=="-"&&V!=="*"&&V!=="_")return null;var U=0,Q=K;while(Q<G){var H=$[Q];if(H===V)U++;else if(H!==" "&&H!=="\t")return null;Q++}if(U<3)return null;return{type:v.breakThematic,endPos:k($,G)}}function t($,Z,J,X){let G=0,Y=0,K=Z;while(K<J){var V=N($,K);if(V!==C&&V!==l)break;if(X!==void 0&&G>=X)break;if(V===l)G+=4-G%4;else G+=1;Y++,K++}return{spaceEquivalent:G,charCount:Y}}function RZ($,Z,J,X){let G=0,Y=0,K=X;for(let W=Z;W<J&&Y<4;W++){var V=N($,W);if(V===l){let _=4-K%4;if(Y+=_,G++,K+=_,Y>=4)break}else if(V===C){if(Y++,G++,K++,Y>=4)break}else break}let U=$.slice(Z+G,J);var Q=0;for(var H=Z;H<J;H++){if($[H]==="\t")Q++;if(Q>=2)break}if(Q>=2&&c(U,"\t")&&X>0)U="  "+U.slice(1);return U}function K$($,Z,J){let X=I($,Z),G=t($,Z,X);if(G.spaceEquivalent<4)return null;let Y=G.spaceEquivalent,K=I($,Z+G.charCount),V=Z,U=0;var Q=V-1;while(Q>=0&&$[Q]!==`
`&&$[Q]!=="\r")Q--;Q++;while(Q<V){if($[Q]==="\t")U=U+4-U%4;else U++;Q++}let H=RZ($,V,K,U),W=k($,K);if(W>=$.length){if(!H.trim())return null;return{type:v.codeBlock,text:H,endPos:W}}var _=[];_.push(H);let D=W;while(D<$.length){let z=I($,D);if(w1($,D,z)){let j=z+1;if(j<$.length){let q=I($,j),M=t($,j,q),O=$[j+M.charCount];if(O&&O!==`
`&&(M.spaceEquivalent<4||O===">"&&M.spaceEquivalent<Y))break}_.push(`
`)}else{if(t($,D,z).spaceEquivalent<4)break;let q=RZ($,D,z,0);_.push(`
`),_.push(q)}D=k($,z)}let F=_.join("");if(F=F.replace(w6,""),!F.trim())return null;return{type:v.codeBlock,text:F,endPos:D}}function $Z($,Z,J,X){let G=$[Z];if(G!=="`"&&G!=="~")return null;let Y=B9($,Z,G);if(Y<3)return null;let K=Z;while(K>0&&N($,K-1)!==d)K--;let V=t($,K,Z),U=V.spaceEquivalent,Q=U;if(U===4&&V.charCount===4)U=0,Q=4;if(U>=4)return null;let H=g0($,Z+Y),W=I($,H),_=$.slice(H,W).trim();if(G==="`"&&_.indexOf("`")!==-1)return null;_=_.replace(p$,"$1");let D=_.indexOf(" "),F=D>0?_.slice(0,D):_,z=D>0?_.slice(D+1).trim():"",j=z&&/=\s*["']/.test(z)?d1(z,"code","code",X):void 0,q=k($,W),M=q,O=!1;while(M<$.length){let x=I($,M),T=M,y=0;while(T<x){let b=N($,T);if(b===C){if(y++,T++,y>=4)break}else if(b===l){if(y+=4-y%4,T++,y>=4)break}else break}if(y<4){let b=B9($,T,G,x-T);if(b>=Y){let B=T+b;while(B<x){let L=N($,B);if(L===C||L===l)B++;else break}if(B===x){O=!0;break}if(b>=3&&B<x){let L=T+b;if(!(L<x&&(N($,L)===C||N($,L)===l))){let S=!0;if(G==="`"){if($.slice(L,x).indexOf("`")!==-1)S=!1}if(S)break}}}}else if(Q===4&&U===0&&y===4){let b=B9($,T,G,x-T);if(b>=Y&&w1($,T+b,x)){O=!0;break}}M=k($,x)}let A=M>q&&$[M-1]===`
`?M-1:M;if(A>q&&$[A-1]==="\r")A--;let E=l1($.slice(q,A));if(Q)E=r$(E,Q);let w=O&&M<$.length?k($,I($,M)):M;return{type:v.codeBlock,text:E,lang:F,attrs:j,endPos:w}}function m6($,Z,J){for(var X=0;X<$.length;X++)if(!d$($[X])){let Y=e$($,Z,J,{inline:!1,inBlockQuote:!0});for(var G=0;G<Y.length;G++){let K=Y[G];if("endPos"in K)delete K.endPos}return Y}return[]}function mZ($,Z,J,X){if(J.inline)return null;let G=Z;while(G<$.length&&($[G]===" "||$[G]==="\t"))G++;if(G>=$.length||$[G]!==">")return null;let Y=Z;var K=[],V=void 0,U=!1,Q=-1,H=!1,W=null,_=null,D=0,F=!1;while(Y<$.length){let w=I($,Y),x=Y;while(x<w&&($[x]===" "||$[x]==="\t"))x++;if(x<w&&$[x]===">"){let T=x+1;if(T<w&&$[T]===" ")T++;let b=t($,T,w).spaceEquivalent>=4,B=!1,L=null,f=0;if(T<w){let P=$[T];if(P==="`"||P==="~"){let g=0,h=T;while(h<w&&$[h]===P&&g<20)g++,h++;if(g>=3)B=!0,L=P,f=g}}if(H&&W==="fenced"&&L===_&&f>=D)H=!1,W=null,_=null,D=0;else if(b||B)H=!0,W=b?"indented":"fenced",_=L,D=f;var z=!b&&!B;if(z){for(var j=T;j<w;j++)if(!d$($[j])){z=!1;break}}if(F=z,Q===-1&&!z)Q=K.length;if(!z)U=!0;let S=x+1;if(S<w&&$[S]==="\t"){K.push("  ");let P=4;for(let g=S+1;g<w;g++){let h=$[g];var q=N(h);if(q===l){let R=4-P%4;if(R===1)K.push(" ");else if(R===2)K.push("  ");else if(R===3)K.push("   ");else K.push(" ".repeat(R));P+=R}else K.push(h),P++}if(w<$.length)K.push(`
`)}else{let P=S;if(P<w&&$[P]===" ")P++;if(K.push($.slice(P,w)),w<$.length)K.push(`
`)}}else{var M=!0;for(var j=Y;j<w;j++)if(!d$($[j])){M=!1;break}if(M||H)break;if(t($,Y,w).spaceEquivalent===0){let y=d9($,Y,J,X);if(y&&y.type!==v.ref&&y.type!==v.codeBlock)break;if(F)break}if(K.push($.slice(Y,w)),w<$.length)K.push(`
`)}Y=k($,w)}if(Y===Z)return null;if(K.length>0&&K[K.length-1]===`
`)K.pop();let O=K.join("");if(O.length>=4&&O.charCodeAt(0)===k1&&O.charCodeAt(1)===W9){let w=O.indexOf(`]
`,2);if(w>2)V=O.slice(2,w),O=O.slice(w+2)}let A=m6(O,J,X),E={type:v.blockQuote,children:A,endPos:Y};if(V)E.alert=V;return E}function r$($,Z){return $.split(`
`).map(function(J){if(J.length===0)return J;let X=Z,G=0,Y=0,K=0;while(Y<J.length&&G<X)if(J[Y]===" ")G++,K++,Y++;else if(J[Y]==="\t"){let V=4-K%4;if(G+V<=X)G+=V,K+=V,Y++;else{let U=X-G,Q=Math.max(0,V-U);return" ".repeat(Q)+J.slice(Y+1)}}else break;return J.slice(Y)}).join(`
`)}function U$($,Z,J,X,G=!0){let Y=(G?`
`:"")+$,K=l9(Y,0,Y.length,J,X);if(Z.length>0&&Z[Z.length-1].type===v.paragraph)Z[Z.length-1].children.push(...K);else Z.push(...K)}function m9($){return $.some(function(Z){return Z.type===v.codeBlock||Z.type===v.paragraph||Z.type===v.blockQuote||Z.type===v.orderedList||Z.type===v.unorderedList||Z.type===v.heading})}function g$($){return!!$.match(n$)}function hZ($){if($.length===0)return $;var Z=$[$.length-1];if((Z.type===v.orderedList||Z.type===v.unorderedList)&&Z.items?.length>0)return hZ(Z.items.slice(-1)[0]);return $}function s$($,Z,J,X,G,Y,K){if(!c(G,"["))return null;var V={inline:!1,list:!1,refs:Y.refs||{}},U=y9($,Z+X.charCount,V,K,!1);return U?U.endPos:null}function LZ($,Z,J,X){if($.length!==1||!J)return!1;if($[0].length!==0)return!1;if(Z)return!0;if(!Z&&X.trim()==="")return!0;return!1}function TZ($,Z){var J=$.index||0;return Z?J+$[1].length+$[2].length+1:J+$[1].length+1}function H$($,Z,J,X,G){var Y=0,K=X+G,V=Z;while(V<J&&Y<4){var U=N($,V);if(U===C)Y++,K++;else if(U===l){var Q=4-K%4;if(Y+Q>4)break;Y+=Q,K+=Q}else break;V++}return{contentStartColumn:K,contentStartPos:V}}function C$($){var Z=$.match(n$);if(!Z)return null;if(Z[1])return{match:[$,Z[1],Z[2],Z[3]],ordered:!0,listItemRegex:u$};if(Z[4])return{match:[$,Z[4],Z[5],""],ordered:!0,listItemRegex:u$};if(Z[6])return{match:[$,Z[6],Z[7]],ordered:!1,listItemRegex:l$};if(Z[8])return{match:[$,Z[8],""],ordered:!1,listItemRegex:l$};return null}function n1($,Z,J,X,G,Y,K){if(Z.spaceEquivalent!==Y)return!1;var V=$.match(K);if(V)return J?V[2]===G:V[1]===X;var U=$.match(n$);if(!U)return!1;if(J)return U[4]&&U[5]===G;else return U[8]===X}function pZ($,Z,J,X){var G=Z,Y=J,K=Z[0];while(Y<$.length){var V=I($,Y),U=$.slice(Y,V),Q=c(U," ".repeat(X))?U.slice(X):U;if(c(Q.trim(),K)&&B9(Q.trim(),0,K)>=3)return{content:G,endPos:k($,V)};G+=`
`+Q,Y=k($,V)}return{content:G,endPos:Y}}function G$($,Z,J,X,G,Y,K,V,U,Q,H,W,_){var D=Q?void 0:U[1],F=Q?U[2]:void 0,z=Q?u$:l$,j=H;if(!H){var q=k($,Y),M=q;while(M<$.length){var O=I($,M),A=$.slice(M,O),E=t($,M,O),w=E.spaceEquivalent;if(w1($,M,O)){var x=k($,O);if(x<$.length){var T=I($,x),y=t($,x,T),b=y.spaceEquivalent,f=TZ(U,Q),S=G+V+f,P=H$($,S,Y,K,f),g=P.contentStartColumn;if(b+1>g){j=!0;break}}break}else if(w<=K){var B=A.slice(E.charCount),L=B.match(z);if(L&&(Q?L[2]===F:L[1]===D))break}M=k($,O)}}var f=TZ(U,Q),S=G+V+f,P=H$($,S,Y,K,f),g=P.contentStartColumn,h=X,R=k($,Y);if(c(X,"```")||c(X,"~~~")){var a=Q?U[1].length+U[2].length+1:U[1].length+1,i=pZ($,X,R,a);h=i.content,R=i.endPos}return Z.push(uZ(h,j,W,_)),J.push(g),{newCurrentPos:R,itemHasBlankLine:j}}function SZ($,Z,J,X,G,Y){if(G>X||Y.disableParsingRawHTML)return!1;let K=Z+J;if(K>=$.length||$[K]!=="<")return!1;return h6($,K)}function h6($,Z){if(Z>=$.length||$[Z]!=="<")return!1;let J=$.length,X=Z+1;if(X<J&&$[X]==="/")X++;if(X>=J)return!1;let G=N($,X);if(!V9(G))return!1;X++;while(X<J){let K=$[X],V=N($,X);if(K===">"||K===" "||K==="\t"||K===`
`||K==="\r"||K==="/")break;if(K==="-"||K==="_"||V9(V)||V>=48&&V<=57)X++;else return!1}let Y=0;while(X<J){let K=$[X],V=N($,X);if(Y===1){if(K==='"')Y=0;X++}else if(Y===2){if(K==="'")Y=0;X++}else if(K==='"')Y=1,X++;else if(K==="'")Y=2,X++;else if(K===">")return!0;else if(K==="/"&&X+1<J&&$[X+1]===">")return!0;else if(V===10||V===13)return!1;else X++}return!1}function EZ($,Z,J,X,G,Y,K,V,U,Q,H,W){let _=X,D=!1;while(_<$.length){let F=I($,_),z=t($,_,F),j=z.spaceEquivalent;if(w1($,_,F)){D=!0,_=k($,F);continue}let q=$.slice(_+z.charCount,F);if(j<=G&&n1(q,z,Y,K,V,G,U))break;if(j>=J){if(W&&D){let O=s$($,_,F,z,q,Q,H);if(O){_=O,D=!1;continue}}let M=Q$($,_,F,z,J-1,J,Z,D,Q,H,void 0,G);if(M.processed){_=M.newPos,D=M.wasBlank;continue}}else break}return _}function xZ($,Z,J,X){let G=e$($,J,X,{inline:!1,list:!0});if(G.length>0)return!Z&&G.length===1&&G[0].type===v.paragraph?G[0].children:G;let Y=M$(J,!0,()=>i1($,0,$.length,J,X));return Z&&Y.length>0?[{type:v.paragraph,children:Y}]:Y}function uZ($,Z,J,X){let G=g6($,0,J);if(!(G&&(G.endPos>=$.length||$[G.endPos]===" ")))return xZ($,Z,J,X);let K=G.endPos<$.length?G.endPos+1:G.endPos,V=$.slice(K),U=xZ(V,Z,J,X),Q=[G];if(G.endPos<$.length)Q.push({type:v.text,text:" "});return Q.push(...U),Q}function PZ($,Z){if(!$[0])return!1;let J=$[0].indexOf(Z);if(J===-1)return!1;let X=J+Z.length;if(X>=$[0].length)return!1;let G=$[0][X];return G?N(G)===_Z:!1}function lZ($,Z,J){if($.length===0)return!1;let X=$[$.length-1],G=Z.trim();if(!c(G,"=")&&!c(G,"-")||G.length<1||!/^[=-]+[ \t]*$/.test(G))return!1;let Y=[],K="";if(X.type===v.paragraph){let Q=X;Y=Q.children,K=Q.children.map((H)=>H.type===v.text?H.text:"").join("").trim()}else if(X.type===v.text){let Q=[],H=$.length-1;while(H>=0&&$[H].type===v.text)Q.unshift($[H]),H--;if(Q.length>0)Y=Q,K=Q.map((W)=>W.text).join("").trim()}if(!K)return!1;let U=G[0]==="="?1:2;if(X.type===v.paragraph)$.pop();else if(X.type===v.text)while($.length>0&&$[$.length-1].type===v.text)$.pop();return $.push(z$(U,Y,K,J.slugify)),!0}function Q$($,Z,J,X,G,Y,K,V,U,Q,H,W){let _=X.spaceEquivalent,D=$.slice(Z+X.charCount,J);if(_>=G+4){let q=K$($,Z,U);if(q){let M=q,O=r$(M.text||"",Y);return K.push({...M,text:O}),{processed:!0,newPos:M.endPos,wasBlank:!1}}}let F=_-(Y-1);if(_+1>=Y&&F<=3){let q=Z+X.charCount;if(q<J){let M=$[q];if(M==="`"||M==="~"){let O=$Z($,q,U,Q);if(O){let A=O,E=r$(A.text||"",Y-1);return K.push({...A,text:E,endPos:A.endPos}),{processed:!0,newPos:A.endPos,wasBlank:!1}}}if(M==="|"){let O=dZ($,q,U,Q);if(O){let A=O;return K.push(A),{processed:!0,newPos:A.endPos,wasBlank:!1}}}}}if(D.length>0&&(D[0]==="-"||D[0]==="*"||D[0]==="+"||D[0]>="0"&&D[0]<="9")){if(/^([-*+]|\d{1,9}[.)])\s+/.test(D)){let M=l9(D,0,D.length,U,Q);return K.push({type:v.text,text:`
`},...M),{processed:!0,newPos:k($,J),wasBlank:!1}}}let z=O6($,Z,K,D,U,Q);if(z!==null)return{processed:!0,newPos:z,wasBlank:!1};let j=e$(D,U,Q,{inline:!1,list:!0});if(j.length>0){if(H&&j[0].type===v.paragraph){let q=j[0];if(K.push({type:v.text,text:`
`},...q.children),j.length>1)K.push(...j.slice(1))}else if(!V&&j[0].type===v.paragraph&&K.length>0){let q=K[K.length-1],M=j[0];if(q.type===v.paragraph)q.children.push({type:v.text,text:`
`},...M.children);else if(q.type===v.heading)K.push(...M.children);else if(!m9(K))K.push({type:v.text,text:" "},...M.children);else K.push(...j);if(j.length>1)K.push(...j.slice(1))}else K.push(...j);return{processed:!0,newPos:k($,J),wasBlank:!1}}if(V){let q=M$(U,!0,()=>i1(D,0,D.length,U,Q));K.push({type:v.paragraph,children:q})}else U$(D,K,U,Q);return{processed:!0,newPos:k($,J),wasBlank:!1}}function o$($,Z,J,X){if(J.inline)return null;var G=J.inList;if(J.inList=!0,Z>0){var Y=N($,Z-1);if(Y!==d&&Y!==U0)return J.inList=G,null}var K=I($,Z),V=t($,Z,K);if(V.spaceEquivalent>3&&!J.inList)return J.inList=G,null;var U=$.slice(Z,K),Q=V.charCount,H=U.slice(Q),W=C$(H);if(!W)return J.inList=G,null;var{match:_,ordered:D,listItemRegex:F}=W,z=V.spaceEquivalent,j=D?parseInt(_[1],10):void 0,q=D?_[2]:void 0,M=D?void 0:_[1],O=D?_[3]==="":_[2]==="";function A(n,S0){if(n===0)return!0;var b0=N($,n-1);if(b0!==d)return!1;if(!S0)return!0;var Q0=n-2;while(Q0>=0){var u=N($,Q0);if(u!==C&&u!==l)break;Q0--}return Q0<0||N($,Q0)===d}if(O&&!A(Z,!0))return J.inList=G,null;if(D&&j!==1&&!A(Z,!1))return null;if(!D&&PZ(_,M))return null;var E=_.index||0,w=D?E+_[1].length+_[2].length+1:O?E+_[1].length:E+_[1].length+1,x=Z+Q+w,T=H$($,x,K,z,w),y=T.contentStartColumn,b=z+E+_[1].length,B=D?b+_[2].length+1:O?b:b+1,L=[],f=[];function S(n,S0,b0){return b0?n>=S0:n>S0}function P(){return L[L.length-1]}function g(){return f[f.length-1]??y}function h(n,S0){let b0=hZ(S0),Q0=J.inList;J.inList=!0;let u=o$($,n,J,X);if(J.inList=Q0,u)return b0.push(u),u;return null}var R=k($,K),a=R,i=!1;while(a<$.length){var j0=I($,a),B0=$.slice(a,j0);if(B0.trim()===""){var _0=k($,j0);while(_0<$.length){var T0=N($,_0);if(T0===d);else if(!S6.has($[_0]))break;_0++}var p=I($,_0),Q1=$.slice(_0,p),G0=t($,_0,p),P0=Q1.slice(G0.charCount);if(n1(P0,G0,D,M,q,z,F))i=!0;else{var M0=s$($,_0,p,G0,P0,J,X);if(M0){var V0=M0;while(V0<$.length&&N($,V0)===d)V0++;if(V0<$.length){var s0=I($,V0),I0=$.slice(V0,s0),m0=t($,V0,s0),y1=I0.slice(m0.charCount);if(n1(y1,m0,D,M,q,z,F))i=!0}}}break}var r=t($,a,j0),K0=B0.slice(r.charCount),w0=C$(K0);if(!w0)break;var h0=w0.match;if(D){if(h0[2]!==q)break}else if(h0[1]!==M)break;a=k($,j0)}var H0=D?_[3]:_[2];H0=H0.trimStart();var q0=Z+Q+(_.index||0),e=D?q0+_[1].length+_[2].length:q0+_[1].length,i0=e;while(i0<$.length){var T0=N($,i0);if(T0!==C&&T0!==l)break;i0++}var X0=0,$0=e;while($0<K){var T0=N($,$0);if(T0===l)X0+=4-X0%4;else if(T0===C)X0++;else break;$0++}var s=!1;if(e<$.length&&N($,e)===l){var o0=1,J1=e+1;while(J1<$.length&&N($,J1)===l)o0++,J1++;if(o0>=2)H0="      "+H0,s=!0}if(!D)O=O&&X0===0;if(X0>=4&&!s)H0=" ".repeat(X0-1)+H0.trimStart();var V1=H0.trim()==="";let F1=i;if(!i&&R<$.length){var _1=R;while(_1<$.length){var N1=I($,_1),F0=$.slice(_1,N1);if(w1($,_1,N1)){var n0=k($,N1);while(n0<$.length){var O1=I($,n0);if(w1($,n0,O1))n0=k($,O1);else break}if(n0<$.length){var f1=t($,n0,$.length),z1=f1.spaceEquivalent;if(z1>=z){var p0=$.slice(n0,I($,n0)),q1=p0.slice(f1.charCount).match(F),b1=q1&&(D?q1[2]===q:q1[1]===M),W1=null;for(var o=R;o<_1;o=I($,o)+1){var X1=I($,o),D1=t($,o,X1),t0=$.slice(o,X1).slice(D1.charCount).match(F),z9=t0&&D1.spaceEquivalent>z&&D1.spaceEquivalent>=y&&(D?t0[2]===q:t0[1]===M);if(z9){var R1=D1.spaceEquivalent+1,L1=D?R1+t0[1].length+t0[2].length+1:R1+t0[1].length+1,q9=o+D1.charCount+t0[0].length,N9=H$($,q9,X1,R1,L1-R1);W1=N9.contentStartColumn;break}}var D9=X0>=5?B:y;if(!b1&&z1>=D9&&(W1===null||z1+1<W1))F1=!0}}break}var M1=t($,_1,N1),g1=M1.spaceEquivalent,T1=F0.slice(M1.charCount),S1=T1.match(F),v0=S1&&(D?S1[2]===q:S1[1]===M);if(v0){if(g1<=z)break}_1=k($,N1)}}var y0=H0;if(c(H0,"```")||c(H0,"~~~")){var u0=D?_[1].length+_[2].length+1:_[1].length+1,E1=pZ($,H0,R,u0);y0=E1.content,R=E1.endPos}var l0=!O&&H0.trim()===""&&X0>0&&X0<5;if(!F1){var f0=y0.length>0?y0[0]:"",K1=f0===">",Z=R;while(Z<$.length){var K=I($,Z),U=$.slice(Z,K);if(U.trim()==="")break;var V=t($,Z,K);if(V.spaceEquivalent<B)break;var H=U.slice(V.charCount);if(V.spaceEquivalent<=z&&n1(H,V,D,M,q,z,F))break;if(g$(H)&&V.spaceEquivalent>z)break;var N0=H.length>0?H[0]:"",t1=N0===">"&&K1;if(N0===">"&&!t1||N0==="#"||c(H,"```")||c(H,"~~~"))break;y0+=`
`+H,R=Z=k($,K)}}if(L.push(uZ(y0,F1,J,X)),f.push(y),F1&&(X0>=5||l0)){let n=P();R=EZ($,n,B,R,z,D,M,q,F,J,X,!0)}else if(!F1){let n=B-1;while(R<$.length){let S0=I($,R),b0=$.slice(R,S0),Q0=t($,R,S0),u=Q0.spaceEquivalent,z0=b0.slice(Q0.charCount);if(b0.trim()===""||u<=z&&n1(z0,Q0,D,M,q,z,F)||g$(z0)&&u>z||u<n)break;let e0=P(),E0=Q$($,R,S0,Q0,n,y,e0,!1,J,X,!0,z);if(E0.processed)R=E0.newPos;else break}}var Z0=!1;while(R<$.length){let n=I($,R),S0=$.slice(R,n),b0=t($,R,n),Q0=b0.charCount,u=b0.spaceEquivalent;if(S0.trim()==="")i=!0,Z0=!0,R=k($,n);else if(u<z){let z0=S0.slice(Q0);if(z0.startsWith("<")&&SZ($,R,Q0,z,u,X))break;let e0=z0.trim();if(e0.length>0&&L.length>0&&!u9(e0[0])&&!n1(z0,b0,D,M,q,z,F)){let E0=P();if(E0.length>0){let Y0=E0[E0.length-1];if(!Z0&&(Y0.type===v.paragraph||Y0.type===v.text)){U$(z0,E0,J,X),Z0=!1,R=k($,n);continue}}}break}else{let z0=S0.slice(Q0);if(L.length>0){let m=f[L.length-1]||y;if(u+1>=m&&!n1(z0,b0,D,M,q,z,F)){let C0=P();if(C0.length>0&&lZ(C0,z0,X)){R=k($,n);continue}}}if(j$($,R,J,X))break;if(Z0){let m=s$($,R,n,b0,z0,J,X);if(m){R=m,Z0=!1;continue}}if(u<=z){if(z0.startsWith("<")&&SZ($,R,Q0,z,u,X))break;if(!n1(z0,b0,D,M,q,z,F)){if(u===z&&!Z0){let m=z0.trim();if(m.length>0&&!u9(m[0])){let C0=d9($,R,J,X);if(C0&&C0.type!==v.paragraph)break;let R0=P();if(R0.length>0&&!m9(R0)){U$(z0,R0,J,X,!0),Z0=!1,R=k($,n);continue}}}break}}if(LZ(L,O,Z0,H0))break;let E0=C$(z0),Y0=E0?E0.match:null,A1=Y0&&(D?Y0[2]===q:Y0[1]===M);if(A1&&u>3&&Z0)break;if(A1&&u<=z+3){if(u>=4&&Z0)break;if(u===z){let m=D?Y0[3]:Y0[2];if(m=m.trimStart(),R=G$($,L,f,m,R,n,u,Q0,Y0,D,i,J,X).newCurrentPos,Z0=!1,m.trim()===""){let R0=L[L.length-1],O0=g();R=EZ($,R0,O0,R,z,D,M,q,F,J,X)}continue}if(u>z){if(Z0){let O0=D?Y0[3]:Y0[2];O0=O0.trimStart(),R=G$($,L,f,O0,R,n,u,Q0,Y0,D,i,J,X).newCurrentPos,Z0=!1;continue}let m=P(),C0=u+1,R0=S(C0,g(),m9(m));if(R0){let O0=h(R,m);if(O0){R=O0.endPos,Z0=!1;continue}}if(!R0&&A1){let O0=D?Y0[3]:Y0[2];if(O0=O0.trimStart(),!i){let c0=k($,n);while(c0<$.length){let L0=I($,c0),a0=$.slice(c0,L0),D0=t($,c0,L0),Y1=D0.spaceEquivalent;if(a0.trim()===""){let R9=k($,L0);if(R9<$.length){let C1=t($,R9,$.length).spaceEquivalent,B$=u+(D?Y0[1].length+Y0[2].length+1:Y0[1].length+1);if(C1+1>B$)break}break}else if(Y1<=z){let W0=a0.slice(D0.charCount).match(F);if(W0&&(D?W0[2]===q:W0[1]===M)&&Y1<=z)break}c0=k($,L0)}}R=G$($,L,f,O0,R,n,u,Q0,Y0,D,i,J,X).newCurrentPos,Z0=!1;continue}else if(!R0&&!A1)break;{let O0=P(),A0=O0.length===0;if(A0&&LZ(L,O,Z0,H0))break;let c0=O0.some((D0)=>D0.type===v.codeBlock||D0.type===v.paragraph||D0.type===v.blockQuote||D0.type===v.orderedList||D0.type===v.unorderedList||D0.type===v.heading),L0=A0&&L.length===1?B:y;if(c0?u>=L0:u>L0){let D0=Q$($,R,n,b0,L0,y,P(),Z0,J,X,void 0,z);if(D0.processed){Z0=D0.wasBlank,R=D0.newPos;continue}}else break}}else if(u===z){if(!D&&Y0&&PZ(Y0,Y0[1]))break;let m=D?Y0[3]:Y0[2];m=m.trimStart(),R=G$($,L,f,m,R,n,z,Q0,Y0,D,i,J,X).newCurrentPos,Z0=!1}}else if(u>z){let m=P();if(g$(z0)){let A0=u+1;if(S(A0,g(),m9(m))){let a0=h(R,m);if(a0){R=a0.endPos,Z0=!1;continue}}if(u-z>3){let a0=m.length>0?m[m.length-1]:null;if(a0&&(a0.type===v.paragraph||a0.type===v.text)){U$(z0,m,J,X),Z0=!1,R=k($,n);continue}}else break}else{let A0=h(R,m);if(A0){R=A0.endPos,Z0=!1;continue}}let R0=y;if(m9(m)?u>=R0-1:u>R0-1){let A0=Q$($,R,n,b0,R0-1,y,P(),Z0,J,X,void 0,z);if(A0.processed){Z0=A0.wasBlank,R=A0.newPos;continue}}else break}else break}}if(i&&L.length>1&&L[0].length>0&&L[0][0].type!==v.paragraph){for(var J0=1;J0<L.length;J0++)if(L[J0].length>0&&L[J0][0].type===v.paragraph){var x1=!1;for(var v1=0;v1<L[0].length;v1++){var G1=L[0][v1].type;if(G1===v.codeBlock||G1===v.heading||G1===v.blockQuote||G1===v.orderedList||G1===v.unorderedList||G1===v.htmlBlock||G1===v.breakThematic){x1=!0;break}}if(!x1)L[0]=[{type:v.paragraph,children:L[0]}];break}}let b9=D?{type:v.orderedList,items:L,ordered:!0,start:j}:{type:v.unorderedList,items:L,ordered:!1};return J.inList=G,{...b9,endPos:R}}function dZ($,Z,J,X){if(J.inline)return null;let G=[],Y=Z;while(Y<$.length){let F=I($,Y);if(w1($,Y,F))break;let z=$.slice(Y,F).trim();if(!(z.indexOf("|")!==-1||G.length>=3&&z&&!u9(z[0])))break;G.push(z),Y=k($,F)}if(G.length<2)return null;let K=(F)=>F[0]==="|"&&F[F.length-1]==="|"?F.slice(1,-1):F,V=(F)=>{let z=[],j="",q=!1;for(let M=0;M<F.length;M++){let O=F[M];if(O==="\\"&&M+1<F.length&&F[M+1]==="|")j+="|",M++;else if(O==="`")q=!q,j+=O;else if(O==="|"&&!q)z.push(j.trim()),j="";else j+=O}return z.push(j.trim()),z},U=V(K(G[0]));if(!U.length)return null;let Q=V(K(G[1]));if(Q.length!==U.length||Q.some((F)=>!/^:?-+:?$/.test(F)))return null;let H=Q.map((F)=>{let z=F[0]===":",j=F[F.length-1]===":";return z&&j?"center":z?"left":j?"right":null});if(X.optimizeForStreaming&&G.length===2)return null;let W=(F)=>M$(J,!0,()=>F.map((z)=>i1(z,0,z.length,J,X))),_=W(U),D=G.slice(2).map((F)=>{let z=F.indexOf("|")!==-1?V(K(F)):[F.trim()],j=U.length;while(z.length<j)z.push("");return z.length=j,W(z)});return{type:v.table,header:_,cells:D,align:H,endPos:Y}}var p6=["div","p","section","article","aside","nav","header","footer","main","h1","h2","h3","h4","h5","h6","blockquote","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","td","th","form","fieldset","hr","pre","details","summary","figure","figcaption"],u6=new Set(["pre","script","style","textarea"]);function h9($){return p6.indexOf($.toLowerCase())!==-1}function _9($){return u6.has($)}function w1($,Z,J){for(var X=Z;X<J;X++){let G=N($,X);if(G!==C&&G!==l&&G!==U0)return!1}return!0}function M$($,Z,J){let X=$.inline;$.inline=Z;try{return J()}finally{$.inline=X}}function k$($,Z,J){var X=Z;while(X<J){var G=I($,X);if(w1($,X,G))return X;X=k($,G)}return J}function m$($,Z,J){return{type:v.htmlComment,text:l1($),endPos:Z,...J}}function A9($,Z,J,X,G,Y,K,V,U){var Q=l1(Z),H=Q;if(V&&(V.forceBlock||V.optimizeForStreaming)&&Z&&!Y){var W=new RegExp("^<"+$.toLowerCase()+"(\\s[^>]*)?>$","i");if(W.test(Z.trim()))H=""}var _=H,D=$.toLowerCase(),F=new RegExp("^<"+D+"[\\s>]","i");if(F.test(_)){var z=_.indexOf(">");if(z!==-1){_=_.slice(z+1);var j="</"+D+">",q=_.indexOf(j);if(q!==-1)_=_.slice(0,q)}}else{var M="</"+D+">",O=_.indexOf(M);if(O!==-1)_=_.slice(0,O)}var A=[];if(_&&V&&!V.optimizeForStreaming){var E=U||{inline:!1,inHTML:!0,inAnchor:!1},w=_.trim(),x=O$.test(w),T=W$.test(w),y=F$.test(w);if(x||T||y){var b={...E,inline:!1,inHTML:!0,inAnchor:E.inAnchor||D==="a"};A=i9(w,b,V)}else if(w){var B={...E,inline:!0,inHTML:!0,inAnchor:E.inAnchor||D==="a"};A=i1(w,0,w.length,B,V)}}return{type:v.htmlBlock,tag:$,attrs:X||{},rawAttrs:G,children:A,rawText:H,text:_,verbatim:!0,isClosingTag:Y,canInterruptParagraph:K,endPos:J}}function p9($){let Z=W$.test($),J=O$.test($),X=B6.test($);return Z||J&&!X}function IZ($,Z,J,X,G,Y,K,V,U,Q){if(!V.inHTML&&!V.inline&&!t9(G,`
`)){let G0=Y,P0=K.length;while(G0<P0){let M0=I(K,G0);if(w1(K,G0,M0))break;let V0=K.slice(G0,M0).trim();if(V0.length>0&&u9(V0[0])){let s0=v$(K,G0,V,Q);if(s0){G0=s0.endPos;continue}let I0=w9(K,G0);if(I0){G0=I0.endPos;continue}return null}G0=k(K,M0)}}let H=Z,W=_9(H);var _=!W&&!U9(Z),D=void 0;if(G){var F=G.indexOf(">");if(F!==-1){var z=G.slice(0,F+1);if(z.indexOf(`
`)!==-1)D=z;var j=F;for(var q=1;q<F;q++){var M=z[q];if(M===" "||M==="\t"||M===`
`||M===">"){j=q;break}}J=z.slice(j,F)}}var O=J.replace(/^[\s\n\r\t]+/,""),A=d1(O,Z,$,Q),E={...A},w=!1,x=!1;if(_&&X.length>0){var T="</"+H,y=X.indexOf(T);if(y>=0){var b=y+T.length;while(b<X.length&&(X[b]===" "||X[b]==="\t"))b++;if(b<X.length&&X[b]===">"){var B=X.slice(0,y);if(p9(B))X=B,x=!0;else w=!0}}if(!x){var L=X.length-1;if(X[L]===`
`){L--;while(L>=0&&(X[L]===" "||X[L]==="\t"||X[L]==="\r"))L--;if(L>=0&&X[L]===`
`)w=!0}}}var f=W||_&&w&&!p9(X),S=l1(X),P=S;if(f){if(S.length>0&&S[0]===`
`)S=S.slice(1),P=S;if(S.length>0&&S[S.length-1]===`
`)S=S.slice(0,-1),P=S;var T="</"+H+">",y=S.indexOf(T);if(y!==-1)S=S.slice(0,y)}let g=S.match(/^([ \t]*)/),h=g?g[1]:"",R=new RegExp(`^${h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"gm"),a=S.replace(R,""),i=O$.test(a),j0=W$.test(a),B0=H==="p",_0=F$.test(a),T0=B0?i:i||j0||V.inHTML&&_0,p=[];if(a)if(T0||_0){let G0={...V,inline:!1,inHTML:!0,inAnchor:V.inAnchor||H==="a"};p=i9(a,G0,Q)}else{let G0={...V,inline:!0,inHTML:Q.optimizeForStreaming?!0:V.inHTML,inAnchor:U||V.inAnchor||H==="a"};p=i1(a,0,a.length,G0,Q)}var Q1=void 0;if(f)if(D!==void 0)Q1=D+P;else Q1=P;return{type:v.htmlBlock,tag:f?Z:$,attrs:E,rawAttrs:J,children:p,rawText:Q1,text:a,verbatim:f,canInterruptParagraph:!0,endPos:Y}}function v$($,Z,J,X){if($[Z]!=="<")return null;if(X.optimizeForStreaming&&J.inHTML)return null;if(!J.inline);if(Z+1<$.length){if($[Z+1]==="?"){var G=V$($,Z);if(G&&G.kind==="pi")return m$(G.text||"",G.endPos,{raw:!0})}else if($[Z+1]==="!"){if(Z+3<$.length&&$.slice(Z,Z+4)==="<!--"){if(J.inline);var Y=V$($,Z);if(Y&&Y.kind==="comment"){var K=Y.text||"",V=!1;if(K==="<!-->")K="",V=!0;else if(K==="<!--->")K="-",V=!0;else if(K.startsWith("<!--")&&K.endsWith("-->"))K=K.slice(4,-3);if(J.inline);return m$(K,Y.endPos,{endsWithGreaterThan:V})}}var U=V$($,Z);if(U&&(U.kind==="declaration"||U.kind==="cdata"))return m$(U.text||"",U.endPos,{raw:!0})}}if(Z+1<$.length){let j9=$[Z+1];if(j9===" "||j9===`
`||j9==="\t"||j9==="\r")return null}var Q=$.indexOf(">",Z+1);if(Q!==-1){var H=$.slice(Z+1,Q),W=H.indexOf(" ")!==-1||H.indexOf("\t")!==-1;if(!W&&(c(H,"http://")||c(H,"https://")))return null;if(!W&&gZ(H))return null}var _=w9($,Z);if(!_&&!J.inline){var D=$.length,F=I($,Z),z=Z,j=0;while(z<F&&j<3&&($[z]===" "||$[z]==="\t"))j++,z++;if(z>=F||$[z]!=="<")return null;if(z+1<F){var D0=i$($,z+1);if(D0){var Y1=D0.tagName,q=h9(Y1);if(!q)return null;var M=D0.nextPos,O=!1,A=!1,E="",w=F,x=!1;while(w<D&&!x){var T=!1;while(M<w){var y=$[M];if(A){if(y===E)A=!1,E="";if(y===`
`||y==="\r")O=!0;M++,T=!0}else if(y==='"'||y==="'")A=!0,E=y,M++,T=!0;else if(y===`
`||y==="\r"){O=!0,M++,T=!0;var b=I($,M);if(b===M)break;w=b}else if(y===">"){M++,x=!0;break}else M++,T=!0}if(x)break;if(!T&&M>=w){var B=I($,w+1);if(B<=w)break;w=B}else if(M>=w&&w<D){var B=I($,w+1);if(B<=w)break;w=B}else break}if(!O&&x)return null;if(M>=F&&F<D)M=F;var L=q?"type6":"type7",f=M,S=k$($,k($,F),D),P=$.slice(f,S),g=Z+1<$.length&&$[Z+1]==="/";if(L==="type7"&&P.trim()===""){var h=$.slice(Z,S),R=I(h,0);if(R<h.length)R++;var a=h.slice(0,R);return A9(Y1,a,S,{},void 0,g,!1,X,J)}var i=$.slice(Z,S);return A9(Y1,i,S,{},void 0,g,L==="type6",X,J)}}return null}if(!_)return null;if(Q!==-1){var j0=$.slice(Z+1,Q);if((c(j0,"http://")||c(j0,"https://"))&&(j0.indexOf(" ")!==-1||j0.indexOf("\t")!==-1))return null}var P0=Z+(_.isClosing?2:1);if(P0<$.length){var B0=$[P0],_0=N(B0);if(_0>=97&&_0<=122||_0>=65&&_0<=90){if(P0+1<$.length&&$[P0+1]===":")return null}}if(_.isClosing){var T0=_.attrs.trim();if(T0.length>0)return null;if(!J.inline){var D=$.length,F=I($,Z),f=_.endPos,p=f;while(p<F&&($[p]===" "||$[p]==="\t"||$[p]==="\r"))p++;var Q1=p>=F||$[p]==="<"&&function(){var YZ=w9($,p);return YZ&&h9(YZ.tagLower)}();if(Q1){var S=k$($,k($,F),D),P=$.slice(f,S);if(P.length>0){if(P[0]==="\r"&&P[1]===`
`)P=P.slice(2);else if(P[0]===`
`||P[0]==="\r")P=P.slice(1)}let nZ=_.tagLower||_.tagName.toLowerCase();return A9(_.tagName,P,S,d1(_.whitespaceBeforeAttrs+_.attrs,nZ,_.tagName,X),_.whitespaceBeforeAttrs+_.attrs,!0,!1,X,J)}}var G0=$.slice(Z,_.endPos);return{type:v.htmlSelfClosing,tag:_.tagName,attrs:{},endPos:_.endPos,isClosingTag:!0,rawText:G0}}var P0=Z+(_.isClosing?2:1);if(P0<$.length){var M0=$[P0];if(M0===" "||M0==="\t"||M0===`
`||M0==="\r")return null}var V0=_.tagLower,s0=U9(_.tagName);let I0=_.tagName.length>0&&_.tagName[0]>="A"&&_.tagName[0]<="Z";if(_.isSelfClosing||s0&&V0!=="a"){if(_.hasNewline&&!I0)return null;if(!J.inHTML&&!J.inline&&!I0)return null;var m0=_.attrs.replace(/\/\s*$/,""),y1=d1(m0,V0,_.tagName,X),G0=J.inline?$.slice(Z,_.endPos):void 0;let GZ={type:v.htmlSelfClosing,tag:_.tagName,attrs:y1,endPos:_.endPos};if(G0!==void 0)GZ.rawText=G0;return GZ}if(J.inline){var r=_.attrs.replace(/\/\s*$/,""),K0=_.whitespaceBeforeAttrs+r,w0=d1(r,V0,_.tagName,X),h0={...w0},H0=_.endPos,q0=[];if(!U9(_.tagName)){var e=v6($,_.endPos,V0);if(e!==null){var i0=$.slice(_.endPos,e[0]);if(i0)if(J.inHTML&&F$.test(i0)||p9(i0))q0=i9(i0,{...J,inline:!1,inHTML:!0,inAnchor:J.inAnchor||V0==="a"},X);else q0=i1(i0,0,i0.length,{...J,inline:!0,inHTML:X.optimizeForStreaming?!0:J.inHTML,inAnchor:J.inAnchor||V0==="a"},X);H0=e[1]}}return{type:v.htmlBlock,tag:_.tagName,attrs:h0,rawAttrs:K0,children:q0,verbatim:!1,endPos:H0}}if(!J.inline){var D=$.length,F=I($,Z),X0=_.tagLower,$0=_9(X0),s=!$0&&h9(_.tagName),o0=!1,J1=Z;while(J1<_.endPos){if($[J1]===">"){o0=!0;break}J1++}var p=_.endPos;while(p<F&&($[p]===" "||$[p]==="\t"))p++;var V1=p>=F||$[p]===`
`||$[p]==="\r"||s&&p<F||!o0;if($0&&o0&&!_.isClosing){var{tagName:F1,endPos:_1,attrs:N1}=_,F0=_1;if($[F0]===`
`)F0++;var n0=F0,O1=F0,f1=1,z1=X0.length+1;while(f1>0){var p0=$.indexOf("<",F0);if(p0===-1){O1=D,F0=D;break}var q1=-1,b1=-1;if($[p0+1]==="/")b1=p0;else if(p0+z1+1<=D&&($[p0+1]===X0[0]||$[p0+1]===F1[0])){var W1=$.substring(p0+1,p0+z1);if(W1.toLowerCase()===X0&&($[p0+z1]===" "||$[p0+z1]===">"))q1=p0}if(q1===-1&&b1===-1){F0=p0+1;continue}if(q1!==-1&&(b1===-1||q1<b1))F0=q1+z1+1,f1++;else{var o=b1+2;while(o<D){var X1=$[o];if(X1!==" "&&X1!=="\t"&&X1!==`
`&&X1!=="\r")break;o++}if(o+X0.length>D)break;var D1=$.substring(o,o+X0.length);if(D1.toLowerCase()!==X0){F0=o;continue}o+=X0.length;while(o<D){var t0=$[o];if(t0!==" "&&t0!=="\t"&&t0!==`
`&&t0!=="\r")break;o++}if(o>=D||$[o]!==">"){F0=o;continue}var z9=o+1,R1=I($,z9);O1=R1,F0=R1+1,f1--}}var L1=0;while(F0+L1<D&&$[F0+L1]===`
`)L1++;var q9=$.slice(Z,F0+L1),N9=$.slice(n0,O1),D9=F0+L1;return IZ(_.tagName,_.tagName,N1,N9,q9,D9,$,J,!1,X)}if(V1||!o0){var L=s?"type6":"type7",f=_.endPos,S=k$($,k($,F),D);if(L==="type6"&&!_.isClosing){let r9=I0?_.tagName:_.tagLower||_.tagName.toLowerCase();var M1="</"+r9,g1="<"+r9,T1=f,S1=1,v0=-1;while(T1<S&&S1>0){var y0=$.indexOf(g1,T1),u0=$.indexOf(M1,T1);while(y0!==-1&&y0<S){var E1=y0+g1.length;if(E1>=D){y0=-1;break}var l0=$[E1];if(l0===" "||l0==="\t"||l0===`
`||l0==="\r"||l0===">")break;y0=$.indexOf(g1,E1)}if(y0===-1||y0>=S)y0=S;if(u0===-1||u0>=S)u0=S;if(y0<u0)S1++,T1=y0+g1.length;else if(u0<S){if(S1--,S1===0){v0=u0;break}T1=u0+M1.length}else break}if(v0!==-1&&v0<S){var f0=v0+M1.length;while(f0<D&&($[f0]===" "||$[f0]==="\t"))f0++;if(f0<D&&$[f0]===">"){var K1=f0+1,N0=K1;while(N0<D&&$[N0]!==`
`)N0++;if(N0<D)N0++;while(N0<D&&($[N0]===" "||$[N0]==="\t"))N0++;if(N0<D&&$[N0]==="<"&&!c($.slice(N0),M1)){var t1=w9($,N0);if(t1)S=K1}}}else if(v0=$.indexOf(M1,f),v0!==-1){var a9=$.slice(f,v0),Z0=I0||p9(a9);if(Z0){var J0=v0+M1.length;while(J0<D&&($[J0]===" "||$[J0]==="\t"))J0++;if(J0<D&&$[J0]===">"){var x1=I($,J0+1);S=x1}}}}var P=$.slice(f,S),v1=_.whitespaceBeforeAttrs+_.attrs,g=_.isClosing;let KZ=()=>{let r9=_.tagLower||_.tagName.toLowerCase(),T9=_.whitespaceBeforeAttrs+_.attrs;return{parsed:d1(T9,r9,_.tagName,X),raw:T9}};if(L==="type7"&&P.trim()===""){var G1=$.slice(Z,_.endPos),b9=G1.indexOf(`
`)!==-1;if(b9)return null;var n=_.endPos,R=I($,n);if(R<$.length)R++;var a=$.slice(Z,R);let QZ=KZ();return A9(_.tagName,a,S,QZ.parsed,QZ.raw,g,!1,X,J)}var S0=_.hasNewline,b0=!o0;if((S0||b0)&&L==="type7"){var Q0=_.endPos,u=$.slice(Z,Q0),z0=P,i=u+z0;let T9=KZ();return A9(_.tagName,i,S,T9.parsed,T9.raw,g,!1,X,J)}let UZ=_.tagLower||_.tagName.toLowerCase();var e0=d1(v1,UZ,_.tagName,X),E0={...e0};if(L==="type6"){var Y0=P,A1=P.indexOf("</"+UZ);if(A1>=0){var p=A1+2+_.tagName.length;while(p<P.length&&(P[p]===" "||P[p]==="\t"))p++;if(p<P.length&&P[p]===">")Y0=P.slice(0,A1)}if(p9(Y0))return IZ(_.tagName,_.tagName,v1,Y0,$.slice(Z,_.endPos),S,$,J,!1,X)}var m=P;if(m.length>0){if(m[0]==="\r"&&m[1]===`
`)m=m.slice(2);else if(m[0]===`
`||m[0]==="\r")m=m.slice(1)}var C0=m.split(`
`),R0=1/0;for(var O0=0;O0<C0.length;O0++){var A0=C0[O0];if(A0.trim().length===0)continue;var j=0;while(j<A0.length&&(A0[j]===" "||A0[j]==="\t"))j++;if(j<R0)R0=j}if(R0>0&&R0<1/0){var c0=[];for(var L0=0;L0<C0.length;L0++){var a0=C0[L0];if(a0.trim().length===0)c0.push(a0);else c0.push(a0.slice(R0))}m=c0.join(`
`)}return A9(_.tagName,m,S,E0,v1,g,L==="type6"?!0:!1,X,J)}}if(J.inline)return null;var D0=i$($,Z+1);if(!D0)return null;var Y1=D0.tagName;if(!U9(Y1))return null;let R9=D0.tagLower;var W0=D0.nextPos,C1=$.length;while(W0<C1&&H1($[W0]))W0++;var JZ=W0;while(W0<C1&&$[W0]!==">")W0++;if(W0>=C1)return null;let B$=$.slice(JZ,W0).trim(),L9=W0+1;while(L9<C1&&H1($[L9]))L9++;let rZ="</"+R9+">",XZ=$.toLowerCase().indexOf(rZ,L9);if(XZ!==-1){if($.slice(L9,XZ).trim())return null}W0++;let sZ=W0;while(W0<C1&&H1($[W0]))W0++;if(W0<C1&&$[W0]===`
`)W0++;let oZ=d1(B$,Y1,Y1,X);return{type:v.htmlSelfClosing,tag:Y1,attrs:oZ,endPos:sZ}}function l6($,Z){if($[Z]!=="<")return null;var J=$.length,X=!1,G=Z+1;if(Z+1<J&&$[Z+1]==="/")X=!0,G=Z+2;var Y=i$($,G);if(!Y)return null;var{tagName:K,tagLower:V,nextPos:U}=Y;if(U<J){var Q=$[U];if(Q===">"||Q==="/"){var H=Q===">"?U+1:U+2;if(Q==="/"&&(U+1>=J||$[U+1]!==">"))return null;var W=Q==="/",_=h9(K),D=!_9(V)&&!_;return{kind:"tag",tagNameLower:V,tagName:K,isClosing:X,isSelfClosing:W,hasNewline:!1,type6Candidate:_,type7Candidate:D,endPos:H,attrs:"",whitespaceBeforeAttrs:""}}}var F=U,z=!1;while(U<J){var j=$[U],q=N($,U);if(j===" "||j==="\t");else if(q===10||q===13)z=!0;else break;U++}var M=$.slice(F,U),O=U,A=!1,E="",w=0,x=!1,T=!1,y=0;while(O<J){var b=$[O],q=N($,O);if(y===1){if(b==='"'){if(O+1<J&&$[O+1]==='"')return null;y=0}O++}else if(y===2){if(b==="'")y=0;O++}else if(b==='"')y=1,O++;else if(b==="'")y=2,O++;else if(b==="{"||b==="}"&&w>0)w+=b==="{"?1:-1,O++;else if(b===">"&&w===0){if(O>U){var B=O-1;while(B>=U){var L=$[B];if(L!==" "&&L!=="\t")break;B--}if(B>=U&&$[B]==="/")x=!0,T=B<O-1}O++;break}else{if(b==="*"||b==="#"||b==="!"){var f=O+1;while(f<J){var S=$[f];if(S==="="||S===" "||S==="\t"||S===`
`||S==="\r"||S===">")break;f++}if(f<J&&$[f]==="=")return null}if(q===10||q===13)z=!0;O++}}if(O>J||$[O-1]!==">")return null;if(y===1||y===2)return null;if(w>0)return null;if(T)return null;var P=O-1;if(x)P--;var g=$.slice(U,P),h=x,R=-1,a=!1,i="",j0=!1;for(var B0=0;B0<g.length;B0++){var j=g[B0];if(a){if(j===i)a=!1,R=B0,i="",j0=!1}else if(j==='"'||j==="'")a=!0,i=j,j0=!1;else if(j==="=")j0=!0;else if(R!==-1&&B0===R+1){var q=j.charCodeAt(0);if(V9(q))return null}else if(j0&&!a&&(j==="*"||j==="#"||j==="!"))return null;else if(H1(j))j0=!1}var _0=h9(K),T0=!_9(V)&&!_0;return{kind:"tag",tagNameLower:V,tagName:K,isClosing:X,isSelfClosing:h,hasNewline:z,type6Candidate:_0,type7Candidate:T0,endPos:O,attrs:g,whitespaceBeforeAttrs:M}}function V$($,Z){if(Z>=$.length||$[Z]!=="<")return null;var J=$.length;if(Z+1>=J)return null;var X=$[Z+1];if(X==="!"){if(Z+4<=J&&$.slice(Z,Z+4)==="<!--"){var G=Z+4;if(G<J&&$[G]===">")return{kind:"comment",hasNewline:!1,endPos:G+1,text:$.slice(Z,G+1),raw:!0};if(G+1<J&&$[G]==="-"&&$[G+1]===">")return{kind:"comment",hasNewline:!1,endPos:G+2,text:$.slice(Z,G+2),raw:!0};while(G+2<J){if($.slice(G,G+3)==="-->")return{kind:"comment",hasNewline:!1,endPos:G+3,text:$.slice(Z,G+3),raw:!0};G++}return null}if(Z+9<=J&&$.slice(Z,Z+9)==="<![CDATA["){var G=Z+9;while(G+2<J){if($.slice(G,G+3)==="]]>")return{kind:"cdata",hasNewline:!1,endPos:G+3,text:$.slice(Z,G+3),raw:!0};G++}return null}if(Z+2<J&&V9($.charCodeAt(Z+2))){var G=Z+2;while(G<J&&$[G]!==">")G++;if(G>=J)return null;return{kind:"declaration",hasNewline:!1,endPos:G+1,text:$.slice(Z,G+1),raw:!0}}return null}if(X==="?"){var G=Z+2;while(G+1<J){if($.slice(G,G+2)==="?>")return{kind:"pi",hasNewline:!1,endPos:G+2,text:$.slice(Z,G+2),raw:!0};G++}return null}return l6($,Z)}function h$($,Z){if(Z>=$.length)return!1;var J=$[Z];return J==="="||J==="-"||J==="_"||J==="*"||J==="#"||J===">"||J==="`"||J==="~"||J==="["||J>="0"&&J<="9"}function Y$($,Z){if(Z>=$.length)return!1;var J=$[Z];return J==='"'||J==="'"||J==="("}function d6($,Z,J){var X=$.length;if(Z>=X||$[Z]!==J)return null;Z++;var G=Z,Y=!1;while(Z<X&&$[Z]!==J){var K=$.charCodeAt(Z);if(K===d){if(Y)return null;Y=!0,Z++}else if(K===U0)if(Z+1<X&&$.charCodeAt(Z+1)===d){if(Y)return null;Y=!0,Z+=2}else Y=!1,Z++;else{if(Y=!1,K===h1&&Z+1<X)Z++;Z++}}if(Z>=X)return null;return{value:$.slice(G,Z),endPos:Z+1}}function i6($,Z){var J=$.length;if(Z>=J||$[Z]!=="(")return null;Z++;var X=Z,G=1,Y=!1;while(Z<J&&G>0){var K=$.charCodeAt(Z);if(K===d){if(Y)return null;Y=!0,Z++}else if(K===U0)if(Z+1<J&&$.charCodeAt(Z+1)===d){if(Y)return null;Y=!0,Z+=2}else Y=!1,Z++;else{if(Y=!1,K===h1&&Z+1<J)Z++;else if(K===HZ)G++;else if(K===FZ)G--;Z++}}if(G!==0)return null;return{value:$.slice(X,Z-1),endPos:Z}}function c6($,Z){var J=$.length,X=Z;while(X<J){var G=X===0||$[X-1]===`
`,Y=$.charCodeAt(X);if(Y===d&&X>Z){var K=X+1;if(K<J&&$.charCodeAt(K)===U0)K++;if(K<J&&$.charCodeAt(K)===d){var V=K+1;while(V<J&&($[V]===" "||$[V]==="\t"))V++;var U=V-(X+1);if($.charCodeAt(X+1)===U0)U--;if(V<J&&$.charCodeAt(V)!==d&&$.charCodeAt(V)!==U0&&U<4)return X}}if(G&&c($,"[^",X)){var Q=X+2;while(Q<J&&$[Q]!=="]")Q++;if(Q<J&&$[Q]==="]"&&Q+1<J&&$[Q+1]===":")return X}X++}return J}function a6($,Z,J){let X=$.length,G=Z,Y=G<X&&$[G]==="<";if(Y)G++;let K=G,V=K;if(K>=X){if(!Y)return null;V=K}else if(J>0&&K<X&&$[K]===`
`)return null;else while(V<X){if(Y&&$[V]===">")break;if($[V]===`
`){let y=V+1;if(y>=X)break;if(y<X&&$[y]===`
`)break;let b=y;while(b<X&&($[b]===" "||$[b]==="\t"))b++;if(b<X&&Y$($,b))break;if(b<X&&$[b]==="[")break;if(b<X){let B=$[b];if(h$($,b))break;if(B>="a"&&B<="z"){let L=b+1;while(L<X&&L<b+32&&($[L]>="a"&&$[L]<="z"||$[L]>="A"&&$[L]<="Z"||$[L]>="0"&&$[L]<="9"||$[L]==="+"||$[L]==="."||$[L]==="-"))L++;if(L<X&&$[L]===":");else break}}V=b;continue}if(!Y&&($[V]===" "||$[V]==="\t")){let y=V+1;while(y<X&&($[y]===" "||$[y]==="\t"))y++;if(y<X&&Y$($,y))break;if(y<X&&$[y]===`
`){let b=y+1;if(b<X&&$[b]===`
`)break;let B=b;while(B<X&&($[B]===" "||$[B]==="\t"))B++;if(B<X&&Y$($,B))break}}V++}if(Y&&(V>=X||$[V]!==">"))return null;let U=$.slice(K,V),Q=[],H=0;for(let y=0;y<=U.length;y++)if(y===U.length||U[y]===`
`){let b=U.slice(H,y);if(b=b.trim(),b.length>0||Q.length===0){if(Q.push(b),y<U.length)Q.push(`
`)}else if(y<U.length)Q.push(`
`);H=y+1}U=Q.join(""),U=U.trim(),G=Y?V+1:V;var W=!1;if(G<X&&$[G]===`
`){var _=G+1,D=_;while(D<X&&($[D]===" "||$[D]==="\t"))D++;if(D<X){let y=$[D];if(h$($,D))W=!0;if(!W&&y!=="="&&y!=="-"){var F=I($,D);if(F<X){var z=k($,F),j=z;while(j<X&&($[j]===" "||$[j]==="\t"))j++;if(j<X){var q=$[j];if(q==="="||q==="-")W=!0}}}}}if(!W&&G<X&&Y$($,G))return null;let M=0;while(G<X&&!W){let y=$[G];if(y===`
`){if(M++,M>1)break;G++;var O=G;if(G=g0($,G),G<X&&Q9($[G])&&$[G]!==`
`){G=O-1;break}if(G<X){let b=$[G];if(h$($,G)){W=!0,G=O-1;break}}}else if(y===" "||y==="\t")G++;else if(Q9(y))break;else break}let A=void 0;if(G<X){let y=$[G];var E=y==="("?i6($,G):y==='"'||y==="'"?d6($,G,y):null;if(E===null&&(y==='"'||y==="'"||y==="("))return null;if(E){A=E.value,G=E.endPos;var w=G;while(w<X&&($[w]===" "||$[w]==="\t"))w++;if(w<X&&$[w]!==`
`&&$[w]!=="\r")return null;G=w}}if(G=g0($,G),G<X&&$[G]!==`
`){var x=G;while(x<X&&$[x]!==`
`){if($[x]!==" "&&$[x]!=="\t")return null;x++}}if(A===void 0&&G<X&&$[G]!==`
`){var T=G;while(T<X&&$[T]!==`
`){if($[T]!==" "&&$[T]!=="\t")return null;T++}}return{endPos:G<X&&$[G]===`
`?G+1:G,target:U,title:A}}function r6($,Z){let J=Z,X=c6($,Z),G=X<$.length&&$[X]===`
`&&$[X+1]===`
`,Y=X,K=Z;var V=[];let U=K,Q=0,H=!1;while(U<Y){let F=I($,U);if(F>Y)F=Y;if(Q===0){let z=F;while(z>U&&($[z-1]===" "||$[z-1]==="\t"))z--;let j=$.slice(U,z);V.push(j),H=j.length===0}else{let z=0,j=U;while(j<F&&j<U+4&&$[j]===" ")z++,j++;let q=!1;for(let O=U;O<F;O++)if($[O]!==" "&&$[O]!=="\t"&&$[O]!=="\r"){q=!0;break}let M=!q;if(z>=4&&H)V.push($.slice(U,F));else if(z===4&&!H)V.push($.slice(U+4,F));else V.push($.slice(U,F));H=M}if(F<Y){let z=N($,F);if(z===U0||z===d)V.push(`
`),U=k($,F);else U=Y}else U=Y;Q++}let W=V.join("");if(G)W=W.replace(/\n$/,"");var _=W.length;while(_>0){var D=W[_-1];if(D===`
`||D===" ")_--;else break}if(_<W.length)W=W.slice(0,_);return{endPos:X,target:W,title:void 0}}function y9($,Z,J,X,G){if($[Z]!=="[")return null;var Y=Z+1<$.length&&$[Z+1]==="^";if(G?!Y:Y)return null;var K=Z;while(K>0&&$[K-1]!==`
`)K--;if(t($,K,Z).spaceEquivalent>=4||J.inline)return null;var V=Z+(G?2:1),U=$.length,Q=N6($,V,U,"]");if(Q===-1)return null;var H=$.slice(V,Q);if(H.length>999)return null;var W=!1,_=!1,D=!1;for(var F=0;F<H.length;F++){var z=H[F];if(z==="\\"&&F+1<H.length){F++;continue}var j=N(z);if(j===k1||j===O9)_=!0;else if(j===d||j===U0)D=!0;else if(j!==C&&j!==l)W=!0}if(!W||_)return null;var q=Q+1;if(D){var M=N($,V),O=N($,Q-1);if(M===d||M===U0||O===d||O===U0||q>=U||$[q]!==":")return null}else if(q>=U||$[q]!==":"){if(q=g0($,q),q<U&&N($,q)===d)q=g0($,q+1);if(q>=U||$[q]!==":")return null}q++;var A=0;while(q<U){var E=N($,q);if(E===d){if(++A>1)break;q=g0($,q+1)}else if(E===C||E===l)q++;else break}let w=G?r6($,q):a6($,q,A);if(!w)return null;let x=CZ(H),T=J.refs||{},y=G?`^${x}`:x;if(!T[y])T[y]={target:_$(w.target.trim()),title:w.title?_$(w.title):void 0},J.refs=T;return{type:G?v.footnote:v.ref,endPos:w.endPos}}function iZ($,Z,J){var X=[],G=J===null?0:J+1;while(G<Z.length){var Y=Z[G];if(!Y||Y.type!=="*"&&Y.type!=="_"&&Y.type!=="~"&&Y.type!=="="){G++;continue}if(!Y.canClose||!Y.active){G++;continue}var K=Y.type==="*"?0:Y.type==="_"?1:Y.type==="~"?2:3,V=K*6+Y.length%3*2+(Y.canOpen?1:0),U=X[V]!==void 0?X[V]:J===null?-1:J,Q=-1,H=Y.type,W=Y.inAnchor,_=Y.canOpen,D=Y.length,F=D%3;for(var z=G-1;z>U;z--){var j=Z[z];if(!j||!j.active||j.type!==H||!j.canOpen||j.inAnchor!==W)continue;var q=j.length;if(!_&&!j.canClose||F===0||(q+D)%3!==0){Q=z;break}}if(Q>=0){var M=Z[Q],q=M.length,O=q>=2&&D>=2,A=O?2:1;if(A>q||A>D){G++;continue}var E=M.nodeIndex,w=Y.nodeIndex,x=E+1,T=w,y=$.slice(x,T);if(y.length>0){var b=T-x;$.splice(x,b);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>x)Z[B].nodeIndex-=b;if(w>x)w-=b}var L=M.type==="~"?"del":M.type==="="?"mark":O?"strong":"em",f={type:v.textFormatted,tag:L,children:y},S=$[E];if(!S||!S.text){M.active=Y.active=!1;continue}var P=S.text.length<=A;if(P){$.splice(E,1);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>E)Z[B].nodeIndex--;if(w>E)w--}else S.text=S.text.slice(A);var g=$[w];if(!g||!g.text){M.active=Y.active=!1;continue}var h=g.text.length<=A;if(h){$.splice(w,1);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>w)Z[B].nodeIndex--}else g.text=g.text.slice(A);var R=P?E<w?w-1:E:E+1;if(R<0||R>$.length)R=R<0?0:$.length;$.splice(R,0,f);for(var B=0;B<Z.length;B++)if(Z[B].nodeIndex>=R)Z[B].nodeIndex++;for(var B=Q+1;B<G;B++)Z[B].active=!1;if(P)M.active=!1;else if(M.length-=A,M.length===0)M.active=!1;if(h)Y.active=!1,G++;else if(Y.length-=A,Y.length===0)Y.active=!1,G++}else{if(X[V]=G-1,!Y.canOpen)Y.active=!1;G++}}var a=0;for(var z=0;z<Z.length;z++)if(Z[z].active)Z[a++]=Z[z];Z.length=a}function c9($,Z,J){var X=[],G=0,Y=-3,K=Y;if(Z.inline)return i1($,0,$.length,Z,J);if(G===0&&$.startsWith("---")){var V=k6($,G);if(V)X.push(V),G=V.endPos}while(G<$.length){while(G<$.length&&$[G]===`
`)G++;if(G>=$.length)break;K=Y;let W=$[G],_=d9($,G,Z,J);if(_){let q=_.type;if(q===v.codeBlock){var U=W==="`"||W==="~";if(!U&&(W===" "||W==="\t")){let M=I($,G),O=t($,G,M);U=O.spaceEquivalent<=3&&G+O.charCount<$.length&&($[G+O.charCount]==="`"||$[G+O.charCount]==="~")}}else if(q===v.breakThematic);else if(q===v.blockQuote);else if(q===v.heading);else if(q===v.orderedList||q===v.unorderedList);else if(q===v.table);else if(q===v.htmlComment);else if(q===v.htmlBlock);else if(q===v.ref);if(_.type===v.htmlComment){X.push(_);let M=G;G=_.endPos;let O=I($,M);if(G<O){let A=$.slice(G,O);if(A.trim().length>0)X.push({type:v.text,text:A});if(G=O,G<$.length&&$[G]===`
`)G++}continue}if(_.type===v.htmlBlock||_.type===v.htmlSelfClosing)if(_.type===v.htmlSelfClosing&&_.isClosingTag===!0&&!Z.inline&&!Z.inHTML);else{X.push(_),G=_.endPos;continue}else{X.push(_),G=_.endPos;continue}}let D=K!==Y?K:G;if(K===Y){if(H1(W)){let q=I($,G),M=t($,G,q),O=G+M.charCount;if(M.spaceEquivalent<=3&&O<$.length&&$[O]==="[")D=O;else D=-1}else if(W==="[")D=G;else D=-1;K=D}if(D>=0&&D+1<$.length&&$[D+1]==="^")D=-1;if(D>=0){let q=y9($,D,Z,J,!1);if(q){X.push(q),G=q.endPos;continue}let M=L6($,D,G===0);if(M.shouldSkip){G=M.newPos;continue}}let F=kZ($,G,Z,J);if(F){X.push(F),G=F.endPos;continue}let z=G;if(H1($[z])){let q=I($,G),M=t($,G,q);z=G+M.charCount}if(z<$.length&&$[z]==="["&&z+1<$.length&&$[z+1]==="^"){let q=y9($,z,Z,J,!0);if(q){G=q.endPos;continue}}let j=a$($,G,Z,J);if(j){X.push(j),G=j.endPos;continue}G++}let Q=Z.refs||{},H={};for(let W in Q)H[W]=Q[W];if($$(H))return[{type:v.refCollection,refs:H},...X];return X}function A$($,Z,J){var X=0,G=!0;let Y=$.length;while(X<Y){var K=0;while(X<Y&&N($,X)===d)K++,X++;if(X>=Y)break;if(K>0)G=!0;let O=N($,X);if(O===$1||O===e1){var V=$Z($,X,{inline:!1},J);if(V){X=V.endPos,G=!0;continue}}var U=X,Q=0;while(U<Y&&Q<4){let A=N($,U);if(A===C)Q++,U++;else if(A===l)Q+=4-Q%4,U++;else break}if(Q<4&&U<Y&&N($,U)===k1&&G)if(U+1<Y&&N($,U+1)===H9){G=!1;var q=I($,X);X=q>=Y?Y:k($,q);continue}else{var H=y9($,U,{inline:!1,refs:Z},J,!1);if(H){X=H.endPos,G=!0;continue}var q=I($,X),W=$.indexOf(":",U+1);if(W===-1||W>=q){var _=t($,X,q);if(!w1($,X,q)&&O!==S9&&O!==m1&&O!==j1&&O!==c1&&_.spaceEquivalent<4)G=!1}X=q>=Y?Y:k($,q);continue}if(O===m1&&G){var D=X,F=[];while(D<Y){var q=I($,D),z=D;while(z<q){let E=N($,z);if(E===C||E===l)z++;else break}if(z>=q||N($,z)!==m1)break;var j=z+1;if(j<q&&(N($,j)===C||N($,j)===l))j++;F.push($.slice(j,q)),D=k($,q)}if(F.length){A$(F.join(`
`),Z,J),X=D,G=!0;continue}}var q=I($,X);if(q>=Y)X=Y;else{var M=w1($,X,q),_=t($,X,q);X=k($,q),G=O===S9||O===m1||O===j1||O===c1||M||_.spaceEquivalent>=4}}}function s6($,Z){if($.charCodeAt(0)===65279)$=$.slice(1);$=l1($);let X={...{inline:!1,refs:{}}},G={...Z,slugify:Z?.slugify?(K)=>Z.slugify(K,B1):B1,sanitizer:Z?.sanitizer||K9,tagfilter:Z?.tagfilter!==!1};if(!X.inline)A$($,X.refs||{},G);return c9($,X,G)}var t6=/^\n+/,aZ=I1.createContext(void 0);function e6($){let Z=!1;for(let X=0;X<$.length;X++){let G=$.charCodeAt(X);if(G>127||G===h1||G===$1){Z=!0;break}}if(!Z)return $;let J="";for(let X=0;X<$.length;X++){let G=$[X];if(G==="%"&&X+2<$.length&&/[0-9A-Fa-f]/.test($[X+1])&&/[0-9A-Fa-f]/.test($[X+2]))J+=$[X]+$[X+1]+$[X+2],X+=2;else if(G.charCodeAt(0)===h1)J+="%5C";else if(G.charCodeAt(0)===$1)J+="%60";else{let Y=G.charCodeAt(0);J+=Y>127?encodeURIComponent(G):G}}return J}function $5($,Z,J,X,G,Y,K,V){let U=V.styles||{};switch($.type){case v.blockQuote:{let Q=$;return X(k0,{key:J.key,style:U.blockquote},Z(Q.children,J))}case v.breakLine:return`
`;case v.breakThematic:return X(k0,{key:J.key,style:U.thematicBreak});case v.frontmatter:if(V.preserveFrontmatter){let Q=$;return X(d0,{key:J.key,style:U.codeBlock},Q.text)}return null;case v.codeBlock:{let Q=$;return X(k0,{key:J.key,style:U.codeBlock},X(d0,{style:U.codeInline},Q.text))}case v.codeInline:{let Q=$;return X(d0,{key:J.key,style:U.codeInline},Q.text)}case v.footnoteReference:{let Q=$,H=G(Q.target,"a","href");if(!H)return null;return X(d0,{key:J.key,onPress:()=>{if(V.onLinkPress)V.onLinkPress(H,Q.text);else cZ.openURL(H).catch(()=>{})},style:U.link},X(d0,{style:{fontWeight:"bold"}},Q.text))}case v.gfmTask:{let Q=$;return X(d0,{key:J.key,style:U.gfmTask},Q.completed?"[x]":"[ ]")}case v.heading:{let Q=$,H=`heading${Q.level}`,W=U[H];return X(d0,{key:J.key,style:W},Z(Q.children,J))}case v.htmlBlock:{let Q=$;if(V.tagfilter&&Z$(Q.tag)){let H="rawText"in Q&&typeof Q.rawText==="string"?Q.rawText:`<${Q.tag}>`;return X(d0,{key:J.key},H)}if(Q.rawText&&Q.verbatim){let _=function(q){if(q.type===v.htmlSelfClosing&&"isClosingTag"in q&&q.isClosingTag)return[];if(q.type===v.paragraph)return q.children?.flatMap(_)||[];if(q.type===v.text)return q.text?.trim()?[q]:[];if(q.type===v.htmlBlock&&q.children)return[{...q,children:q.children?.flatMap(_)}];return[q]},H=Q.tag.toLowerCase();if(_9(H)&&!/<[a-z][^>]{0,100}>/i.test(Q.rawText)){let q=Q.rawText.replace(new RegExp("\\s*</"+H+">\\s*$","i"),"");if(V.tagfilter)q=J$(q);return X(Q.tag,{key:J.key,...Q.attrs},q)}if(/<\/?pre\b/i.test(Q.rawText)){let q=V.tagfilter?J$(Q.rawText):Q.rawText;return X(d0,{key:J.key,style:U.codeBlock},q)}if(Q.children&&Q.children.length>0)return X(Q.tag,{key:J.key,...Q.attrs},Z(Q.children.flatMap(_),J));let D=Q.rawText.replace(/>\s+</g,"><").replace(/\n+/g," ").trim();if(new RegExp(`^<${Q.tag}(\\s[^>]*)?>(\\s*</${Q.tag}>)?$`,"i").test(D))return X(Q.tag,{key:J.key,...Q.attrs});let j=c9(D,{inline:!1,refs:K,inHTML:!1},{slugify:(q)=>Y(q,B1),sanitizer:(q,M,O)=>G(q,M,O),tagfilter:!0});return X(Q.tag,{key:J.key,...Q.attrs},Z(j.flatMap(_),J))}return X(Q.tag,{key:J.key,...Q.attrs},Q.children?Z(Q.children,J):"")}case v.htmlSelfClosing:{let Q=$;if(V.tagfilter&&Z$(Q.tag)){let H="rawText"in Q&&typeof Q.rawText==="string"?Q.rawText:`<${Q.tag} />`;return X(d0,{key:J.key},H)}return X(Q.tag,{key:J.key,...Q.attrs})}case v.image:{let Q=$,H=G(Q.target,"img","src");if(!H)return null;return X("img",{key:J.key,source:{uri:H},accessibilityLabel:Q.alt||void 0,style:U.image})}case v.link:{let Q=$,H={textDecorationLine:"underline"},W=U.link?[H,U.link]:H,_={key:J.key,style:W};if(Q.target!=null){let D=e6(Q.target);if(_.onPress=()=>{V.onLinkPress?V.onLinkPress(D,Q.title):cZ.openURL(D).catch(()=>{})},V.onLinkLongPress)_.onLongPress=()=>V.onLinkLongPress(D,Q.title)}return X("a",_,Z(Q.children,J))}case v.table:{let Q=$;return X(k0,{key:J.key,style:U.table},X(k0,{style:U.tableHeader},X(k0,{style:{flexDirection:"row"}},Q.header.map(function(W,_){return X(k0,{key:_,style:[U.tableHeaderCell,Q.align[_]!=null?{alignItems:Q.align[_]==="center"?"center":Q.align[_]==="right"?"flex-end":"flex-start"}:{}]},Z(W,J))}))),X(k0,{},Q.cells.map(function(W,_){return X(k0,{key:_,style:{flexDirection:"row"}},W.map(function(F,z){return X(k0,{key:z,style:[U.tableCell,Q.align[z]!=null?{alignItems:Q.align[z]==="center"?"center":Q.align[z]==="right"?"flex-end":"flex-start"}:{}]},Z(F,J))}))})))}case v.text:return $.text;case v.textFormatted:{let Q=$,W={em:{fontStyle:"italic"},strong:{fontWeight:"bold"},del:{textDecorationLine:"line-through"}}[Q.tag],_=U[Q.tag]||W;return X(d0,{key:J.key,style:_},Z(Q.children,J))}case v.orderedList:case v.unorderedList:{let Q=$,H=$.type===v.orderedList,W=H?U.listOrdered:U.listUnordered;return X(k0,{key:J.key,style:W},Q.items.map((_,D)=>{let F=H&&"start"in Q&&Q.start!=null?Q.start+D:D+1,z=H?`${F}.`:"•",j=H?U.listItemNumber:U.listItemBullet;return X(k0,{key:D,style:{flexDirection:"row"}},X(d0,{style:j},z+" "),X(k0,{style:U.listItem},Z(_,J)))}))}case v.paragraph:return X("p",{key:J.key,style:U.paragraph},Z($.children,J));case v.ref:return null;default:return null}}var Z5=($,Z,J,X,G,Y)=>{let K=(Q,H,W)=>{let _=(F,z)=>{let j=Array.isArray(F)?F:[F];return H(j,z||W)},D=()=>$5(Q,_,W,Z,J,X,G,Y);return $?$(D,Q,H,W):D()},V=(Q)=>Q.map((H)=>("text"in H)?H.text:""),U=(Q,H={})=>{let W=Array.isArray(Q)?Q:[Q],_=(H.renderDepth||0)+1;if(_>2500)return V(W);H.renderDepth=_;let D=H.key,F=[],z=!1;for(let j=0;j<W.length;j++){H.key=j;let q=K(W[j],U,H),M=typeof q==="string";if(M&&z)F[F.length-1]+=q;else if(q!==null)if(Array.isArray(q))for(let O=0;O<q.length;O++)F.push(q[O]);else F.push(q);z=M}return H.key=D,H.renderDepth=_-1,F.length===1?F[0]:F};return U},ZZ=($,Z,J)=>{if(!$||typeof Z!=="string")return J;let X=Z.split("."),G=$;for(let Y=0;Y<X.length;Y++)if(G=G?.[X[Y]],G===void 0)return J;return G||J},J5=($,Z)=>{if(!Z||typeof $!=="string")return $;let J=ZZ(Z,$,void 0);if(!J)return $;if(typeof J==="function"||typeof J==="object"&&J!==null&&"render"in J)return J;return ZZ(Z,`${$}.component`,$)},X5=($)=>{let Z=$.toLowerCase();if(Z==="img")return n6;if(Z==="div"||Z==="section"||Z==="article"||Z==="aside"||Z==="header"||Z==="footer"||Z==="main"||Z==="nav"||Z==="figure"||Z==="figcaption"||Z==="blockquote"||Z==="ul"||Z==="ol"||Z==="li"||Z==="table"||Z==="thead"||Z==="tbody"||Z==="tr"||Z==="th"||Z==="td")return k0;if(_9(Z))return k0;return d0};function G5($,Z){let J={...Z||{}};J.overrides=J.overrides||{};let X=J.slugify||B1,G=J.sanitizer||K9,Y=J.createElement||I1.createElement;function K(z,j,...q){if(typeof z!=="string")return Y(z,j,...q);let M=ZZ(J.overrides||{},`${z}.props`,{}),O=J5(z,J.overrides||{}),A={...j,...M,style:j.style||M.style||void 0};if(typeof O==="function"||typeof O==="object"&&O!==null)return Y(O,A,...q);let E=X5(O);return Y(E,A,...q)}let V={slugify:(z)=>X(z,B1),sanitizer:(z,j,q)=>G(z,j,q),tagfilter:J.tagfilter!==!1,disableAutoLink:J.disableAutoLink,disableParsingRawHTML:J.disableParsingRawHTML,enforceAtxHeadings:J.enforceAtxHeadings},U=$[0]&&$[0].type===v.refCollection?$[0].refs:{},Q=Z5(J.renderRule,K,(z,j,q)=>G(z,j,q),X,U,J),H=Q($,{inline:J.forceInline,refs:U}),W=Array.isArray(H)?H:[H],_=[];for(let z in U)if(z.charCodeAt(0)===H9)_.push({identifier:z,footnote:U[z].target});if(_.length)W.push(Y(k0,{key:"footer"},_.map(function(j){let q=j.identifier.charCodeAt(0)===H9?j.identifier.slice(1):j.identifier,M=c9(j.footnote,{inline:!0,refs:U},V),O=Q(M,{inline:!0,refs:U}),A=typeof O==="string"?Y(d0,{},O):O;return Y(k0,{key:j.identifier},Y(d0,{},q+": "),A)})));if(J.wrapper===null)return W;let D=J.wrapper||(J.forceInline?d0:k0),F;if(W.length>1||J.forceWrapper)F=W;else if(W.length===1){let z=W[0];if(typeof z==="string")return Y(d0,{key:"outer",...J.wrapperProps},z);return z}else return null;return Y(D,{key:"outer",...J.wrapperProps},F)}function Y5($="",Z={}){let J={...Z||{}};J.overrides=J.overrides||{};let X=J.slugify||B1,G=J.sanitizer||K9;function Y(U){let Q=J.forceInline||!J.forceBlock&&!T$.test(U),H={slugify:(D)=>X(D,B1),sanitizer:(D,F,z)=>G(D,F,z),tagfilter:J.tagfilter!==!1,disableAutoLink:J.disableAutoLink,disableParsingRawHTML:J.disableParsingRawHTML,enforceAtxHeadings:J.enforceAtxHeadings};if(!Q)A$(U,K,H);let W=U;if(!Q){let D=W.length;while(D>0&&(W[D-1]===`
`||W[D-1]==="\r"))D--;W=W.slice(0,D),W=`${W.replace(t6,"")}

`}let _=c9(Q?U:W,{inline:Q,refs:K},H);return G5(_,{...J,forceInline:Q})}let K={};return Y($)}var v5=({options:$,children:Z})=>{return I1.createElement(aZ.Provider,{value:$},Z)},K5=({children:$,options:Z,...J})=>{let X=I1.useContext(aZ),G=I1.useMemo(()=>{var V=Object.assign({},X,Z);return V.styles=Object.assign({},X?.styles,Z?.styles),V.overrides=Object.assign({},X?.overrides,Z?.overrides),V.wrapperProps=Object.assign({},X?.wrapperProps,Z?.wrapperProps,J),V},[X,Z,J]),Y=$===null||$===void 0?"":$;return I1.useMemo(()=>Y5(Y,G),[Y,G])},N5=K5;export{B1 as slugify,K9 as sanitizer,s6 as parser,N5 as default,Y5 as compiler,G5 as astToNative,v as RuleType,v5 as MarkdownProvider,aZ as MarkdownContext,K5 as Markdown};

//# debugId=E05365ED9C11FDF264756E2164756E21
//# sourceMappingURL=native.js.map
