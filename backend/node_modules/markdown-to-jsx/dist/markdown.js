var sZ=Object.defineProperty;var oZ=($,Z)=>{for(var J in Z)sZ($,J,{get:Z[J],enumerable:!0,configurable:!0,set:(X)=>Z[J]=()=>X})};var nZ={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},H=nZ;var HZ={};oZ(HZ,{startsWith:()=>c,slugify:()=>d9,skipWhitespace:()=>g0,shouldFilterTag:()=>_6,sanitizer:()=>w$,parseFrontmatterBounds:()=>A$,normalizeInput:()=>m1,normalizeCRLF:()=>Q6,isVoidElement:()=>k1,isUnicodeWhitespace:()=>J9,isUnicodePunctuation:()=>c9,isAlnumCode:()=>l9,isASCIIWhitespace:()=>S9,isASCIIPunctuation:()=>K6,inlineCharTypeTable:()=>T9,includes:()=>X6,htmlAttrsToJSXProps:()=>Z6,hasKeys:()=>a9,getTag:()=>r9,getOverrideProps:()=>s9,get:()=>b$,findLineEnd:()=>I,extractPlainText:()=>DZ,endsWith:()=>i9,decodeEntityReferences:()=>u9,charClassTable:()=>j9,applyTagFilterToText:()=>q6,VOID_ELEMENTS:()=>v$,SHOULD_RENDER_AS_BLOCK_R:()=>J6,SANITIZE_R:()=>q9,NAMED_CODES_TO_UNICODE:()=>$6,HTML_TO_JSX_MAP:()=>jZ,HTML_CHAR_CODE_R:()=>qZ,ATTRIBUTES_TO_SANITIZE:()=>B$});import{NAMED_CODES_TO_UNICODE as tZ,decodeEntity as eZ}from"#entities";var C=32,l=9,K0=13,d=10,_1=96,s1=126,I1=91,O$=94,f1=62,B9=35,v5=37,q1=45,u1=61,U9=92,N9=42,o1=95,z9=60,b9=64,Q9=93,_9=33,y9=38,R9=58,A5=70,l1=102,d1=104,S1=119,p9=116,F$=112,ZZ=115,JZ=160,XZ=12;var L9=46,n1=47;var w5=34,GZ=43,YZ=124,VZ=123;var KZ=40,UZ=41,W$=120,M$=88,t1=48,e1=57,g1=65,C1=90,i1=97,c1=122,G1=128,zZ=32;function A$($){if(!c($,"---"))return null;let Z=3;while(Z<$.length&&($[Z]===" "||$[Z]==="\t"))Z++;if(Z<$.length&&$[Z]==="\r")Z++;if(Z>=$.length||$[Z]!==`
`)return null;Z++;let J=!1;while(Z<$.length){let X=Z;while(Z<$.length&&$[Z]!==`
`&&$[Z]!=="\r")Z++;if(Z>=$.length)break;let G=Z;if($[Z]==="\r")Z++;if(Z<$.length&&$[Z]===`
`)Z++;if(c($,"---",X))return{endPos:Z,hasValidYaml:J};let Y=$.indexOf(":",X);if(Y!==-1&&Y<G)J=!0}return null}var $6=tZ,qZ=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,jZ={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"};function Z6($){var Z={};for(var J in $){var X=J.toLowerCase(),G=jZ[X];Z[G||J]=$[J]}return Z}var J6=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/;function u9($){if($.indexOf("&")===-1)return $;return $.replace(qZ,(Z,J)=>{var X=eZ(J);if(X)return X;if(J[0]==="#"){var G=J[1]==="x"||J[1]==="X"?parseInt(J.slice(2),16):parseInt(J.slice(1),10);if(G===0||G>=55296&&G<=57343||G>1114111)return"�";return G<=65535?String.fromCharCode(G):String.fromCharCode(55296+(G-65536>>10),56320+(G-65536&1023))}return Z})}var q9=/(javascript|vbscript|data(?!:image)):/i;function w$($){if(q9.test($))return null;if($.indexOf("%")===-1)return $;try{let Z=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(q9.test(Z))return null}catch(Z){return null}return $}var c0={},t0,x0;t0=[192,193,194,195,196,197,224,225,226,227,228,229,230,198];for(x0=0;x0<t0.length;x0++)c0[t0[x0]]="a";c0[231]=c0[199]="c";c0[240]=c0[208]="d";t0=[200,201,202,203,233,232,234,235];for(x0=0;x0<t0.length;x0++)c0[t0[x0]]="e";t0=[207,239,206,238,205,237,204,236];for(x0=0;x0<t0.length;x0++)c0[t0[x0]]="i";c0[209]=c0[241]="n";t0=[248,216,339,338,213,245,212,244,211,243,210,242];for(x0=0;x0<t0.length;x0++)c0[t0[x0]]="o";t0=[220,252,219,251,218,250,217,249];for(x0=0;x0<t0.length;x0++)c0[t0[x0]]="u";c0[376]=c0[255]=c0[221]=c0[253]="y";function l9($){return $>=t1&&$<=e1||$>=g1&&$<=C1||$>=i1&&$<=c1}function d9($){var Z=[];for(var J=0;J<$.length;J++){var X=$.charCodeAt(J);if(l9(X))if(X>=g1&&X<=C1)Z.push(String.fromCharCode(X+zZ));else Z.push($[J]);else if(X===C||X===q1)Z.push("-");else{var G=c0[X];if(G)Z.push(G)}}return Z.join("")}function X6($,Z){return $.indexOf(Z)!==-1}function c($,Z,J){return $.startsWith(Z,J)}function i9($,Z,J){return $.startsWith(Z,(J===void 0?$.length:J)-Z.length)}var v$=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","animateTransform","set"]);function k1($){let Z=$.toLowerCase();if(v$.has(Z))return!0;let J=Z.indexOf(":");if(J!==-1)return Z=Z.slice(J+1),v$.has(Z);return!1}var B$=["src","href","data","formAction","srcDoc","action"],N$=1,Z9=2,_Z=1,G6=2,Y6=3,V6=4,j9=function(){let $=new Uint8Array(128),Z;$[l]=$[d]=$[XZ]=$[K0]=$[C]=N$;for(Z=_9;Z<=n1;Z++)$[Z]=Z9;for(Z=R9;Z<=b9;Z++)$[Z]=Z9;for(Z=I1;Z<=_1;Z++)$[Z]=Z9;for(Z=VZ;Z<=s1;Z++)$[Z]=Z9;return $}(),T9=function(){let $=new Uint8Array(128);return $[U9]=G6,$[I1]=V6,$[N9]=$[o1]=$[s1]=$[u1]=Y6,$[_1]=$[z9]=$[b9]=$[Q9]=$[d]=$[C]=$[_9]=_Z,$[l1]=$[d1]=$[S1]=_Z,$}();function K6($){return $<G1&&(j9[$]&Z9)!==0}function S9($){return $<G1&&(j9[$]&N$)!==0}var U6=/[\p{P}\p{S}]/u,z6=/\p{Zs}/u;function J9($){if(!$)return!0;let Z=$.charCodeAt(0);return Z<G1?(j9[Z]&N$)!==0:z6.test($)}function c9($){if(typeof $==="number")return $<G1&&(j9[$]&Z9)!==0;if(!$)return!1;let Z=$.charCodeAt(0);return Z<G1?(j9[Z]&Z9)!==0:U6.test($)}function I($,Z){let J=$.indexOf(`
`,Z);if(J===-1)return $.length;if(J>0&&$.charCodeAt(J-1)===K0)return J-1;return J}var $9=[];function m1($){var Z=$.indexOf("\r"),J=$.indexOf("\x00");if(Z===-1&&J===-1)return $;var X=$.length;$9.length=0;var G=0,Y=0;if(Z===-1)Y=J;else if(J===-1)Y=Z;else Y=Z<J?Z:J;for(;Y<X;Y++){var V=$.charCodeAt(Y);if(V===K0){if(G<Y)$9.push($.slice(G,Y));if(Y+1<X&&$.charCodeAt(Y+1)===d)Y++;$9.push(`
`),G=Y+1}else if(V===0){if(G<Y)$9.push($.slice(G,Y));$9.push("�"),G=Y+1}}if(G<X)$9.push($.slice(G));return $9.join("")}function Q6($){return m1($)}function g0($,Z,J){let X=J??$.length;while(Z<X&&($[Z]===" "||$[Z]==="\t"))Z++;return Z}function a9($){if(!$)return!1;for(var Z in $)return!0;return!1}function b$($,Z,J){var X=$,G=Z.split("."),Y=0;while(Y<G.length){if(X=X?.[G[Y]],X===void 0)break;Y++}return X||J}function r9($,Z){if(!Z)return $;let J=b$(Z,$,void 0);if(typeof J==="string")return J;if(typeof J==="object"&&J.component)return J.component;return $}function s9($,Z){if(!Z)return{};let J=b$(Z,$,void 0);return typeof J==="object"&&J.props?J.props:{}}function DZ($,Z){var J="";for(var X=0,G=$.length;X<G;X++){var Y=$[X],V=Y.type;if(V===Z.text||V===Z.codeInline){var U=Y.text;if(U)J+=U}else if(V===Z.textFormatted||V===Z.link){if(Y.children)J+=DZ(Y.children,Z)}else if(V===Z.image){if(Y.alt)J+=Y.alt}}return J}function _6($){var Z=$.toLowerCase();return Z==="title"||Z==="textarea"||Z==="style"||Z==="xmp"||Z==="iframe"||Z==="noembed"||Z==="noframes"||Z==="script"||Z==="plaintext"}function q6($){return $.replace(/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi,function(Z,J,X,G){return"&lt;"+J+X+G})}function j6($){console.warn($)}function H9($,Z,J,X){var G=b(J),Y=$.length,V=X??Y-Z,U=0;while(U<V&&Z+U<Y&&b($,Z+U)===G)U++;return U}function OZ($,Z,J,X,G){if(G===0?J>=X:Z<=X)return!1;let Y=G===0?$[J]:$[Z-1],V=G===0?Z>0?$[Z-1]:null:J<$.length?$[J]:null;var U=b(Y);if(U<G1?S9(U):J9(Y))return!1;var K=V?b(V):null,z=V===null||V===`
`||V==="\r"||(K!==null?K<G1?S9(K):J9(V):!0),F=V$(U,Y);if(!F)return!0;if(z)return!0;return V?V$(b(V),V):!1}function X$($){var Z="",J=0;while(J<$.length)if($[J]==="\\"&&J+1<$.length){var X=$[J+1];Z+=c9(b(X))?X:"\\"+X,J+=2}else Z+=$[J++];return u9(Z)}function k($,Z){if(Z>=$.length)return Z;if($.charCodeAt(Z)===K0&&Z+1<$.length&&$.charCodeAt(Z+1)===d)return Z+2;if($.charCodeAt(Z)===d)return Z+1;return Z+1}function D6($,Z){if($>=G1)return 0;var J=T9[$];if(Z&&J===1&&($===l1||$===d1||$===S1))return 0;return J}function H6($,Z,J,X,G,Y){if(!J.length||J[J.length-1].type!==H.blockQuote)return null;let V=g0(X,0,X.length);if(V>=X.length||X[V]!==">")return null;let U=PZ($,Z,G,Y);if(!U)return null;let K=J[J.length-1],z=U;if(z.children)K.children.push(...z.children);return z.endPos}function G$($,Z,J,X){return{type:H.heading,level:$,children:Z,id:X(J)}}var P$=/\\(.)/g,O6=/\s+#+\s*$/,l$=/^(?:(\d{1,9})([.)])\s+(.*)$|(\d{1,9})([.)])\s*$|([-*+])\s+(.*)$|([-*+])\s*$)/,I$=/^(\d{1,9})([.)])(\s+|$)/,f$=/^([*+\-])(\s+|$)/,Q$=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/i,b5=/^<([a-z][^ >/]*) ?(?:[^>/]+[^/]|)>/i,b=function($,Z=0){return $.charCodeAt(Z)},Y$=function($){return l9(b($))},g$=function($){return S9(b($))},j1=function($){return $===" "||$==="\t"},E9=function($){return $===" "||$==="\t"||$===`
`||$==="\r"},V$=function($,Z){return c9($<G1?$:Z)},F6=function($){var Z=b($);return Y$($)||Z===q1||Z===o1||Z===R9||Z===L9};function C$($,Z){var J=$.length;if(Z>=J)return null;var X=b($[Z]);if(!X9(X))return null;var G=Z,Y=Z;while(Y<J){var V=b($[Y]);if(V>=i1&&V<=c1||V>=g1&&V<=C1||V>=t1&&V<=e1||V===q1)Y++;else{var U=b($[Y]);if(U===C||U===l||U===d||U===K0||U===f1||U===n1)break;else return null}}if(Y===G)return null;var K=$.slice(G,Y);for(var z=0;z<K.length;z++){var V=b(K[z]);if(!(V>=i1&&V<=c1||V>=g1&&V<=C1||V>=t1&&V<=e1||V===q1))return null}return{tagName:K,tagLower:K.toLowerCase(),nextPos:Y}}function O9($,Z){var J=J$($,Z);if(!J||J.kind!=="tag")return null;return{tagName:J.tagName||"",tagLower:J.tagNameLower||"",attrs:J.attrs||"",endPos:J.endPos,isClosing:J.isClosing||!1,isSelfClosing:J.isSelfClosing||!1,hasNewline:J.hasNewline,hasSpaceBeforeSlash:!1,whitespaceBeforeAttrs:J.whitespaceBeforeAttrs||""}}function W6($,Z,J){var X=1,G=Z;while(X>0&&G<$.length){var Y=$.indexOf("<",G);if(Y===-1)return null;var V=O9($,Y);if(!V){G=Y+1;continue}if(V.isClosing&&V.tagLower===J&&--X===0)return[Y,V.endPos];if(!V.isClosing&&!V.isSelfClosing&&V.tagLower===J)X++;G=V.endPos}return null}var M6=/^\{.*\}$/,_$=/\n\n/,q$=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m,v6=/<\/?(?:pre|script|style|textarea)\b/i,y5=/^<[A-Z]/,A6=/\n$/,w6=new Set(["#",">","-","*","+","`","|","0","1","2","3","4","5","6","7","8","9"]);function B6($,Z,J,X){let G=Z;while(G<J){if($[G]==="\\"&&G+1<J){G+=2;continue}if($[G]===X)return G;G++}return-1}function FZ($,Z){var J=Z.indexOf(":");if(J>0){var X=Z.slice(J+1).trim(),G=X.length;if(G>=2){var Y=X[0];if((Y==='"'||Y==="'")&&X[G-1]===Y)X=X.slice(1,-1)}$.push([Z.slice(0,J).trim(),X])}}function N6($){var Z=[];if(!$)return Z;var J="",X=0,G="";for(var Y=0;Y<$.length;Y++){var V=$[Y];if(V==='"'||V==="'"){if(!G)G=V,X++;else if(V===G)G="",X--}else if(V==="("&&i9(J,"url"))X++;else if(V===")"&&X>0)X--;else if(V===";"&&X===0){FZ(Z,J),J="";continue}J+=V}return FZ(Z,J),Z}function b6(tag,key,value,sanitizeUrlFn,options){if(key==="style")return N6(value).reduce(function($,[Z,J]){let X=sanitizeUrlFn(J,tag,Z);if(X!=null)$[Z.replace(/(-[a-z])/g,(G)=>G[1].toUpperCase())]=X;return $},{});if(value.match(M6)){if(value=value.slice(1,value.length-1),value=value?value.replace(P$,"$1"):value,value.length>0){let $=value[0];if($==="["||$==="{")try{return JSON.parse(value)}catch(Z){return value}}if(value==="true")return!0;if(value==="false")return!1;if(options.evalUnserializableExpressions)try{return eval(`(${value})`)}catch($){return value}return value}if(B$.indexOf(key)!==-1)return sanitizeUrlFn(value?value.replace(P$,"$1"):value,tag,key);return value==="true"?!0:value==="false"?!1:value}function h1($,Z,J,X){let G={};if(!$||!$.trim())return G;let Y=[],V=0,U=$.length;while(V<U){while(V<U&&E9($[V]))V++;if(V>=U)break;let F=V;while(V<U&&F6($[V]))V++;if(V===F){V++;continue}let v=$.slice(F,V);while(V<U&&E9($[V]))V++;if(V>=U||$[V]!=="="){Y.push(v);continue}V++;while(V<U&&E9($[V]))V++;if(V>=U){Y.push(v+"=");break}let _=V,j=$[V];if(j==='"'||j==="'"){V++;while(V<U){if($[V]===j){if(V+1>=U){V++;break}let O=$[V+1];if(E9(O)||O==="/"){V++;break}}V++}}else if(j==="{"){let O=1;V++;while(V<U&&O>0){if($[V]==="{")O++;else if($[V]==="}"){if(O--,O===0){V++;break}}V++}}else while(V<U&&!E9($[V]))V++;Y.push(v+"="+$.slice(_,V))}if(!Y?.length)return G;let K=Z.toLowerCase();for(let F=0;F<Y.length;F++){let v=Y[F],_=v.indexOf("=");if(_!==-1){let j=v.slice(0,_).trim(),O=j.toLowerCase();if(O==="ref")continue;let Q=v.slice(_+1).trim(),D=((q)=>{let W=q[0];if((W==='"'||W==="'")&&q.length>=2&&q[q.length-1]===W)return q.slice(1,-1);return q})(Q);if(O==="href"&&K==="a"||O==="src"&&K==="img"){let q=X.sanitizer(D,K,O);if(q==null){j6(`Stripped unsafe ${O} on <${J}>`);continue}G[j]=q}else{let q=b6(K,O,D,X.sanitizer,X);G[j]=q}}else if(v!=="style")G[v]=!0}if($.indexOf("%")!==-1)try{if(q9.test(decodeURIComponent($)))for(var z in G)delete G[z]}catch(F){}else if(q9.test($))for(var z in G)delete G[z];return G}var f9=function($){return w6.has($)};function y6($,Z,J){let X=Z+1;while(X<$.length&&$[X]!=="]"){if($[X]==="\\"&&X+1<$.length){X+=2;continue}X++}if(X>=$.length)return{shouldSkip:!1,newPos:0};let G=Z+1,Y=X,V=G<Y&&($[G]===`
`||$[G]==="\r"),U=Y>G&&($[Y-1]===`
`||$[Y-1]==="\r"),K=X+1;if(K=g0($,K),K>=$.length||$[K]!==":")return{shouldSkip:!1,newPos:0};if((V||U)&&J){let z=K+1;if(z=g0($,z),z<$.length&&$[z]===`
`)z=g0($,z+1);while(z<$.length&&$[z]!==`
`)z++;if(z<$.length)z++;return{shouldSkip:!0,newPos:z}}return R6($,K)}function R6($,Z){let J=Z+1;if(J=g0($,J),J<$.length&&$[J]===`
`)J=g0($,J+1);while(J<$.length&&$[J]!==`
`)J++;if(J>=$.length)return{shouldSkip:!1,newPos:0};J++;let X=g0($,J);if(X>=$.length||$[X]!=='"'&&$[X]!=="'")return{shouldSkip:!1,newPos:0};let G=$[X],Y=X+1;while(Y<$.length&&$[Y]!==G&&$[Y]!==`
`){if($[Y]==="\\"&&Y+1<$.length){Y+=2;continue}Y++}if(Y>=$.length||$[Y]!==G)return{shouldSkip:!1,newPos:0};let V=g0($,Y+1);if(V<$.length&&$[V]!==`
`&&$[V]!=="\r")return{shouldSkip:!0,newPos:J};return{shouldSkip:!1,newPos:0}}function TZ($){for(var Z=0;Z<$.length;Z++){var J=$[Z];if(J.type===H.link)return!0;if(J.type===H.textFormatted){var X=J;if(X.children&&TZ(X.children))return!0}}return!1}function k$($){var Z="";for(var J=0,X=$.length;J<X;J++){var G=$[J],Y=G.type;if(Y===H.text)Z+=G.text;else if(Y===H.image){var V=G;if(V.alt)Z+=V.alt}else if(Y===H.textFormatted){var U=G;if(U.children)Z+=k$(U.children)}else if(Y===H.link){var K=G;if(K.children)Z+=k$(K.children)}}return Z}var L6=new Set([" ","\t","\r",`
`,"\f","\v"]);function p1($,Z,J,X,G){var Y=[],V=[],U=[],K=Z,z=Z,F=G.disableAutoLink||X.inAnchor,v=!1,_=!!X.inAnchor,j=!!G.disableParsingRawHTML,O=G.optimizeForStreaming,Q=-1,D=-1,q=[],W=function(f0,X1){if(O&&X.inHTML)return!1;if(!_&&(!X1||!G.disableAutoLink)){var b0=R$($,K,X,G,"<");if(b0)return M(K),Y.push(b0),K=b0.endPos,z=K,!0}if(j)return!1;var r1=D$($,K,X,G);if(r1){M(K);var m9=Y.length;if(Y.push(r1),q)q.push(m9);return K=r1.endPos,z=K,!0}if(O&&D===-1){if(K+1<J){var Z0=b($,K+1);if(Z0>=g1&&Z0<=C1||Z0>=i1&&Z0<=c1||Z0===n1||Z0===_9)D=K}}if(!f0)return!1;var J0=O9($,K);if(!J0)return!1;var T1=K+(J0.isClosing?2:1);if(T1>=$.length||j1($[T1]))return!1;var W1=$.indexOf(">",K+1);if(W1!==-1){var Z1=K+1,M9=W1-Z1;if(M9>=7){var n=c($,"http://",Z1);if(n||c($,"https://",Z1)){for(var S0=Z1;S0<W1;S0++)if(j1($[S0]))return!1}}}var y0=b($,T1);if(X9(y0)&&T1+1<$.length&&$[T1+1]===":")return!1;if(J0.isClosing&&J0.attrs.trim().length)return!1;if(J0.attrs.length){var U0=!1,u="";for(var _0=0;_0<J0.attrs.length;_0++){var n0=J0.attrs[_0];if(U0&&n0===u)U0=!1;else if(!U0&&(n0==='"'||n0==="'"))U0=!0,u=n0;else if(n0==="*"||n0==="#"||n0==="!"){var E0=_0+1;while(E0<J0.attrs.length&&J0.attrs[E0]!=="="&&J0.attrs[E0]!==" "&&J0.attrs[E0]!=="\t")E0++;if(E0<J0.attrs.length&&J0.attrs[E0]==="=")return!1}}}var Y0=$.slice(K,J0.endPos),M1=J0.tagName.toLowerCase(),m=Y0,C0=m.indexOf(">");if(C0!==-1){m=m.slice(C0+1);var R0="</"+M1+">",F0=m.indexOf(R0);if(F0!==-1)m=m.slice(0,F0)}var A0=[];if(m.trim()&&G){var d0={...X,inline:!1,inHTML:!0},L0=m.trim();if(_$.test(L0)||q$.test(L0)||Q$.test(L0))A0=k9(L0,d0,G);else if(L0)d0.inline=!0,A0=p1(L0,0,L0.length,d0,G)}var i0=J0.whitespaceBeforeAttrs+J0.attrs,j0=h1(i0,M1,J0.tagName,G),J1={type:H.htmlBlock,tag:J0.tagName,attrs:j0,children:A0,rawText:Y0,text:m,verbatim:!0,endPos:J0.endPos};return M(K),Y.push(J1),K=J1.endPos,z=K,!0},M=function(f0){if(f0>z){var X1=$.slice(z,f0);Y.push({type:H.text,text:v?u9(X1):X1}),z=f0,v=!1}};while(K<J){var A=b($,K),x=D6(A,F);if(x===0){if(A===y9)v=!0;K++;while(K<J){if(A=b($,K),A>=G1)break;if(A===y9)v=!0;var B=T9[A];if(B!==0){if(F&&B===1&&(A===l1||A===d1||A===S1)){K++;continue}break}K++}continue}if(A===_1){var E=K,T=0;while(K+T<J){if(b($,K+T)!==_1)break;T++}if(T>0){var N=K+T,y=-1,w=N;while(w<J){while(w<J&&b($,w)!==_1)w++;if(w>=J)break;var L=0;while(w+L<J&&b($,w+L)===_1)L++;if(L>T)L=T;var f=w+L;if(L===T&&(w<=N||b($,w-1)!==_1)&&(f>=J||b($,f)!==_1)){y=w,w=f;break}w++}if(y!==-1){var S=$.slice(N,y),P=!1;for(var g=0;g<S.length;g++){var h=b(S,g);if(h===d||h===K0){P=!0;break}}var R=S;if(P)R=S.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ");if(R.length>0){var a=b(R,0),i=b(R,R.length-1);if(a===C&&i===C){for(var D0=1;D0<R.length-1;D0++)if(b(R,D0)!==C){R=R.slice(1,R.length-1);break}}}M(E),Y.push({type:H.codeInline,text:R}),K=w,z=K;continue}if(O&&Q===-1){Q=E,M(E),J=E;break}K=N;continue}}if(!_&&!F&&(A===l1||A===d1||A===S1)){var w0=null,Q0=K+1<J?b($,K+1):0,T0=K+2<J?b($,K+2):0,p=K+3<J?b($,K+3):0,Y1=K+4<J?b($,K+4):0,G0=K+5<J?b($,K+5):0;if(A===d1&&Q0===p9&&T0===p9&&p===F$)w0="h";else if(A===S1&&Q0===S1&&T0===S1&&p===L9)w0="w";else if(A===l1&&Q0===p9&&T0===F$&&p===R9&&Y1===n1&&G0===n1)w0="f";if(w0){var P0=R$($,K,X,G,w0);if(P0){M(K),Y.push(P0),K=P0.endPos,z=K;continue}}}if(!_&&!F&&A===b9){var M0=R$($,K,X,G,"@");if(M0&&"emailStart"in M0){var{emailStart:z0,endPos:a0}=M0,I0=[];for(var f=V.length-1;f>=0;f--){var k0=V[f];if(k0.sourcePos>=z0&&k0.sourcePos<a0){if(k0.nodeIndex>=0&&k0.nodeIndex<Y.length)Y.splice(k0.nodeIndex,1),I0.push(k0.nodeIndex);V.splice(f,1)}}if(z0<z){for(var w=Y.length-1;w>=0;w--)if(Y[w].type===H.text){Y.splice(w,1),I0.push(w);break}z=z0}if(I0.length){I0.sort(function(f0,X1){return f0-X1});var A1=0;for(var r=0;r<V.length;r++){var k0=V[r];while(A1<I0.length&&I0[A1]<k0.nodeIndex)A1++;k0.nodeIndex-=A1}}M(z0),Y.push(M0),K=a0,z=K;continue}}if(A===z9){if(W(!0,!1))continue}if(A===U9){if(K+1<J&&b($,K+1)===d){var V0=K+2;while(V0<J&&b($,V0)===C)V0++;if(V0>=J){K++;continue}M(K),Y.push({type:H.breakLine}),K+=2;while(K<J&&b($,K)===C)K++;z=K;continue}var B0=K+1<J?$[K+1]:"";if(B0&&"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~".indexOf(B0)!==-1){M(K),Y.push({type:H.text,text:B0==="&"?"&​":B0}),K+=2,z=K;continue}}if(A===I1){if(!_){if(K+1<J&&$[K+1]==="^"){var m0=K+2;while(m0<J&&$[m0]!=="]")m0++;if(m0<J){var H0=$.slice(K+2,m0);M(K),Y.push({type:H.footnoteReference,target:`#${G.slugify(H0)}`,text:H0}),K=m0+1,z=K;continue}}if(X.inList&&K+2<J&&b($,K+2)===Q9){var q0=b($,K+1);if(q0===C||q0===W$||q0===M$){M(K),Y.push({type:H.gfmTask,completed:q0===W$||q0===M$}),K+=3,z=K;continue}}}var e=!1;if(K>Z&&$[K-1]==="!"){var l0=0;for(var X0=K-2;X0>=Z&&$[X0]==="\\";X0--)l0++;if((l0&1)===0){if(e=!0,z<K-1)M(K-1);if(Y.length>0&&Y[Y.length-1].type===H.text){var $0=Y[Y.length-1];if($0.text.endsWith("!")){if($0.text=$0.text.slice(0,-1),!$0.text)Y.pop()}}}}if(!e)M(K);if(z=K+1,!_||e)U.push({type:e?"image":"link",pos:e?K-1:K,resultIdx:Y.length,inAnchor:_});K++;continue}if(A===Q9&&U.length>0){var s=U[U.length-1],r0=s.pos+(s.type==="image"?2:1),e0=K;M(K);var V1=K+1,D1=d$(Y,s),K1=s.type==="link"&&TZ(D1),w1=!1;if(!K1&&V1<J&&$[V1]==="("){var O0=x6($,V1+1,!0);if(O0){WZ(Y,V,U,s,r0,e0,G.sanitizer(X$(O0.target),"a","href"),O0.title?X$(O0.title):void 0),K=O0.endPos,z=K;continue}}var s0=X.refs||{};a9(s0);var H1=null,E1=K;if(V1<J&&$[V1]==="["){var U1=V1+1,w=U1;while(w<J&&$[w]!=="]")w++;if(w<J)H1=$.slice(U1,w),E1=w,w1=!0}if(!w1||H1==="")H1=$.slice(r0,e0);var h0=EZ(H1);if(!K1&&s0&&s0[h0]){var z1=s0[h0];WZ(Y,V,U,s,r0,e0,z1.target,z1.title),K=E1+1,z=K;continue}var B1=s.resultIdx;if(U.pop(),Y.length=B1,O){if(Y.push(...D1),V1<J&&$[V1]==="(")return Y}else{if(s.type==="image")Y.push({type:H.text,text:"!"});Y.push({type:H.text,text:"["},...D1,{type:H.text,text:"]"})}for(var g=0;g<V.length;g++)if(V[g].nodeIndex>=B1)V[g].nodeIndex++;K++,z=K;continue}if(A===N9||A===o1||A===s1||A===u1){var O1=$[K],o=K,$1=H9($,K,O1);if((O1==="~"||O1==="=")&&$1!==2){K++;continue}var Q1=o+$1,o0=OZ($,o,Q1,J,0),G9=OZ($,o,Q1,Z,1),N1=o0,b1=G9;if(O1==="_"&&o0&&G9){if(o>0){var Y9=$[o-1],W9=b(Y9);N1=V$(W9,Y9)}if(Q1<J){var V9=$[Q1],F1=b(V9);b1=V$(F1,V9)}}M(o),V.push({nodeIndex:Y.length,type:O1,length:$1,canOpen:N1,canClose:b1,active:!0,sourcePos:o,inAnchor:_}),Y.push({type:H.text,text:$.slice(o,o+$1)}),K=o+$1,z=K;continue}if(A===d){var X0=K-1,x1=0;while(X0>=z&&b($,X0)===C)x1++,X0--;if(x1>=2){var V0=K+1;while(V0<J&&b($,V0)===C)V0++;if(V0>=J){M(X0+1),K=J,z=J;continue}M(X0+1),Y.push({type:H.breakLine}),K++;while(K<J&&b($,K)===C)K++;z=K;continue}var y1=K>z?b($,K-1):0,q0=K+1<J?b($,K+1):0,R1=K>z&&y1===C&&q0===C?K-1:K;if(M(R1),Y.push({type:H.text,text:`
`}),z=K+1,K>Z&&y1===C&&z<J&&b($,z)===C)z++;K=z;continue}if(A===y9)v=!0;K++;while(K<J){var A=b($,K);if(A>=G1)break;if(A===y9)v=!0;var B=T9[A];if(B===0){K++;continue}if(B===1&&(A===l1||A===d1||A===S1)&&F){K++;continue}break}}if(M(K),V.length)mZ(Y,V,null);if(O){var v0=Y.length;for(var N0=q.length-1;N0>=0;N0--){var p0=q[N0];if(p0<Y.length&&Y[p0].type===H.htmlBlock){var L1=Y[p0];if(!k1(L1.tag)&&(!L1.children||L1.children.length===0)){if(Y.splice(p0,1),p0<v0)v0--;for(var g=0;g<V.length;g++)if(V[g].nodeIndex>p0)V[g].nodeIndex--;for(var g=N0+1;g<q.length;g++)if(q[g]>p0)q[g]--}}}if(Q!==-1&&Q<v0){for(var u0=Y.length-1;u0>=0;u0--)if(Y[u0].type===H.text){v0=u0;break}}if(D!==-1&&D<v0){for(var u0=Y.length-1;u0>=0;u0--)if(Y[u0].type===H.text){v0=u0;break}}for(var w=V.length-1;w>=0;w--)if(V[w].active&&V[w].nodeIndex<v0){if(Y.splice(V[w].nodeIndex,1),V[w].nodeIndex<v0)v0--;for(var f=0;f<w;f++)if(V[f].nodeIndex>V[w].nodeIndex)V[f].nodeIndex--}if(v0<Y.length)Y.length=v0;return Y}if(U.length){U.sort(function(f0,X1){return f0.resultIdx-X1.resultIdx});for(var w=0;w<U.length;w++)Y.splice(U[w].resultIdx+w,0,{type:H.text,text:U[w].type==="image"?"![":"["})}return Y}function T6($,Z,J,X,G){var Y=!1;for(var V=0;V<Z.length;V++)if(Z[V].sourcePos>=X&&Z[V].sourcePos<G){Y=!0;break}if(!Y)return;var U=d$($,J),K=[];for(var V=0;V<Z.length;V++){var z=Z[V];if(z.sourcePos>=X&&z.sourcePos<G)K.push({nodeIndex:z.nodeIndex-J.resultIdx,type:z.type,length:z.length,canOpen:z.canOpen,canClose:z.canClose,active:z.active,sourcePos:z.sourcePos,inAnchor:z.inAnchor})}mZ(U,K,null),$.length=J.resultIdx;for(var F=0;F<U.length;F++)$.push(U[F]);var v=[];for(var V=0;V<Z.length;V++)if(Z[V].sourcePos<X||Z[V].sourcePos>=G)v.push(Z[V]);Z.length=0;for(var F=0;F<v.length;F++)Z.push(v[F])}function S6($,Z,J,X){if($.type==="link")return{type:H.link,target:J,title:X,children:Z};return{type:H.image,target:J||"",alt:k$(Z),title:X}}function d$($,Z){return $.slice(Z.resultIdx)}function WZ($,Z,J,X,G,Y,V,U){T6($,Z,X,G,Y);var K=d$($,X);J.pop(),$.length=X.resultIdx,$.push(S6(X,K,V,U))}function E6($,Z,J){let X=g0($,Z),G=X<$.length&&$[X]==="<";if(G)X++;let Y=X;if(G&&X<$.length&&$[X]===">")return{target:"",endPos:X+1,hadSpace:!1};let V,U;var K=!1;if(G){U=X;while(U<$.length&&$[U]!==">"){let v=$[U];if(v===`
`||v==="\r"||v==="<")return null;if(v==="\\"){U+=2;continue}U++}if(U>=$.length||$[U]!==">")return null;U++;let z=Y;while(z<U-1&&j1($[z]))z++;let F=U-1;while(F>z&&j1($[F-1]))F--;V=$.slice(z,F),X=U}else{let z=0;U=X;while(U<$.length){let F=$[U];if(F===" "||F==="\t"||F===`
`){K=!0;break}if(!J&&F===")")break;if(J&&F==="("){if(U>0&&$[U-1]==="\\"){U++;continue}z++,U++;continue}if(J&&F===")"){if(U>0&&$[U-1]==="\\"){U++;continue}if(z===0)break;z--,U++;continue}U++}V=$.slice(Y,U),X=U}return{target:V,endPos:X,hadSpace:K}}function MZ($,Z,J,X){let G=Z,Y=0;while(G<$.length){let U=$[G];if(j1(U))G++;else if(U===`
`){if(Y>=1)break;Y++,G++}else if(J9(U))break;else break}if(J&&!X){if(G>=$.length||$[G]!=='"'&&$[G]!=="'"&&$[G]!=="(")return{title:void 0,endPos:G}}let V=void 0;if(G<$.length){let U=$[G];if(U==='"'||U==="'"){G++;let K=G;while(G<$.length&&$[G]!==U){if($[G]==="\\")G++;G++}if(G<$.length)V=$.slice(K,G),G++}else if(U==="("){G++;let K=G,z=1;while(G<$.length&&z>0){if($[G]==="\\"&&G+1<$.length)G++;else if($[G]==="(")z++;else if($[G]===")")z--;G++}if(z===0)V=$.slice(K,G-1)}}return G=g0($,G),{title:V,endPos:G}}function x6($,Z,J){let X=E6($,Z,J);if(!X)return null;let G=Z;G=g0($,G);let Y=G<$.length&&$[G]==="<";if(Y&&X.target===""&&X.endPos===G+2){let U=MZ($,X.endPos,!1,Y);if(U.endPos>=$.length||$[U.endPos]!==")")return null;return{target:"",title:U.title,endPos:U.endPos+1}}let V=MZ($,X.endPos,X.hadSpace,Y);if(V.endPos>=$.length||$[V.endPos]!==")")return null;return{target:X.target,title:V.title,endPos:V.endPos+1}}var P6;((X)=>{X[X.URI=0]="URI";X[X.EMAIL=1]="EMAIL";X[X.ANGLE=2]="ANGLE"})(P6||={});function X9($){return $>=g1&&$<=C1||$>=i1&&$<=c1}function SZ($){let Z=$.indexOf(":");if(Z<2||Z>32)return!1;let J=b($);if(!X9(J))return!1;for(let X=1;X<Z;X++){let G=$[X],Y=b(G);if(!Y$(G)&&G!=="+"&&G!=="."&&G!=="-")return!1}return!0}function vZ($,Z,J){if(Z===0)return!0;return(J?` 	
\r*_~(`:` 	
*_~(`).indexOf($[Z-1])!==-1}function o9($,Z,J,X,G){let Y=X($,"a","href");if(!Y)return null;return{type:H.link,target:Y,children:[{type:H.text,text:Z}],endPos:J,...G!==void 0?{emailStart:G}:{}}}function y$($,Z,J,X,G){if(J.inAnchor||G!==2&&X.disableAutoLink)return null;if(G===2){if($[Z]!=="<")return null;let Q=Z+1;while(Q<$.length&&$[Q]!==">"){let T=b($,Q);if(T===C||T===l||T===d||T===K0||T<C)return null;Q++}if(Q>=$.length||$[Q]!==">")return null;let D=$.slice(Z+1,Q);if(!D.length)return null;let q=D.indexOf("\\")!==-1,W=SZ(D),M=c(D,"http://")||c(D,"https://"),A=!1;if(!W&&!M&&D.length>=7){let T=D[0];if(T==="m"||T==="M"){let N=D.toLowerCase();if(c(N,"mailto:")){A=!0;let y=N.indexOf(":"),w=D.slice(y+1);return o9("mailto:"+w,D,Q+1,X.sanitizer)}}}let x=!q&&D.indexOf("@")!==-1&&D.indexOf("//")===-1&&!W;if(!M&&!A&&!x&&!W)return null;let B=D,E=D;if(!A&&!W&&!M&&x)B="mailto:"+D;return o9(B,E,Q+1,X.sanitizer)}if(G===1){let Q=Z;while(Q>0&&(Y$($[Q-1])||".+-_".indexOf($[Q-1])!==-1))Q--;if(Q>=Z||!vZ($,Q,!0))return null;let D=Z+1,q=!1;while(D<$.length){let A=$[D];if(A===".")q=!0,D++;else if(Y$(A)||A==="-"||A==="_")D++;else break}if(!q||D<=Z+1)return null;while(D>Z+1&&$[D-1]===".")D--;if(D>Z+1&&($[D-1]==="-"||$[D-1]==="_"))return null;if(D-(Z+1)<1e4){if($.indexOf(".",Z+1)>=D||$.indexOf(".",Z+1)===-1)return null}else if($.slice(Z+1,D).indexOf(".")===-1)return null;let M=$.slice(Q,D);return o9("mailto:"+M,M,D,X.sanitizer,Q)}let Y=c($,"http://",Z)||c($,"https://",Z),V=!Y&&c($,"ftp://",Z),U=!Y&&!V&&c($,"www.",Z);if(!(Y||V||U)||!vZ($,Z,!1))return null;var K=Z+(Y?b($,Z+4)===ZZ?8:7:V?6:4),z=K;while(K<$.length){let Q=b($,K);if(Q===C||Q===l||Q===d||Q===z9||Q===f1)break;K++}if(K<=z)return null;let F=K;while(F>z){let Q=$[F-1];if(F>z+1&&$[F-2]==="\\")break;if(Q==="?"||Q==="!"||Q==="."||Q===","||Q===":"||Q==="*"||Q==="_"||Q==="~")F--;else if(Q===";"){let D=F-2;while(D>=z&&$[D]!=="&"&&$[D]!==" ")D--;if(D>=z&&$[D]==="&"){let q=$.slice(D+1,F-1);if(q.length>=2&&q.length<=10&&/^[a-zA-Z0-9]+$/.test(q)&&(q==="lt"||q==="gt"||q.length>=3&&(c(q,"amp")||c(q,"apos")||c(q,"quot")||c(q,"nbsp")||/^[a-z]{3,10}$/.test(q))))break;F=D;break}F--}else if(Q===")"){let D=0,q=0;for(let W=z;W<F;W++){if($[W]==="(")D++;if($[W]===")")q++}if(q>D)F--;else break}else break}if(K=F,K<=z)return null;var v=z,_=-1,j=-1;while(v<K){let Q=b($,v);if(Q>=g1&&Q<=C1||Q>=i1&&Q<=c1||Q>=t1&&Q<=e1||Q===q1||Q===o1||Q===L9){if(Q===L9)j=_,_=v;v++;continue}break}if(v===z||_===-1)return null;if(j===-1)j=z-1;for(let Q=j+1;Q<_;Q++)if($[Q]==="_")return null;for(let Q=_+1;Q<v;Q++)if($[Q]==="_")return null;let O=$.slice(Z,K);return o9(U?"http://"+O:O,O,K,X.sanitizer)}function R$($,Z,J,X,G){if(G==="<")return y$($,Z,J,X,2);if(G==="h"||G==="f"||G==="w")return y$($,Z,J,X,0);if(G==="@")return y$($,Z,J,X,1);return null}function EZ($){var Z=$.trim(),J=Z.replace(/[\s\t\n\r]+/g," ");if(J.indexOf("ẞ")!==-1)return J.replace(/\u1E9E/g,"ss").toLowerCase();return J.toLowerCase()}function I6($,Z,J){if(Z+3>=$.length||$[Z]!=="[")return null;let X=$[Z+1];if(X!==" "&&X!=="x"&&X!=="X")return null;if($[Z+2]!=="]")return null;return{type:H.gfmTask,completed:X.toLowerCase()==="x",endPos:Z+3}}function i$($,Z,J,X){let{inline:G,inList:Y,inBlockQuote:V}=Z;if(X.inline!==void 0)Z.inline=X.inline;if(X.list!==void 0)Z.inList=X.list;if(X.inBlockQuote!==void 0)Z.inBlockQuote=X.inBlockQuote;let U=k9($,Z,J);return Z.inline=G,Z.inList=Y,Z.inBlockQuote=V,U}function g9($,Z,J,X,G){return j$(X,!0,()=>p1($,Z,J,X,G))}function C9($,Z,J,X){var G=$[Z];if(G===void 0)return null;var Y=Z,V=null,U=G,K=null,z=b(G),F=z===C||z===l;if(F){if(K=I($,Z),V=t($,Z,K),Y=Z+V.charCount,Y>=$.length)return e9($,Z,J);U=$[Y]}var v=V?V.spaceEquivalent:0;if(v>=4){if(F)return e9($,Z,J);return null}var _=b(U);if(_===f1){var j=PZ($,Z,J,X);if(j)return j}else if(_===o1)return K$($,Z,J,X);else if(_===q1||_===N9||_===GZ){var O=K$($,Z,J,X);if(O)return O;var Q=u$($,Z,J,X);if(Q)return Q}else if(_>=t1&&_<=e1){var Q=u$($,Z,J,X);if(Q)return Q}else if(_===B9)return f6($,Y,J,X);else if(_===I1)return F9($,Y,J,X,Y+1<$.length&&b($,Y+1)===O$);else if(_===z9&&!X.disableParsingRawHTML)return D$($,Y,J,X);else if(_===_1||_===s1){if(!K)K=I($,Z);if(!V)V=t($,Z,K);if(V.spaceEquivalent<=3)return c$($,Y,J,X)}else if(_===YZ)return kZ($,Z,J,X);if(F)return e9($,Z,J);return null}function k9($,Z,J){let X=[],G=0;while(G<$.length){while(G<$.length&&$[G]===`
`)G++;if(G>=$.length)break;var Y=$[G];if(Z.inList&&X.length>0){var V=X[X.length-1];if(V?.type===H.paragraph){var U=V,K=b(Y);if(K===q1||K===u1||K===C||K===l){var z=I($,G),F=$.slice(G,z),v=t($,G,z);if(v.spaceEquivalent<4){var _=F.slice(v.charCount).trim();if(CZ(X,_,J)){G=z+(z<$.length&&$[z]===`
`?1:0);continue}}}}}var j=C9($,G,Z,J);if(j){X.push(j),G=j.endPos;continue}var O=xZ($,G,Z,J);if(O){X.push(O),G=O.endPos;continue}var Q=$.slice(G).trim();if(Q){if(Z.inBlockQuote&&X.length>0){let M=function(A){if(A.type===H.blockQuote){var x=A;if(x.children&&x.children.length>0){var B=x.children[x.children.length-1];if(B.type===H.paragraph)return B}}else if(A.type===H.orderedList||A.type===H.unorderedList){var E=A;if(E.items&&E.items.length>0){var T=E.items[E.items.length-1];if(T&&T.length>0){var N=T[T.length-1],y=M(N);if(y)return y}}}return null};for(var D=X.length-1;D>=0;D--){var U=M(X[D]);if(U){var W=m$($,G,Z,J);if(W){var q=W;if(U.children&&q.children)U.children.push({type:H.text,text:`
`},...q.children);G=W.endPos;continue}}}}var W=m$($,G,Z,J);if(W){X.push(W),G=W.endPos;continue}}G++}return X}function f6($,Z,J,X){if(J.inline)return null;let G=I($,Z),Y=t($,Z,G,3);if(Y.spaceEquivalent>3&&!J.inList)return null;var V=Z+Y.charCount;if(V>=$.length||$[V]!=="#")return null;let U=H9($,V,"#",6);if(V+=U,V>=$.length)return null;let K=$[V];if(K===`
`||K==="\r"){let j=I($,V);return{...G$(U,[],"",X.slugify),endPos:j+(j<$.length?1:0)}}if(K!==" "&&K!=="\t")return null;let z=V,F=I($,z);var v=$.slice(z,F).replace(O6,"").trim();let _=g9(v,0,v.length,J,X);return{...G$(U,_,v,X.slugify),endPos:F+(F<$.length?1:0)}}function xZ($,Z,J,X){if(J.inline||J.inBlockQuote||J.inList)return null;let G=I($,Z);if(G>=$.length)return null;let Y=k($,G),V=-1,U=null;for(var K=0;Y<$.length&&K<10;K++){let y=I($,Y);if(y>=$.length)break;var z=Y;while(z<y&&(b($,z)===C||b($,z)===l||b($,z)===K0))z++;if(z>=y)break;var F=0,v=Y;while(v<y&&F<3&&b($,v)===C)F++,v++;if(v<y){let w=b($,v);if(w===u1||w===q1){let L=$[v];var _=0,j=!1,O=v;while(O<y){let f=b($,O);if(f===w){if(j){_=0;break}_++}else if(f===C||f===l)j=!0;else{_=0;break}O++}if(_>=1){V=y,U=L;break}}}Y=k($,y)}if(!U)return null;let Q=b($,Z);if(Q===B9||Q===f1||$[Z]==="|")return null;let D=Z;var q=Z,W=!1;while(q<Y){let y=I($,q);if(y>=Y)break;var M=q;while(M<y&&(b($,M)===C||b($,M)===l||b($,M)===K0))M++;if(M<y)W=!0,D=y;q=k($,y)}if(!W)return null;let A=$.slice(Z,D);var x=0,B=A.length;while(x<B&&(A.charCodeAt(x)===C||A.charCodeAt(x)===l||A.charCodeAt(x)===K0||A.charCodeAt(x)===d))x++;while(B>x&&(A.charCodeAt(B-1)===C||A.charCodeAt(B-1)===l||A.charCodeAt(B-1)===K0||A.charCodeAt(B-1)===d))B--;let E=A.slice(x,B);if(!E)return null;let T=U==="="?1:2,N=g9(E,0,E.length,J,X);return{...G$(T,N,E,X.slugify),endPos:V+(V<$.length?1:0)}}function m$($,Z,J,X){if(J.inline)return null;if(X.optimizeForStreaming&&$[Z]==="|"){var G=Math.min(500,$.length-Z),Y=$.substr(Z,G),V=0,U=!1;for(var K=0;K<Y.length;K++){if(Y[K]==="|")V++;if(Y[K]==="-"||Y[K]===":")U=!0}if(V>=3&&U){var z=I($,Z);while(z<$.length){var F=k($,z);if(F>=$.length)break;var v=I($,F),_=$.slice(F,v);if(_.indexOf("|")===-1&&_.indexOf("-")===-1)break;if(z=v,v>=$.length)break}return{type:H.paragraph,children:[],endPos:k($,z)}}}let j=Z,O=$.length;while(j<O){let r=I($,j),V0=!0;for(let $0=j;$0<r;$0++){let s=b($,$0);if(s!==C&&s!==l&&s!==K0){V0=!1;break}}if(V0){j=r;break}if(r>=O){j=O;break}let B0=k($,r);if(B0>=O){j=O;break}let m0=I($,B0),H0=!0,q0="";for(let $0=B0;$0<m0;$0++){let s=b($,$0);if(s!==C&&s!==l&&s!==K0){if(H0=!1,q0==="")q0=$[$0];break}}if(H0){j=r;break}let e=!1,l0=t($,B0,m0),X0=l0.spaceEquivalent===4&&l0.charCount===4;if(q0==="<"&&!X0&&!X.disableParsingRawHTML){let s=B0,r0=0;while(s<m0&&r0<3){let e0=b($,s);if(e0===C||e0===l)r0++,s++;else break}if(s<m0&&$[s]==="<"){var Q=D$($,s,{...J,inline:!1},X);if(Q)e=!("canInterruptParagraph"in Q)||Q.canInterruptParagraph}}if(X0)e=!1;else if(!e&&q0&&f9(q0))if(q0==="["){let $0=B0;if($0+1>=O||$[$0+1]!=="^")e=!1;else e=!0}else if(q0==="*"||q0==="+")if(K$($,B0,J,X))e=!0;else{let s=B0+1<O?$[B0+1]:"";if(s&&j1(s))e=!0;else e=!1}else{let $0=C9($,B0,J,X);if($0)if($0.type===H.codeBlock)if(t($,B0,m0).spaceEquivalent>=4)e=!1;else e=!0;else if($0.type===H.unorderedList||$0.type===H.orderedList)if($0.type===H.orderedList)e=$0.start===1;else e=!0;else if(q0==="-")if(j>Z)e=!0;else e=!0;else if($0.type===H.ref)e=!1;else e=!0}if(e){j=r;break}j=k($,r)}if(j<=Z)return null;var D=Z,q=j;while(D<q){let r=b($,D);if(r===C||r===l)D++;else break}let W=I($,D);var M=q>W,A;if(!M)A=$.slice(D,q);else{var x=[],B=D,E=0;while(B<q){var T=I($,B);if(T>q)T=q;if(E===0)x.push($.slice(B,T));else{var N=0;while(N<4&&B+N<T)if(b($,B+N)===C)N++;else break;var y=N===4?B+4:B;x.push($.slice(y,T))}if(T<q){let r=b($,T);if(r===K0||r===d)x.push(`
`),B=k($,T);else B=q}else B=q;E++}A=x.join("")}var w=A.length;while(w>0){var L=A.charCodeAt(w-1);if(L===C||L===l)w--;else break}if(w<A.length)A=A.slice(0,w);let f=!1;for(let r=0;r<A.length;r++){let V0=A.charCodeAt(r);if(V0!==C&&V0!==l&&V0!==d&&V0!==K0){f=!0;break}}if(!f)return null;var S=A,P=j,g=-1,h=j-1;while(h>=D){if(b($,h)===d){g=h;break}h--}if(g>=0){var R=!1;for(var a=D;a<g;a++){let r=b($,a);if(r!==C&&r!==l&&r!==d&&r!==K0){R=!0;break}}if(!R){var i=g+1;while(i<$.length){let r=b($,i);if(r===C||r===l)i++;else break}var D0=i-(g+1);if(D0<4&&i<$.length&&$[i]==="["){var w0={...J,inline:!1},Q0=F9($,i,w0,X,!1);if(Q0){var T0=0,h=D;while(h<=g){let V0=$.indexOf(`
`,h);if(V0===-1||V0>g)break;T0++,h=V0+1}var p=0,Y1=0;h=0;while(h<A.length){let V0=A.indexOf(`
`,h);if(V0===-1)break;if(Y1++,Y1===T0){p=V0+1;break}h=V0+1}if(p>0)S=A.slice(0,p-1);P=Q0.endPos,J.refs=w0.refs}}}}let G0=g9(S,0,S.length,J,X);var P0={type:H.paragraph,children:G0,endPos:P};if(G0.length>0){var M0=[];for(var z0=G0.length-1;z0>=0;z0--){var a0=G0[z0];if(a0.type===H.htmlSelfClosing&&a0.isClosingTag===!0)M0.push(z0);else if(a0.type===H.text){var I0=a0;if(I0.text&&I0.text.trim().length>0)break}else break}if(M0.length>=3){var k0=M0[M0.length-1],A1=G0.slice(k0+1);G0.splice(k0+1),P0.removedClosingTags=A1}}return P0}function g6($,Z){if(Z!==0)return null;let J=A$($);if(!J?.hasValidYaml)return null;let X=J.endPos-1;if(X>0&&$[X-1]==="\r")X--;let G=m1($.slice(0,X));return{type:H.frontmatter,text:G,endPos:J.endPos}}function K$($,Z,J,X){let G=I($,Z),Y=t($,Z,G,3);if(Y.spaceEquivalent>3)return null;var V=Z+Y.charCount;if(V>=G)return null;let U=$[V];if(U!=="-"&&U!=="*"&&U!=="_")return null;var K=0,z=V;while(z<G){var F=$[z];if(F===U)K++;else if(F!==" "&&F!=="\t")return null;z++}if(K<3)return null;return{type:H.breakThematic,endPos:k($,G)}}function t($,Z,J,X){let G=0,Y=0,V=Z;while(V<J){var U=b($,V);if(U!==C&&U!==l)break;if(X!==void 0&&G>=X)break;if(U===l)G+=4-G%4;else G+=1;Y++,V++}return{spaceEquivalent:G,charCount:Y}}function AZ($,Z,J,X){let G=0,Y=0,V=X;for(let v=Z;v<J&&Y<4;v++){var U=b($,v);if(U===l){let _=4-V%4;if(Y+=_,G++,V+=_,Y>=4)break}else if(U===C){if(Y++,G++,V++,Y>=4)break}else break}let K=$.slice(Z+G,J);var z=0;for(var F=Z;F<J;F++){if($[F]==="\t")z++;if(z>=2)break}if(z>=2&&c(K,"\t")&&X>0)K="  "+K.slice(1);return K}function e9($,Z,J){let X=I($,Z),G=t($,Z,X);if(G.spaceEquivalent<4)return null;let Y=G.spaceEquivalent,V=I($,Z+G.charCount),U=Z,K=0;var z=U-1;while(z>=0&&$[z]!==`
`&&$[z]!=="\r")z--;z++;while(z<U){if($[z]==="\t")K=K+4-K%4;else K++;z++}let F=AZ($,U,V,K),v=k($,V);if(v>=$.length){if(!F.trim())return null;return{type:H.codeBlock,text:F,endPos:v}}var _=[];_.push(F);let j=v;while(j<$.length){let Q=I($,j);if(v1($,j,Q)){let D=Q+1;if(D<$.length){let q=I($,D),W=t($,D,q),M=$[D+W.charCount];if(M&&M!==`
`&&(W.spaceEquivalent<4||M===">"&&W.spaceEquivalent<Y))break}_.push(`
`)}else{if(t($,j,Q).spaceEquivalent<4)break;let q=AZ($,j,Q,0);_.push(`
`),_.push(q)}j=k($,Q)}let O=_.join("");if(O=O.replace(A6,""),!O.trim())return null;return{type:H.codeBlock,text:O,endPos:j}}function c$($,Z,J,X){let G=$[Z];if(G!=="`"&&G!=="~")return null;let Y=H9($,Z,G);if(Y<3)return null;let V=Z;while(V>0&&b($,V-1)!==d)V--;let U=t($,V,Z),K=U.spaceEquivalent,z=K;if(K===4&&U.charCount===4)K=0,z=4;if(K>=4)return null;let F=g0($,Z+Y),v=I($,F),_=$.slice(F,v).trim();if(G==="`"&&_.indexOf("`")!==-1)return null;_=_.replace(P$,"$1");let j=_.indexOf(" "),O=j>0?_.slice(0,j):_,Q=j>0?_.slice(j+1).trim():"",D=Q&&/=\s*["']/.test(Q)?h1(Q,"code","code",X):void 0,q=k($,v),W=q,M=!1;while(W<$.length){let E=I($,W),T=W,N=0;while(T<E){let y=b($,T);if(y===C){if(N++,T++,N>=4)break}else if(y===l){if(N+=4-N%4,T++,N>=4)break}else break}if(N<4){let y=H9($,T,G,E-T);if(y>=Y){let w=T+y;while(w<E){let L=b($,w);if(L===C||L===l)w++;else break}if(w===E){M=!0;break}if(y>=3&&w<E){let L=T+y;if(!(L<E&&(b($,L)===C||b($,L)===l))){let S=!0;if(G==="`"){if($.slice(L,E).indexOf("`")!==-1)S=!1}if(S)break}}}}else if(z===4&&K===0&&N===4){let y=H9($,T,G,E-T);if(y>=Y&&v1($,T+y,E)){M=!0;break}}W=k($,E)}let A=W>q&&$[W-1]===`
`?W-1:W;if(A>q&&$[A-1]==="\r")A--;let x=m1($.slice(q,A));if(z)x=h$(x,z);let B=M&&W<$.length?k($,I($,W)):W;return{type:H.codeBlock,text:x,lang:O,attrs:D,endPos:B}}function C6($,Z,J){for(var X=0;X<$.length;X++)if(!g$($[X])){let Y=i$($,Z,J,{inline:!1,inBlockQuote:!0});for(var G=0;G<Y.length;G++){let V=Y[G];if("endPos"in V)delete V.endPos}return Y}return[]}function PZ($,Z,J,X){if(J.inline)return null;let G=Z;while(G<$.length&&($[G]===" "||$[G]==="\t"))G++;if(G>=$.length||$[G]!==">")return null;let Y=Z;var V=[],U=void 0,K=!1,z=-1,F=!1,v=null,_=null,j=0,O=!1;while(Y<$.length){let B=I($,Y),E=Y;while(E<B&&($[E]===" "||$[E]==="\t"))E++;if(E<B&&$[E]===">"){let T=E+1;if(T<B&&$[T]===" ")T++;let y=t($,T,B).spaceEquivalent>=4,w=!1,L=null,f=0;if(T<B){let P=$[T];if(P==="`"||P==="~"){let g=0,h=T;while(h<B&&$[h]===P&&g<20)g++,h++;if(g>=3)w=!0,L=P,f=g}}if(F&&v==="fenced"&&L===_&&f>=j)F=!1,v=null,_=null,j=0;else if(y||w)F=!0,v=y?"indented":"fenced",_=L,j=f;var Q=!y&&!w;if(Q){for(var D=T;D<B;D++)if(!g$($[D])){Q=!1;break}}if(O=Q,z===-1&&!Q)z=V.length;if(!Q)K=!0;let S=E+1;if(S<B&&$[S]==="\t"){V.push("  ");let P=4;for(let g=S+1;g<B;g++){let h=$[g];var q=b(h);if(q===l){let R=4-P%4;if(R===1)V.push(" ");else if(R===2)V.push("  ");else if(R===3)V.push("   ");else V.push(" ".repeat(R));P+=R}else V.push(h),P++}if(B<$.length)V.push(`
`)}else{let P=S;if(P<B&&$[P]===" ")P++;if(V.push($.slice(P,B)),B<$.length)V.push(`
`)}}else{var W=!0;for(var D=Y;D<B;D++)if(!g$($[D])){W=!1;break}if(W||F)break;if(t($,Y,B).spaceEquivalent===0){let N=C9($,Y,J,X);if(N&&N.type!==H.ref&&N.type!==H.codeBlock)break;if(O)break}if(V.push($.slice(Y,B)),B<$.length)V.push(`
`)}Y=k($,B)}if(Y===Z)return null;if(V.length>0&&V[V.length-1]===`
`)V.pop();let M=V.join("");if(M.length>=4&&M.charCodeAt(0)===I1&&M.charCodeAt(1)===_9){let B=M.indexOf(`]
`,2);if(B>2)U=M.slice(2,B),M=M.slice(B+2)}let A=C6(M,J,X),x={type:H.blockQuote,children:A,endPos:Y};if(U)x.alert=U;return x}function h$($,Z){return $.split(`
`).map(function(J){if(J.length===0)return J;let X=Z,G=0,Y=0,V=0;while(Y<J.length&&G<X)if(J[Y]===" ")G++,V++,Y++;else if(J[Y]==="\t"){let U=4-V%4;if(G+U<=X)G+=U,V+=U,Y++;else{let K=X-G,z=Math.max(0,U-K);return" ".repeat(z)+J.slice(Y+1)}}else break;return J.slice(Y)}).join(`
`)}function $$($,Z,J,X,G=!0){let Y=(G?`
`:"")+$,V=g9(Y,0,Y.length,J,X);if(Z.length>0&&Z[Z.length-1].type===H.paragraph)Z[Z.length-1].children.push(...V);else Z.push(...V)}function x9($){return $.some(function(Z){return Z.type===H.codeBlock||Z.type===H.paragraph||Z.type===H.blockQuote||Z.type===H.orderedList||Z.type===H.unorderedList||Z.type===H.heading})}function L$($){return!!$.match(l$)}function IZ($){if($.length===0)return $;var Z=$[$.length-1];if((Z.type===H.orderedList||Z.type===H.unorderedList)&&Z.items?.length>0)return IZ(Z.items.slice(-1)[0]);return $}function p$($,Z,J,X,G,Y,V){if(!c(G,"["))return null;var U={inline:!1,list:!1,refs:Y.refs||{}},K=F9($,Z+X.charCount,U,V,!1);return K?K.endPos:null}function wZ($,Z,J,X){if($.length!==1||!J)return!1;if($[0].length!==0)return!1;if(Z)return!0;if(!Z&&X.trim()==="")return!0;return!1}function BZ($,Z){var J=$.index||0;return Z?J+$[1].length+$[2].length+1:J+$[1].length+1}function U$($,Z,J,X,G){var Y=0,V=X+G,U=Z;while(U<J&&Y<4){var K=b($,U);if(K===C)Y++,V++;else if(K===l){var z=4-V%4;if(Y+z>4)break;Y+=z,V+=z}else break;U++}return{contentStartColumn:V,contentStartPos:U}}function T$($){var Z=$.match(l$);if(!Z)return null;if(Z[1])return{match:[$,Z[1],Z[2],Z[3]],ordered:!0,listItemRegex:I$};if(Z[4])return{match:[$,Z[4],Z[5],""],ordered:!0,listItemRegex:I$};if(Z[6])return{match:[$,Z[6],Z[7]],ordered:!1,listItemRegex:f$};if(Z[8])return{match:[$,Z[8],""],ordered:!1,listItemRegex:f$};return null}function a1($,Z,J,X,G,Y,V){if(Z.spaceEquivalent!==Y)return!1;var U=$.match(V);if(U)return J?U[2]===G:U[1]===X;var K=$.match(l$);if(!K)return!1;if(J)return K[4]&&K[5]===G;else return K[8]===X}function fZ($,Z,J,X){var G=Z,Y=J,V=Z[0];while(Y<$.length){var U=I($,Y),K=$.slice(Y,U),z=c(K," ".repeat(X))?K.slice(X):K;if(c(z.trim(),V)&&H9(z.trim(),0,V)>=3)return{content:G,endPos:k($,U)};G+=`
`+z,Y=k($,U)}return{content:G,endPos:Y}}function n9($,Z,J,X,G,Y,V,U,K,z,F,v,_){var j=z?void 0:K[1],O=z?K[2]:void 0,Q=z?I$:f$,D=F;if(!F){var q=k($,Y),W=q;while(W<$.length){var M=I($,W),A=$.slice(W,M),x=t($,W,M),B=x.spaceEquivalent;if(v1($,W,M)){var E=k($,M);if(E<$.length){var T=I($,E),N=t($,E,T),y=N.spaceEquivalent,f=BZ(K,z),S=G+U+f,P=U$($,S,Y,V,f),g=P.contentStartColumn;if(y+1>g){D=!0;break}}break}else if(B<=V){var w=A.slice(x.charCount),L=w.match(Q);if(L&&(z?L[2]===O:L[1]===j))break}W=k($,M)}}var f=BZ(K,z),S=G+U+f,P=U$($,S,Y,V,f),g=P.contentStartColumn,h=X,R=k($,Y);if(c(X,"```")||c(X,"~~~")){var a=z?K[1].length+K[2].length+1:K[1].length+1,i=fZ($,X,R,a);h=i.content,R=i.endPos}return Z.push(gZ(h,D,v,_)),J.push(g),{newCurrentPos:R,itemHasBlankLine:D}}function NZ($,Z,J,X,G,Y){if(G>X||Y.disableParsingRawHTML)return!1;let V=Z+J;if(V>=$.length||$[V]!=="<")return!1;return k6($,V)}function k6($,Z){if(Z>=$.length||$[Z]!=="<")return!1;let J=$.length,X=Z+1;if(X<J&&$[X]==="/")X++;if(X>=J)return!1;let G=b($,X);if(!X9(G))return!1;X++;while(X<J){let V=$[X],U=b($,X);if(V===">"||V===" "||V==="\t"||V===`
`||V==="\r"||V==="/")break;if(V==="-"||V==="_"||X9(U)||U>=48&&U<=57)X++;else return!1}let Y=0;while(X<J){let V=$[X],U=b($,X);if(Y===1){if(V==='"')Y=0;X++}else if(Y===2){if(V==="'")Y=0;X++}else if(V==='"')Y=1,X++;else if(V==="'")Y=2,X++;else if(V===">")return!0;else if(V==="/"&&X+1<J&&$[X+1]===">")return!0;else if(U===10||U===13)return!1;else X++}return!1}function bZ($,Z,J,X,G,Y,V,U,K,z,F,v){let _=X,j=!1;while(_<$.length){let O=I($,_),Q=t($,_,O),D=Q.spaceEquivalent;if(v1($,_,O)){j=!0,_=k($,O);continue}let q=$.slice(_+Q.charCount,O);if(D<=G&&a1(q,Q,Y,V,U,G,K))break;if(D>=J){if(v&&j){let M=p$($,_,O,Q,q,z,F);if(M){_=M,j=!1;continue}}let W=Z$($,_,O,Q,J-1,J,Z,j,z,F,void 0,G);if(W.processed){_=W.newPos,j=W.wasBlank;continue}}else break}return _}function yZ($,Z,J,X){let G=i$($,J,X,{inline:!1,list:!0});if(G.length>0)return!Z&&G.length===1&&G[0].type===H.paragraph?G[0].children:G;let Y=j$(J,!0,()=>p1($,0,$.length,J,X));return Z&&Y.length>0?[{type:H.paragraph,children:Y}]:Y}function gZ($,Z,J,X){let G=I6($,0,J);if(!(G&&(G.endPos>=$.length||$[G.endPos]===" ")))return yZ($,Z,J,X);let V=G.endPos<$.length?G.endPos+1:G.endPos,U=$.slice(V),K=yZ(U,Z,J,X),z=[G];if(G.endPos<$.length)z.push({type:H.text,text:" "});return z.push(...K),z}function RZ($,Z){if(!$[0])return!1;let J=$[0].indexOf(Z);if(J===-1)return!1;let X=J+Z.length;if(X>=$[0].length)return!1;let G=$[0][X];return G?b(G)===JZ:!1}function CZ($,Z,J){if($.length===0)return!1;let X=$[$.length-1],G=Z.trim();if(!c(G,"=")&&!c(G,"-")||G.length<1||!/^[=-]+[ \t]*$/.test(G))return!1;let Y=[],V="";if(X.type===H.paragraph){let z=X;Y=z.children,V=z.children.map((F)=>F.type===H.text?F.text:"").join("").trim()}else if(X.type===H.text){let z=[],F=$.length-1;while(F>=0&&$[F].type===H.text)z.unshift($[F]),F--;if(z.length>0)Y=z,V=z.map((v)=>v.text).join("").trim()}if(!V)return!1;let K=G[0]==="="?1:2;if(X.type===H.paragraph)$.pop();else if(X.type===H.text)while($.length>0&&$[$.length-1].type===H.text)$.pop();return $.push(G$(K,Y,V,J.slugify)),!0}function Z$($,Z,J,X,G,Y,V,U,K,z,F,v){let _=X.spaceEquivalent,j=$.slice(Z+X.charCount,J);if(_>=G+4){let q=e9($,Z,K);if(q){let W=q,M=h$(W.text||"",Y);return V.push({...W,text:M}),{processed:!0,newPos:W.endPos,wasBlank:!1}}}let O=_-(Y-1);if(_+1>=Y&&O<=3){let q=Z+X.charCount;if(q<J){let W=$[q];if(W==="`"||W==="~"){let M=c$($,q,K,z);if(M){let A=M,x=h$(A.text||"",Y-1);return V.push({...A,text:x,endPos:A.endPos}),{processed:!0,newPos:A.endPos,wasBlank:!1}}}if(W==="|"){let M=kZ($,q,K,z);if(M){let A=M;return V.push(A),{processed:!0,newPos:A.endPos,wasBlank:!1}}}}}if(j.length>0&&(j[0]==="-"||j[0]==="*"||j[0]==="+"||j[0]>="0"&&j[0]<="9")){if(/^([-*+]|\d{1,9}[.)])\s+/.test(j)){let W=g9(j,0,j.length,K,z);return V.push({type:H.text,text:`
`},...W),{processed:!0,newPos:k($,J),wasBlank:!1}}}let Q=H6($,Z,V,j,K,z);if(Q!==null)return{processed:!0,newPos:Q,wasBlank:!1};let D=i$(j,K,z,{inline:!1,list:!0});if(D.length>0){if(F&&D[0].type===H.paragraph){let q=D[0];if(V.push({type:H.text,text:`
`},...q.children),D.length>1)V.push(...D.slice(1))}else if(!U&&D[0].type===H.paragraph&&V.length>0){let q=V[V.length-1],W=D[0];if(q.type===H.paragraph)q.children.push({type:H.text,text:`
`},...W.children);else if(q.type===H.heading)V.push(...W.children);else if(!x9(V))V.push({type:H.text,text:" "},...W.children);else V.push(...D);if(D.length>1)V.push(...D.slice(1))}else V.push(...D);return{processed:!0,newPos:k($,J),wasBlank:!1}}if(U){let q=j$(K,!0,()=>p1(j,0,j.length,K,z));V.push({type:H.paragraph,children:q})}else $$(j,V,K,z);return{processed:!0,newPos:k($,J),wasBlank:!1}}function u$($,Z,J,X){if(J.inline)return null;var G=J.inList;if(J.inList=!0,Z>0){var Y=b($,Z-1);if(Y!==d&&Y!==K0)return J.inList=G,null}var V=I($,Z),U=t($,Z,V);if(U.spaceEquivalent>3&&!J.inList)return J.inList=G,null;var K=$.slice(Z,V),z=U.charCount,F=K.slice(z),v=T$(F);if(!v)return J.inList=G,null;var{match:_,ordered:j,listItemRegex:O}=v,Q=U.spaceEquivalent,D=j?parseInt(_[1],10):void 0,q=j?_[2]:void 0,W=j?void 0:_[1],M=j?_[3]==="":_[2]==="";function A(n,S0){if(n===0)return!0;var y0=b($,n-1);if(y0!==d)return!1;if(!S0)return!0;var U0=n-2;while(U0>=0){var u=b($,U0);if(u!==C&&u!==l)break;U0--}return U0<0||b($,U0)===d}if(M&&!A(Z,!0))return J.inList=G,null;if(j&&D!==1&&!A(Z,!1))return null;if(!j&&RZ(_,W))return null;var x=_.index||0,B=j?x+_[1].length+_[2].length+1:M?x+_[1].length:x+_[1].length+1,E=Z+z+B,T=U$($,E,V,Q,B),N=T.contentStartColumn,y=Q+x+_[1].length,w=j?y+_[2].length+1:M?y:y+1,L=[],f=[];function S(n,S0,y0){return y0?n>=S0:n>S0}function P(){return L[L.length-1]}function g(){return f[f.length-1]??N}function h(n,S0){let y0=IZ(S0),U0=J.inList;J.inList=!0;let u=u$($,n,J,X);if(J.inList=U0,u)return y0.push(u),u;return null}var R=k($,V),a=R,i=!1;while(a<$.length){var D0=I($,a),w0=$.slice(a,D0);if(w0.trim()===""){var Q0=k($,D0);while(Q0<$.length){var T0=b($,Q0);if(T0===d);else if(!L6.has($[Q0]))break;Q0++}var p=I($,Q0),Y1=$.slice(Q0,p),G0=t($,Q0,p),P0=Y1.slice(G0.charCount);if(a1(P0,G0,j,W,q,Q,O))i=!0;else{var M0=p$($,Q0,p,G0,P0,J,X);if(M0){var z0=M0;while(z0<$.length&&b($,z0)===d)z0++;if(z0<$.length){var a0=I($,z0),I0=$.slice(z0,a0),k0=t($,z0,a0),A1=I0.slice(k0.charCount);if(a1(A1,k0,j,W,q,Q,O))i=!0}}}break}var r=t($,a,D0),V0=w0.slice(r.charCount),B0=T$(V0);if(!B0)break;var m0=B0.match;if(j){if(m0[2]!==q)break}else if(m0[1]!==W)break;a=k($,D0)}var H0=j?_[3]:_[2];H0=H0.trimStart();var q0=Z+z+(_.index||0),e=j?q0+_[1].length+_[2].length:q0+_[1].length,l0=e;while(l0<$.length){var T0=b($,l0);if(T0!==C&&T0!==l)break;l0++}var X0=0,$0=e;while($0<V){var T0=b($,$0);if(T0===l)X0+=4-X0%4;else if(T0===C)X0++;else break;$0++}var s=!1;if(e<$.length&&b($,e)===l){var r0=1,e0=e+1;while(e0<$.length&&b($,e0)===l)r0++,e0++;if(r0>=2)H0="      "+H0,s=!0}if(!j)M=M&&X0===0;if(X0>=4&&!s)H0=" ".repeat(X0-1)+H0.trimStart();var V1=H0.trim()==="";let D1=i;if(!i&&R<$.length){var K1=R;while(K1<$.length){var w1=I($,K1),O0=$.slice(K1,w1);if(v1($,K1,w1)){var s0=k($,w1);while(s0<$.length){var H1=I($,s0);if(v1($,s0,H1))s0=k($,H1);else break}if(s0<$.length){var E1=t($,s0,$.length),U1=E1.spaceEquivalent;if(U1>=Q){var h0=$.slice(s0,I($,s0)),z1=h0.slice(E1.charCount).match(O),B1=z1&&(j?z1[2]===q:z1[1]===W),O1=null;for(var o=R;o<K1;o=I($,o)+1){var $1=I($,o),Q1=t($,o,$1),o0=$.slice(o,$1).slice(Q1.charCount).match(O),G9=o0&&Q1.spaceEquivalent>Q&&Q1.spaceEquivalent>=N&&(j?o0[2]===q:o0[1]===W);if(G9){var N1=Q1.spaceEquivalent+1,b1=j?N1+o0[1].length+o0[2].length+1:N1+o0[1].length+1,Y9=o+Q1.charCount+o0[0].length,W9=U$($,Y9,$1,N1,b1-N1);O1=W9.contentStartColumn;break}}var V9=X0>=5?w:N;if(!B1&&U1>=V9&&(O1===null||U1+1<O1))D1=!0}}break}var F1=t($,K1,w1),x1=F1.spaceEquivalent,y1=O0.slice(F1.charCount),R1=y1.match(O),v0=R1&&(j?R1[2]===q:R1[1]===W);if(v0){if(x1<=Q)break}K1=k($,w1)}}var N0=H0;if(c(H0,"```")||c(H0,"~~~")){var p0=j?_[1].length+_[2].length+1:_[1].length+1,L1=fZ($,H0,R,p0);N0=L1.content,R=L1.endPos}var u0=!M&&H0.trim()===""&&X0>0&&X0<5;if(!D1){var f0=N0.length>0?N0[0]:"",X1=f0===">",Z=R;while(Z<$.length){var V=I($,Z),K=$.slice(Z,V);if(K.trim()==="")break;var U=t($,Z,V);if(U.spaceEquivalent<w)break;var F=K.slice(U.charCount);if(U.spaceEquivalent<=Q&&a1(F,U,j,W,q,Q,O))break;if(L$(F)&&U.spaceEquivalent>Q)break;var b0=F.length>0?F[0]:"",r1=b0===">"&&X1;if(b0===">"&&!r1||b0==="#"||c(F,"```")||c(F,"~~~"))break;N0+=`
`+F,R=Z=k($,V)}}if(L.push(gZ(N0,D1,J,X)),f.push(N),D1&&(X0>=5||u0)){let n=P();R=bZ($,n,w,R,Q,j,W,q,O,J,X,!0)}else if(!D1){let n=w-1;while(R<$.length){let S0=I($,R),y0=$.slice(R,S0),U0=t($,R,S0),u=U0.spaceEquivalent,_0=y0.slice(U0.charCount);if(y0.trim()===""||u<=Q&&a1(_0,U0,j,W,q,Q,O)||L$(_0)&&u>Q||u<n)break;let n0=P(),E0=Z$($,R,S0,U0,n,N,n0,!1,J,X,!0,Q);if(E0.processed)R=E0.newPos;else break}}var Z0=!1;while(R<$.length){let n=I($,R),S0=$.slice(R,n),y0=t($,R,n),U0=y0.charCount,u=y0.spaceEquivalent;if(S0.trim()==="")i=!0,Z0=!0,R=k($,n);else if(u<Q){let _0=S0.slice(U0);if(_0.startsWith("<")&&NZ($,R,U0,Q,u,X))break;let n0=_0.trim();if(n0.length>0&&L.length>0&&!f9(n0[0])&&!a1(_0,y0,j,W,q,Q,O)){let E0=P();if(E0.length>0){let Y0=E0[E0.length-1];if(!Z0&&(Y0.type===H.paragraph||Y0.type===H.text)){$$(_0,E0,J,X),Z0=!1,R=k($,n);continue}}}break}else{let _0=S0.slice(U0);if(L.length>0){let m=f[L.length-1]||N;if(u+1>=m&&!a1(_0,y0,j,W,q,Q,O)){let C0=P();if(C0.length>0&&CZ(C0,_0,X)){R=k($,n);continue}}}if(K$($,R,J,X))break;if(Z0){let m=p$($,R,n,y0,_0,J,X);if(m){R=m,Z0=!1;continue}}if(u<=Q){if(_0.startsWith("<")&&NZ($,R,U0,Q,u,X))break;if(!a1(_0,y0,j,W,q,Q,O)){if(u===Q&&!Z0){let m=_0.trim();if(m.length>0&&!f9(m[0])){let C0=C9($,R,J,X);if(C0&&C0.type!==H.paragraph)break;let R0=P();if(R0.length>0&&!x9(R0)){$$(_0,R0,J,X,!0),Z0=!1,R=k($,n);continue}}}break}}if(wZ(L,M,Z0,H0))break;let E0=T$(_0),Y0=E0?E0.match:null,M1=Y0&&(j?Y0[2]===q:Y0[1]===W);if(M1&&u>3&&Z0)break;if(M1&&u<=Q+3){if(u>=4&&Z0)break;if(u===Q){let m=j?Y0[3]:Y0[2];if(m=m.trimStart(),R=n9($,L,f,m,R,n,u,U0,Y0,j,i,J,X).newCurrentPos,Z0=!1,m.trim()===""){let R0=L[L.length-1],F0=g();R=bZ($,R0,F0,R,Q,j,W,q,O,J,X)}continue}if(u>Q){if(Z0){let F0=j?Y0[3]:Y0[2];F0=F0.trimStart(),R=n9($,L,f,F0,R,n,u,U0,Y0,j,i,J,X).newCurrentPos,Z0=!1;continue}let m=P(),C0=u+1,R0=S(C0,g(),x9(m));if(R0){let F0=h(R,m);if(F0){R=F0.endPos,Z0=!1;continue}}if(!R0&&M1){let F0=j?Y0[3]:Y0[2];if(F0=F0.trimStart(),!i){let d0=k($,n);while(d0<$.length){let L0=I($,d0),i0=$.slice(d0,L0),j0=t($,d0,L0),J1=j0.spaceEquivalent;if(i0.trim()===""){let v9=k($,L0);if(v9<$.length){let P1=t($,v9,$.length).spaceEquivalent,H$=u+(j?Y0[1].length+Y0[2].length+1:Y0[1].length+1);if(P1+1>H$)break}break}else if(J1<=Q){let W0=i0.slice(j0.charCount).match(O);if(W0&&(j?W0[2]===q:W0[1]===W)&&J1<=Q)break}d0=k($,L0)}}R=n9($,L,f,F0,R,n,u,U0,Y0,j,i,J,X).newCurrentPos,Z0=!1;continue}else if(!R0&&!M1)break;{let F0=P(),A0=F0.length===0;if(A0&&wZ(L,M,Z0,H0))break;let d0=F0.some((j0)=>j0.type===H.codeBlock||j0.type===H.paragraph||j0.type===H.blockQuote||j0.type===H.orderedList||j0.type===H.unorderedList||j0.type===H.heading),L0=A0&&L.length===1?w:N;if(d0?u>=L0:u>L0){let j0=Z$($,R,n,y0,L0,N,P(),Z0,J,X,void 0,Q);if(j0.processed){Z0=j0.wasBlank,R=j0.newPos;continue}}else break}}else if(u===Q){if(!j&&Y0&&RZ(Y0,Y0[1]))break;let m=j?Y0[3]:Y0[2];m=m.trimStart(),R=n9($,L,f,m,R,n,Q,U0,Y0,j,i,J,X).newCurrentPos,Z0=!1}}else if(u>Q){let m=P();if(L$(_0)){let A0=u+1;if(S(A0,g(),x9(m))){let i0=h(R,m);if(i0){R=i0.endPos,Z0=!1;continue}}if(u-Q>3){let i0=m.length>0?m[m.length-1]:null;if(i0&&(i0.type===H.paragraph||i0.type===H.text)){$$(_0,m,J,X),Z0=!1,R=k($,n);continue}}else break}else{let A0=h(R,m);if(A0){R=A0.endPos,Z0=!1;continue}}let R0=N;if(x9(m)?u>=R0-1:u>R0-1){let A0=Z$($,R,n,y0,R0-1,N,P(),Z0,J,X,void 0,Q);if(A0.processed){Z0=A0.wasBlank,R=A0.newPos;continue}}else break}else break}}if(i&&L.length>1&&L[0].length>0&&L[0][0].type!==H.paragraph){for(var J0=1;J0<L.length;J0++)if(L[J0].length>0&&L[J0][0].type===H.paragraph){var T1=!1;for(var W1=0;W1<L[0].length;W1++){var Z1=L[0][W1].type;if(Z1===H.codeBlock||Z1===H.heading||Z1===H.blockQuote||Z1===H.orderedList||Z1===H.unorderedList||Z1===H.htmlBlock||Z1===H.breakThematic){T1=!0;break}}if(!T1)L[0]=[{type:H.paragraph,children:L[0]}];break}}let M9=j?{type:H.orderedList,items:L,ordered:!0,start:D}:{type:H.unorderedList,items:L,ordered:!1};return J.inList=G,{...M9,endPos:R}}function kZ($,Z,J,X){if(J.inline)return null;let G=[],Y=Z;while(Y<$.length){let O=I($,Y);if(v1($,Y,O))break;let Q=$.slice(Y,O).trim();if(!(Q.indexOf("|")!==-1||G.length>=3&&Q&&!f9(Q[0])))break;G.push(Q),Y=k($,O)}if(G.length<2)return null;let V=(O)=>O[0]==="|"&&O[O.length-1]==="|"?O.slice(1,-1):O,U=(O)=>{let Q=[],D="",q=!1;for(let W=0;W<O.length;W++){let M=O[W];if(M==="\\"&&W+1<O.length&&O[W+1]==="|")D+="|",W++;else if(M==="`")q=!q,D+=M;else if(M==="|"&&!q)Q.push(D.trim()),D="";else D+=M}return Q.push(D.trim()),Q},K=U(V(G[0]));if(!K.length)return null;let z=U(V(G[1]));if(z.length!==K.length||z.some((O)=>!/^:?-+:?$/.test(O)))return null;let F=z.map((O)=>{let Q=O[0]===":",D=O[O.length-1]===":";return Q&&D?"center":Q?"left":D?"right":null});if(X.optimizeForStreaming&&G.length===2)return null;let v=(O)=>j$(J,!0,()=>O.map((Q)=>p1(Q,0,Q.length,J,X))),_=v(K),j=G.slice(2).map((O)=>{let Q=O.indexOf("|")!==-1?U(V(O)):[O.trim()],D=K.length;while(Q.length<D)Q.push("");return Q.length=D,v(Q)});return{type:H.table,header:_,cells:j,align:F,endPos:Y}}var m6=["div","p","section","article","aside","nav","header","footer","main","h1","h2","h3","h4","h5","h6","blockquote","ul","ol","li","dl","dt","dd","table","thead","tbody","tfoot","tr","td","th","form","fieldset","hr","pre","details","summary","figure","figcaption"],h6=new Set(["pre","script","style","textarea"]);function P9($){return m6.indexOf($.toLowerCase())!==-1}function z$($){return h6.has($)}function v1($,Z,J){for(var X=Z;X<J;X++){let G=b($,X);if(G!==C&&G!==l&&G!==K0)return!1}return!0}function j$($,Z,J){let X=$.inline;$.inline=Z;try{return J()}finally{$.inline=X}}function S$($,Z,J){var X=Z;while(X<J){var G=I($,X);if(v1($,X,G))return X;X=k($,G)}return J}function E$($,Z,J){return{type:H.htmlComment,text:m1($),endPos:Z,...J}}function D9($,Z,J,X,G,Y,V,U,K){var z=m1(Z),F=z;if(U&&(U.forceBlock||U.optimizeForStreaming)&&Z&&!Y){var v=new RegExp("^<"+$.toLowerCase()+"(\\s[^>]*)?>$","i");if(v.test(Z.trim()))F=""}var _=F,j=$.toLowerCase(),O=new RegExp("^<"+j+"[\\s>]","i");if(O.test(_)){var Q=_.indexOf(">");if(Q!==-1){_=_.slice(Q+1);var D="</"+j+">",q=_.indexOf(D);if(q!==-1)_=_.slice(0,q)}}else{var W="</"+j+">",M=_.indexOf(W);if(M!==-1)_=_.slice(0,M)}var A=[];if(_&&U&&!U.optimizeForStreaming){var x=K||{inline:!1,inHTML:!0,inAnchor:!1},B=_.trim(),E=_$.test(B),T=q$.test(B),N=Q$.test(B);if(E||T||N){var y={...x,inline:!1,inHTML:!0,inAnchor:x.inAnchor||j==="a"};A=k9(B,y,U)}else if(B){var w={...x,inline:!0,inHTML:!0,inAnchor:x.inAnchor||j==="a"};A=p1(B,0,B.length,w,U)}}return{type:H.htmlBlock,tag:$,attrs:X||{},rawAttrs:G,children:A,rawText:F,text:_,verbatim:!0,isClosingTag:Y,canInterruptParagraph:V,endPos:J}}function I9($){let Z=q$.test($),J=_$.test($),X=v6.test($);return Z||J&&!X}function LZ($,Z,J,X,G,Y,V,U,K,z){if(!U.inHTML&&!U.inline&&!i9(G,`
`)){let G0=Y,P0=V.length;while(G0<P0){let M0=I(V,G0);if(v1(V,G0,M0))break;let z0=V.slice(G0,M0).trim();if(z0.length>0&&f9(z0[0])){let a0=D$(V,G0,U,z);if(a0){G0=a0.endPos;continue}let I0=O9(V,G0);if(I0){G0=I0.endPos;continue}return null}G0=k(V,M0)}}let F=Z,v=z$(F);var _=!v&&!k1(Z),j=void 0;if(G){var O=G.indexOf(">");if(O!==-1){var Q=G.slice(0,O+1);if(Q.indexOf(`
`)!==-1)j=Q;var D=O;for(var q=1;q<O;q++){var W=Q[q];if(W===" "||W==="\t"||W===`
`||W===">"){D=q;break}}J=Q.slice(D,O)}}var M=J.replace(/^[\s\n\r\t]+/,""),A=h1(M,Z,$,z),x={...A},B=!1,E=!1;if(_&&X.length>0){var T="</"+F,N=X.indexOf(T);if(N>=0){var y=N+T.length;while(y<X.length&&(X[y]===" "||X[y]==="\t"))y++;if(y<X.length&&X[y]===">"){var w=X.slice(0,N);if(I9(w))X=w,E=!0;else B=!0}}if(!E){var L=X.length-1;if(X[L]===`
`){L--;while(L>=0&&(X[L]===" "||X[L]==="\t"||X[L]==="\r"))L--;if(L>=0&&X[L]===`
`)B=!0}}}var f=v||_&&B&&!I9(X),S=m1(X),P=S;if(f){if(S.length>0&&S[0]===`
`)S=S.slice(1),P=S;if(S.length>0&&S[S.length-1]===`
`)S=S.slice(0,-1),P=S;var T="</"+F+">",N=S.indexOf(T);if(N!==-1)S=S.slice(0,N)}let g=S.match(/^([ \t]*)/),h=g?g[1]:"",R=new RegExp(`^${h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"gm"),a=S.replace(R,""),i=_$.test(a),D0=q$.test(a),w0=F==="p",Q0=Q$.test(a),T0=w0?i:i||D0||U.inHTML&&Q0,p=[];if(a)if(T0||Q0){let G0={...U,inline:!1,inHTML:!0,inAnchor:U.inAnchor||F==="a"};p=k9(a,G0,z)}else{let G0={...U,inline:!0,inHTML:z.optimizeForStreaming?!0:U.inHTML,inAnchor:K||U.inAnchor||F==="a"};p=p1(a,0,a.length,G0,z)}var Y1=void 0;if(f)if(j!==void 0)Y1=j+P;else Y1=P;return{type:H.htmlBlock,tag:f?Z:$,attrs:x,rawAttrs:J,children:p,rawText:Y1,text:a,verbatim:f,canInterruptParagraph:!0,endPos:Y}}function D$($,Z,J,X){if($[Z]!=="<")return null;if(X.optimizeForStreaming&&J.inHTML)return null;if(!J.inline);if(Z+1<$.length){if($[Z+1]==="?"){var G=J$($,Z);if(G&&G.kind==="pi")return E$(G.text||"",G.endPos,{raw:!0})}else if($[Z+1]==="!"){if(Z+3<$.length&&$.slice(Z,Z+4)==="<!--"){if(J.inline);var Y=J$($,Z);if(Y&&Y.kind==="comment"){var V=Y.text||"",U=!1;if(V==="<!-->")V="",U=!0;else if(V==="<!--->")V="-",U=!0;else if(V.startsWith("<!--")&&V.endsWith("-->"))V=V.slice(4,-3);if(J.inline);return E$(V,Y.endPos,{endsWithGreaterThan:U})}}var K=J$($,Z);if(K&&(K.kind==="declaration"||K.kind==="cdata"))return E$(K.text||"",K.endPos,{raw:!0})}}if(Z+1<$.length){let K9=$[Z+1];if(K9===" "||K9===`
`||K9==="\t"||K9==="\r")return null}var z=$.indexOf(">",Z+1);if(z!==-1){var F=$.slice(Z+1,z),v=F.indexOf(" ")!==-1||F.indexOf("\t")!==-1;if(!v&&(c(F,"http://")||c(F,"https://")))return null;if(!v&&SZ(F))return null}var _=O9($,Z);if(!_&&!J.inline){var j=$.length,O=I($,Z),Q=Z,D=0;while(Q<O&&D<3&&($[Q]===" "||$[Q]==="\t"))D++,Q++;if(Q>=O||$[Q]!=="<")return null;if(Q+1<O){var j0=C$($,Q+1);if(j0){var J1=j0.tagName,q=P9(J1);if(!q)return null;var W=j0.nextPos,M=!1,A=!1,x="",B=O,E=!1;while(B<j&&!E){var T=!1;while(W<B){var N=$[W];if(A){if(N===x)A=!1,x="";if(N===`
`||N==="\r")M=!0;W++,T=!0}else if(N==='"'||N==="'")A=!0,x=N,W++,T=!0;else if(N===`
`||N==="\r"){M=!0,W++,T=!0;var y=I($,W);if(y===W)break;B=y}else if(N===">"){W++,E=!0;break}else W++,T=!0}if(E)break;if(!T&&W>=B){var w=I($,B+1);if(w<=B)break;B=w}else if(W>=B&&B<j){var w=I($,B+1);if(w<=B)break;B=w}else break}if(!M&&E)return null;if(W>=O&&O<j)W=O;var L=q?"type6":"type7",f=W,S=S$($,k($,O),j),P=$.slice(f,S),g=Z+1<$.length&&$[Z+1]==="/";if(L==="type7"&&P.trim()===""){var h=$.slice(Z,S),R=I(h,0);if(R<h.length)R++;var a=h.slice(0,R);return D9(J1,a,S,{},void 0,g,!1,X,J)}var i=$.slice(Z,S);return D9(J1,i,S,{},void 0,g,L==="type6",X,J)}}return null}if(!_)return null;if(z!==-1){var D0=$.slice(Z+1,z);if((c(D0,"http://")||c(D0,"https://"))&&(D0.indexOf(" ")!==-1||D0.indexOf("\t")!==-1))return null}var P0=Z+(_.isClosing?2:1);if(P0<$.length){var w0=$[P0],Q0=b(w0);if(Q0>=97&&Q0<=122||Q0>=65&&Q0<=90){if(P0+1<$.length&&$[P0+1]===":")return null}}if(_.isClosing){var T0=_.attrs.trim();if(T0.length>0)return null;if(!J.inline){var j=$.length,O=I($,Z),f=_.endPos,p=f;while(p<O&&($[p]===" "||$[p]==="\t"||$[p]==="\r"))p++;var Y1=p>=O||$[p]==="<"&&function(){var n$=O9($,p);return n$&&P9(n$.tagLower)}();if(Y1){var S=S$($,k($,O),j),P=$.slice(f,S);if(P.length>0){if(P[0]==="\r"&&P[1]===`
`)P=P.slice(2);else if(P[0]===`
`||P[0]==="\r")P=P.slice(1)}let rZ=_.tagLower||_.tagName.toLowerCase();return D9(_.tagName,P,S,h1(_.whitespaceBeforeAttrs+_.attrs,rZ,_.tagName,X),_.whitespaceBeforeAttrs+_.attrs,!0,!1,X,J)}}var G0=$.slice(Z,_.endPos);return{type:H.htmlSelfClosing,tag:_.tagName,attrs:{},endPos:_.endPos,isClosingTag:!0,rawText:G0}}var P0=Z+(_.isClosing?2:1);if(P0<$.length){var M0=$[P0];if(M0===" "||M0==="\t"||M0===`
`||M0==="\r")return null}var z0=_.tagLower,a0=k1(_.tagName);let I0=_.tagName.length>0&&_.tagName[0]>="A"&&_.tagName[0]<="Z";if(_.isSelfClosing||a0&&z0!=="a"){if(_.hasNewline&&!I0)return null;if(!J.inHTML&&!J.inline&&!I0)return null;var k0=_.attrs.replace(/\/\s*$/,""),A1=h1(k0,z0,_.tagName,X),G0=J.inline?$.slice(Z,_.endPos):void 0;let o$={type:H.htmlSelfClosing,tag:_.tagName,attrs:A1,endPos:_.endPos};if(G0!==void 0)o$.rawText=G0;return o$}if(J.inline){var r=_.attrs.replace(/\/\s*$/,""),V0=_.whitespaceBeforeAttrs+r,B0=h1(r,z0,_.tagName,X),m0={...B0},H0=_.endPos,q0=[];if(!k1(_.tagName)){var e=W6($,_.endPos,z0);if(e!==null){var l0=$.slice(_.endPos,e[0]);if(l0)if(J.inHTML&&Q$.test(l0)||I9(l0))q0=k9(l0,{...J,inline:!1,inHTML:!0,inAnchor:J.inAnchor||z0==="a"},X);else q0=p1(l0,0,l0.length,{...J,inline:!0,inHTML:X.optimizeForStreaming?!0:J.inHTML,inAnchor:J.inAnchor||z0==="a"},X);H0=e[1]}}return{type:H.htmlBlock,tag:_.tagName,attrs:m0,rawAttrs:V0,children:q0,verbatim:!1,endPos:H0}}if(!J.inline){var j=$.length,O=I($,Z),X0=_.tagLower,$0=z$(X0),s=!$0&&P9(_.tagName),r0=!1,e0=Z;while(e0<_.endPos){if($[e0]===">"){r0=!0;break}e0++}var p=_.endPos;while(p<O&&($[p]===" "||$[p]==="\t"))p++;var V1=p>=O||$[p]===`
`||$[p]==="\r"||s&&p<O||!r0;if($0&&r0&&!_.isClosing){var{tagName:D1,endPos:K1,attrs:w1}=_,O0=K1;if($[O0]===`
`)O0++;var s0=O0,H1=O0,E1=1,U1=X0.length+1;while(E1>0){var h0=$.indexOf("<",O0);if(h0===-1){H1=j,O0=j;break}var z1=-1,B1=-1;if($[h0+1]==="/")B1=h0;else if(h0+U1+1<=j&&($[h0+1]===X0[0]||$[h0+1]===D1[0])){var O1=$.substring(h0+1,h0+U1);if(O1.toLowerCase()===X0&&($[h0+U1]===" "||$[h0+U1]===">"))z1=h0}if(z1===-1&&B1===-1){O0=h0+1;continue}if(z1!==-1&&(B1===-1||z1<B1))O0=z1+U1+1,E1++;else{var o=B1+2;while(o<j){var $1=$[o];if($1!==" "&&$1!=="\t"&&$1!==`
`&&$1!=="\r")break;o++}if(o+X0.length>j)break;var Q1=$.substring(o,o+X0.length);if(Q1.toLowerCase()!==X0){O0=o;continue}o+=X0.length;while(o<j){var o0=$[o];if(o0!==" "&&o0!=="\t"&&o0!==`
`&&o0!=="\r")break;o++}if(o>=j||$[o]!==">"){O0=o;continue}var G9=o+1,N1=I($,G9);H1=N1,O0=N1+1,E1--}}var b1=0;while(O0+b1<j&&$[O0+b1]===`
`)b1++;var Y9=$.slice(Z,O0+b1),W9=$.slice(s0,H1),V9=O0+b1;return LZ(_.tagName,_.tagName,w1,W9,Y9,V9,$,J,!1,X)}if(V1||!r0){var L=s?"type6":"type7",f=_.endPos,S=S$($,k($,O),j);if(L==="type6"&&!_.isClosing){let h9=I0?_.tagName:_.tagLower||_.tagName.toLowerCase();var F1="</"+h9,x1="<"+h9,y1=f,R1=1,v0=-1;while(y1<S&&R1>0){var N0=$.indexOf(x1,y1),p0=$.indexOf(F1,y1);while(N0!==-1&&N0<S){var L1=N0+x1.length;if(L1>=j){N0=-1;break}var u0=$[L1];if(u0===" "||u0==="\t"||u0===`
`||u0==="\r"||u0===">")break;N0=$.indexOf(x1,L1)}if(N0===-1||N0>=S)N0=S;if(p0===-1||p0>=S)p0=S;if(N0<p0)R1++,y1=N0+x1.length;else if(p0<S){if(R1--,R1===0){v0=p0;break}y1=p0+F1.length}else break}if(v0!==-1&&v0<S){var f0=v0+F1.length;while(f0<j&&($[f0]===" "||$[f0]==="\t"))f0++;if(f0<j&&$[f0]===">"){var X1=f0+1,b0=X1;while(b0<j&&$[b0]!==`
`)b0++;if(b0<j)b0++;while(b0<j&&($[b0]===" "||$[b0]==="\t"))b0++;if(b0<j&&$[b0]==="<"&&!c($.slice(b0),F1)){var r1=O9($,b0);if(r1)S=X1}}}else if(v0=$.indexOf(F1,f),v0!==-1){var m9=$.slice(f,v0),Z0=I0||I9(m9);if(Z0){var J0=v0+F1.length;while(J0<j&&($[J0]===" "||$[J0]==="\t"))J0++;if(J0<j&&$[J0]===">"){var T1=I($,J0+1);S=T1}}}}var P=$.slice(f,S),W1=_.whitespaceBeforeAttrs+_.attrs,g=_.isClosing;let t$=()=>{let h9=_.tagLower||_.tagName.toLowerCase(),w9=_.whitespaceBeforeAttrs+_.attrs;return{parsed:h1(w9,h9,_.tagName,X),raw:w9}};if(L==="type7"&&P.trim()===""){var Z1=$.slice(Z,_.endPos),M9=Z1.indexOf(`
`)!==-1;if(M9)return null;var n=_.endPos,R=I($,n);if(R<$.length)R++;var a=$.slice(Z,R);let $Z=t$();return D9(_.tagName,a,S,$Z.parsed,$Z.raw,g,!1,X,J)}var S0=_.hasNewline,y0=!r0;if((S0||y0)&&L==="type7"){var U0=_.endPos,u=$.slice(Z,U0),_0=P,i=u+_0;let w9=t$();return D9(_.tagName,i,S,w9.parsed,w9.raw,g,!1,X,J)}let e$=_.tagLower||_.tagName.toLowerCase();var n0=h1(W1,e$,_.tagName,X),E0={...n0};if(L==="type6"){var Y0=P,M1=P.indexOf("</"+e$);if(M1>=0){var p=M1+2+_.tagName.length;while(p<P.length&&(P[p]===" "||P[p]==="\t"))p++;if(p<P.length&&P[p]===">")Y0=P.slice(0,M1)}if(I9(Y0))return LZ(_.tagName,_.tagName,W1,Y0,$.slice(Z,_.endPos),S,$,J,!1,X)}var m=P;if(m.length>0){if(m[0]==="\r"&&m[1]===`
`)m=m.slice(2);else if(m[0]===`
`||m[0]==="\r")m=m.slice(1)}var C0=m.split(`
`),R0=1/0;for(var F0=0;F0<C0.length;F0++){var A0=C0[F0];if(A0.trim().length===0)continue;var D=0;while(D<A0.length&&(A0[D]===" "||A0[D]==="\t"))D++;if(D<R0)R0=D}if(R0>0&&R0<1/0){var d0=[];for(var L0=0;L0<C0.length;L0++){var i0=C0[L0];if(i0.trim().length===0)d0.push(i0);else d0.push(i0.slice(R0))}m=d0.join(`
`)}return D9(_.tagName,m,S,E0,W1,g,L==="type6"?!0:!1,X,J)}}if(J.inline)return null;var j0=C$($,Z+1);if(!j0)return null;var J1=j0.tagName;if(!k1(J1))return null;let v9=j0.tagLower;var W0=j0.nextPos,P1=$.length;while(W0<P1&&j1($[W0]))W0++;var r$=W0;while(W0<P1&&$[W0]!==">")W0++;if(W0>=P1)return null;let H$=$.slice(r$,W0).trim(),A9=W0+1;while(A9<P1&&j1($[A9]))A9++;let iZ="</"+v9+">",s$=$.toLowerCase().indexOf(iZ,A9);if(s$!==-1){if($.slice(A9,s$).trim())return null}W0++;let cZ=W0;while(W0<P1&&j1($[W0]))W0++;if(W0<P1&&$[W0]===`
`)W0++;let aZ=h1(H$,J1,J1,X);return{type:H.htmlSelfClosing,tag:J1,attrs:aZ,endPos:cZ}}function p6($,Z){if($[Z]!=="<")return null;var J=$.length,X=!1,G=Z+1;if(Z+1<J&&$[Z+1]==="/")X=!0,G=Z+2;var Y=C$($,G);if(!Y)return null;var{tagName:V,tagLower:U,nextPos:K}=Y;if(K<J){var z=$[K];if(z===">"||z==="/"){var F=z===">"?K+1:K+2;if(z==="/"&&(K+1>=J||$[K+1]!==">"))return null;var v=z==="/",_=P9(V),j=!z$(U)&&!_;return{kind:"tag",tagNameLower:U,tagName:V,isClosing:X,isSelfClosing:v,hasNewline:!1,type6Candidate:_,type7Candidate:j,endPos:F,attrs:"",whitespaceBeforeAttrs:""}}}var O=K,Q=!1;while(K<J){var D=$[K],q=b($,K);if(D===" "||D==="\t");else if(q===10||q===13)Q=!0;else break;K++}var W=$.slice(O,K),M=K,A=!1,x="",B=0,E=!1,T=!1,N=0;while(M<J){var y=$[M],q=b($,M);if(N===1){if(y==='"'){if(M+1<J&&$[M+1]==='"')return null;N=0}M++}else if(N===2){if(y==="'")N=0;M++}else if(y==='"')N=1,M++;else if(y==="'")N=2,M++;else if(y==="{"||y==="}"&&B>0)B+=y==="{"?1:-1,M++;else if(y===">"&&B===0){if(M>K){var w=M-1;while(w>=K){var L=$[w];if(L!==" "&&L!=="\t")break;w--}if(w>=K&&$[w]==="/")E=!0,T=w<M-1}M++;break}else{if(y==="*"||y==="#"||y==="!"){var f=M+1;while(f<J){var S=$[f];if(S==="="||S===" "||S==="\t"||S===`
`||S==="\r"||S===">")break;f++}if(f<J&&$[f]==="=")return null}if(q===10||q===13)Q=!0;M++}}if(M>J||$[M-1]!==">")return null;if(N===1||N===2)return null;if(B>0)return null;if(T)return null;var P=M-1;if(E)P--;var g=$.slice(K,P),h=E,R=-1,a=!1,i="",D0=!1;for(var w0=0;w0<g.length;w0++){var D=g[w0];if(a){if(D===i)a=!1,R=w0,i="",D0=!1}else if(D==='"'||D==="'")a=!0,i=D,D0=!1;else if(D==="=")D0=!0;else if(R!==-1&&w0===R+1){var q=D.charCodeAt(0);if(X9(q))return null}else if(D0&&!a&&(D==="*"||D==="#"||D==="!"))return null;else if(j1(D))D0=!1}var Q0=P9(V),T0=!z$(U)&&!Q0;return{kind:"tag",tagNameLower:U,tagName:V,isClosing:X,isSelfClosing:h,hasNewline:Q,type6Candidate:Q0,type7Candidate:T0,endPos:M,attrs:g,whitespaceBeforeAttrs:W}}function J$($,Z){if(Z>=$.length||$[Z]!=="<")return null;var J=$.length;if(Z+1>=J)return null;var X=$[Z+1];if(X==="!"){if(Z+4<=J&&$.slice(Z,Z+4)==="<!--"){var G=Z+4;if(G<J&&$[G]===">")return{kind:"comment",hasNewline:!1,endPos:G+1,text:$.slice(Z,G+1),raw:!0};if(G+1<J&&$[G]==="-"&&$[G+1]===">")return{kind:"comment",hasNewline:!1,endPos:G+2,text:$.slice(Z,G+2),raw:!0};while(G+2<J){if($.slice(G,G+3)==="-->")return{kind:"comment",hasNewline:!1,endPos:G+3,text:$.slice(Z,G+3),raw:!0};G++}return null}if(Z+9<=J&&$.slice(Z,Z+9)==="<![CDATA["){var G=Z+9;while(G+2<J){if($.slice(G,G+3)==="]]>")return{kind:"cdata",hasNewline:!1,endPos:G+3,text:$.slice(Z,G+3),raw:!0};G++}return null}if(Z+2<J&&X9($.charCodeAt(Z+2))){var G=Z+2;while(G<J&&$[G]!==">")G++;if(G>=J)return null;return{kind:"declaration",hasNewline:!1,endPos:G+1,text:$.slice(Z,G+1),raw:!0}}return null}if(X==="?"){var G=Z+2;while(G+1<J){if($.slice(G,G+2)==="?>")return{kind:"pi",hasNewline:!1,endPos:G+2,text:$.slice(Z,G+2),raw:!0};G++}return null}return p6($,Z)}function x$($,Z){if(Z>=$.length)return!1;var J=$[Z];return J==="="||J==="-"||J==="_"||J==="*"||J==="#"||J===">"||J==="`"||J==="~"||J==="["||J>="0"&&J<="9"}function t9($,Z){if(Z>=$.length)return!1;var J=$[Z];return J==='"'||J==="'"||J==="("}function u6($,Z,J){var X=$.length;if(Z>=X||$[Z]!==J)return null;Z++;var G=Z,Y=!1;while(Z<X&&$[Z]!==J){var V=$.charCodeAt(Z);if(V===d){if(Y)return null;Y=!0,Z++}else if(V===K0)if(Z+1<X&&$.charCodeAt(Z+1)===d){if(Y)return null;Y=!0,Z+=2}else Y=!1,Z++;else{if(Y=!1,V===U9&&Z+1<X)Z++;Z++}}if(Z>=X)return null;return{value:$.slice(G,Z),endPos:Z+1}}function l6($,Z){var J=$.length;if(Z>=J||$[Z]!=="(")return null;Z++;var X=Z,G=1,Y=!1;while(Z<J&&G>0){var V=$.charCodeAt(Z);if(V===d){if(Y)return null;Y=!0,Z++}else if(V===K0)if(Z+1<J&&$.charCodeAt(Z+1)===d){if(Y)return null;Y=!0,Z+=2}else Y=!1,Z++;else{if(Y=!1,V===U9&&Z+1<J)Z++;else if(V===KZ)G++;else if(V===UZ)G--;Z++}}if(G!==0)return null;return{value:$.slice(X,Z-1),endPos:Z}}function d6($,Z){var J=$.length,X=Z;while(X<J){var G=X===0||$[X-1]===`
`,Y=$.charCodeAt(X);if(Y===d&&X>Z){var V=X+1;if(V<J&&$.charCodeAt(V)===K0)V++;if(V<J&&$.charCodeAt(V)===d){var U=V+1;while(U<J&&($[U]===" "||$[U]==="\t"))U++;var K=U-(X+1);if($.charCodeAt(X+1)===K0)K--;if(U<J&&$.charCodeAt(U)!==d&&$.charCodeAt(U)!==K0&&K<4)return X}}if(G&&c($,"[^",X)){var z=X+2;while(z<J&&$[z]!=="]")z++;if(z<J&&$[z]==="]"&&z+1<J&&$[z+1]===":")return X}X++}return J}function i6($,Z,J){let X=$.length,G=Z,Y=G<X&&$[G]==="<";if(Y)G++;let V=G,U=V;if(V>=X){if(!Y)return null;U=V}else if(J>0&&V<X&&$[V]===`
`)return null;else while(U<X){if(Y&&$[U]===">")break;if($[U]===`
`){let N=U+1;if(N>=X)break;if(N<X&&$[N]===`
`)break;let y=N;while(y<X&&($[y]===" "||$[y]==="\t"))y++;if(y<X&&t9($,y))break;if(y<X&&$[y]==="[")break;if(y<X){let w=$[y];if(x$($,y))break;if(w>="a"&&w<="z"){let L=y+1;while(L<X&&L<y+32&&($[L]>="a"&&$[L]<="z"||$[L]>="A"&&$[L]<="Z"||$[L]>="0"&&$[L]<="9"||$[L]==="+"||$[L]==="."||$[L]==="-"))L++;if(L<X&&$[L]===":");else break}}U=y;continue}if(!Y&&($[U]===" "||$[U]==="\t")){let N=U+1;while(N<X&&($[N]===" "||$[N]==="\t"))N++;if(N<X&&t9($,N))break;if(N<X&&$[N]===`
`){let y=N+1;if(y<X&&$[y]===`
`)break;let w=y;while(w<X&&($[w]===" "||$[w]==="\t"))w++;if(w<X&&t9($,w))break}}U++}if(Y&&(U>=X||$[U]!==">"))return null;let K=$.slice(V,U),z=[],F=0;for(let N=0;N<=K.length;N++)if(N===K.length||K[N]===`
`){let y=K.slice(F,N);if(y=y.trim(),y.length>0||z.length===0){if(z.push(y),N<K.length)z.push(`
`)}else if(N<K.length)z.push(`
`);F=N+1}K=z.join(""),K=K.trim(),G=Y?U+1:U;var v=!1;if(G<X&&$[G]===`
`){var _=G+1,j=_;while(j<X&&($[j]===" "||$[j]==="\t"))j++;if(j<X){let N=$[j];if(x$($,j))v=!0;if(!v&&N!=="="&&N!=="-"){var O=I($,j);if(O<X){var Q=k($,O),D=Q;while(D<X&&($[D]===" "||$[D]==="\t"))D++;if(D<X){var q=$[D];if(q==="="||q==="-")v=!0}}}}}if(!v&&G<X&&t9($,G))return null;let W=0;while(G<X&&!v){let N=$[G];if(N===`
`){if(W++,W>1)break;G++;var M=G;if(G=g0($,G),G<X&&J9($[G])&&$[G]!==`
`){G=M-1;break}if(G<X){let y=$[G];if(x$($,G)){v=!0,G=M-1;break}}}else if(N===" "||N==="\t")G++;else if(J9(N))break;else break}let A=void 0;if(G<X){let N=$[G];var x=N==="("?l6($,G):N==='"'||N==="'"?u6($,G,N):null;if(x===null&&(N==='"'||N==="'"||N==="("))return null;if(x){A=x.value,G=x.endPos;var B=G;while(B<X&&($[B]===" "||$[B]==="\t"))B++;if(B<X&&$[B]!==`
`&&$[B]!=="\r")return null;G=B}}if(G=g0($,G),G<X&&$[G]!==`
`){var E=G;while(E<X&&$[E]!==`
`){if($[E]!==" "&&$[E]!=="\t")return null;E++}}if(A===void 0&&G<X&&$[G]!==`
`){var T=G;while(T<X&&$[T]!==`
`){if($[T]!==" "&&$[T]!=="\t")return null;T++}}return{endPos:G<X&&$[G]===`
`?G+1:G,target:K,title:A}}function c6($,Z){let J=Z,X=d6($,Z),G=X<$.length&&$[X]===`
`&&$[X+1]===`
`,Y=X,V=Z;var U=[];let K=V,z=0,F=!1;while(K<Y){let O=I($,K);if(O>Y)O=Y;if(z===0){let Q=O;while(Q>K&&($[Q-1]===" "||$[Q-1]==="\t"))Q--;let D=$.slice(K,Q);U.push(D),F=D.length===0}else{let Q=0,D=K;while(D<O&&D<K+4&&$[D]===" ")Q++,D++;let q=!1;for(let M=K;M<O;M++)if($[M]!==" "&&$[M]!=="\t"&&$[M]!=="\r"){q=!0;break}let W=!q;if(Q>=4&&F)U.push($.slice(K,O));else if(Q===4&&!F)U.push($.slice(K+4,O));else U.push($.slice(K,O));F=W}if(O<Y){let Q=b($,O);if(Q===K0||Q===d)U.push(`
`),K=k($,O);else K=Y}else K=Y;z++}let v=U.join("");if(G)v=v.replace(/\n$/,"");var _=v.length;while(_>0){var j=v[_-1];if(j===`
`||j===" ")_--;else break}if(_<v.length)v=v.slice(0,_);return{endPos:X,target:v,title:void 0}}function F9($,Z,J,X,G){if($[Z]!=="[")return null;var Y=Z+1<$.length&&$[Z+1]==="^";if(G?!Y:Y)return null;var V=Z;while(V>0&&$[V-1]!==`
`)V--;if(t($,V,Z).spaceEquivalent>=4||J.inline)return null;var U=Z+(G?2:1),K=$.length,z=B6($,U,K,"]");if(z===-1)return null;var F=$.slice(U,z);if(F.length>999)return null;var v=!1,_=!1,j=!1;for(var O=0;O<F.length;O++){var Q=F[O];if(Q==="\\"&&O+1<F.length){O++;continue}var D=b(Q);if(D===I1||D===Q9)_=!0;else if(D===d||D===K0)j=!0;else if(D!==C&&D!==l)v=!0}if(!v||_)return null;var q=z+1;if(j){var W=b($,U),M=b($,z-1);if(W===d||W===K0||M===d||M===K0||q>=K||$[q]!==":")return null}else if(q>=K||$[q]!==":"){if(q=g0($,q),q<K&&b($,q)===d)q=g0($,q+1);if(q>=K||$[q]!==":")return null}q++;var A=0;while(q<K){var x=b($,q);if(x===d){if(++A>1)break;q=g0($,q+1)}else if(x===C||x===l)q++;else break}let B=G?c6($,q):i6($,q,A);if(!B)return null;let E=EZ(F),T=J.refs||{},N=G?`^${E}`:E;if(!T[N])T[N]={target:X$(B.target.trim()),title:B.title?X$(B.title):void 0},J.refs=T;return{type:G?H.footnote:H.ref,endPos:B.endPos}}function mZ($,Z,J){var X=[],G=J===null?0:J+1;while(G<Z.length){var Y=Z[G];if(!Y||Y.type!=="*"&&Y.type!=="_"&&Y.type!=="~"&&Y.type!=="="){G++;continue}if(!Y.canClose||!Y.active){G++;continue}var V=Y.type==="*"?0:Y.type==="_"?1:Y.type==="~"?2:3,U=V*6+Y.length%3*2+(Y.canOpen?1:0),K=X[U]!==void 0?X[U]:J===null?-1:J,z=-1,F=Y.type,v=Y.inAnchor,_=Y.canOpen,j=Y.length,O=j%3;for(var Q=G-1;Q>K;Q--){var D=Z[Q];if(!D||!D.active||D.type!==F||!D.canOpen||D.inAnchor!==v)continue;var q=D.length;if(!_&&!D.canClose||O===0||(q+j)%3!==0){z=Q;break}}if(z>=0){var W=Z[z],q=W.length,M=q>=2&&j>=2,A=M?2:1;if(A>q||A>j){G++;continue}var x=W.nodeIndex,B=Y.nodeIndex,E=x+1,T=B,N=$.slice(E,T);if(N.length>0){var y=T-E;$.splice(E,y);for(var w=0;w<Z.length;w++)if(Z[w].nodeIndex>E)Z[w].nodeIndex-=y;if(B>E)B-=y}var L=W.type==="~"?"del":W.type==="="?"mark":M?"strong":"em",f={type:H.textFormatted,tag:L,children:N},S=$[x];if(!S||!S.text){W.active=Y.active=!1;continue}var P=S.text.length<=A;if(P){$.splice(x,1);for(var w=0;w<Z.length;w++)if(Z[w].nodeIndex>x)Z[w].nodeIndex--;if(B>x)B--}else S.text=S.text.slice(A);var g=$[B];if(!g||!g.text){W.active=Y.active=!1;continue}var h=g.text.length<=A;if(h){$.splice(B,1);for(var w=0;w<Z.length;w++)if(Z[w].nodeIndex>B)Z[w].nodeIndex--}else g.text=g.text.slice(A);var R=P?x<B?B-1:x:x+1;if(R<0||R>$.length)R=R<0?0:$.length;$.splice(R,0,f);for(var w=0;w<Z.length;w++)if(Z[w].nodeIndex>=R)Z[w].nodeIndex++;for(var w=z+1;w<G;w++)Z[w].active=!1;if(P)W.active=!1;else if(W.length-=A,W.length===0)W.active=!1;if(h)Y.active=!1,G++;else if(Y.length-=A,Y.length===0)Y.active=!1,G++}else{if(X[U]=G-1,!Y.canOpen)Y.active=!1;G++}}var a=0;for(var Q=0;Q<Z.length;Q++)if(Z[Q].active)Z[a++]=Z[Q];Z.length=a}function a6($,Z,J){var X=[],G=0,Y=-3,V=Y;if(Z.inline)return p1($,0,$.length,Z,J);if(G===0&&$.startsWith("---")){var U=g6($,G);if(U)X.push(U),G=U.endPos}while(G<$.length){while(G<$.length&&$[G]===`
`)G++;if(G>=$.length)break;V=Y;let v=$[G],_=C9($,G,Z,J);if(_){let q=_.type;if(q===H.codeBlock){var K=v==="`"||v==="~";if(!K&&(v===" "||v==="\t")){let W=I($,G),M=t($,G,W);K=M.spaceEquivalent<=3&&G+M.charCount<$.length&&($[G+M.charCount]==="`"||$[G+M.charCount]==="~")}}else if(q===H.breakThematic);else if(q===H.blockQuote);else if(q===H.heading);else if(q===H.orderedList||q===H.unorderedList);else if(q===H.table);else if(q===H.htmlComment);else if(q===H.htmlBlock);else if(q===H.ref);if(_.type===H.htmlComment){X.push(_);let W=G;G=_.endPos;let M=I($,W);if(G<M){let A=$.slice(G,M);if(A.trim().length>0)X.push({type:H.text,text:A});if(G=M,G<$.length&&$[G]===`
`)G++}continue}if(_.type===H.htmlBlock||_.type===H.htmlSelfClosing)if(_.type===H.htmlSelfClosing&&_.isClosingTag===!0&&!Z.inline&&!Z.inHTML);else{X.push(_),G=_.endPos;continue}else{X.push(_),G=_.endPos;continue}}let j=V!==Y?V:G;if(V===Y){if(j1(v)){let q=I($,G),W=t($,G,q),M=G+W.charCount;if(W.spaceEquivalent<=3&&M<$.length&&$[M]==="[")j=M;else j=-1}else if(v==="[")j=G;else j=-1;V=j}if(j>=0&&j+1<$.length&&$[j+1]==="^")j=-1;if(j>=0){let q=F9($,j,Z,J,!1);if(q){X.push(q),G=q.endPos;continue}let W=y6($,j,G===0);if(W.shouldSkip){G=W.newPos;continue}}let O=xZ($,G,Z,J);if(O){X.push(O),G=O.endPos;continue}let Q=G;if(j1($[Q])){let q=I($,G),W=t($,G,q);Q=G+W.charCount}if(Q<$.length&&$[Q]==="["&&Q+1<$.length&&$[Q+1]==="^"){let q=F9($,Q,Z,J,!0);if(q){G=q.endPos;continue}}let D=m$($,G,Z,J);if(D){X.push(D),G=D.endPos;continue}G++}let z=Z.refs||{},F={};for(let v in z)F[v]=z[v];if(a9(F))return[{type:H.refCollection,refs:F},...X];return X}function hZ($,Z,J){var X=0,G=!0;let Y=$.length;while(X<Y){var V=0;while(X<Y&&b($,X)===d)V++,X++;if(X>=Y)break;if(V>0)G=!0;let M=b($,X);if(M===_1||M===s1){var U=c$($,X,{inline:!1},J);if(U){X=U.endPos,G=!0;continue}}var K=X,z=0;while(K<Y&&z<4){let A=b($,K);if(A===C)z++,K++;else if(A===l)z+=4-z%4,K++;else break}if(z<4&&K<Y&&b($,K)===I1&&G)if(K+1<Y&&b($,K+1)===O$){G=!1;var q=I($,X);X=q>=Y?Y:k($,q);continue}else{var F=F9($,K,{inline:!1,refs:Z},J,!1);if(F){X=F.endPos,G=!0;continue}var q=I($,X),v=$.indexOf(":",K+1);if(v===-1||v>=q){var _=t($,X,q);if(!v1($,X,q)&&M!==B9&&M!==f1&&M!==q1&&M!==u1&&_.spaceEquivalent<4)G=!1}X=q>=Y?Y:k($,q);continue}if(M===f1&&G){var j=X,O=[];while(j<Y){var q=I($,j),Q=j;while(Q<q){let x=b($,Q);if(x===C||x===l)Q++;else break}if(Q>=q||b($,Q)!==f1)break;var D=Q+1;if(D<q&&(b($,D)===C||b($,D)===l))D++;O.push($.slice(D,q)),j=k($,q)}if(O.length){hZ(O.join(`
`),Z,J),X=j,G=!0;continue}}var q=I($,X);if(q>=Y)X=Y;else{var W=v1($,X,q),_=t($,X,q);X=k($,q),G=M===B9||M===f1||M===q1||M===u1||W||_.spaceEquivalent>=4}}}function a$($,Z){if($.charCodeAt(0)===65279)$=$.slice(1);$=m1($);let X={...{inline:!1,refs:{}}},G={...Z,slugify:Z?.slugify?(V)=>Z.slugify(V,d9):d9,sanitizer:Z?.sanitizer||w$,tagfilter:Z?.tagfilter!==!1};if(!X.inline)hZ($,X.refs||{},G);return a6($,X,G)}function E5($,Z){let J=a$($,Z);return pZ(J,Z)}function pZ($,Z){let J=Array.isArray($)?$:[$];var X=Z?.overrides||{},G={},Y=[],V=!1;for(var U=0;U<J.length;U++){var K=J[U];if(K.type===H.refCollection&&!V)G=K.refs||{},V=!0,Y.push(K);else if(K.type!==H.footnote&&K.type!==H.ref&&(K.type!==H.frontmatter||Z?.preserveFrontmatter!==!1))Y.push(K)}function z(Q){if(Q.type===H.ref||Q.type===H.footnote||Q.type===H.frontmatter&&Z?.preserveFrontmatter===!1)return"";return r6(Q,_)}function F(Q,D={}){if(!Q||typeof Q!=="object")return"";if(Z?.renderRule)return Z.renderRule(()=>z(Q),Q,v,D);return z(Q)}function v(Q){return Q.map((D)=>F(D,{})).join("")}let _={options:Z||{},references:new Map,referenceIndex:1,overrides:X,renderChild:F},j=Y.filter((Q)=>Q.type!==H.refCollection),O=Y.map((Q,D)=>{let q=Q.type===H.refCollection?void 0:j.indexOf(Q);return F(Q,{key:q,refs:G})}).join(`

`);if(_.options.useReferenceLinks&&_.references.size>0){let Q=Array.from(_.references.entries()).map(([D,{url:q,title:W}])=>W?`[${D}]: ${q} "${W}"`:`[${D}]: ${q}`).join(`
`);return O+`

`+Q}return O}var x5=pZ;function r6($,Z){switch($.type){case H.text:return s6($);case H.paragraph:return o6($,Z);case H.heading:return n6($,Z);case H.breakThematic:return t6($);case H.breakLine:return e6($);case H.codeBlock:return $5($);case H.codeInline:return uZ($);case H.textFormatted:return Z5($,Z);case H.link:return J5($,Z);case H.image:return X5($,Z);case H.orderedList:return G5($,Z);case H.unorderedList:return Y5($,Z);case H.blockQuote:return V5($,Z);case H.table:return K5($,Z);case H.htmlBlock:return U5($,Z);case H.htmlSelfClosing:return z5($,Z);case H.htmlComment:return Q5($);case H.footnote:return _5($);case H.footnoteReference:return q5($);case H.frontmatter:return j5($);case H.gfmTask:return D5($);case H.ref:return H5($);case H.refCollection:return O5($);default:return""}}function s6($){return $.text}function o6($,Z){return $.children.map((J)=>Z.renderChild(J,{})).join("")}function n6($,Z){let J=$.children.map((X)=>Z.renderChild(X,{})).join("");if(Z.options.useSetextHeaders&&($.level===1||$.level===2))return`${J}
${($.level===1?"=":"-").repeat(J.length)}`;return`${"#".repeat($.level)}${Z.options.enforceAtxHeadings!==!1?" ":""}${J}`}function t6($){return"---"}function e6($){return`  
`}function $5($){return`${$.lang?`\`\`\`${$.lang}
`:"```\n"}${$.text}
\`\`\``}function uZ($){return $.text.indexOf("`")!==-1?`\`\`${$.text}\`\``:`\`${$.text}\``}function Z5($,Z){let J=$.children.map((X)=>Z.renderChild(X,{})).join("");switch($.tag){case"em":case"i":return`*${J}*`;case"strong":case"b":return`**${J}**`;case"del":case"s":return`~~${J}~~`;case"code":return uZ({type:H.codeInline,text:J});default:return J}}function J5($,Z){let J=$.children.map((Y)=>Z.renderChild(Y,{})).join(""),X=$.target||"",G=$.title;if(Z.options.useReferenceLinks){let Y=lZ(X,Z);if(!Z.references.has(Y))Z.references.set(Y,{url:X,title:G});return`[${J}][${Y}]`}return G?`[${J}](${X} "${G}")`:`[${J}](${X})`}function X5($,Z){let J=$.alt||"",X=$.target,G=$.title;if(Z.options.useReferenceLinks){let Y=lZ(X,Z);if(!Z.references.has(Y))Z.references.set(Y,{url:X,title:G});return`![${J}][${Y}]`}return G?`![${J}](${X} "${G}")`:`![${J}](${X})`}function G5($,Z){let J=$.start||1;return $.items.map((X,G)=>{let Y=X.map((V)=>Z.renderChild(V,{})).join("");return`${J+G}. ${Y.replace(/\n/g,`
    `)}`}).join(`
`)}function Y5($,Z){return $.items.map((J)=>{return`- ${J.map((G)=>Z.renderChild(G,{})).join("").replace(/\n/g,`
  `)}`}).join(`
`)}function V5($,Z){return $.children.map((J)=>Z.renderChild(J,{})).join(`

`).split(`
`).map((J)=>J.trim()?`> ${J}`:">").join(`
`)}function K5($,Z){let J=$.header.map((Y)=>Y.map((V)=>Z.renderChild(V,{})).join("")).join(" | "),X=$.align.length>0?$.align.map((Y)=>{if(Y==="left")return":---";if(Y==="right")return"---:";if(Y==="center")return":---:";return"---"}).join("|"):Array($.header.length).fill("---").join("|"),G=$.cells.map((Y)=>Y.map((V)=>V.map((U)=>Z.renderChild(U,{})).join("")).join(" | ")).join(`
`);return`${J}
${X}
${G}`}function U5($,Z){let J=$.tag||"div",X=r9(J,Z.overrides),G=s9(J,Z.overrides),Y={...$.attrs||{},...G},V=dZ(Y),U=k1(X);if($.verbatim&&($.rawText||$.text)){let F=$.rawText||$.text;return`<${X}${V}>${F}`}if($.text)return`<${X}${V}>${$.text}`;let K=$.children?`
${$.children.map((F)=>Z.renderChild(F,{})).join(`
`)}
`:"",z=U?"":`</${X}>`;return`<${X}${V}>${K}${z}`}function z5($,Z){let J=$.tag||"div",X=r9(J,Z.overrides),G=s9(J,Z.overrides),Y={...$.attrs||{},...G},V=dZ(Y);return`<${X}${V} />`}function Q5($){return`<!--${$.text}-->`}function _5($){return""}function q5($){return`[^${$.text}]`}function j5($){return`---
${$.text}
---`}function D5($){return $.completed?"[x]":"[ ]"}function H5($){return""}function O5($){return Object.entries($.refs).map(([Z,{target:J,title:X}])=>X?`[${Z}]: ${J} "${X}"`:`[${Z}]: ${J}`).join(`
`)}function lZ($,Z){return`ref${Z.referenceIndex++}`}function dZ($){return Object.entries($||{}).map(([Z,J])=>typeof J==="boolean"?J?` ${Z}`:"":` ${Z}="${String(J).replace(/"/g,"&quot;")}"`).join("")}export{a$ as parser,x5 as markdown,E5 as compiler,pZ as astToMarkdown,H as RuleType};

//# debugId=9193C0CF491B9CF064756E2164756E21
//# sourceMappingURL=markdown.js.map
